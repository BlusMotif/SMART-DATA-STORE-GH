{"version":3,"file":"index.BOEvZzcQ.js","sources":["../../../client/src/lib/supabaseClient.ts","../../../client/src/lib/queryClient.ts","../../../client/src/hooks/use-toast.ts","../../../client/src/lib/utils.ts","../../../client/src/components/ui/toast.tsx","../../../client/src/components/ui/toaster.tsx","../../../client/src/components/ui/tooltip.tsx","../../../client/src/components/theme-provider.tsx","../../../client/assets/logo_1765774201026.png","../../../client/src/components/ui/button.tsx","../../../client/src/components/pwa-install-prompt.tsx","../../../client/src/hooks/use-auth.ts","../../../client/src/components/ui/loading-spinner.tsx","../../../client/src/components/ProtectedRoute.tsx","../../../client/src/components/ui/alert.tsx","../../../client/src/components/ui/card.tsx","../../../client/src/components/error-boundary.tsx","../../../client/src/components/connection-status.tsx","../../../client/src/hooks/use-session-timeout.ts","../../../client/src/components/BreakModeGuard.tsx","../../../client/src/components/ui/badge.tsx","../../../client/src/components/announcement-popup.tsx","../../../client/src/components/theme-toggle.tsx","../../../client/src/components/ui/dropdown-menu.tsx","../../../client/src/components/ui/avatar.tsx","../../../client/src/components/ui/sheet.tsx","../../../client/src/lib/constants.ts","../../../client/assets/darkmode-icon.png","../../../client/src/lib/store-context.ts","../../../client/src/components/ui/dialog.tsx","../../../client/src/components/ui/tabs.tsx","../../../client/src/components/watch-how-to-purchase.tsx","../../../client/src/components/layout/header.tsx","../../../client/src/components/layout/footer.tsx","../../../client/src/components/ui/hero.tsx","../../../client/src/components/ui/stats.tsx","../../../client/src/components/ui/features.tsx","../../../client/src/components/ui/cta.tsx","../../../client/src/lib/api.ts","../../../client/assets/mtn_1765780772203.jpg","../../../client/assets/telecel_1765780772206.jpg","../../../client/assets/at_1765780772206.jpg","../../../client/assets/result_1765780772205.jpg","../../../client/assets/banner1_1765774201032.jpeg","../../../client/assets/banner2_1765774201033.jpeg","../../../client/assets/banner3_1765774201030.jpeg","../../../client/src/components/ui/input.tsx","../../../client/src/components/order-tracker.tsx","../../../client/src/pages/home.tsx","../../../client/src/components/ui/label.tsx","../../../client/src/components/ui/form.tsx","../../../client/src/pages/login.tsx","../../../client/src/pages/register.tsx","../../../client/src/components/ui/separator.tsx","../../../client/src/components/products/network-badge.tsx","../../../client/src/components/ui/radio-group.tsx","../../../client/src/components/ui/select.tsx","../../../client/src/lib/network-validator.ts","../../../client/src/pages/checkout.tsx","../../../client/src/pages/checkout-success.tsx","../../../client/src/pages/WalletTopupSuccessView.tsx","../../../client/src/pages/WalletTopupSuccessContainer.tsx","../../../client/src/pages/wallet-topup-success.tsx","../../../client/src/components/ui/textarea.tsx","../../../client/src/components/ui/checkbox.tsx","../../../client/src/pages/agent/register.tsx","../../../client/src/pages/agent/activation-complete.tsx","../../../client/src/pages/agent/upgrade.tsx","../../../client/src/components/ui/scroll-area.tsx","../../../client/src/components/api-integrations-modal.tsx","../../../client/src/components/layout/agent-sidebar-v2.tsx","../../../client/src/components/ui/stat-card.tsx","../../../client/src/pages/agent/dashboard.tsx","../../../client/src/pages/dealer/dashboard.tsx","../../../client/src/pages/super-dealer/dashboard.tsx","../../../client/src/pages/master/dashboard.tsx","../../../client/src/components/ui/table.tsx","../../../client/src/components/ui/status-badge.tsx","../../../client/src/pages/agent/transactions.tsx","../../../client/src/pages/agent/withdrawals.tsx","../../../client/src/pages/agent/storefront.tsx","../../../client/src/pages/agent/settings.tsx","../../../client/src/components/user/support-chat.tsx","../../../client/src/pages/agent/support.tsx","../../../client/src/pages/agent/bundles.tsx","../../../client/src/components/user/wallet-topup.tsx","../../../client/src/pages/agent/wallet.tsx","../../../client/src/pages/agent/pricing.tsx","../../../client/src/pages/dealer/pricing.tsx","../../../client/src/pages/super-dealer/pricing.tsx","../../../client/src/pages/master/pricing.tsx","../../../client/src/components/layout/admin-sidebar.tsx","../../../client/src/components/layout/user-sidebar.tsx","../../../client/src/components/ui/switch.tsx","../../../client/src/components/ui/alert-dialog.tsx","../../../client/src/pages/api-integrations.tsx","../../../client/src/pages/admin/dashboard.tsx","../../../client/src/pages/admin/data-bundles.tsx","../../../client/src/pages/admin/role-base-prices.tsx","../../../client/src/pages/admin/result-checkers.tsx","../../../client/src/pages/admin/transactions.tsx","../../../client/src/pages/admin/users.tsx","../../../client/src/pages/admin/agents.tsx","../../../client/src/pages/admin/withdrawals.tsx","../../../client/src/pages/admin/chat-support.tsx","../../../client/src/pages/admin/settings.tsx","../../../client/src/pages/admin/rankings.tsx","../../../client/src/pages/admin/break-settings.tsx","../../../client/src/pages/admin/external-api-providers.tsx","../../../client/src/pages/admin/announcements.tsx","../../../client/src/pages/admin/guides.tsx","../../../client/src/pages/public-rankings.tsx","../../../client/src/pages/agent/network-purchase.tsx","../../../client/src/pages/products/network.tsx","../../../client/src/components/products/unified-result-checker-flow.tsx","../../../client/src/pages/products/result-checkers.tsx","../../../client/src/pages/data-bundles.tsx","../../../client/src/pages/user/dashboard.tsx","../../../client/src/pages/user/wallet.tsx","../../../client/src/pages/user/bundles.tsx","../../../client/src/pages/user/history.tsx","../../../client/src/pages/user/support.tsx","../../../client/src/pages/user/vouchers.tsx","../../../client/src/pages/user/settings.tsx","../../../client/src/pages/not-found.tsx","../../../client/src/pages/storefront.tsx","../../../client/src/App.tsx","../../../client/src/main.tsx"],"sourcesContent":["import { createClient, AuthChangeEvent, Session } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\r\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('Supabase environment variables are not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in your .env file.');\r\n}\r\n\r\n// Singleton pattern to prevent multiple client instances\r\nlet supabaseInstance: any = null;\r\n\r\nif (!supabaseInstance) {\r\n  supabaseInstance = createClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      detectSessionInUrl: true,\r\n      // Persist sessions across browser restarts so API requests keep the token\r\n      // Use localStorage for better persistence\r\n      storage: window.localStorage,\r\n    },\r\n  });\r\n\r\n  // Clear potentially invalid sessions on initialization\r\n  const storageKey = `sb-${supabaseUrl.split('//')[1].split('.')[0]}-auth-token`;\r\n  const storedSession = localStorage.getItem(storageKey);\r\n  if (storedSession) {\r\n    try {\r\n      const sessionData = JSON.parse(storedSession);\r\n      // Check if access token exists and hasn't expired\r\n      if (!sessionData.access_token || (sessionData.expires_at && sessionData.expires_at * 1000 < Date.now())) {\r\n        console.warn('Clearing expired session data');\r\n        localStorage.removeItem(storageKey);\r\n      }\r\n    } catch (e) {\r\n      console.warn('Clearing invalid session data');\r\n      localStorage.removeItem(storageKey);\r\n    }\r\n  }\r\n\r\n  // Add global auth state change handler for logging only\r\n  supabaseInstance.auth.onAuthStateChange(async (event: AuthChangeEvent, session: Session | null) => {\r\n    // Only clear storage if explicitly signed out, don't interfere with token refresh\r\n    if (event === 'SIGNED_OUT' && !session) {\r\n      console.log('User signed out, clearing local storage');\r\n      localStorage.removeItem(storageKey);\r\n    }\r\n  });\r\n}\r\n\r\nexport const supabase = supabaseInstance;","import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\r\nimport { supabase } from \"./supabaseClient\";\r\n\r\n/* --------------------------------------------------\r\n   Helpers\r\n-------------------------------------------------- */\r\n\r\nlet cachedToken: string | null = null;\r\nlet tokenExpiry: number | null = null;\r\n\r\nasync function parseError(res: Response) {\r\n  try {\r\n    const text = await res.text();\r\n    if (!text) return res.statusText;\r\n\r\n    try {\r\n      const json = JSON.parse(text);\r\n      return json.error || json.message || text;\r\n    } catch {\r\n      return text;\r\n    }\r\n  } catch {\r\n    return res.statusText;\r\n  }\r\n}\r\n\r\nasync function getAuthHeaders(): Promise<Record<string, string>> {\r\n  const now = Date.now();\r\n\r\n  // Use cached token if it's still valid (expires in 5 minutes)\r\n  if (cachedToken && tokenExpiry && now < tokenExpiry) {\r\n    return cachedToken ? { Authorization: `Bearer ${cachedToken}` } : {};\r\n  }\r\n\r\n  try {\r\n    const { data, error } = await supabase.auth.getSession();\r\n    if (error) {\r\n      console.warn('Session error in getAuthHeaders:', error);\r\n      // Clear cache on error\r\n      cachedToken = null;\r\n      tokenExpiry = null;\r\n      return {};\r\n    }\r\n    const token = data.session?.access_token;\r\n\r\n    // Cache the token for 5 minutes\r\n    cachedToken = token || null;\r\n    tokenExpiry = token ? now + (5 * 60 * 1000) : null;\r\n\r\n    return token\r\n      ? { Authorization: `Bearer ${token}` }\r\n      : {};\r\n  } catch (err) {\r\n    console.error('Failed to get session in getAuthHeaders:', err);\r\n    // Clear cache on error\r\n    cachedToken = null;\r\n    tokenExpiry = null;\r\n    return {};\r\n  }\r\n}\r\n\r\n// Export function to clear cached token (useful during logout)\r\nexport function clearAuthCache() {\r\n  cachedToken = null;\r\n  tokenExpiry = null;\r\n}\r\n\r\n/* --------------------------------------------------\r\n   Fetch wrapper (mutations & manual requests)\r\n-------------------------------------------------- */\r\n\r\nexport async function apiRequest<T = unknown>(\r\n  method: string,\r\n  url: string,\r\n  body?: unknown\r\n): Promise<T> {\r\n  const authHeaders = await getAuthHeaders();\r\n\r\n  // In development, use the full backend URL\r\n  const baseUrl = import.meta.env.DEV ? 'http://localhost:10000' : '';\r\n  const fullUrl = url.startsWith('http') ? url : `${baseUrl}${url}`;\r\n\r\n  const res = await fetch(fullUrl, {\r\n    method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...authHeaders,\r\n    },\r\n    body: body ? JSON.stringify(body) : undefined,\r\n    credentials: \"include\",\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const message = await parseError(res);\r\n    throw new Error(message);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\n/* --------------------------------------------------\r\n   React Query default fetcher\r\n-------------------------------------------------- */\r\n\r\ntype UnauthorizedBehavior = \"throw\" | \"returnNull\";\r\n\r\nexport const getQueryFn =\r\n  <T>({ on401 }: { on401: UnauthorizedBehavior }): QueryFunction<T> =>\r\n  async ({ queryKey }) => {\r\n    const authHeaders = await getAuthHeaders();\r\n\r\n    // In development, use the full backend URL\r\n    const baseUrl = import.meta.env.DEV ? 'http://localhost:10000' : '';\r\n    const url = queryKey[0] as string;\r\n    const fullUrl = url.startsWith('http') ? url : `${baseUrl}${url}`;\r\n\r\n    const res = await fetch(fullUrl, {\r\n      headers: {\r\n        ...authHeaders,\r\n      },\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (res.status === 401 && on401 === \"returnNull\") {\r\n      return null as T;\r\n    }\r\n\r\n    if (!res.ok) {\r\n      const message = await parseError(res);\r\n      throw new Error(message);\r\n    }\r\n\r\n    return res.json();\r\n  };\r\n\r\n/* --------------------------------------------------\r\n   Query Client\r\n-------------------------------------------------- */\r\n\r\nexport const queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      queryFn: getQueryFn({ on401: \"throw\" }),\r\n\r\n      // ✅ sane defaults (NO request storms)\r\n      staleTime: 60 * 1000,          // 1 minute\r\n      gcTime: 5 * 60 * 1000,         // 5 minutes\r\n      retry: false,\r\n      refetchOnWindowFocus: false,\r\n      refetchOnReconnect: false,\r\n    },\r\n    mutations: {\r\n      retry: false,\r\n    },\r\n  },\r\n});\r\n","import * as React from \"react\"\r\n\r\nimport type {\r\n  ToastActionElement,\r\n  ToastProps,\r\n} from \"@/components/ui/toast\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n","import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n","import * as React from \"react\"\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ToastProvider = ToastPrimitives.Provider\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-white text-black dark:bg-black dark:text-white\",\r\n        destructive:\r\n          \"destructive group border-destructive bg-red-500 text-white dark:bg-red-700 dark:text-white\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nToast.displayName = ToastPrimitives.Root.displayName\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastAction.displayName = ToastPrimitives.Action.displayName\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <X className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n))\r\nToastClose.displayName = ToastPrimitives.Close.displayName\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastTitle.displayName = ToastPrimitives.Title.displayName\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastDescription.displayName = ToastPrimitives.Description.displayName\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n}\r\n","import { useToast } from \"@/hooks/use-toast\"\r\nimport {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n} from \"@/components/ui/toast\"\r\n\r\nexport function Toaster() {\r\n  const { toasts } = useToast()\r\n\r\n  return (\r\n    <ToastProvider>\r\n      {toasts.map(function ({ id, title, description, action, ...props }) {\r\n        return (\r\n          <Toast key={id} {...props}>\r\n            <div className=\"grid gap-1\">\r\n              {title && <ToastTitle>{title}</ToastTitle>}\r\n              {description && (\r\n                <ToastDescription>{description}</ToastDescription>\r\n              )}\r\n            </div>\r\n            {action}\r\n            <ToastClose />\r\n          </Toast>\r\n        )\r\n      })}\r\n      <ToastViewport />\r\n    </ToastProvider>\r\n  )\r\n}\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n","import React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\ntype Theme = \"dark\" | \"light\";\r\n\r\ntype ThemeProviderProps = {\r\n  children: React.ReactNode;\r\n  defaultTheme?: Theme;\r\n  storageKey?: string;\r\n};\r\n\r\ntype ThemeProviderState = {\r\n  theme: Theme;\r\n  setTheme: (theme: Theme) => void;\r\n};\r\n\r\nconst initialState: ThemeProviderState = {\r\n  theme: \"light\",\r\n  setTheme: () => null,\r\n};\r\n\r\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  defaultTheme = \"light\",\r\n  storageKey = \"clectech-theme\",\r\n  ...props\r\n}: ThemeProviderProps) {\r\n  const [theme, setTheme] = useState<Theme>(() => {\r\n    try {\r\n      if (typeof window !== \"undefined\" && window.localStorage) {\r\n        const storedTheme = localStorage.getItem(storageKey) as Theme;\r\n        // Convert legacy \"system\" theme to \"light\"\r\n        if (storedTheme === \"system\") {\r\n          localStorage.setItem(storageKey, \"light\");\r\n          return \"light\";\r\n        }\r\n        return storedTheme || defaultTheme;\r\n      }\r\n      return defaultTheme;\r\n    } catch (error) {\r\n      console.error(\"Error accessing localStorage:\", error);\r\n      return defaultTheme;\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const root = window.document.documentElement;\r\n\r\n    root.classList.remove(\"light\", \"dark\");\r\n    root.classList.add(theme);\r\n    \r\n    console.log(\"Applied theme:\", theme, \"Classes on root:\", root.classList.toString());\r\n  }, [theme]);\r\n\r\n  const value = {\r\n    theme,\r\n    setTheme: (theme: Theme) => {\r\n      try {\r\n        console.log(\"Setting theme to:\", theme);\r\n        if (typeof window !== \"undefined\" && window.localStorage) {\r\n          localStorage.setItem(storageKey, theme);\r\n          console.log(\"Saved theme to localStorage:\", theme);\r\n        }\r\n        setTheme(theme);\r\n      } catch (error) {\r\n        console.error(\"Error setting theme:\", error);\r\n        setTheme(theme);\r\n      }\r\n    },\r\n  };\r\n\r\n  return (\r\n    <ThemeProviderContext.Provider {...props} value={value}>\r\n      {children}\r\n    </ThemeProviderContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeProviderContext);\r\n\r\n  if (context === undefined)\r\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\r\n\r\n  return context;\r\n};\r\n","export default \"__VITE_ASSET__DihPy7m1__\"","import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-yellow-500 dark:text-white text-black shadow-sm hover:shadow-md hover:bg-yellow-600 active:scale-[0.98]\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:shadow-md hover:bg-destructive/90 active:scale-[0.98]\",\r\n        outline:\r\n          \"border border-yellow-500 bg-background text-yellow-700 shadow-sm hover:bg-yellow-50 hover:text-yellow-800 active:scale-[0.98]\",\r\n        secondary:\r\n          \"bg-yellow-400 dark:text-white text-black shadow-sm hover:shadow-md hover:bg-yellow-500 active:scale-[0.98]\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground active:scale-[0.98]\",\r\n        link:\r\n          \"text-primary underline-offset-4 hover:underline active:scale-[0.98]\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3 text-sm\",\r\n        lg: \"h-12 rounded-lg px-8 text-base\",\r\n        xl: \"h-14 rounded-lg px-10 text-lg\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  },\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","import { useState, useEffect } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface BeforeInstallPromptEvent extends Event {\r\n  prompt: () => Promise<void>;\r\n  userChoice: Promise<{ outcome: \"accepted\" | \"dismissed\" }>;\r\n}\r\n\r\nexport function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\r\n  const [showInstallButton, setShowInstallButton] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n  const [dismissed, setDismissed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkInstalled = () => {\r\n      if (window.matchMedia(\"(display-mode: standalone)\").matches) {\r\n        setIsInstalled(true);\r\n        return true;\r\n      }\r\n      if ((navigator as unknown as { standalone?: boolean }).standalone === true) {\r\n        setIsInstalled(true);\r\n        return true;\r\n      }\r\n      return false;\r\n    };\r\n\r\n    if (checkInstalled()) return;\r\n\r\n    const dismissed = localStorage.getItem(\"pwa-install-dismissed\");\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // Show again after 1 hour for testing (was 7 days)\r\n      if (Date.now() - dismissedTime < 1 * 60 * 60 * 1000) {\r\n        setDismissed(true);\r\n        return;\r\n      }\r\n    }\r\n\r\n    const handler = (e: Event) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\r\n      setShowInstallButton(true);\r\n    };\r\n\r\n    window.addEventListener(\"beforeinstallprompt\", handler);\r\n\r\n    window.addEventListener(\"appinstalled\", () => {\r\n      setIsInstalled(true);\r\n      setShowInstallButton(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    // For development/testing: show install button after 3 seconds if not installed\r\n    // and no beforeinstallprompt event has fired\r\n    const devTimer = setTimeout(() => {\r\n      if (!isInstalled && !dismissed && !showInstallButton) {\r\n        console.log(\"PWA: Showing install prompt for development/testing\");\r\n        setShowInstallButton(true);\r\n      }\r\n    }, 3000);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"beforeinstallprompt\", handler);\r\n      clearTimeout(devTimer);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstallClick = async () => {\r\n    if (deferredPrompt) {\r\n      // Use the native install prompt\r\n      deferredPrompt.prompt();\r\n      const { outcome } = await deferredPrompt.userChoice;\r\n\r\n      if (outcome === \"accepted\") {\r\n        setIsInstalled(true);\r\n      }\r\n\r\n      setDeferredPrompt(null);\r\n      setShowInstallButton(false);\r\n    } else {\r\n      // Fallback for development/testing - try to trigger manual install\r\n      console.log(\"PWA: No deferred prompt available, attempting manual install\");\r\n      // On some browsers, we can try to show instructions\r\n      alert(\"To install this app:\\n\\n1. Click the menu button (⋮) in your browser\\n2. Select 'Add to Home screen' or 'Install app'\\n3. Follow the prompts to install\");\r\n      setShowInstallButton(false);\r\n      setDismissed(true);\r\n      localStorage.setItem(\"pwa-install-dismissed\", Date.now().toString());\r\n    }\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setDismissed(true);\r\n    setShowInstallButton(false);\r\n    localStorage.setItem(\"pwa-install-dismissed\", Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || dismissed || !showInstallButton) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed top-0 left-0 right-0 bg-white border-b shadow-md p-3 z-[60]\"\r\n      data-testid=\"pwa-install-prompt\"\r\n    >\r\n      <div className=\"container mx-auto max-w-7xl flex items-center gap-3\">\r\n        <div className=\"flex-shrink-0 w-10 h-10 rounded-lg overflow-hidden\">\r\n          <img \r\n            src={logoLight} \r\n            alt=\"App Icon\" \r\n            className=\"w-full h-full object-contain\"\r\n          />\r\n        </div>\r\n        <div className=\"flex-1 min-w-0\">\r\n          <h3 className=\"font-semibold text-sm\" data-testid=\"text-install-title\">Install App</h3>\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            Install for quick access and offline use.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n          <Button \r\n            size=\"sm\" \r\n            onClick={handleInstallClick}\r\n            data-testid=\"button-install-app\"\r\n          >\r\n            Install\r\n          </Button>\r\n          <Button\r\n            size=\"icon\"\r\n            variant=\"ghost\"\r\n            onClick={handleDismiss}\r\n            data-testid=\"button-close-install\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState, useRef } from \"react\";\r\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport type { User } from \"@shared/schema\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { clearAuthCache } from \"@/lib/queryClient\";\r\n\r\nexport function useAuth() {\r\n  const queryClient = useQueryClient();\r\n\r\n  const [session, setSession] = useState<any>(null);\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n\r\n  const [loginError, setLoginError] = useState<string | null>(null);\r\n  const [registerError, setRegisterError] = useState<string | null>(null);\r\n  const [isLoginLoading, setIsLoginLoading] = useState(false);\r\n  const [isRegisterLoading, setIsRegisterLoading] = useState(false);\r\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\r\n  \r\n  // Ref to prevent duplicate logout calls\r\n  const logoutInProgressRef = useRef(false);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * AUTH BOOTSTRAP (single source of truth)\r\n   * ------------------------------------------------------\r\n   */\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    // Load initial session once\r\n    supabase.auth.getSession().then(({ data }) => {\r\n      if (mounted) {\r\n        setSession(data.session);\r\n        setAuthLoading(false);\r\n      }\r\n    });\r\n\r\n    // Listen for real auth transitions only\r\n    const { data: { subscription } } =\r\n      supabase.auth.onAuthStateChange((event, session) => {\r\n        if (event === \"SIGNED_IN\" || event === \"TOKEN_REFRESHED\") {\r\n          setSession(session);\r\n        }\r\n\r\n        if (event === \"SIGNED_OUT\") {\r\n          setSession(null);\r\n          queryClient.setQueryData([\"/api/auth/me\"], { user: null });\r\n          queryClient.clear();\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      mounted = false;\r\n      subscription.unsubscribe();\r\n    };\r\n  }, [queryClient]);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * EXPIRED SESSION DETECTION\r\n   * Detect and handle expired sessions to prevent stuck state\r\n   * ------------------------------------------------------\r\n   */\r\n  useEffect(() => {\r\n    // If we have no session but authLoading is complete, ensure query is reset\r\n    if (!authLoading && !session) {\r\n      queryClient.setQueryData([\"/api/auth/me\"], { user: null });\r\n    }\r\n  }, [session, authLoading, queryClient]);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * CURRENT USER\r\n   * ------------------------------------------------------\r\n   */\r\n  const { data, isLoading: queryLoading } = useQuery<{\r\n    user: User | null;\r\n    agent?: any;\r\n  }>({\r\n    queryKey: [\"/api/auth/me\"],\r\n    enabled: !!session?.access_token,\r\n    retry: false,\r\n    refetchOnWindowFocus: false,\r\n    staleTime: 5 * 60 * 1000,\r\n    queryFn: async () => {\r\n      const res = await fetch(\"/api/auth/me\", {\r\n        headers: {\r\n          Authorization: `Bearer ${session.access_token}`,\r\n        },\r\n      });\r\n\r\n      if (!res.ok) {\r\n        return { user: null };\r\n      }\r\n\r\n      return res.json();\r\n    },\r\n  });\r\n\r\n  const user = data?.user ?? null;\r\n  const agent = data?.agent;\r\n  const isAuthenticated = !!user;\r\n  \r\n  // Fix: When session is null, we're not loading\r\n  // This prevents getting stuck in loading state when session expires\r\n  const isLoading = authLoading || (!!session?.access_token && queryLoading);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * ACTIONS\r\n   * ------------------------------------------------------\r\n   */\r\n  const login = async ({ email, password }: { email: string; password: string }) => {\r\n    setIsLoginLoading(true);\r\n    setLoginError(null);\r\n\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n      email: email.trim(),\r\n      password,\r\n    });\r\n\r\n    if (error) {\r\n      setLoginError(error.message);\r\n      setIsLoginLoading(false);\r\n      return { error: error.message };\r\n    }\r\n\r\n    // Invalidate user query to immediately fetch user data and trigger navigation\r\n    queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n\r\n    setIsLoginLoading(false);\r\n    return { success: true };\r\n  };\r\n\r\n  const register = async ({\r\n    email,\r\n    password,\r\n    name,\r\n  }: {\r\n    email: string;\r\n    password: string;\r\n    name: string;\r\n  }) => {\r\n    setIsRegisterLoading(true);\r\n    setRegisterError(null);\r\n\r\n    const { error } = await supabase.auth.signUp({\r\n      email: email.trim(),\r\n      password,\r\n      options: {\r\n        data: { name: name.trim() },\r\n      },\r\n    });\r\n\r\n    if (error) {\r\n      setRegisterError(error.message);\r\n      setIsRegisterLoading(false);\r\n      return { error: error.message };\r\n    }\r\n\r\n    // Invalidate user query to immediately fetch user data and trigger navigation\r\n    queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n\r\n    setIsRegisterLoading(false);\r\n    return { success: true };\r\n  };\r\n\r\n  const logout = async () => {\r\n    // Prevent duplicate logout calls\r\n    if (logoutInProgressRef.current) {\r\n      console.log('Logout already in progress, skipping duplicate call');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      logoutInProgressRef.current = true;\r\n      setIsLoggingOut(true);\r\n      \r\n      // Watchdog timer: Force redirect after 3 seconds if logout hangs\r\n      const watchdogTimer = setTimeout(() => {\r\n        console.warn('Logout taking too long, forcing redirect...');\r\n        window.location.href = \"/\";\r\n      }, 3000);\r\n      \r\n      // Clear all queries first\r\n      queryClient.clear();\r\n      \r\n      // Clear cached auth tokens\r\n      clearAuthCache();\r\n      \r\n      // Sign out from Supabase\r\n      await supabase.auth.signOut();\r\n      \r\n      // Clear session state\r\n      setSession(null);\r\n      \r\n      // Cancel watchdog since logout succeeded\r\n      clearTimeout(watchdogTimer);\r\n      \r\n      // Force redirect to home page\r\n      window.location.href = \"/\";\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      // Even if logout fails, clear local state and redirect\r\n      queryClient.clear();\r\n      setSession(null);\r\n      window.location.href = \"/\";\r\n    } finally {\r\n      setIsLoggingOut(false);\r\n      logoutInProgressRef.current = false;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * PUBLIC API\r\n   * ------------------------------------------------------\r\n   */\r\n  return {\r\n    user,\r\n    agent,\r\n    isAuthenticated,\r\n    isLoading,\r\n    login,\r\n    register,\r\n    logout,\r\n    loginError,\r\n    registerError,\r\n    isLoginLoading,\r\n    isRegisterLoading,\r\n    isLoggingOut,\r\n  };\r\n}\r\n","import { cn } from \"@/lib/utils\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  className?: string;\r\n  text?: string;\r\n}\r\n\r\nexport function LoadingSpinner({ size = \"md\", className, text }: LoadingSpinnerProps) {\r\n  const sizeClasses = {\r\n    sm: \"h-4 w-4\",\r\n    md: \"h-6 w-6\",\r\n    lg: \"h-8 w-8\",\r\n  };\r\n\r\n  return (\r\n    <div className={cn(\"flex flex-col items-center justify-center gap-2\", className)}>\r\n      <Loader2 className={cn(\"animate-spin text-primary\", sizeClasses[size])} />\r\n      {text && <p className=\"text-sm text-muted-foreground\">{text}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PageLoader({ text = \"Loading...\" }: { text?: string }) {\r\n  return (\r\n    <div className=\"flex h-[50vh] items-center justify-center\">\r\n      <LoadingSpinner size=\"lg\" text={text} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function CardSkeleton() {\r\n  return (\r\n    <div className=\"rounded-lg border bg-white dark:bg-black p-6 animate-pulse\">\r\n      <div className=\"h-4 bg-muted rounded w-1/3 mb-4\" />\r\n      <div className=\"h-8 bg-muted rounded w-2/3 mb-2\" />\r\n      <div className=\"h-3 bg-muted rounded w-1/2\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function TableSkeleton({ rows = 5 }: { rows?: number }) {\r\n  return (\r\n    <div className=\"animate-pulse space-y-3\">\r\n      <div className=\"h-10 bg-muted rounded\" />\r\n      {Array.from({ length: rows }).map((_, i) => (\r\n        <div key={i} className=\"h-14 bg-muted/50 rounded\" />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import { useAuth } from \"@/hooks/use-auth\";\r\nimport { Route, Redirect } from \"wouter\";\r\nimport { LoadingSpinner } from \"@/components/ui/loading-spinner\";\r\n\r\ninterface ProtectedRouteProps {\r\n  path: string;\r\n  component: React.ComponentType<any>;\r\n  requiredRole?: string;\r\n  requiredRoles?: string[];\r\n  fallbackPath?: string;\r\n}\r\n\r\nexport function ProtectedRoute({\r\n  path,\r\n  component: Component,\r\n  requiredRole,\r\n  requiredRoles,\r\n  fallbackPath = \"/login\"\r\n}: ProtectedRouteProps) {\r\n  const { user, isLoading, isAuthenticated } = useAuth();\r\n\r\n  return (\r\n    <Route path={path}>\r\n      {(params) => {\r\n        // Not authenticated - redirect immediately (even if loading)\r\n        // This prevents getting stuck when session expires\r\n        if (!isLoading && !user) {\r\n          return <Redirect to={fallbackPath} />;\r\n        }\r\n        \r\n        // Still loading initial auth check\r\n        if (isLoading) {\r\n          return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n              <LoadingSpinner size=\"lg\" />\r\n            </div>\r\n          );\r\n        }\r\n\r\n        // Check role if required\r\n        if (requiredRole && user.role !== requiredRole) {\r\n          return <Redirect to=\"/\" />;\r\n        }\r\n\r\n        // Check roles if required\r\n        if (requiredRoles && !requiredRoles.includes(user.role)) {\r\n          return <Redirect to=\"/\" />;\r\n        }\r\n\r\n        // Render component\r\n        return <Component {...params} />;\r\n      }}\r\n    </Route>\r\n  );\r\n}","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n","import * as React from \"react\";\r\n\r\nimport { cn } from \"../../lib/utils\";\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border border-border bg-card text-card-foreground shadow-md hover:shadow-lg transition-all duration-200\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-2 p-6 pb-4\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-xl font-semibold leading-tight tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n","import { Component, ErrorInfo, ReactNode } from 'react';\r\nimport { AlertCircle, RefreshCw } from 'lucide-react';\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  errorInfo: ErrorInfo | null;\r\n}\r\n\r\nexport class ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    return {\r\n      hasError: true,\r\n      error,\r\n      errorInfo: null,\r\n    };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n    this.setState({\r\n      error,\r\n      errorInfo,\r\n    });\r\n  }\r\n\r\n  handleReload = () => {\r\n    window.location.reload();\r\n  };\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4\">\r\n          <Card className=\"max-w-2xl w-full\">\r\n            <CardHeader>\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <div className=\"rounded-full bg-red-100 dark:bg-red-900/30 p-3\">\r\n                  <AlertCircle className=\"h-6 w-6 text-red-600 dark:text-red-400\" />\r\n                </div>\r\n                <div>\r\n                  <CardTitle className=\"text-2xl\">Something went wrong</CardTitle>\r\n                  <CardDescription className=\"mt-1\">\r\n                    The application encountered an unexpected error\r\n                  </CardDescription>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <Alert variant=\"destructive\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertTitle>Error Details</AlertTitle>\r\n                <AlertDescription className=\"mt-2\">\r\n                  {this.state.error?.message || 'An unknown error occurred'}\r\n                </AlertDescription>\r\n              </Alert>\r\n\r\n              {import.meta.env.DEV && this.state.errorInfo && (\r\n                <div className=\"bg-gray-100 dark:bg-black p-4 rounded-lg overflow-auto max-h-64\">\r\n                  <p className=\"text-xs font-mono text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\r\n                    {this.state.errorInfo.componentStack}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-3 pt-4\">\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Please try one of the following options:\r\n                </p>\r\n                <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                  <Button onClick={this.handleReload} className=\"flex items-center gap-2 flex-1\">\r\n                    <RefreshCw className=\"h-4 w-4\" />\r\n                    Reload Page\r\n                  </Button>\r\n                  <Button onClick={this.handleReset} variant=\"outline\" className=\"flex-1\">\r\n                    Try Again\r\n                  </Button>\r\n                </div>\r\n                <div className=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n                  <p className=\"text-sm text-blue-800 dark:text-blue-200\">\r\n                    <strong>💡 Tip:</strong> If this error persists, try clearing your browser cache or contact support.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { WifiOff, AlertCircle } from 'lucide-react';\r\n\r\nexport function ConnectionStatus() {\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n  const [showOffline, setShowOffline] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleOnline = () => {\r\n      setIsOnline(true);\r\n      setShowOffline(false);\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      setIsOnline(false);\r\n      setShowOffline(true);\r\n    };\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    // Check connection periodically (less frequent)\r\n    const checkConnection = setInterval(() => {\r\n      if (!navigator.onLine && isOnline) {\r\n        setIsOnline(false);\r\n        setShowOffline(true);\r\n      }\r\n    }, 30000); // Check every 30 seconds instead of 5\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n      clearInterval(checkConnection);\r\n    };\r\n  }, [isOnline]);\r\n\r\n  // Auto-hide after coming back online\r\n  useEffect(() => {\r\n    if (isOnline && showOffline) {\r\n      const timeout = setTimeout(() => {\r\n        setShowOffline(false);\r\n      }, 3000);\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isOnline, showOffline]);\r\n\r\n  if (!showOffline && isOnline) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] max-w-md w-full px-4\">\r\n      {!isOnline ? (\r\n        <Alert variant=\"destructive\" className=\"shadow-lg\">\r\n          <WifiOff className=\"h-4 w-4\" />\r\n          <AlertDescription className=\"ml-2\">\r\n            <strong>No Internet Connection</strong>\r\n            <p className=\"text-xs mt-1\">\r\n              You're offline. Some features may not work properly.\r\n            </p>\r\n          </AlertDescription>\r\n        </Alert>\r\n      ) : (\r\n        <Alert className=\"shadow-lg bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800\">\r\n          <AlertCircle className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\r\n          <AlertDescription className=\"ml-2 text-green-800 dark:text-green-200\">\r\n            <strong>Back Online</strong>\r\n            <p className=\"text-xs mt-1\">Connection restored successfully.</p>\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useCallback } from 'react';\r\nimport { useAuth } from './use-auth';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nconst INACTIVITY_TIMEOUT = 5 * 60 * 1000; // 5 minutes in milliseconds\r\nconst WARNING_TIME = 0; // No warning - silent logout after inactivity\r\n\r\nexport function useSessionTimeout() {\r\n  const { logout, user } = useAuth();\r\n  // Keep hook order stable; do not show prompts\r\n  const { toast } = useToast();\r\n\r\n  const timeoutRef = useRef<number>();\r\n  const warningRef = useRef<number>();\r\n  const lastActivityRef = useRef<number>(Date.now());\r\n  const lastResetRef = useRef<number>(0);\r\n\r\n  const resetTimer = useCallback(() => {\r\n    // Throttle resets to prevent excessive timer updates\r\n    const now = Date.now();\r\n    if (now - lastResetRef.current < 1000) {\r\n      return;\r\n    }\r\n    lastResetRef.current = now;\r\n    lastActivityRef.current = now;\r\n\r\n    // Clear existing timers\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n    }\r\n    if (warningRef.current) {\r\n      clearTimeout(warningRef.current);\r\n    }\r\n\r\n    // Only set timers if user is logged in\r\n    if (!user) return;\r\n\r\n    // No warning prompts; silent logout only\r\n\r\n    // Set logout timer\r\n    timeoutRef.current = window.setTimeout(async () => {\r\n      try {\r\n        console.log('Session timeout: Logging out user due to inactivity');\r\n        // Silent logout after inactivity\r\n        await logout();\r\n      } catch (error) {\r\n        console.error('Session timeout logout error:', error);\r\n        // Force redirect even if logout fails\r\n        window.location.href = '/login';\r\n      }\r\n    }, INACTIVITY_TIMEOUT);\r\n  }, [user, logout, toast]);\r\n\r\n  const handleActivity = useCallback(() => {\r\n    resetTimer();\r\n  }, [resetTimer]);\r\n\r\n  useEffect(() => {\r\n    // Only enable session timeout if user is logged in\r\n    if (!user) {\r\n      // Clear timers if user logs out\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      if (warningRef.current) {\r\n        clearTimeout(warningRef.current);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Start the timer initially\r\n    resetTimer();\r\n\r\n    // Activity event listeners\r\n    const events = [\r\n      'mousedown',\r\n      'mousemove',\r\n      'keypress',\r\n      'scroll',\r\n      'touchstart',\r\n      'touchmove',\r\n      'click'\r\n    ];\r\n\r\n    // Add event listeners\r\n    events.forEach(event => {\r\n      document.addEventListener(event, handleActivity, true);\r\n    });\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      events.forEach(event => {\r\n        document.removeEventListener(event, handleActivity, true);\r\n      });\r\n\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      if (warningRef.current) {\r\n        clearTimeout(warningRef.current);\r\n      }\r\n    };\r\n  }, [user, handleActivity, resetTimer]);\r\n\r\n  // Return current inactivity time for debugging (optional)\r\n  const getTimeUntilLogout = useCallback(() => {\r\n    if (!user) return null;\r\n    const elapsed = Date.now() - lastActivityRef.current;\r\n    return Math.max(0, INACTIVITY_TIMEOUT - elapsed);\r\n  }, [user]);\r\n\r\n  return {\r\n    getTimeUntilLogout,\r\n    resetTimer: handleActivity\r\n  };\r\n}","import React from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Lock, X } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useLocation } from \"wouter\";\r\n\r\ninterface BreakSettings {\r\n  isEnabled: boolean;\r\n  message: string;\r\n}\r\n\r\nexport function BreakModeGuard({ children }: { children: React.ReactNode }) {\r\n  const [location] = useLocation();\r\n  const { user: authData, isLoading: authLoading } = useAuth();\r\n  const { data: breakSettings, isLoading: breakLoading } = useQuery<BreakSettings>({\r\n    queryKey: [\"/api/break-settings\"],\r\n    refetchInterval: 5 * 60 * 1000, // Check every 5 minutes instead of 30 seconds\r\n    staleTime: 4 * 60 * 1000, // Consider data fresh for 4 minutes\r\n  });\r\n\r\n  // Show loading state ONLY on initial load, not on refetches\r\n  if ((authLoading || breakLoading) && !breakSettings && !authData) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Allow admin routes to bypass break mode\r\n  if (location.startsWith(\"/admin\")) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // Allow access to authentication routes even during break mode\r\n  const authRoutes = [\"/login\", \"/register\"];\r\n  const isAuthRoute = authRoutes.includes(location);\r\n\r\n  // Allow admins to bypass break mode\r\n  const isAdmin = authData?.role === \"admin\";\r\n  if (isAdmin || isAuthRoute) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // If break mode is enabled and user is not admin, show the break message\r\n  if (breakSettings?.isEnabled) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\r\n        <div className=\"max-w-md w-full text-center space-y-6\">\r\n          <div className=\"flex justify-center\">\r\n            <div className=\"relative\">\r\n              <div className=\"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center\">\r\n                <Lock className=\"h-10 w-10 text-red-600 dark:text-red-400\" />\r\n              </div>\r\n              <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center\">\r\n                <X className=\"h-3 w-3 text-white\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h1 className=\"text-2xl font-bold text-red-600 dark:text-red-400\">\r\n              Site Closed\r\n            </h1>\r\n            <div className=\"text-muted-foreground whitespace-pre-wrap text-left bg-muted p-4 rounded-lg\">\r\n              {breakSettings.message || \"The site is currently closed. Please check back later.\"}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            We apologize for any inconvenience.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If break mode is not enabled, render the normal app\r\n  return <>{children}</>;\r\n}","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  // Whitespace-nowrap: Badges should never wrap.\r\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\r\n  \" hover-elevate \" ,\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\r\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\r\n\r\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  },\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  );\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { X, Bell, Megaphone, ExternalLink } from \"lucide-react\";\r\nimport { Button } from \"./ui/button.js\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card.js\";\r\nimport { Badge } from \"./ui/badge.js\";\r\nimport { apiRequest } from \"../lib/queryClient.js\";\r\n\r\ninterface Announcement {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  isActive: boolean;\r\n  createdAt: string;\r\n}\r\n\r\n// Function to parse URLs from text and create clickable links\r\nfunction parseMessageWithLinks(text: string) {\r\n  // URL regex pattern\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  \r\n  // Split text by URLs and create elements\r\n  const parts = text.split(urlRegex);\r\n  \r\n  return parts.map((part, index) => {\r\n    if (urlRegex.test(part)) {\r\n      return (\r\n        <a\r\n          key={index}\r\n          href={part}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-blue-600 hover:text-blue-800 underline inline-flex items-center gap-1\"\r\n        >\r\n          {part}\r\n          <ExternalLink className=\"h-3 w-3\" />\r\n        </a>\r\n      );\r\n    }\r\n    return part;\r\n  });\r\n}\r\n\r\nexport function AnnouncementPopup() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [dismissedAnnouncements, setDismissedAnnouncements] = useState<string[]>([]);\r\n\r\n  // Load dismissed announcements from localStorage\r\n  useEffect(() => {\r\n    const dismissed = localStorage.getItem('dismissedAnnouncements');\r\n    if (dismissed) {\r\n      setDismissedAnnouncements(JSON.parse(dismissed));\r\n    }\r\n  }, []);\r\n\r\n  const { data: announcements = [] } = useQuery<Announcement[]>({\r\n    queryKey: ['announcements'],\r\n    queryFn: () => apiRequest('GET', '/api/announcements/active'),\r\n    enabled: true,\r\n    staleTime: 5 * 60 * 1000, // Consider fresh for 5 minutes\r\n    refetchOnWindowFocus: false, // Don't refetch on tab focus\r\n  });\r\n\r\n  // Check if there are any active announcements that haven't been dismissed\r\n  useEffect(() => {\r\n    if (announcements.length > 0) {\r\n      const hasUndismissed = announcements.some((announcement) =>\r\n        !dismissedAnnouncements.includes(announcement.id)\r\n      );\r\n      setIsOpen(hasUndismissed);\r\n    }\r\n  }, [announcements, dismissedAnnouncements]);\r\n\r\n  const handleDismiss = (announcementId: string) => {\r\n    const newDismissed = [...dismissedAnnouncements, announcementId];\r\n    setDismissedAnnouncements(newDismissed);\r\n    localStorage.setItem('dismissedAnnouncements', JSON.stringify(newDismissed));\r\n  };\r\n\r\n  const handleClose = () => {\r\n    // Dismiss all current announcements\r\n    const newDismissed = [...dismissedAnnouncements, ...announcements.map((a) => a.id)];\r\n    setDismissedAnnouncements(newDismissed);\r\n    localStorage.setItem('dismissedAnnouncements', JSON.stringify(newDismissed));\r\n    setIsOpen(false);\r\n  };\r\n\r\n  if (!isOpen || announcements.length === 0) return null;\r\n\r\n  // Show only undismissed announcements\r\n  const undismissedAnnouncements = announcements.filter((announcement) =>\r\n    !dismissedAnnouncements.includes(announcement.id)\r\n  );\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-3 md:p-4 bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"w-full max-w-2xl max-h-[85vh] md:max-h-[80vh] overflow-y-auto\">\r\n        <Card className=\"relative shadow-2xl border-0 bg-white text-black\">\r\n          <CardHeader className=\"pb-3 md:pb-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2 md:gap-3\">\r\n                <div className=\"p-1.5 md:p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full\">\r\n                  <Megaphone className=\"h-4 w-4 md:h-5 md:w-5 text-white\" />\r\n                </div>\r\n                <div>\r\n                  <CardTitle className=\"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\r\n                    Important Announcements\r\n                  </CardTitle>\r\n                  <p className=\"text-sm md:text-base text-gray-600\">\r\n                    Stay updated with the latest news\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={handleClose}\r\n                className=\"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-gray-100 hover:text-gray-800 text-gray-600 flex-shrink-0\"\r\n              >\r\n                <X className=\"h-3 w-3 md:h-4 md:w-4\" />\r\n              </Button>\r\n            </div>\r\n          </CardHeader>\r\n\r\n          <CardContent className=\"space-y-3 md:space-y-4\">\r\n            {undismissedAnnouncements.map((announcement) => (\r\n              <div\r\n                key={announcement.id}\r\n                className=\"relative group p-3 md:p-4 rounded-xl border border-gray-200 bg-gradient-to-r from-white to-blue-50/30 hover:shadow-lg transition-all duration-300\"\r\n              >\r\n                <div className=\"flex items-start gap-2 md:gap-3\">\r\n                  <div className=\"flex-shrink-0 mt-1\">\r\n                    <div className=\"p-1 md:p-1.5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full\">\r\n                      <Bell className=\"h-3 w-3 md:h-3 md:w-3 text-white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between gap-2 mb-1 md:mb-2\">\r\n                      <div className=\"flex items-center gap-2 min-w-0 flex-1\">\r\n                        <h3 className=\"font-semibold text-gray-900 text-sm md:text-base truncate\">\r\n                          {announcement.title}\r\n                        </h3>\r\n                        <Badge variant=\"secondary\" className=\"text-xs md:text-sm bg-blue-100 text-blue-700 border-blue-200 px-1.5 py-0.5 flex-shrink-0\">\r\n                          New\r\n                        </Badge>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleDismiss(announcement.id)}\r\n                        className=\"flex-shrink-0 h-6 w-6 md:h-6 md:w-6 p-0 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity hover:bg-gray-200 text-gray-500 hover:text-gray-800\"\r\n                        title=\"Dismiss this announcement\"\r\n                      >\r\n                        <X className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </div>\r\n                    <div className=\"text-sm md:text-base text-gray-700 leading-relaxed whitespace-pre-wrap\">\r\n                      {parseMessageWithLinks(announcement.message)}\r\n                    </div>\r\n                    <div className=\"mt-2 md:mt-3 text-xs md:text-sm text-gray-500\">\r\n                      {new Date(announcement.createdAt).toLocaleDateString('en-US', {\r\n                        year: 'numeric',\r\n                        month: 'short',\r\n                        day: 'numeric'\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center pt-3 md:pt-4 border-t border-gray-200 gap-3 sm:gap-0\">\r\n              <p className=\"text-xs md:text-sm text-gray-500\">\r\n                {undismissedAnnouncements.length} announcement{undismissedAnnouncements.length !== 1 ? 's' : ''} remaining\r\n              </p>\r\n              <div className=\"flex gap-2 w-full sm:w-auto\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handleClose}\r\n                  className=\"hover:bg-gray-100 text-gray-700 border-gray-300 text-xs md:text-sm h-8 md:h-9 px-3 md:px-4 flex-1 sm:flex-initial\"\r\n                >\r\n                  Dismiss All\r\n                </Button>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  size=\"sm\"\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white border-0 text-xs md:text-sm h-8 md:h-9 px-3 md:px-4 flex-1 sm:flex-initial\"\r\n                >\r\n                  Got it!\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { Moon, Sun } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\n\r\nexport function ThemeToggle() {\r\n  const { theme, setTheme } = useTheme();\r\n\r\n  const handleToggle = () => {\r\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\r\n    console.log(\"Theme toggle clicked. Current theme:\", theme, \"New theme:\", newTheme);\r\n    setTheme(newTheme);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"sm\"\r\n      onClick={handleToggle}\r\n      data-testid=\"button-theme-toggle\"\r\n      className=\"h-8 w-8\"\r\n    >\r\n      {theme === \"light\" ? (\r\n        <Sun className=\"h-4 w-4 transition-all\" />\r\n      ) : (\r\n        <Moon className=\"h-4 w-4 transition-all\" />\r\n      )}\r\n      <span className=\"sr-only\">Toggle theme</span>\r\n    </Button>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(`\r\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\r\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Sheet = SheetPrimitive.Root\r\n\r\nconst SheetTrigger = SheetPrimitive.Trigger\r\n\r\nconst SheetClose = SheetPrimitive.Close\r\n\r\nconst SheetPortal = SheetPrimitive.Portal\r\n\r\nconst SheetOverlay = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-40 bg-black/50 dark:bg-white/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\r\n\r\nconst sheetVariants = cva(\r\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\r\n  {\r\n    variants: {\r\n      side: {\r\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\r\n        bottom:\r\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\r\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\r\n        right:\r\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      side: \"right\",\r\n    },\r\n  }\r\n)\r\n\r\ninterface SheetContentProps\r\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\r\n    VariantProps<typeof sheetVariants> {}\r\n\r\nconst SheetContent = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Content>,\r\n  SheetContentProps\r\n>(({ side = \"right\", className, children, ...props }, ref) => (\r\n  <SheetPortal>\r\n    <SheetOverlay />\r\n    <SheetPrimitive.Content\r\n      ref={ref}\r\n      className={cn(sheetVariants({ side }), className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </SheetPrimitive.Close>\r\n    </SheetPrimitive.Content>\r\n  </SheetPortal>\r\n))\r\nSheetContent.displayName = SheetPrimitive.Content.displayName\r\n\r\nconst SheetHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetHeader.displayName = \"SheetHeader\"\r\n\r\nconst SheetFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetFooter.displayName = \"SheetFooter\"\r\n\r\nconst SheetTitle = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetTitle.displayName = SheetPrimitive.Title.displayName\r\n\r\nconst SheetDescription = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetDescription.displayName = SheetPrimitive.Description.displayName\r\n\r\nexport {\r\n  Sheet,\r\n  SheetPortal,\r\n  SheetOverlay,\r\n  SheetTrigger,\r\n  SheetClose,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetFooter,\r\n  SheetTitle,\r\n  SheetDescription,\r\n}\r\n","// resellershubprogh Constants\r\n\r\nexport const APP_NAME = \"resellershubprogh\";\r\nexport const APP_DESCRIPTION = \"Data Bundles & Result Checkers. RESELLERS HUB PRO GH\";\r\n\r\nexport const ROLE_LABELS = {\r\n  admin: \"Admin\",\r\n  agent: \"Agent\",\r\n  dealer: \"Dealer\",\r\n  super_dealer: \"Super Dealer\",\r\n  master: \"Master\",\r\n  user: \"User\",\r\n  guest: \"Guest\",\r\n} as const;\r\n\r\nexport const ROLE_ROUTES = {\r\n  admin: \"/admin\",\r\n  agent: \"/agent/dashboard\",\r\n  dealer: \"/dealer/dashboard\",\r\n  super_dealer: \"/super-dealer/dashboard\",\r\n  master: \"/master/dashboard\",\r\n  user: \"/user/dashboard\",\r\n} as const;\r\n\r\nexport const STOREFRONT_ROUTES = {\r\n  agent: \"/store/agent\",\r\n  dealer: \"/store/dealer\",\r\n  super_dealer: \"/store/super-dealer\",\r\n  master: \"/store/master\",\r\n} as const;\r\n\r\nexport const NETWORKS = [\r\n  { id: \"mtn\", name: \"MTN\", color: \"#FFCC00\", textColor: \"#000000\" },\r\n  { id: \"telecel\", name: \"TELECEL\", color: \"#E60000\", textColor: \"#FFFFFF\" },\r\n  { id: \"at_bigtime\", name: \"AT Bigtime\", color: \"#FF0000\", textColor: \"#FFFFFF\" },\r\n  { id: \"at_ishare\", name: \"AT ishare\", color: \"#FF0000\", textColor: \"#FFFFFF\" },\r\n] as const;\r\n\r\nexport const RESULT_CHECKER_TYPES = [\r\n  { id: \"bece\", name: \"BECE\", description: \"Basic Education Certificate Examination\" },\r\n  { id: \"wassce\", name: \"WASSCE\", description: \"West African Senior School Certificate Examination\" },\r\n] as const;\r\n\r\nexport const TRANSACTION_STATUSES = {\r\n  pending: { label: \"Pending\", color: \"bg-orange-500 text-white\" },\r\n  completed: { label: \"Completed\", color: \"bg-green-500 text-white\" },\r\n  failed: { label: \"Failed\", color: \"bg-red-500 text-white\" },\r\n  refunded: { label: \"Refunded\", color: \"bg-blue-500 text-white\" },\r\n} as const;\r\n\r\nexport const WITHDRAWAL_STATUSES = {\r\n  pending: { label: \"Pending\", color: \"bg-orange-500 text-white\" },\r\n  approved: { label: \"Approved\", color: \"bg-blue-500 text-white\" },\r\n  rejected: { label: \"Rejected\", color: \"bg-red-500 text-white\" },\r\n  paid: { label: \"Paid\", color: \"bg-green-500 text-white\" },\r\n} as const;\r\n\r\nexport const PAYMENT_METHODS = [\r\n  {\r\n    id: \"bank\",\r\n    name: \"Bank Transfer\",\r\n    description: \"Transfer to bank account\",\r\n    icon: \"Building2\",\r\n    requiresBankDetails: true,\r\n    placeholder: {\r\n      accountNumber: \"Enter account number\",\r\n      accountName: \"Name on account\",\r\n      bankName: \"e.g., Access Bank, GTBank\",\r\n      bankCode: \"e.g., 030100 (Access Bank)\"\r\n    }\r\n  },\r\n  {\r\n    id: \"mtn_momo\",\r\n    name: \"MTN Mobile Money\",\r\n    description: \"Send to MTN MoMo number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter MTN phone number (e.g., 0241234567)\",\r\n      accountName: \"Name on MTN account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"telecel_cash\",\r\n    name: \"Telecel Cash\",\r\n    description: \"Send to Telecel Cash number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter Telecel phone number (e.g., 0271234567)\",\r\n      accountName: \"Name on Telecel account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"airtel_tigo_cash\",\r\n    name: \"AirtelTigo Cash\",\r\n    description: \"Send to AirtelTigo Cash number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter AirtelTigo phone number (e.g., 0261234567)\",\r\n      accountName: \"Name on AirtelTigo account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"at_bigtime\",\r\n    name: \"AT Bigtime\",\r\n    description: \"Send to AT Bigtime number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter AT Bigtime phone number (e.g., 0261234567)\",\r\n      accountName: \"Name on AT Bigtime account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"at_ishare\",\r\n    name: \"AT ishare\",\r\n    description: \"Send to AT ishare number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter AT ishare phone number (e.g., 0261234567)\",\r\n      accountName: \"Name on AT ishare account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n] as const;\r\n\r\nexport const GHANA_BANKS = [\r\n  \"Access Bank Ghana\",\r\n  \"Absa Bank Ghana\",\r\n  \"Agricultural Development Bank\",\r\n  \"Bank of Africa Ghana\",\r\n  \"CalBank\",\r\n  \"Consolidated Bank Ghana\",\r\n  \"Ecobank Ghana\",\r\n  \"FBN Bank Ghana\",\r\n  \"Fidelity Bank Ghana\",\r\n  \"First Atlantic Bank\",\r\n  \"First National Bank Ghana\",\r\n  \"GCB Bank\",\r\n  \"Guaranty Trust Bank Ghana\",\r\n  \"National Investment Bank\",\r\n  \"OmniBSIC Bank Ghana\",\r\n  \"Prudential Bank\",\r\n  \"Republic Bank Ghana\",\r\n  \"Société Générale Ghana\",\r\n  \"Stanbic Bank Ghana\",\r\n  \"Standard Chartered Bank Ghana\",\r\n  \"United Bank for Africa Ghana\",\r\n  \"Zenith Bank Ghana\",\r\n] as const;\r\n\r\nexport const formatCurrency = (amount: number | string): string => {\r\n  const num = typeof amount === \"string\" ? parseFloat(amount) : amount;\r\n  return new Intl.NumberFormat(\"en-GH\", {\r\n    style: \"currency\",\r\n    currency: \"GHS\",\r\n    minimumFractionDigits: 2,\r\n  }).format(num);\r\n};\r\n\r\nexport const formatDate = (date: Date | string): string => {\r\n  const d = typeof date === \"string\" ? new Date(date) : date;\r\n  return new Intl.DateTimeFormat(\"en-GH\", {\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  }).format(d);\r\n};\r\n\r\nexport const formatPhone = (phone: string): string => {\r\n  const cleaned = phone.replace(/\\D/g, \"\");\r\n  if (cleaned.startsWith(\"233\")) {\r\n    return `+${cleaned.slice(0, 3)} ${cleaned.slice(3, 5)} ${cleaned.slice(5, 8)} ${cleaned.slice(8)}`;\r\n  }\r\n  if (cleaned.startsWith(\"0\")) {\r\n    return `${cleaned.slice(0, 3)} ${cleaned.slice(3, 6)} ${cleaned.slice(6)}`;\r\n  }\r\n  return phone;\r\n};\r\n\r\nexport const generateReference = (prefix: string = \"CLK\"): string => {\r\n  const timestamp = Date.now().toString(36).toUpperCase();\r\n  const random = Math.random().toString(36).substring(2, 8).toUpperCase();\r\n  return `${prefix}${timestamp}${random}`;\r\n};\r\n","export default \"__VITE_ASSET__lEDlIlUX__\"","export interface StoreContext {\r\n  type: \"agent\" | \"main\" | string;\r\n  agentId?: string | null;\r\n}\r\n\r\nconst AGENT_STORE_KEY = \"agentStore\";\r\n\r\nexport function getStoreContext(): StoreContext {\r\n  const agent = localStorage.getItem(AGENT_STORE_KEY);\r\n  if (agent) {\r\n    return { type: \"agent\", agentId: agent };\r\n  }\r\n  return { type: \"main\" };\r\n}\r\n\r\nexport function setAgentStore(agentId: string) {\r\n  localStorage.setItem(AGENT_STORE_KEY, agentId);\r\n}\r\n\r\nexport function clearAgentStore() {\r\n  localStorage.removeItem(AGENT_STORE_KEY);\r\n}\r\n\r\nexport function getAgentId(): string | null {\r\n  return localStorage.getItem(AGENT_STORE_KEY);\r\n}\r\n\r\nexport function isAgentContext(): boolean {\r\n  return !!localStorage.getItem(AGENT_STORE_KEY);\r\n}\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n","import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n","import { useMemo, useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { PlayCircle, Video, Info, CheckCircle2 } from \"lucide-react\";\r\nimport { Button, type ButtonProps } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nexport type VideoCategory = \"guest\" | \"customer\" | \"agent\";\r\n\r\nexport type VideoGuide = {\r\n  id: string;\r\n  category: VideoCategory;\r\n  title: string;\r\n  description: string;\r\n  url?: string;\r\n};\r\n\r\nconst DEFAULT_GUIDES: VideoGuide[] = [\r\n  {\r\n    id: \"guest\",\r\n    category: \"guest\",\r\n    title: \"How to Use Resellers Data Hub Pro Gh\",\r\n    description: \"Choose your options and see how to get started with Resellers Data Hub Pro Gh services.\",\r\n    url: \"https://cdn.example.com/videos/how-to-use-dahtahome.mp4\",\r\n  },\r\n  {\r\n    id: \"customer\",\r\n    category: \"customer\",\r\n    title: \"How to Purchase as Customer\",\r\n    description: \"Learn how to buy data bundles, track orders, and manage your purchases.\",\r\n    url: \"https://cdn.example.com/videos/how-to-purchase-as-customer.mp4\",\r\n  },\r\n  {\r\n    id: \"agent\",\r\n    category: \"agent\",\r\n    title: \"How to Become an Agent\",\r\n    description: \"Discover how to join our agent program, earn commissions, and grow your business.\",\r\n    url: \"https://cdn.example.com/videos/how-to-become-agent.mp4\",\r\n  },\r\n];\r\n\r\ntype WatchHowToPurchaseProps = {\r\n  label?: string;\r\n  description?: string;\r\n  triggerVariant?: ButtonProps[\"variant\"];\r\n  triggerSize?: ButtonProps[\"size\"];\r\n  className?: string;\r\n};\r\n\r\nexport function WatchHowToPurchase({\r\n  label = \"Watch How to Purchase\",\r\n  description = \"Learn the quickest way to purchase bundles or become an agent.\",\r\n  triggerVariant = \"outline\",\r\n  triggerSize = \"default\",\r\n  className,\r\n}: WatchHowToPurchaseProps) {\r\n  const [open, setOpen] = useState(false);\r\n  const [activeCategory, setActiveCategory] = useState<VideoCategory>(\"guest\");\r\n  const [selectedGuide, setSelectedGuide] = useState<VideoGuide | null>(null);\r\n\r\n  // Fetch guides from API for the active category\r\n  const { data: fetchedGuides } = useQuery<VideoGuide[]>({\r\n    queryKey: [\"/api/guides\", activeCategory],\r\n    queryFn: async () => await apiRequest(\"GET\", `/api/guides?category=${activeCategory}`),\r\n  });\r\n\r\n  const guidesByCategory = useMemo(() => {\r\n    const apiGuides = Array.isArray(fetchedGuides) ? fetchedGuides : [];\r\n    const fallback = DEFAULT_GUIDES.filter((guide) => guide.category === activeCategory);\r\n    return apiGuides.length > 0 ? apiGuides : fallback;\r\n  }, [activeCategory, fetchedGuides]);\r\n\r\n  const currentGuide = selectedGuide && selectedGuide.category === activeCategory\r\n    ? selectedGuide\r\n    : guidesByCategory[0] || null;\r\n\r\n  const renderPlayer = () => {\r\n    if (!currentGuide?.url) {\r\n      return (\r\n        <div className=\"rounded-lg border p-6 bg-muted/50 text-sm text-muted-foreground\">\r\n          Video will appear here once an admin uploads it.\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const isEmbed = currentGuide.url.includes(\"youtube.com\") || currentGuide.url.includes(\"youtu.be\") || currentGuide.url.includes(\"vimeo.com\");\r\n\r\n    if (isEmbed) {\r\n      // Convert YouTube URLs to embed format\r\n      let embedUrl = currentGuide.url;\r\n      \r\n      // Handle youtube.com/watch?v=VIDEO_ID\r\n      if (embedUrl.includes(\"youtube.com/watch\")) {\r\n        const videoId = new URL(embedUrl).searchParams.get(\"v\");\r\n        if (videoId) embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n      // Handle youtube.com/shorts/VIDEO_ID\r\n      else if (embedUrl.includes(\"youtube.com/shorts/\")) {\r\n        const videoId = embedUrl.split(\"/shorts/\")[1]?.split(\"?\")[0];\r\n        if (videoId) embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n      // Handle youtu.be/VIDEO_ID\r\n      else if (embedUrl.includes(\"youtu.be/\")) {\r\n        const videoId = embedUrl.split(\"youtu.be/\")[1]?.split(\"?\")[0];\r\n        if (videoId) embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n      // Handle vimeo.com/VIDEO_ID\r\n      else if (embedUrl.includes(\"vimeo.com/\") && !embedUrl.includes(\"player.vimeo.com\")) {\r\n        const videoId = embedUrl.split(\"vimeo.com/\")[1]?.split(\"?\")[0];\r\n        if (videoId) embedUrl = `https://player.vimeo.com/video/${videoId}`;\r\n      }\r\n\r\n      return (\r\n        <div className=\"rounded-lg md:rounded-none overflow-hidden border bg-black aspect-video md:aspect-auto md:h-64\">\r\n          <iframe\r\n            src={embedUrl}\r\n            title={currentGuide.title}\r\n            className=\"w-full h-full md:h-64\"\r\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n            allowFullScreen\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"rounded-lg md:rounded-none overflow-hidden border bg-black aspect-video md:aspect-auto md:h-64\">\r\n        <video className=\"w-full h-full md:h-64\" controls poster={undefined}>\r\n          <source src={currentGuide.url} />\r\n          Your browser does not support the video tag.\r\n        </video>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        variant={triggerVariant}\r\n        size={triggerSize}\r\n        className={cn(\"bg-transparent border-2 border-yellow-500 text-yellow-500 hover:bg-transparent\", className)}\r\n        onClick={() => setOpen(true)}\r\n      >\r\n        <PlayCircle className=\"h-4 w-4 mr-2 text-yellow-500\" />\r\n        {label}\r\n      </Button>\r\n\r\n      <Dialog open={open} onOpenChange={setOpen}>\r\n        <DialogContent className=\"max-w-4xl bg-black text-white md:rounded-none\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-white\">\r\n              <Video className=\"h-5 w-5\" />\r\n              How to Use Resellers Data Hub Pro Gh\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-white/80\">\r\n              {description}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <Tabs value={activeCategory} onValueChange={(value) => setActiveCategory(value as VideoCategory)}>\r\n            <TabsList className=\"grid grid-cols-3 w-full text-white gap-2\">\r\n              <TabsTrigger\r\n                value=\"guest\"\r\n                className=\"text-white border-2 border-yellow-500 rounded-md md:rounded-none px-3 py-2 transition-colors hover:bg-yellow-500/10 data-[state=active]:bg-yellow-500 data-[state=active]:text-black data-[state=active]:border-yellow-600\"\r\n              >\r\n                Guest\r\n              </TabsTrigger>\r\n              <TabsTrigger\r\n                value=\"customer\"\r\n                className=\"text-white border-2 border-yellow-500 rounded-md md:rounded-none px-3 py-2 transition-colors hover:bg-yellow-500/10 data-[state=active]:bg-yellow-500 data-[state=active]:text-black data-[state=active]:border-yellow-600\"\r\n              >\r\n                Customer\r\n              </TabsTrigger>\r\n              <TabsTrigger\r\n                value=\"agent\"\r\n                className=\"text-white border-2 border-yellow-500 rounded-md md:rounded-none px-3 py-2 transition-colors hover:bg-yellow-500/10 data-[state=active]:bg-yellow-500 data-[state=active]:text-black data-[state=active]:border-yellow-600\"\r\n              >\r\n                Agent\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            {([\"guest\", \"customer\", \"agent\"] as VideoCategory[]).map((category) => {\r\n              const guides = category === activeCategory\r\n                ? guidesByCategory\r\n                : DEFAULT_GUIDES.filter((g) => g.category === category);\r\n              return (\r\n                <TabsContent key={category} value={category} className=\"space-y-4 pt-4\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                    {guides.map((guide) => (\r\n                      <Card key={guide.id} className={`h-full md:rounded-none ${currentGuide?.id === guide.id ? \"border-primary\" : \"\"}`}>\r\n                        <CardHeader className=\"space-y-1\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Badge variant=\"secondary\" className=\"capitalize\">{guide.category}</Badge>\r\n                            {currentGuide?.id === guide.id && <CheckCircle2 className=\"h-4 w-4 text-primary\" />}\r\n                          </div>\r\n                          <CardTitle className=\"text-base leading-tight text-white\">{guide.title}</CardTitle>\r\n                          <CardDescription className=\"text-xs leading-snug text-white/80\">{guide.description}</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-3\">\r\n                          <Button\r\n                            variant={currentGuide?.id === guide.id ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setSelectedGuide(guide)}\r\n                          >\r\n                            <PlayCircle className=\"h-4 w-4 mr-2\" />\r\n                            {currentGuide?.id === guide.id ? \"Playing\" : \"Play\"}\r\n                          </Button>\r\n                        </CardContent>\r\n                      </Card>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-white\">\r\n                      <Info className=\"h-4 w-4 text-primary\" />\r\n                      {currentGuide?.title || \"Select a video\"}\r\n                    </div>\r\n                    {renderPlayer()}\r\n                  </div>\r\n                </TabsContent>\r\n              );\r\n            })}\r\n          </Tabs>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import { Link, useLocation } from \"wouter\";\r\nimport { Menu, LogOut, LayoutDashboard, Store, Home, Package, FileCheck } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { useState } from \"react\";\r\nimport { WatchHowToPurchase } from \"@/components/watch-how-to-purchase\";\r\n\r\nexport function Header() {\r\n  const { user, isAuthenticated, logout, isLoggingOut, isLoading } = useAuth();\r\n  const { theme } = useTheme();\r\n  const [location] = useLocation();\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  const getInitials = (name: string | undefined | null) => {\r\n    if (!name) return \"U\";\r\n    return name\r\n      .split(\" \")\r\n      .map((n) => n[0])\r\n      .join(\"\")\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const getDashboardLink = () => {\r\n    if (!user) return \"/login\";\r\n    if (user.role === \"admin\") return \"/admin\";\r\n    if (user.role === \"agent\") return \"/agent/dashboard\";\r\n    if (user.role === \"dealer\") return \"/dealer/dashboard\";\r\n    if (user.role === \"super_dealer\") return \"/super-dealer/dashboard\";\r\n    if (user.role === \"master\") return \"/master/dashboard\";\r\n    if (user.role === \"user\") return \"/user/dashboard\";\r\n    return \"/\";\r\n  };\r\n\r\n  const navigationItems = [\r\n    { href: \"/\", label: \"Home\", icon: Home },\r\n    { href: \"/data-bundles\", label: \"Data Bundles\", icon: Package },\r\n    { href: \"/products/result-checkers\", label: \"Result Checkers\", icon: FileCheck },\r\n  ];\r\n\r\n  return (\r\n    <header className={`sticky top-0 z-50 w-full border-b shadow-sm ${theme === 'dark' ? 'bg-black' : 'bg-white'}`}>\r\n      {/* Logo positioned absolutely in left corner */}\r\n      <Link\r\n        href={agentStore ? `/store/${agentStore}` : \"/\"}\r\n        className=\"absolute top-4 left-0 z-10 flex items-center hover:opacity-80 transition-opacity pl-4\"\r\n      >\r\n        <img\r\n          src={theme === \"dark\" ? logoDark : logoLight}\r\n          alt={APP_NAME}\r\n          className=\"h-6 md:h-10 w-auto\"\r\n        />\r\n      </Link>\r\n\r\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex h-16 items-center justify-between\">\r\n          {/* Spacer for logo */}\r\n          <div className=\"w-32\"></div>\r\n\r\n          {/* Desktop Navigation */}\r\n          {!agentStore && (\r\n            <nav className=\"hidden md:flex items-center gap-8\">\r\n              {navigationItems.map((item) => {\r\n                const Icon = item.icon;\r\n                const isActive = location === item.href;\r\n                return (\r\n                  <Link\r\n                    key={item.href}\r\n                    href={item.href}\r\n                    className={`flex items-center gap-2 text-sm font-medium transition-colors hover:text-primary px-3 py-2 rounded-md ${\r\n                      isActive\r\n                        ? \"bg-yellow-500 text-white\"\r\n                        : \"text-muted-foreground hover:text-primary\"\r\n                    }`}\r\n                  >\r\n                    <Icon className=\"w-4 h-4\" />\r\n                    {item.label}\r\n                  </Link>\r\n                );\r\n              })}\r\n            </nav>\r\n          )}\r\n\r\n          {/* Right side actions */}\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* Desktop-only watch button on homepage */}\r\n            {location === \"/\" && (\r\n              <div className=\"hidden md:flex\">\r\n                <WatchHowToPurchase triggerVariant=\"outline\" triggerSize=\"sm\" />\r\n              </div>\r\n            )}\r\n            <ThemeToggle />\r\n\r\n            {/* Mobile menu */}\r\n            {!location.startsWith(\"/products\") && location !== \"/\" && location !== \"/data-bundles\" && (\r\n              <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\r\n                <SheetTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"md:hidden\"\r\n                    aria-label=\"Open menu\"\r\n                  >\r\n                    <Menu className=\"h-5 w-5\" />\r\n                  </Button>\r\n                </SheetTrigger>\r\n                <SheetContent \r\n                  side=\"right\" \r\n                  className={`w-80 ${theme === 'dark' ? 'bg-black' : 'bg-white'}`}\r\n                  style={{ backgroundColor: theme === 'dark' ? '#000000' : '#ffffff' }}\r\n                >\r\n                  <div className=\"flex flex-col gap-6 mt-6\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-lg font-bold text-primary\">{APP_NAME}</span>\r\n                    </div>\r\n\r\n                    <nav className=\"flex flex-col gap-2\">\r\n                      {navigationItems.map((item) => {\r\n                        const Icon = item.icon;\r\n                        const isActive = location === item.href;\r\n                        return (\r\n                          <Link\r\n                            key={item.href}\r\n                            href={item.href}\r\n                            onClick={() => setMobileMenuOpen(false)}\r\n                            className={`flex items-center gap-3 text-base font-medium transition-colors hover:text-primary px-4 py-3 rounded-lg ${\r\n                              isActive\r\n                                ? \"bg-yellow-500 text-white\"\r\n                                : \"text-muted-foreground hover:text-primary\"\r\n                            }`}\r\n                          >\r\n                            <Icon className=\"w-5 h-5\" />\r\n                            {item.label}\r\n                          </Link>\r\n                        );\r\n                      })}\r\n                    </nav>\r\n                  </div>\r\n                </SheetContent>\r\n              </Sheet>\r\n            )}\r\n\r\n            {/* User menu */}\r\n            {isLoading ? (\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary\"></div>\r\n                <span className=\"text-sm text-muted-foreground hidden sm:inline\">Loading...</span>\r\n              </div>\r\n            ) : isAuthenticated && user && user.email ? (\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    className=\"relative h-9 w-9 rounded-full bg-yellow-500 hover:bg-yellow-600 transition-colors\"\r\n                    aria-label=\"User menu\"\r\n                  >\r\n                    <Avatar className=\"h-8 w-8\">\r\n                      <AvatarFallback className=\"bg-yellow-500 text-white text-sm font-medium\">\r\n                        {getInitials(user.name)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent align=\"end\" className=\"w-64 bg-yellow-500\">\r\n                  <div className=\"flex items-center gap-3 p-3 border-b border-yellow-600\">\r\n                    <Avatar className=\"h-10 w-10 flex-shrink-0\">\r\n                      <AvatarFallback className=\"bg-yellow-600 text-white\">\r\n                        {getInitials(user.name)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <div className=\"flex flex-col flex-1 min-w-0\">\r\n                      <div className=\"flex flex-col gap-1\">\r\n                        <span className=\"font-semibold text-sm text-black truncate\">{user.name || \"User\"}</span>\r\n                        <span className=\"text-xs text-black/70 truncate\">{user.email}</span>\r\n                      </div>\r\n                      <span className=\"text-xs text-black/80 capitalize font-medium mt-1\">{user.role}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <DropdownMenuItem asChild>\r\n                    <Link href={getDashboardLink()} className=\"flex items-center gap-2 cursor-pointer text-black hover:bg-yellow-600 focus:bg-yellow-600 focus:text-black\">\r\n                      <LayoutDashboard className=\"w-4 h-4 flex-shrink-0\" />\r\n                      <span>Dashboard</span>\r\n                    </Link>\r\n                  </DropdownMenuItem>\r\n\r\n                  {user.role === \"agent\" && (\r\n                    <DropdownMenuItem asChild>\r\n                      <Link href=\"/agent/storefront\" className=\"flex items-center gap-2 cursor-pointer text-black hover:bg-yellow-600 focus:bg-yellow-600 focus:text-black\">\r\n                        <Store className=\"w-4 h-4 flex-shrink-0\" />\r\n                        <span>My Store</span>\r\n                      </Link>\r\n                    </DropdownMenuItem>\r\n                  )}\r\n\r\n                  <DropdownMenuSeparator className=\"bg-yellow-600\" />\r\n\r\n                  <DropdownMenuItem\r\n                    onClick={logout}\r\n                    disabled={isLoggingOut}\r\n                    className=\"flex items-center gap-2 cursor-pointer text-black hover:bg-yellow-600 focus:bg-yellow-600 focus:text-black\"\r\n                  >\r\n                    <LogOut className=\"w-4 h-4 flex-shrink-0\" />\r\n                    <span>{isLoggingOut ? \"Signing out...\" : \"Sign out\"}</span>\r\n                  </DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            ) : (\r\n              <div className=\"flex items-center gap-0.5 md:gap-1\">\r\n                <Button asChild variant=\"ghost\" size=\"sm\" className=\"h-6 px-1.5 text-xs md:h-7 md:px-2\">\r\n                  <Link href=\"/login\">Sign In</Link>\r\n                </Button>\r\n                <Button asChild size=\"sm\" className=\"h-6 px-1.5 text-xs md:h-7 md:px-2\">\r\n                  <Link href=\"/register\">Get Started</Link>\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import { APP_NAME } from \"@/lib/constants\";\r\nimport { SiVisa, SiMastercard } from \"react-icons/si\";\r\nimport { Shield, Lock } from \"lucide-react\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nexport function Footer() {\r\n  const { theme } = useTheme();\r\n\r\n  return (\r\n    <footer className=\"border-t bg-muted/30\">\r\n      <div className=\"container mx-auto max-w-7xl px-4 py-8\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-8 w-auto\" />\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Your trusted platform for data bundles and result checker purchases in Ghana.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold text-sm\">Products</h4>\r\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n              <li>MTN Data Bundles</li>\r\n              <li>Telecel Data Bundles</li>\r\n              <li>AirtelTigo Data Bundles</li>\r\n              <li>BECE Result Checkers</li>\r\n              <li>WASSCE Result Checkers</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold text-sm\">For Agents</h4>\r\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n              <li>Become an Agent</li>\r\n              <li>Agent Dashboard</li>\r\n              <li>Custom Storefronts</li>\r\n              <li>Profit Withdrawals</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold text-sm\">Security & Payments</h4>\r\n            <div className=\"flex flex-wrap items-center gap-3\">\r\n              <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                <Shield className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Secure</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                <Lock className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Encrypted</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3 pt-2\">\r\n              <div className=\"rounded bg-white dark:bg-black p-2\">\r\n                <SiVisa className=\"h-6 w-10 text-[#1A1F71]\" />\r\n              </div>\r\n              <div className=\"rounded bg-white dark:bg-black p-2\">\r\n                <SiMastercard className=\"h-6 w-10 text-[#EB001B]\" />\r\n              </div>\r\n              <div className=\"rounded bg-[#00C3F7] px-2 py-1\">\r\n                <span className=\"text-white font-bold text-xs\">Paystack</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-8 pt-8 border-t text-center text-sm text-muted-foreground\">\r\n          <p>&copy; {new Date().getFullYear()} {APP_NAME}. All rights reserved.</p>\r\n          <p className=\"mt-2\">\r\n            Developed by{' '}\r\n            <a\r\n              href=\"https://bm-portfolio-up2x.onrender.com\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-primary hover:text-primary/80 font-medium\"\r\n            >\r\n              BlusMotif\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"./button\";\r\nimport { Badge } from \"./badge\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\ninterface HeroProps extends React.HTMLAttributes<HTMLElement> {\r\n  title: React.ReactNode;\r\n  subtitle?: string;\r\n  description?: string;\r\n  aboveButtons?: React.ReactNode;\r\n  badge?: string;\r\n  primaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: React.ComponentType<{ className?: string }>;\r\n    className?: string;\r\n    size?: \"sm\" | \"md\" | \"lg\";\r\n  };\r\n  secondaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: React.ComponentType<{ className?: string }>;\r\n    size?: \"sm\" | \"md\" | \"lg\";\r\n  };\r\n  images?: string[];\r\n  showNavigation?: boolean;\r\n  background?: \"default\" | \"gradient\" | \"image\";\r\n  overlay?: boolean;\r\n  height?: \"sm\" | \"md\" | \"lg\" | \"xl\" | \"full\";\r\n  align?: \"left\" | \"center\" | \"right\";\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n}\r\n\r\nconst Hero = React.forwardRef<HTMLElement, HeroProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    subtitle,\r\n    description,\r\n    aboveButtons,\r\n    badge,\r\n    primaryButton,\r\n    secondaryButton,\r\n    images = [],\r\n    showNavigation = false,\r\n    background = \"gradient\",\r\n    overlay = true,\r\n    height = \"lg\",\r\n    align = \"center\",\r\n    size = \"lg\",\r\n    children,\r\n    ...props\r\n  }, ref) => {\r\n    const [currentImage, setCurrentImage] = React.useState(0);\r\n\r\n    // Auto-rotate images\r\n    React.useEffect(() => {\r\n      if (images.length > 1) {\r\n        const timer = setInterval(() => {\r\n          setCurrentImage((prev) => (prev + 1) % images.length);\r\n        }, 5000);\r\n        return () => clearInterval(timer);\r\n      }\r\n    }, [images.length]);\r\n\r\n    const heightClasses = {\r\n      sm: \"h-[50vh]\",\r\n      md: \"h-[60vh]\",\r\n      lg: \"h-[70vh]\",\r\n      xl: \"h-[80vh]\",\r\n      full: \"h-screen\",\r\n    };\r\n\r\n    const sizeClasses = {\r\n      sm: \"text-3xl sm:text-4xl\",\r\n      md: \"text-4xl sm:text-5xl lg:text-6xl\",\r\n      lg: \"text-4xl sm:text-5xl lg:text-7xl\",\r\n    };\r\n\r\n    const nextImage = () => {\r\n      setCurrentImage((prev) => (prev + 1) % images.length);\r\n    };\r\n\r\n    const prevImage = () => {\r\n      setCurrentImage((prev) => (prev - 1 + images.length) % images.length);\r\n    };\r\n\r\n    const backgroundClasses = {\r\n      default: \"\",\r\n      gradient: \"bg-gradient-to-br from-primary/5 via-background to-secondary/5\",\r\n      image: \"\",\r\n    };\r\n\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative flex items-center justify-center overflow-hidden\",\r\n          heightClasses[height],\r\n          backgroundClasses[background],\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {/* Background Images */}\r\n        {images.length > 0 && (\r\n          <>\r\n            {images.map((img, index) => (\r\n              <div\r\n                key={index}\r\n                className={`absolute inset-0 transition-opacity duration-1000 ${\r\n                  index === currentImage ? \"opacity-100\" : \"opacity-0\"\r\n                }`}\r\n              >\r\n                <img\r\n                  src={img}\r\n                  alt={`Hero image ${index + 1}`}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n                {overlay && (\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-black/60 via-black/40 to-transparent\" />\r\n                )}\r\n              </div>\r\n            ))}\r\n\r\n            {/* Navigation Arrows */}\r\n            {showNavigation && images.length > 1 && (\r\n              <>\r\n                <button\r\n                  onClick={prevImage}\r\n                  className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 p-2 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-colors\"\r\n                  aria-label=\"Previous image\"\r\n                >\r\n                  <ChevronLeft className=\"w-6 h-6 text-white\" />\r\n                </button>\r\n                <button\r\n                  onClick={nextImage}\r\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 p-2 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-colors\"\r\n                  aria-label=\"Next image\"\r\n                >\r\n                  <ChevronRight className=\"w-6 h-6 text-white\" />\r\n                </button>\r\n\r\n                {/* Image Indicators */}\r\n                <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-10\">\r\n                  {images.map((_, index) => (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => setCurrentImage(index)}\r\n                      className={`w-3 h-3 rounded-full transition-all ${\r\n                        index === currentImage\r\n                          ? \"bg-white scale-125\"\r\n                          : \"bg-white/50 hover:bg-white/75\"\r\n                      }`}\r\n                      aria-label={`Go to image ${index + 1}`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {/* Content */}\r\n        <div className=\"relative z-10 flex items-center justify-center h-full\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 text-center\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n              {badge && (\r\n                <Badge variant=\"secondary\" className=\"mb-6 px-4 py-2 text-sm font-medium\">\r\n                  {badge}\r\n                </Badge>\r\n              )}\r\n\r\n              {subtitle && (\r\n                <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                  {subtitle}\r\n                </div>\r\n              )}\r\n\r\n              <h1 className={cn(\"font-bold mb-6 tracking-tight\", sizeClasses[size])}>\r\n                <span className=\"text-white\">{title}</span>\r\n              </h1>\r\n\r\n              {description && (\r\n                <p className=\"text-base sm:text-lg text-white/90 mb-8 max-w-2xl mx-auto leading-relaxed\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n\r\n              {aboveButtons && (\r\n                <div className=\"mb-4 flex justify-center\">\r\n                  {aboveButtons}\r\n                </div>\r\n              )}\r\n\r\n              {(primaryButton || secondaryButton) && (\r\n                <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\r\n                  {primaryButton && (\r\n                    <Button\r\n                      size={primaryButton.size || \"lg\"}\r\n                      className={cn(\"px-8 py-4 text-lg font-semibold shadow-lg hover:shadow-xl transition-shadow\", primaryButton.className)}\r\n                      asChild={!!primaryButton.href}\r\n                      onClick={primaryButton.onClick}\r\n                    >\r\n                      {primaryButton.href ? (\r\n                        <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                          {primaryButton.text}\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {primaryButton.text}\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n\r\n                  {secondaryButton && (\r\n                    <Button\r\n                      size={secondaryButton.size || \"lg\"}\r\n                      variant=\"outline\"\r\n                      className=\"px-8 py-4 text-lg font-semibold bg-yellow-500 border-yellow-500 text-black hover:bg-yellow-600\"\r\n                      asChild={!!secondaryButton.href}\r\n                      onClick={secondaryButton.onClick}\r\n                    >\r\n                      {secondaryButton.href ? (\r\n                        <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                          {secondaryButton.text}\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {secondaryButton.text}\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nHero.displayName = \"Hero\";\r\n\r\nexport { Hero };","import * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { LucideIcon } from \"lucide-react\";\r\n\r\ninterface StatItem {\r\n  label: string;\r\n  value: string;\r\n  icon?: LucideIcon;\r\n  description?: string;\r\n}\r\n\r\n// Component for animated countdown numbers\r\nfunction CountdownValue({ value }: { value: string }) {\r\n  const [displayValue, setDisplayValue] = useState(0);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // Extract numeric part and suffix (e.g., \"50K+\" -> 50, \"K+\")\r\n  const numericMatch = value.match(/(\\d+)/);\r\n  const numeric = numericMatch ? parseInt(numericMatch[1]) : 0;\r\n  const suffix = value.replace(/^\\d+/, \"\");\r\n\r\n  useEffect(() => {\r\n    const ref = React.createRef<HTMLDivElement>();\r\n    \r\n    // Intersection observer to trigger animation when visible\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting && !isVisible) {\r\n          setIsVisible(true);\r\n        }\r\n      },\r\n      { threshold: 0.5 }\r\n    );\r\n\r\n    const tempDiv = document.querySelector(`[data-stat-value=\"${value}\"]`);\r\n    if (tempDiv) observer.observe(tempDiv);\r\n\r\n    return () => {\r\n      if (tempDiv) observer.unobserve(tempDiv);\r\n    };\r\n  }, [value, isVisible]);\r\n\r\n  useEffect(() => {\r\n    if (!isVisible) return;\r\n\r\n    let start = 0;\r\n    const duration = 2000; // 2 seconds animation\r\n    const startTime = Date.now();\r\n\r\n    const animate = () => {\r\n      const elapsed = Date.now() - startTime;\r\n      const progress = Math.min(elapsed / duration, 1);\r\n      \r\n      // Easing function for smooth animation\r\n      const easeOutQuad = progress => 1 - Math.pow(1 - progress, 2);\r\n      const easedProgress = easeOutQuad(progress);\r\n      \r\n      const currentValue = Math.floor(numeric * easedProgress);\r\n      setDisplayValue(currentValue);\r\n\r\n      if (progress < 1) {\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        setDisplayValue(numeric);\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(animate);\r\n  }, [isVisible, numeric]);\r\n\r\n  return (\r\n    <div data-stat-value={value}>\r\n      {displayValue}{suffix}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface StatsProps extends React.HTMLAttributes<HTMLElement> {\r\n  title?: string;\r\n  description?: string;\r\n  stats: StatItem[];\r\n  columns?: 2 | 3 | 4;\r\n  variant?: \"default\" | \"minimal\" | \"cards\";\r\n}\r\n\r\nconst Stats = React.forwardRef<HTMLElement, StatsProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    description,\r\n    stats,\r\n    columns = 4,\r\n    variant = \"default\",\r\n    ...props\r\n  }, ref) => {\r\n    const gridCols = {\r\n      2: \"grid-cols-1 sm:grid-cols-2\",\r\n      3: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\",\r\n      4: \"grid-cols-2 lg:grid-cols-4\",\r\n    };\r\n\r\n    if (variant === \"cards\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-8 bg-muted/30\", className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {(title || description) && (\r\n              <div className=\"text-center mb-8\">\r\n                {title && (\r\n                  <h2 className=\"text-xl sm:text-2xl font-bold mb-2\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-base text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className={cn(\"grid gap-4\", \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\")}>\r\n              {stats.map((stat, index) => {\r\n                const Icon = stat.icon;\r\n                return (\r\n                  <div\r\n                    key={index}\r\n                    className=\"bg-white dark:bg-black rounded-lg p-4 text-center shadow-sm border hover:shadow-md transition-shadow\"\r\n                  >\r\n                    {Icon && (\r\n                      <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2\">\r\n                        <Icon className=\"w-5 h-5 text-primary\" />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"text-2xl font-bold text-primary mb-1\">\r\n                      <CountdownValue value={stat.value} />\r\n                    </div>\r\n                    <div className=\"text-xs font-medium text-muted-foreground\">\r\n                      {stat.label}\r\n                    </div>\r\n                    {stat.description && (\r\n                      <div className=\"text-xs text-muted-foreground mt-1 line-clamp-2\">\r\n                        {stat.description}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"minimal\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-12\", className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n              {stats.map((stat, index) => {\r\n                const Icon = stat.icon;\r\n                return (\r\n                  <div key={index} className=\"text-center\">\r\n                    {Icon && (\r\n                      <Icon className=\"w-8 h-8 text-primary mx-auto mb-3\" />\r\n                    )}\r\n                    <div className=\"text-2xl sm:text-3xl font-bold text-primary mb-1\">\r\n                      <CountdownValue value={stat.value} />\r\n                    </div>\r\n                    <div className=\"text-sm text-muted-foreground font-medium\">\r\n                      {stat.label}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    // Default variant\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\"py-16 bg-muted/20\", className)}\r\n        {...props}\r\n      >\r\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n          {(title || description) && (\r\n            <div className=\"text-center mb-12\">\r\n              {title && (\r\n                <h2 className=\"text-2xl sm:text-3xl font-bold mb-4\">{title}</h2>\r\n              )}\r\n              {description && (\r\n                <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n            {stats.map((stat, index) => {\r\n              const Icon = stat.icon;\r\n              return (\r\n                <div key={index} className=\"text-center\">\r\n                  {Icon && (\r\n                    <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      <Icon className=\"w-8 h-8 text-primary\" />\r\n                    </div>\r\n                  )}\r\n                  <div className=\"text-3xl font-bold text-primary mb-2\">\r\n                    <CountdownValue value={stat.value} />\r\n                  </div>\r\n                  <div className=\"text-sm text-muted-foreground font-medium\">\r\n                    {stat.label}\r\n                  </div>\r\n                  {stat.description && (\r\n                    <div className=\"text-xs text-muted-foreground mt-1\">\r\n                      {stat.description}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nStats.displayName = \"Stats\";\r\n\r\nexport { Stats };\r\nexport type { StatItem };","import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Card, CardContent } from \"./card\";\r\nimport { LucideIcon } from \"lucide-react\";\r\n\r\ninterface FeatureItem {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  icon?: LucideIcon;\r\n  color?: string;\r\n  image?: string;\r\n}\r\n\r\ninterface FeaturesProps extends React.HTMLAttributes<HTMLElement> {\r\n  title?: string;\r\n  subtitle?: string;\r\n  description?: string;\r\n  features: FeatureItem[];\r\n  columns?: 2 | 3 | 4;\r\n  variant?: \"default\" | \"minimal\" | \"cards\" | \"bento\";\r\n  background?: \"default\" | \"muted\" | \"gradient\";\r\n}\r\n\r\nconst Features = React.forwardRef<HTMLElement, FeaturesProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    subtitle,\r\n    description,\r\n    features,\r\n    columns = 3,\r\n    variant = \"default\",\r\n    background = \"default\",\r\n    ...props\r\n  }, ref) => {\r\n    const backgroundClasses = {\r\n      default: \"\",\r\n      muted: \"bg-muted/20\",\r\n      gradient: \"bg-gradient-to-br from-primary/5 via-background to-secondary/5\",\r\n    };\r\n\r\n    const gridCols = {\r\n      2: \"grid-cols-2\",\r\n      3: \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3\",\r\n      4: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\",\r\n    };\r\n\r\n    if (variant === \"bento\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-20\", backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {(title || subtitle || description) && (\r\n              <div className=\"text-center mb-16\">\r\n                {subtitle && (\r\n                  <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                {title && (\r\n                  <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto\">\r\n              {features.map((feature, index) => {\r\n                const Icon = feature.icon;\r\n                const isLarge = index === 0 || index === 3; // Make first and fourth items larger\r\n\r\n                return (\r\n                  <div\r\n                    key={feature.id}\r\n                    className={cn(\r\n                      \"group relative overflow-hidden rounded-2xl bg-white dark:bg-black border hover:shadow-xl transition-all duration-300 hover:-translate-y-1\",\r\n                      isLarge ? \"md:col-span-2 md:row-span-1\" : \"md:col-span-1\"\r\n                    )}\r\n                  >\r\n                    <div className=\"p-8\">\r\n                      <div className=\"flex items-start gap-4\">\r\n                        {Icon && (\r\n                          <div className={cn(\r\n                            \"flex-shrink-0 rounded-xl p-3\",\r\n                            feature.color || \"bg-primary/10 text-primary\"\r\n                          )}>\r\n                            <Icon className=\"w-6 h-6\" />\r\n                          </div>\r\n                        )}\r\n                        <div className=\"flex-1\">\r\n                          <h3 className=\"text-xl font-semibold mb-2 group-hover:text-primary transition-colors\">\r\n                            {feature.title}\r\n                          </h3>\r\n                          <p className=\"text-muted-foreground leading-relaxed\">\r\n                            {feature.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"minimal\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-16\", backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {(title || subtitle || description) && (\r\n              <div className=\"text-center mb-12\">\r\n                {subtitle && (\r\n                  <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                {title && (\r\n                  <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n              {features.map((feature) => {\r\n                const Icon = feature.icon;\r\n                return (\r\n                  <div key={feature.id} className=\"text-center\">\r\n                    {Icon && (\r\n                      <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                        <Icon className=\"w-6 h-6 text-primary\" />\r\n                      </div>\r\n                    )}\r\n                    <h3 className=\"text-lg font-semibold mb-2\">{feature.title}</h3>\r\n                    <p className=\"text-muted-foreground\">{feature.description}</p>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"cards\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"pt-0 sm:pt-2 pb-12 sm:pb-20\", backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-3 sm:px-6 lg:px-8\">\r\n            {(title || subtitle || description) && (\r\n              <div className=\"text-center mb-8 sm:mb-16\">\r\n                {subtitle && (\r\n                  <div className=\"text-xs sm:text-sm font-medium text-primary mb-1 sm:mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                {title && (\r\n                  <h2 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-4\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-sm sm:text-base lg:text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className={cn(\"grid gap-3 sm:gap-6 lg:gap-8\", \"grid-cols-2 lg:grid-cols-4\")}>\r\n              {features.map((feature) => {\r\n                const Icon = feature.icon;\r\n                return (\r\n                  <Card key={feature.id} className=\"hover:shadow-lg transition-shadow dark:border-2 dark:border-white bg-card backdrop-blur-sm aspect-square flex flex-col\">\r\n                    <CardContent className=\"p-3 sm:p-6 lg:p-8 flex flex-col items-center justify-center h-full text-center\">\r\n                      {Icon && (\r\n                        <div className={cn(\r\n                          \"w-10 sm:w-14 lg:w-16 h-10 sm:h-14 lg:h-16 mx-auto mb-2 sm:mb-4 lg:mb-6 rounded-lg sm:rounded-xl lg:rounded-2xl p-2 sm:p-3 lg:p-4 flex items-center justify-center\",\r\n                          feature.color || \"bg-gradient-to-br from-primary/10 to-primary/5 text-primary\"\r\n                        )}>\r\n                          <Icon className=\"w-5 sm:w-6 lg:w-8 h-5 sm:h-6 lg:h-8\" />\r\n                        </div>\r\n                      )}\r\n                      <h3 className=\"text-sm sm:text-base lg:text-lg font-semibold mb-1 sm:mb-2 lg:mb-3\">{feature.title}</h3>\r\n                      <p className=\"text-xs sm:text-sm text-muted-foreground leading-relaxed\">{feature.description}</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    // Default variant\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\"py-20\", backgroundClasses[background], className)}\r\n        {...props}\r\n      >\r\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n          {(title || subtitle || description) && (\r\n            <div className=\"text-center mb-16\">\r\n              {subtitle && (\r\n                <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                  {subtitle}\r\n                </div>\r\n              )}\r\n              {title && (\r\n                <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">{title}</h2>\r\n              )}\r\n              {description && (\r\n                <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n            {features.map((feature) => {\r\n              const Icon = feature.icon;\r\n              return (\r\n                <div key={feature.id} className=\"flex gap-6\">\r\n                  {Icon && (\r\n                    <div className={cn(\r\n                      \"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center\",\r\n                      feature.color || \"bg-primary/10 text-primary\"\r\n                    )}>\r\n                      <Icon className=\"w-6 h-6\" />\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold mb-2\">{feature.title}</h3>\r\n                    <p className=\"text-muted-foreground leading-relaxed\">{feature.description}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nFeatures.displayName = \"Features\";\r\n\r\nexport { Features };\r\nexport type { FeatureItem };","import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"./button\";\r\nimport { LucideIcon } from \"lucide-react\";\r\n\r\ninterface CTAProps extends React.HTMLAttributes<HTMLElement> {\r\n  title: string;\r\n  subtitle?: string;\r\n  description?: string;\r\n  primaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: LucideIcon;\r\n    variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\r\n  };\r\n  secondaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: LucideIcon;\r\n    variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\r\n  };\r\n  variant?: \"default\" | \"minimal\" | \"centered\" | \"split\" | \"gradient\";\r\n  background?: \"default\" | \"muted\" | \"gradient\" | \"primary\";\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n}\r\n\r\nconst CTA = React.forwardRef<HTMLElement, CTAProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    subtitle,\r\n    description,\r\n    primaryButton,\r\n    secondaryButton,\r\n    variant = \"default\",\r\n    background = \"default\",\r\n    size = \"md\",\r\n    ...props\r\n  }, ref) => {\r\n    const backgroundClasses = {\r\n      default: \"\",\r\n      muted: \"bg-muted/20\",\r\n      gradient: \"bg-gradient-to-r from-primary/10 via-primary/5 to-secondary/10\",\r\n      primary: \"bg-primary text-primary-foreground\",\r\n    };\r\n\r\n    const sizeClasses = {\r\n      sm: \"py-12\",\r\n      md: \"py-16\",\r\n      lg: \"py-24\",\r\n    };\r\n\r\n    const titleSizeClasses = {\r\n      sm: \"text-2xl sm:text-3xl\",\r\n      md: \"text-3xl sm:text-4xl\",\r\n      lg: \"text-4xl sm:text-5xl\",\r\n    };\r\n\r\n    if (variant === \"minimal\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"text-center\", sizeClasses[size], backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {subtitle && (\r\n              <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                {subtitle}\r\n              </div>\r\n            )}\r\n            <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n            {description && (\r\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto mb-8\">\r\n                {description}\r\n              </p>\r\n            )}\r\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n              {primaryButton && (\r\n                <Button\r\n                  asChild={!!primaryButton.href}\r\n                  variant={primaryButton.variant || \"default\"}\r\n                  size=\"lg\"\r\n                  onClick={primaryButton.onClick}\r\n                  className=\"min-w-[160px]\"\r\n                >\r\n                  {primaryButton.href ? (\r\n                    <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n              {secondaryButton && (\r\n                <Button\r\n                  asChild={!!secondaryButton.href}\r\n                  variant={secondaryButton.variant || \"outline\"}\r\n                  size=\"lg\"\r\n                  onClick={secondaryButton.onClick}\r\n                  className=\"min-w-[160px]\"\r\n                >\r\n                  {secondaryButton.href ? (\r\n                    <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"centered\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"text-center\", sizeClasses[size], backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl\">\r\n            <div className=\"bg-white/50 dark:bg-black/50 backdrop-blur-sm rounded-3xl p-8 md:p-12 border\">\r\n              {subtitle && (\r\n                <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                  {subtitle}\r\n                </div>\r\n              )}\r\n              <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n              {description && (\r\n                <p className=\"text-lg text-muted-foreground mb-8\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n                {primaryButton && (\r\n                  <Button\r\n                    asChild={!!primaryButton.href}\r\n                    variant={primaryButton.variant || \"default\"}\r\n                    size=\"lg\"\r\n                    onClick={primaryButton.onClick}\r\n                    className=\"min-w-[160px]\"\r\n                  >\r\n                    {primaryButton.href ? (\r\n                      <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                        {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        {primaryButton.text}\r\n                      </a>\r\n                    ) : (\r\n                      <>\r\n                        {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        {primaryButton.text}\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n                {secondaryButton && (\r\n                  <Button\r\n                    asChild={!!secondaryButton.href}\r\n                    variant={secondaryButton.variant || \"outline\"}\r\n                    size=\"lg\"\r\n                    onClick={secondaryButton.onClick}\r\n                    className=\"min-w-[160px]\"\r\n                  >\r\n                    {secondaryButton.href ? (\r\n                      <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                        {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        {secondaryButton.text}\r\n                      </a>\r\n                    ) : (\r\n                      <>\r\n                        {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        {secondaryButton.text}\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"split\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(sizeClasses[size], backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\r\n              <div>\r\n                {subtitle && (\r\n                  <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n                {description && (\r\n                  <p className=\"text-lg text-muted-foreground mb-8\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n                <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                  {primaryButton && (\r\n                    <Button\r\n                      asChild={!!primaryButton.href}\r\n                      variant={primaryButton.variant || \"default\"}\r\n                      size=\"lg\"\r\n                      onClick={primaryButton.onClick}\r\n                      className=\"min-w-[160px]\"\r\n                    >\r\n                      {primaryButton.href ? (\r\n                        <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                          {primaryButton.text}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                          {primaryButton.text}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                  {secondaryButton && (\r\n                    <Button\r\n                      asChild={!!secondaryButton.href}\r\n                      variant={secondaryButton.variant || \"outline\"}\r\n                      size=\"lg\"\r\n                      onClick={secondaryButton.onClick}\r\n                      className=\"min-w-[160px]\"\r\n                    >\r\n                      {secondaryButton.href ? (\r\n                        <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                          {secondaryButton.text}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                          {secondaryButton.text}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"lg:text-right\">\r\n                {/* Placeholder for image or additional content */}\r\n                <div className=\"bg-gradient-to-br from-primary/20 to-secondary/20 rounded-2xl p-8 h-64 flex items-center justify-center\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      {primaryButton?.icon && <primaryButton.icon className=\"w-8 h-8 text-primary\" />}\r\n                    </div>\r\n                    <p className=\"text-muted-foreground\">Visual content goes here</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"gradient\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"relative overflow-hidden\", sizeClasses[size], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-primary via-primary/80 to-secondary\"></div>\r\n          <div className=\"absolute inset-0 bg-black/20\"></div>\r\n          <div className=\"relative container mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\r\n            {subtitle && (\r\n              <div className=\"text-sm font-medium text-white/80 mb-2 uppercase tracking-wide\">\r\n                {subtitle}\r\n              </div>\r\n            )}\r\n            <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n            {description && (\r\n              <p className=\"text-lg text-white/90 max-w-2xl mx-auto mb-8\">\r\n                {description}\r\n              </p>\r\n            )}\r\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n              {primaryButton && (\r\n                <Button\r\n                  asChild={!!primaryButton.href}\r\n                  variant=\"secondary\"\r\n                  size=\"lg\"\r\n                  onClick={primaryButton.onClick}\r\n                  className=\"min-w-[160px] bg-white text-primary hover:bg-white/90\"\r\n                >\r\n                  {primaryButton.href ? (\r\n                    <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n              {secondaryButton && (\r\n                <Button\r\n                  asChild={!!secondaryButton.href}\r\n                  variant=\"outline\"\r\n                  size=\"lg\"\r\n                  onClick={secondaryButton.onClick}\r\n                  className=\"min-w-[160px] border-white/30 text-white hover:bg-white/10\"\r\n                >\r\n                  {secondaryButton.href ? (\r\n                    <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    // Default variant\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\"text-center\", sizeClasses[size], backgroundClasses[background], className)}\r\n        {...props}\r\n      >\r\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n          {subtitle && (\r\n            <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n              {subtitle}\r\n            </div>\r\n          )}\r\n          <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n          {description && (\r\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto mb-8\">\r\n              {description}\r\n            </p>\r\n          )}\r\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n            {primaryButton && (\r\n              <Button\r\n                asChild={!!primaryButton.href}\r\n                variant={primaryButton.variant || \"default\"}\r\n                size=\"lg\"\r\n                onClick={primaryButton.onClick}\r\n                className=\"min-w-[160px]\"\r\n              >\r\n                {primaryButton.href ? (\r\n                  <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                    {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                    {primaryButton.text}\r\n                  </a>\r\n                ) : (\r\n                  <>\r\n                    {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                    {primaryButton.text}\r\n                  </>\r\n                )}\r\n              </Button>\r\n            )}\r\n            {secondaryButton && (\r\n              <Button\r\n                asChild={!!secondaryButton.href}\r\n                variant={secondaryButton.variant || \"outline\"}\r\n                size=\"lg\"\r\n                onClick={secondaryButton.onClick}\r\n                className=\"min-w-[160px]\"\r\n              >\r\n                {secondaryButton.href ? (\r\n                  <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                    {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                    {secondaryButton.text}\r\n                  </a>\r\n                ) : (\r\n                  <>\r\n                    {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                    {secondaryButton.text}\r\n                  </>\r\n                )}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nCTA.displayName = \"CTA\";\r\n\r\nexport { CTA };","// API configuration for different environments\r\n// In production (Render), frontend and backend are on the same domain\r\n// In development, they might be on different ports\r\nimport { supabase } from \"./supabaseClient\";\r\n\r\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || '';\r\n\r\nexport const api = {\r\n  // Use VITE_API_BASE_URL for full URLs in both dev and prod\r\n  baseURL: API_BASE_URL,\r\n\r\n  // Helper to build full API URLs\r\n  buildUrl: (endpoint: string) => {\r\n    if (API_BASE_URL) {\r\n      // Use full URL from environment\r\n      return `${API_BASE_URL}${endpoint}`;\r\n    } else {\r\n      // Fallback to relative URLs\r\n      return endpoint;\r\n    }\r\n  },\r\n\r\n  // Common API endpoints\r\n  auth: {\r\n    me: () => api.buildUrl('/api/auth/me'),\r\n    login: () => api.buildUrl('/api/auth/login'),\r\n    register: () => api.buildUrl('/api/auth/register'),\r\n    logout: () => api.buildUrl('/api/auth/logout'),\r\n  },\r\n\r\n  products: {\r\n    dataBundles: () => api.buildUrl('/api/products/data-bundles'),\r\n    dataBundle: (id: string) => api.buildUrl(`/api/products/data-bundles/${id}`),\r\n    resultCheckers: () => api.buildUrl('/api/products/result-checkers/stock'),\r\n    resultCheckerInfo: (productId: string, year: number) => api.buildUrl(`/api/products/result-checkers/info/${productId}/${year}`),\r\n  },\r\n\r\n  agent: {\r\n    register: () => api.buildUrl('/api/agent/register'),\r\n    profile: () => api.buildUrl('/api/profile'),\r\n    transactions: () => api.buildUrl('/api/agent/transactions'),\r\n    transactionsStats: () => api.buildUrl('/api/agent/transactions/stats'),\r\n    withdrawals: () => api.buildUrl('/api/agent/withdrawals'),\r\n    storefront: () => api.buildUrl('/api/agent/storefront'),\r\n    pricing: () => api.buildUrl('/api/agent/pricing'),\r\n  },\r\n\r\n  checkout: {\r\n    initialize: () => api.buildUrl('/api/checkout/initialize'),\r\n  },\r\n\r\n  wallet: {\r\n    topup: {\r\n      initialize: () => api.buildUrl('/api/wallet/topup/initialize'),\r\n      verify: (reference: string) => api.buildUrl(`/api/wallet/topup/verify/${reference}`),\r\n    },\r\n    pay: () => api.buildUrl('/api/wallet/pay'),\r\n  },\r\n\r\n  transactions: {\r\n    verify: (reference: string) => api.buildUrl(`/api/transactions/verify/${reference}`),\r\n  },\r\n\r\n  store: (role: string, slug: string) => api.buildUrl(`/api/store/${role}/${slug}`),\r\n};\r\n\r\n// Lock to prevent duplicate 401 auto-logout attempts\r\nlet autoLogoutInProgress = false;\r\n\r\n// API request utility\r\nexport async function apiRequest(endpoint: string, options: RequestInit & { disableAutoLogout?: boolean } = {}): Promise<any> {\r\n  const { disableAutoLogout, ...fetchOptions } = options;\r\n  const url = api.buildUrl(endpoint);\r\n\r\n  // Get access token from Supabase session\r\n  const { data } = await supabase.auth.getSession();\r\n  const token = data.session?.access_token;\r\n\r\n  const response = await fetch(url, {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Cache-Control': 'no-cache, no-store, must-revalidate',\r\n      'Pragma': 'no-cache',\r\n      'Expires': '0',\r\n      ...(token && { 'Authorization': `Bearer ${token}` }),\r\n      ...fetchOptions.headers,\r\n    },\r\n    cache: 'no-store',\r\n    ...fetchOptions,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n    const errorMessage = errorData.error || errorData.message || `API request failed: ${response.status} ${response.statusText}`;\r\n    console.error('API Error:', { endpoint, status: response.status, error: errorData });\r\n    \r\n    // If unauthorized, sign out the user (unless disabled)\r\n    if (response.status === 401 && !disableAutoLogout && !autoLogoutInProgress) {\r\n      autoLogoutInProgress = true;\r\n      try {\r\n        await supabase.auth.signOut();\r\n        window.location.href = '/login';\r\n      } catch (error) {\r\n        console.error('Auto-logout failed:', error);\r\n        // Force redirect even if signOut fails\r\n        window.location.href = '/login';\r\n      }\r\n      throw new Error('Session expired. Please log in again.');\r\n    }\r\n    \r\n    throw new Error(errorMessage);\r\n  }\r\n\r\n  return response.json();\r\n}","export default \"__VITE_ASSET__eV9nYV87__\"","export default \"__VITE_ASSET__Bzy3mv3X__\"","export default \"__VITE_ASSET__DVop5xmj__\"","export default \"__VITE_ASSET__DrGIsdTt__\"","export default \"__VITE_ASSET__DfpZFhKm__\"","export default \"__VITE_ASSET__Cf$AfwSy__\"","export default \"__VITE_ASSET__DYro9c4C__\"","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    // h-9 to match icon buttons and default buttons.\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-9 w-full rounded-md border border-input bg-white px-3 py-2 text-base text-black ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n","import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Search, Package, Clock, CheckCircle, XCircle, AlertCircle } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface TrackedOrder {\r\n  id: string;\r\n  reference: string;\r\n  productName: string;\r\n  customerPhone: string;\r\n  amount: string;\r\n  status: string;\r\n  deliveryStatus: string;\r\n  createdAt: string;\r\n  completedAt?: string;\r\n  phoneNumbers?: any[];\r\n  isBulkOrder: boolean;\r\n}\r\n\r\nexport function OrderTracker() {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [order, setOrder] = useState<TrackedOrder | null>(null);\r\n  const { toast } = useToast();\r\n\r\n  const handleSearch = async () => {\r\n    if (!searchQuery.trim()) {\r\n      toast({\r\n        title: \"Search Required\",\r\n        description: \"Please enter a transaction ID or beneficiary phone number\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(`/api/track-order?q=${encodeURIComponent(searchQuery.trim())}`);\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setOrder(data);\r\n      } else {\r\n        setOrder(null);\r\n        toast({\r\n          title: \"Order Not Found\",\r\n          description: data.error || \"No order found with the provided information\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setOrder(null);\r\n      toast({\r\n        title: \"Search Failed\",\r\n        description: \"Failed to search for order. Please try again.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string, deliveryStatus: string) => {\r\n    if (status === 'completed' && deliveryStatus === 'delivered') {\r\n      return <CheckCircle className=\"h-5 w-5 text-green-500\" />;\r\n    } else if (status === 'failed' || deliveryStatus === 'failed') {\r\n      return <XCircle className=\"h-5 w-5 text-red-500\" />;\r\n    } else if (status === 'completed' && deliveryStatus === 'processing') {\r\n      return <Clock className=\"h-5 w-5 text-yellow-500\" />;\r\n    } else {\r\n      return <Package className=\"h-5 w-5 text-blue-500\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string, deliveryStatus: string) => {\r\n    if (status === 'completed' && deliveryStatus === 'delivered') {\r\n      return <Badge variant=\"default\" className=\"bg-green-500 text-white\">Delivered</Badge>;\r\n    } else if (status === 'failed' || deliveryStatus === 'failed') {\r\n      return <Badge variant=\"destructive\" className=\"bg-red-500 text-white\">Failed</Badge>;\r\n    } else if (status === 'completed' && deliveryStatus === 'processing') {\r\n      return <Badge variant=\"secondary\" className=\"bg-yellow-500 text-white\">Processing</Badge>;\r\n    } else if (status === 'completed' && deliveryStatus === 'pending') {\r\n      return <Badge variant=\"secondary\" className=\"bg-blue-500 text-white\">Pending Delivery</Badge>;\r\n    } else {\r\n      return <Badge variant=\"outline\" className=\"bg-gray-500 text-white\">{status}</Badge>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"w-full max-w-2xl mx-auto\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2\">\r\n          <Package className=\"h-5 w-5\" />\r\n          Track Your Order\r\n        </CardTitle>\r\n        <CardDescription>\r\n          Enter your transaction ID or beneficiary phone number to track your order status\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        <div className=\"flex gap-2\">\r\n          <Input\r\n            placeholder=\"Transaction ID or Phone Number (e.g., CLEC-123456789-ABCDEF or 0241234567)\"\r\n            value={searchQuery}\r\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setSearchQuery(e.target.value)}\r\n            onKeyPress={(e: React.KeyboardEvent<HTMLInputElement>) => e.key === 'Enter' && handleSearch()}\r\n            className=\"flex-1\"\r\n          />\r\n          <Button onClick={handleSearch} disabled={isLoading}>\r\n            {isLoading ? (\r\n              <Clock className=\"h-4 w-4 animate-spin\" />\r\n            ) : (\r\n              <Search className=\"h-4 w-4\" />\r\n            )}\r\n            Search\r\n          </Button>\r\n        </div>\r\n\r\n        {order && (\r\n          <Card className=\"border-l-4 border-l-blue-500\">\r\n            <CardHeader className=\"pb-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  {getStatusIcon(order.status, order.deliveryStatus)}\r\n                  <CardTitle className=\"text-lg\">{order.productName}</CardTitle>\r\n                </div>\r\n                {getStatusBadge(order.status, order.deliveryStatus)}\r\n              </div>\r\n              <CardDescription>\r\n                Order #{order.reference}\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-3\">\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600\">Amount:</span>\r\n                  <p className=\"font-semibold\">GHS {order.amount}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600\">Date:</span>\r\n                  <p>{new Date(order.createdAt).toLocaleDateString()}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600\">Customer Phone:</span>\r\n                  <p>{order.customerPhone}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600\">Type:</span>\r\n                  <p>{order.isBulkOrder ? 'Bulk Order' : 'Single Order'}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {order.isBulkOrder && order.phoneNumbers && (\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600\">Beneficiary Numbers:</span>\r\n                  <div className=\"mt-1 flex flex-wrap gap-1\">\r\n                    {order.phoneNumbers.map((item: any, index: number) => (\r\n                      <Badge key={index} variant=\"outline\" className=\"text-xs\">\r\n                        {item.phone}\r\n                      </Badge>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {order.completedAt && (\r\n                <div className=\"pt-2 border-t\">\r\n                  <span className=\"font-medium text-gray-600\">Completed:</span>\r\n                  <p className=\"text-sm text-gray-500\">\r\n                    {new Date(order.completedAt).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"pt-2 border-t\">\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <AlertCircle className=\"h-4 w-4 text-blue-500\" />\r\n                  <span className=\"text-gray-600\">\r\n                    Need help? Contact our support team with your order reference.\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","import { Link } from \"wouter\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Hero } from \"@/components/ui/hero\";\r\nimport { Stats } from \"@/components/ui/stats\";\r\nimport { Features } from \"@/components/ui/features\";\r\nimport { CTA } from \"@/components/ui/cta\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport {\r\n  ArrowRight,\r\n  Zap,\r\n  Shield,\r\n  Headphones,\r\n  DollarSign,\r\n  Users,\r\n  Smartphone,\r\n  CheckCircle,\r\n  Award,\r\n  Package\r\n} from \"lucide-react\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport resultLogo from \"@assets/result_1765780772205.jpg\";\r\nimport banner1 from \"@assets/banner1_1765774201032.jpeg\";\r\nimport banner2 from \"@assets/banner2_1765774201033.jpeg\";\r\nimport banner3 from \"@assets/banner3_1765774201030.jpeg\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { WatchHowToPurchase } from \"@/components/watch-how-to-purchase\";\r\n\r\ninterface ResultCheckerStock {\r\n  type: string;\r\n  year: number;\r\n  price: number;\r\n  stock: number;\r\n  available: number;\r\n}\r\n\r\nconst bannerImages = [banner1, banner2, banner3];\r\n\r\nexport default function HomePage() {\r\n  const { user, isAuthenticated } = useAuth();\r\n\r\n  // Fetch result checker stock\r\n  const { data: resultCheckerStock } = useQuery<ResultCheckerStock[]>({\r\n    queryKey: [\"/api/products/result-checkers/stock\"],\r\n    queryFn: () => apiRequest(\"/api/products/result-checkers/stock\"),\r\n    refetchInterval: 60000, // Refetch every minute\r\n  });\r\n\r\n  // Product categories for homepage\r\n  const productCategories = [\r\n    {\r\n      id: \"mtn\",\r\n      title: \"MTN Data Bundles\",\r\n      description: \"Fast & reliable MTN data packages\",\r\n      icon: () => (\r\n        <img\r\n          src={mtnLogo}\r\n          alt=\"MTN\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-yellow-400 to-orange-500\"\r\n    },\r\n    {\r\n      id: \"telecel\",\r\n      title: \"Telecel Data Bundles\",\r\n      description: \"Affordable Telecel data solutions\",\r\n      icon: () => (\r\n        <img\r\n          src={telecelLogo}\r\n          alt=\"Telecel\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-blue-400 to-blue-600\"\r\n    },\r\n    {\r\n      id: \"at_bigtime\",\r\n      title: \"AT BIG TIME Bundles\",\r\n      description: \"High-speed AirtelTigo bundles\",\r\n      icon: () => (\r\n        <img\r\n          src={airteltigoLogo}\r\n          alt=\"AirtelTigo\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-red-400 to-red-600\"\r\n    },\r\n    {\r\n      id: \"at_ishare\",\r\n      title: \"AT iShare Bundles\",\r\n      description: \"Flexible AirtelTigo iShare plans\",\r\n      icon: () => (\r\n        <img\r\n          src={airteltigoLogo}\r\n          alt=\"AirtelTigo\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-purple-400 to-purple-600\"\r\n    },\r\n    {\r\n      id: \"waec-result-checker\",\r\n      title: \"WAEC Result Checker\",\r\n      description: resultCheckerStock && resultCheckerStock.length > 0 \r\n        ? `${resultCheckerStock.reduce((sum, item) => sum + item.available, 0)} PINs available` \r\n        : \"Instant BECE & WASSCE results\",\r\n      icon: () => (\r\n        <img\r\n          src={resultLogo}\r\n          alt=\"WAEC\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-green-400 to-green-600\",\r\n      badge: resultCheckerStock && resultCheckerStock.length > 0 \r\n        ? `${resultCheckerStock.reduce((sum, item) => sum + item.available, 0)} In Stock`\r\n        : null\r\n    },\r\n  ];\r\n\r\n  // Features for homepage\r\n  const features = [\r\n    {\r\n      id: \"instant-delivery\",\r\n      title: \"Instant Delivery\",\r\n      description: \"Get your data bundles delivered instantly after payment\",\r\n      icon: Zap,\r\n      color: \"bg-gradient-to-br from-yellow-400/10 to-orange-500/10\"\r\n    },\r\n    {\r\n      id: \"secured-payment\",\r\n      title: \"100% Secure Payment\",\r\n      description: \"Bank-grade security with encrypted transactions\",\r\n      icon: Shield,\r\n      color: \"bg-gradient-to-br from-green-400/10 to-green-600/10\"\r\n    },\r\n    {\r\n      id: \"customer-support\",\r\n      title: \"24/7 Support\",\r\n      description: \"Round-the-clock customer support for all your needs\",\r\n      icon: Headphones,\r\n      color: \"bg-gradient-to-br from-blue-400/10 to-blue-600/10\"\r\n    },\r\n    {\r\n      id: \"best-prices\",\r\n      title: \"Best Market Prices\",\r\n      description: \"Competitive pricing with exclusive agent discounts\",\r\n      icon: DollarSign,\r\n      color: \"bg-gradient-to-br from-purple-400/10 to-purple-600/10\"\r\n    },\r\n  ];\r\n\r\n  // Stats\r\n  const stats = [\r\n    { label: \"Happy Customers\", value: \"50K+\", icon: Users },\r\n    { label: \"Data Bundles Sold\", value: \"1M+\", icon: Smartphone },\r\n    { label: \"Success Rate\", value: \"99.9%\", icon: CheckCircle },\r\n    { label: \"Years of Service\", value: \"5+\", icon: Award },\r\n  ];\r\n\r\n  const getAgentCtaLink = () => {\r\n    if (!isAuthenticated || !user) return \"/agent/register\";\r\n    if (user.role === \"agent\" || user.role === \"dealer\" || user.role === \"super_dealer\") return \"/agent/dashboard\";\r\n    return \"/agent/register\";\r\n  };\r\n\r\n  const getAgentCtaText = () => {\r\n    if (!isAuthenticated || !user) return \"Become an Agent\";\r\n    if (user.role === \"agent\" || user.role === \"dealer\" || user.role === \"super_dealer\") return \"Go to Dashboard\";\r\n    return \"Become an Agent\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header />\r\n\r\n      <main>\r\n        {/* Hero Section */}\r\n        <Hero\r\n          title={\r\n            <span className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold text-center block\" style={{ fontFamily: \"'Arial Rounded MT Bold', 'Helvetica Rounded', Arial, sans-serif\" }}>\r\n              <span className=\"font-extrabold\">Your Trusted Platform for Digital</span>{\" \"}\r\n              <span className=\"text-blue-600 font-extrabold\">Products</span>\r\n            </span>\r\n          }\r\n          description=\"Purchase data bundles and WAEC result checkers instantly with secure payments and instant delivery.\"\r\n          primaryButton={{\r\n            text: \"Browse Products\",\r\n            href: \"/data-bundles\",\r\n            icon: ArrowRight,\r\n            size: \"sm\",\r\n            className: \"bg-yellow-500 hover:bg-yellow-600 dark:text-white text-black\"\r\n          }}\r\n          secondaryButton={{\r\n            text: \"Track Order\",\r\n            href: \"#track-orders\",\r\n            icon: Package,\r\n            size: \"sm\"\r\n          }}\r\n          images={bannerImages}\r\n          showNavigation={false}\r\n          background=\"gradient\"\r\n          size=\"lg\"\r\n        />\r\n\r\n        {/* Mobile-only watch button under hero */}\r\n        <section className=\"md:hidden py-4\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-sm mx-auto w-full\">\r\n              <WatchHowToPurchase triggerVariant=\"default\" triggerSize=\"sm\" className=\"w-full\" />\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Product Categories Section */}\r\n        <section id=\"products\" className=\"py-20\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"text-center mb-16\">\r\n              <Badge variant=\"outline\" className=\"mb-4\">Our Products</Badge>\r\n              <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">\r\n                Choose Your Network\r\n              </h2>\r\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                Select from our wide range of data bundles and result checkers from all major networks\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 md:gap-6\">\r\n              {productCategories.map((cat) => (\r\n                <Link key={cat.id} href={`/products/${cat.id}`}>\r\n                  <Card className=\"group h-full hover:shadow-xl transition-all duration-300 hover:-translate-y-1 dark:border-2 dark:border-white shadow-md bg-card aspect-square md:aspect-auto flex flex-col\">\r\n                    <CardContent className=\"p-2 md:p-2 text-center flex flex-col h-full\">\r\n                      {cat.badge && (\r\n                        <Badge variant=\"secondary\" className=\"mb-2 text-[10px] md:text-xs w-fit mx-auto\">\r\n                          {cat.badge}\r\n                        </Badge>\r\n                      )}\r\n                      <div className=\"w-full h-24 md:h-32 mx-auto mb-1 md:mb-1 flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\r\n                        <cat.icon />\r\n                      </div>\r\n                      <h3 className=\"font-semibold text-xs md:text-base lg:text-lg mb-0.5 md:mb-1 lg:mb-2 group-hover:text-primary transition-colors leading-tight\">\r\n                        {cat.title}\r\n                      </h3>\r\n                      <p className=\"text-[10px] md:text-xs lg:text-sm text-muted-foreground leading-tight md:leading-snug lg:leading-relaxed flex-grow\">\r\n                        {cat.description}\r\n                      </p>\r\n                      <div className=\"mt-2 md:mt-3 lg:mt-4 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                        <ArrowRight className=\"w-3 md:w-4 lg:w-5 h-3 md:h-4 lg:h-5 text-primary mx-auto\" />\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Stats Section - moved here */}\r\n            <Stats\r\n              stats={stats}\r\n            />\r\n          </div>\r\n        </section>\r\n\r\n        {/* Features Section */}\r\n        <Features\r\n          title=\"Experience Excellence\"\r\n          subtitle=\"Why Choose Us\"\r\n          description=\"We're committed to providing the best digital product experience with top-notch service\"\r\n          columns={4}\r\n          className=\"py-0\"\r\n          features={features}\r\n          variant=\"cards\"\r\n          background=\"muted\"\r\n        />\r\n\r\n        {/* Order Tracking Section */}\r\n        <section id=\"track-orders\" className=\"py-20\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-4xl mx-auto text-center\">\r\n              <Badge variant=\"outline\" className=\"mb-4\">Track Orders</Badge>\r\n              <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">\r\n                Never Lose Track\r\n              </h2>\r\n              <p className=\"text-lg text-muted-foreground mb-12 max-w-2xl mx-auto\">\r\n                Easily track your data bundle and result checker orders using your transaction ID or beneficiary phone number.\r\n              </p>\r\n              <OrderTracker />\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Agent CTA Section */}\r\n        <CTA\r\n          title=\"Start Your Own Business\"\r\n          subtitle=\"Become an Agent\"\r\n          description=\"Join thousands of successful agents earning commissions. Get your custom storefront and start selling digital products today.\"\r\n          primaryButton={{\r\n            text: getAgentCtaText(),\r\n            href: getAgentCtaLink(),\r\n            icon: ArrowRight\r\n          }}\r\n          background=\"gradient\"\r\n          size=\"lg\"\r\n        />\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\n// FormLabel without htmlFor for components like RadioGroup that don't have a single focusable element\r\nconst FormLabelWithoutFor = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabelWithoutFor.displayName = \"FormLabelWithoutFor\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormLabelWithoutFor,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { Loader2, Mail, Lock, Eye, EyeOff, ArrowLeft } from \"lucide-react\";\r\nimport { getAgentId, clearAgentStore } from \"@/lib/store-context\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nconst loginSchema = z.object({\r\n  email: z.string().email(\"Invalid email address\"),\r\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\r\n});\r\n\r\ntype LoginFormData = z.infer<typeof loginSchema>;\r\n\r\nexport default function LoginPage() {\r\n  const [, setLocation] = useLocation();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const { login, isLoginLoading, loginError, user, isLoading } = useAuth();\r\n  const { toast } = useToast();\r\n  const { theme } = useTheme();\r\n  const [hasRedirected, setHasRedirected] = useState(false);\r\n\r\n  const form = useForm<LoginFormData>({\r\n    resolver: zodResolver(loginSchema),\r\n    defaultValues: {\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n  });\r\n\r\n  // Navigate based on user role when user is loaded and auth is ready\r\n  useEffect(() => {\r\n    // Don't redirect while auth is still loading or if already redirected\r\n    if (isLoading || hasRedirected) {\r\n      return;\r\n    }\r\n\r\n    if (user) {\r\n      setHasRedirected(true);\r\n\r\n      if (user.role === \"admin\") {\r\n        console.log(\"Redirecting admin to /admin\");\r\n        setLocation(\"/admin\");\r\n      } else if (user.role === \"agent\") {\r\n        console.log(\"Redirecting agent to /agent/dashboard\");\r\n        setLocation(\"/agent/dashboard\");\r\n      } else if (user.role === \"dealer\") {\r\n        console.log(\"Redirecting dealer to /dealer/dashboard\");\r\n        setLocation(\"/dealer/dashboard\");\r\n      } else if (user.role === \"super_dealer\") {\r\n        console.log(\"Redirecting super dealer to /super-dealer/dashboard\");\r\n        setLocation(\"/super-dealer/dashboard\");\r\n      } else if (user.role === \"master\") {\r\n        console.log(\"Redirecting master to /master/dashboard\");\r\n        setLocation(\"/master/dashboard\");\r\n      } else if (user.role === \"user\") {\r\n        console.log(\"Redirecting user to /user/dashboard\");\r\n        setLocation(\"/user/dashboard\");\r\n      } else {\r\n        console.log(\"Redirecting user to /\");\r\n        setLocation(\"/\");\r\n      }\r\n    } else {\r\n      console.log(\"No user found, staying on login page\");\r\n    }\r\n  }, [user, isLoading, setLocation]);\r\n\r\n  const onSubmit = async (data: LoginFormData) => {\r\n    try {\r\n      const result = await login({ email: data.email, password: data.password });\r\n      if (!result.error) {\r\n        // Clear agent store context after successful login\r\n        clearAgentStore();\r\n        toast({\r\n          title: \"Welcome back!\",\r\n          description: \"You have successfully logged in.\",\r\n        });\r\n        // Note: Redirection is handled by the useEffect below based on user role from database\r\n      }\r\n    } catch (error) {\r\n      // Error is handled by the mutation\r\n    }\r\n  };\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <nav className=\"mb-6 px-2\">\r\n        <Link href={agentStore ? `/store/${agentStore}` : \"/\"} data-testid=\"link-back-home\">\r\n          <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Home\r\n          </Button>\r\n        </Link>\r\n      </nav>\r\n      \r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <div className=\"w-full max-w-md shadow-xl border-2 border-yellow-400 bg-white rounded-xl p-8\">\r\n            {isLoginLoading && (\r\n              <div className=\"absolute inset-0 bg-background flex items-center justify-center z-10 rounded-lg\">\r\n                <div className=\"flex flex-col items-center gap-2\">\r\n                  <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                  <p className=\"text-sm text-black dark:text-black\">Signing you in...</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          <div className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img\r\n                src={theme === \"dark\" ? logoDark : logoLight}\r\n                alt={APP_NAME}\r\n                className=\"h-8 w-auto\"\r\n              />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-black dark:text-black\">Welcome back</h2>\r\n            <p className=\"text-black dark:text-black\">\r\n              Sign in to your {APP_NAME} account\r\n            </p>\r\n          </div>\r\n        <div>\r\n          <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"email\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"text-black dark:text-black\">Email</FormLabel>\r\n                    <div className=\"relative\">\r\n                      <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <FormControl>\r\n                        <Input\r\n                          placeholder=\"you@example.com\"\r\n                          type=\"email\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-email\"\r\n                          name={field.name}\r\n                          autoComplete=\"email\"\r\n                          {...field}\r\n                        />\r\n                      </FormControl>\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"password\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"text-black dark:text-black\">Password</FormLabel>\r\n                    <div className=\"relative\">\r\n                      <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <FormControl>\r\n                        <Input\r\n                          placeholder=\"Enter your password\"\r\n                          type={showPassword ? \"text\" : \"password\"}\r\n                          className=\"pl-10 pr-10\"\r\n                          data-testid=\"input-password\"\r\n                          name={field.name}\r\n                          autoComplete=\"current-password\"\r\n                          {...field}\r\n                        />\r\n                      </FormControl>\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        className=\"absolute right-1 top-0 h-full px-3\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\r\n                        ) : (\r\n                          <Eye className=\"h-4 w-4 text-muted-foreground\" />\r\n                        )}\r\n                      </Button>\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                className=\"w-full\"\r\n                disabled={isLoginLoading}\r\n                data-testid=\"button-submit-login\"\r\n              >\r\n                {isLoginLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                Sign in\r\n              </Button>\r\n              {loginError && (\r\n                <div className=\"text-red-500 dark:text-red-400 text-sm mt-2\">\r\n                  {loginError}\r\n                </div>\r\n              )}\r\n            </form>\r\n          </Form>\r\n\r\n\r\n\r\n          <div className=\"mt-6 text-center text-sm\">\r\n            <span className=\"text-black dark:text-black\">Don't have an account? </span>\r\n            <Link href=\"/register\" className=\"text-primary hover:underline font-medium\" data-testid=\"link-register\">\r\n              Sign up\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"mt-4 text-center text-sm\">\r\n            <span className=\"text-black dark:text-black\">Want to become an agent? </span>\r\n            <Link href=\"/agent/register\" className=\"text-primary hover:underline font-medium\" data-testid=\"link-agent-register\">\r\n              Register as Agent\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Loader2, Mail, Lock, User, Phone, Eye, EyeOff, ArrowLeft } from \"lucide-react\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nconst registerSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  phone: z.string().optional(),\r\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\r\n  confirmPassword: z.string(),\r\n}).refine((data) => data.password === data.confirmPassword, {\r\n  message: \"Passwords don't match\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype RegisterFormData = z.infer<typeof registerSchema>;\r\n\r\nexport default function RegisterPage() {\r\n  const [, setLocation] = useLocation();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const { register, isRegisterLoading, registerError, user, isLoading } = useAuth();\r\n  const { toast } = useToast();\r\n  const { theme } = useTheme();\r\n\r\n  const form = useForm<RegisterFormData>({\r\n    resolver: zodResolver(registerSchema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n    },\r\n  });\r\n\r\n  // Navigate based on user role when user is loaded and auth is ready\r\n  useEffect(() => {\r\n    // Don't redirect while auth is still loading\r\n    if (isLoading) {\r\n      return;\r\n    }\r\n\r\n    if (user) {\r\n      const role = user.role;\r\n\r\n      // Only redirect normal users to user dashboard, not admins\r\n      if (role === \"admin\") {\r\n        // Admins shouldn't be registering, but if they somehow land here, redirect to admin\r\n        setLocation(\"/admin\");\r\n      } else if (role === \"agent\") {\r\n        setLocation(\"/agent\");\r\n      } else if (role === \"user\") {\r\n        // Regular users should go to user dashboard\r\n        setLocation(\"/user/dashboard\");\r\n      } else {\r\n        // Fallback to home\r\n        setLocation(\"/\");\r\n      }\r\n    }\r\n  }, [user, isLoading, setLocation]);\r\n\r\n  const onSubmit = async (data: RegisterFormData) => {\r\n    try {\r\n      const result = await register({ email: data.email, password: data.password, name: data.name });\r\n      \r\n      if (result?.error === \"Email confirmation required\") {\r\n        toast({\r\n          title: \"Check your email\",\r\n          description: \"Please click the confirmation link in your email to complete registration.\",\r\n        });\r\n        return;\r\n      }\r\n      \r\n      toast({\r\n        title: \"Account created!\",\r\n        description: \"Welcome to \" + APP_NAME,\r\n      });\r\n      // Note: Redirection is handled by the useEffect based on user role\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Registration failed\",\r\n        description: error.message || \"Something went wrong\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <nav className=\"mb-6 px-2\">\r\n        <Link href={agentStore ? `/store/${agentStore}` : \"/\"} data-testid=\"link-back-home\">\r\n          <Button variant=\"outline\" size=\"sm\" className=\"gap-2 text-black dark:text-white\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Home\r\n          </Button>\r\n        </Link>\r\n      </nav>\r\n      \r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <div className=\"w-full max-w-md shadow-xl border-2 border-yellow-400 bg-white dark:bg-black text-black dark:text-white rounded-xl p-8\" style={{ backgroundColor: theme === 'dark' ? '#000000' : undefined }}>\r\n          <div className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img\r\n                src={theme === \"dark\" ? logoDark : logoLight}\r\n                alt={APP_NAME}\r\n                className=\"h-8 w-auto\"\r\n              />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold\">Create an account</h2>\r\n            <p className=\"text-muted-foreground dark:text-gray-300\">\r\n              Join {APP_NAME} to purchase data bundles and result checkers\r\n            </p>\r\n          </div>\r\n        <div>\r\n          <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"name\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Full Name</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"John Doe\"\r\n                          className=\"pl-10\"\r\n                          autoComplete=\"name\"\r\n                          data-testid=\"input-name\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"email\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Email</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"you@example.com\"\r\n                          type=\"email\"\r\n                          autoComplete=\"email\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-email\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"phone\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Phone Number (optional)</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"0241234567\"\r\n                          autoComplete=\"tel\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-phone\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"password\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Password</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"Create a password\"\r\n                          type={showPassword ? \"text\" : \"password\"}\r\n                          autoComplete=\"new-password\"\r\n                          className=\"pl-10 pr-10\"\r\n                          data-testid=\"input-password\"\r\n                          {...field}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"absolute right-1 top-0 h-full px-3\"\r\n                          onClick={() => setShowPassword(!showPassword)}\r\n                        >\r\n                          {showPassword ? (\r\n                            <EyeOff className=\"h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          ) : (\r\n                            <Eye className=\"h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          )}\r\n                        </Button>\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"confirmPassword\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Confirm Password</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"Confirm your password\"\r\n                          type={showPassword ? \"text\" : \"password\"}\r\n                          autoComplete=\"new-password\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-confirm-password\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                className=\"w-full\"\r\n                disabled={isRegisterLoading}\r\n                data-testid=\"button-submit-register\"\r\n              >\r\n                {isRegisterLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            {registerError && (\r\n                              <div className=\"text-red-500 text-sm mt-2\">\r\n                                {registerError}\r\n                              </div>\r\n                            )}\r\n                Create account\r\n              </Button>\r\n            </form>\r\n          </Form>\r\n\r\n          <div className=\"mt-6 text-center text-sm\">\r\n            <span className=\"text-muted-foreground dark:text-gray-300\">Already have an account? </span>\r\n            <Link href=\"/login\" className=\"text-primary hover:underline font-medium\" data-testid=\"link-login\">\r\n              Sign in\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n","import { Badge } from \"@/components/ui/badge\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface NetworkBadgeProps {\r\n  network: string;\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  className?: string;\r\n}\r\n\r\nconst networkStyles: Record<string, { bg: string; text: string; border: string }> = {\r\n  mtn: {\r\n    bg: \"bg-yellow-100 dark:bg-yellow-900/30\",\r\n    text: \"text-yellow-800 dark:text-yellow-300\",\r\n    border: \"border-yellow-300 dark:border-yellow-700\",\r\n  },\r\n  telecel: {\r\n    bg: \"bg-red-100 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-300\",\r\n    border: \"border-red-300 dark:border-red-700\",\r\n  },\r\n  at_bigtime: {\r\n    bg: \"bg-red-100 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-300\",\r\n    border: \"border-red-300 dark:border-red-700\",\r\n  },\r\n  at_ishare: {\r\n    bg: \"bg-red-100 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-300\",\r\n    border: \"border-red-300 dark:border-red-700\",\r\n  },\r\n};\r\n\r\nconst networkLabels: Record<string, string> = {\r\n  mtn: \"MTN\",\r\n  telecel: \"TELECEL\",\r\n  at_bigtime: \"AT Bigtime\",\r\n  at_ishare: \"AT ishare\",\r\n};\r\n\r\nexport function NetworkBadge({ network, size = \"sm\", className }: NetworkBadgeProps) {\r\n  const styles = networkStyles[network.toLowerCase()] || {\r\n    bg: \"bg-gray-100 dark:bg-white\",\r\n    text: \"text-gray-800 dark:text-gray-300\",\r\n    border: \"border-gray-300 dark:border-gray-700\",\r\n  };\r\n\r\n  const sizeClasses = {\r\n    sm: \"text-xs px-2 py-0.5\",\r\n    md: \"text-sm px-3 py-1\",\r\n    lg: \"text-base px-4 py-1.5\",\r\n  };\r\n\r\n  return (\r\n    <Badge\r\n      variant=\"outline\"\r\n      className={cn(\r\n        \"font-semibold uppercase tracking-wide\",\r\n        styles.bg,\r\n        styles.text,\r\n        styles.border,\r\n        sizeClasses[size],\r\n        className\r\n      )}\r\n    >\r\n      {networkLabels[network.toLowerCase()] || network.toUpperCase()}\r\n    </Badge>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\r\nimport { Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst RadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Root\r\n      className={cn(\"grid gap-2\", className)}\r\n      {...props}\r\n      ref={ref}\r\n    />\r\n  )\r\n})\r\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\r\n\r\nconst RadioGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\r\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  )\r\n})\r\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\r\n\r\nexport { RadioGroup, RadioGroupItem }\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-white px-3 py-2 text-sm text-black ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-white text-black shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n","/**\r\n * Client-side Network Validation Utility\r\n * Validates phone numbers against Ghana mobile networks\r\n */\r\n\r\nexport enum GhanaNetwork {\r\n  MTN = \"mtn\",\r\n  TELECEL = \"telecel\",\r\n  AIRTELTIGO = \"airteltigo\",\r\n  AT_BIGTIME = \"at_bigtime\",\r\n  AT_ISHARE = \"at_ishare\",\r\n}\r\n\r\n// Network prefix mappings\r\nconst NETWORK_PREFIXES: Record<GhanaNetwork, string[]> = {\r\n  [GhanaNetwork.MTN]: [\"024\", \"025\", \"053\", \"054\", \"055\", \"059\"],\r\n  [GhanaNetwork.TELECEL]: [\"020\", \"050\"],\r\n  [GhanaNetwork.AIRTELTIGO]: [\"026\", \"027\", \"056\", \"057\"],\r\n  [GhanaNetwork.AT_BIGTIME]: [\"026\", \"027\", \"056\", \"057\"],\r\n  [GhanaNetwork.AT_ISHARE]: [\"026\", \"027\", \"056\", \"057\"],\r\n};\r\n\r\n/**\r\n * Normalizes a phone number\r\n */\r\nexport function normalizePhoneNumber(phone: string): string {\r\n  let normalized = phone.replace(/\\D/g, \"\");\r\n  \r\n  if (normalized.startsWith(\"233\")) {\r\n    normalized = \"0\" + normalized.substring(3);\r\n  }\r\n  \r\n  if (!normalized.startsWith(\"0\")) {\r\n    normalized = \"0\" + normalized;\r\n  }\r\n  \r\n  return normalized;\r\n}\r\n\r\n/**\r\n * Validates phone number length\r\n */\r\nexport function isValidPhoneLength(phone: string): boolean {\r\n  const normalized = normalizePhoneNumber(phone);\r\n  return normalized.length === 10;\r\n}\r\n\r\n/**\r\n * Detects network from phone number\r\n */\r\nexport function detectNetwork(phone: string): GhanaNetwork | null {\r\n  // Phone number prefix validation has been removed\r\n  // Always return null to indicate no network detection\r\n  return null;\r\n}\r\n\r\n/**\r\n * Gets network display name\r\n */\r\nexport function getNetworkDisplayName(network: string): string {\r\n  const names: Record<string, string> = {\r\n    mtn: \"MTN Ghana\",\r\n    telecel: \"Telecel\",\r\n    airteltigo: \"AirtelTigo\",\r\n    at_bigtime: \"AT Bigtime\",\r\n    at_ishare: \"AT ishare\",\r\n  };\r\n  \r\n  return names[network.toLowerCase()] || network.toUpperCase();\r\n}\r\n\r\n/**\r\n * Gets valid prefixes for a network\r\n */\r\nexport function getNetworkPrefixes(network: string): string[] {\r\n  return NETWORK_PREFIXES[network as GhanaNetwork] || [];\r\n}\r\n\r\n/**\r\n * Validates phone against expected network\r\n */\r\nexport function validatePhoneNetwork(\r\n  phone: string,\r\n  expectedNetwork: string\r\n): { isValid: boolean; error?: string } {\r\n  const normalized = normalizePhoneNumber(phone);\r\n  \r\n  if (!isValidPhoneLength(normalized)) {\r\n    return {\r\n      isValid: false,\r\n      error: \"Phone number must be exactly 10 digits (e.g., 0241234567)\",\r\n    };\r\n  }\r\n  \r\n  // Phone number prefix validation has been removed\r\n  // Always consider the number valid\r\n  return { isValid: true };\r\n}\r\n","import { useState } from \"react\";\r\nimport { useParams, useLocation } from \"wouter\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { PageLoader } from \"@/components/ui/loading-spinner\";\r\nimport { NetworkBadge } from \"@/components/products/network-badge\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, APP_NAME } from \"@/lib/constants\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { Phone, Mail, Loader2, ShieldCheck, Lock, CheckCircle, Wifi, Clock, FileCheck, CreditCard, AlertCircle } from \"lucide-react\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\n\r\nconst checkoutSchema = z.object({\r\n  customerPhone: z.string()\r\n    .min(10, \"Phone number must be exactly 10 digits\")\r\n    .max(10, \"Phone number must be exactly 10 digits\")\r\n    .regex(/^0[0-9]{9}$/, \"Phone number must start with 0 and be 10 digits (e.g., 0241234567)\"),\r\n  customerEmail: z.string().email(\"Invalid email\").optional().or(z.literal(\"\")),\r\n  paymentMethod: z.enum([\"paystack\"]).default(\"paystack\"),\r\n  providerId: z.string().optional(),\r\n});\r\n\r\ntype CheckoutFormData = z.infer<typeof checkoutSchema>;\r\n\r\ninterface CheckoutResult {\r\n  authorizationUrl: string;\r\n  reference: string;\r\n  accessCode: string;\r\n}\r\n\r\nexport default function CheckoutPage() {\r\n  const { productType, productId, year } = useParams<{ productType: string; productId: string; year?: string }>();\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  // Get agent slug from URL query parameters\r\n  const agentSlug = new URLSearchParams(window.location.search).get(\"agent\");\r\n\r\n  const isDataBundle = productType === \"data-bundle\";\r\n  const isResultChecker = productType === \"result-checker\";\r\n\r\n  const { data: bundle, isLoading: bundleLoading } = useQuery<DataBundle>({\r\n    queryKey: [`/api/products/data-bundles/${productId}`],\r\n    enabled: isDataBundle && !!productId,\r\n  });\r\n\r\n  const { data: checkerInfo, isLoading: checkerLoading } = useQuery<{ type: string; year: number; price: number; stock: number }>({\r\n    queryKey: [`/api/products/result-checkers/info/${productId}/${year}`],\r\n    enabled: isResultChecker && !!productId && !!year,\r\n  });\r\n\r\n  const price = isDataBundle \r\n    ? (bundle?.effective_price ? parseFloat(bundle.effective_price) : 0)\r\n    : (checkerInfo?.price ? parseFloat(String(checkerInfo.price)) : 0);\r\n\r\n  const form = useForm<CheckoutFormData>({\r\n    resolver: zodResolver(checkoutSchema),\r\n    defaultValues: {\r\n      customerPhone: user?.phone || \"\",\r\n      customerEmail: \"\",\r\n      paymentMethod: \"paystack\",\r\n    },\r\n  });\r\n\r\n  const initializePaymentMutation = useMutation({\r\n    mutationFn: async (data: CheckoutFormData) => {\r\n      // Pay with Paystack\r\n      const payload = {\r\n        productType: isDataBundle ? \"data_bundle\" : \"result_checker\",\r\n        productId: isResultChecker ? `${productId}-${year}` : productId,\r\n        customerPhone: data.customerPhone,\r\n        customerEmail: data.customerEmail || undefined,\r\n        agentSlug: agentSlug || undefined,\r\n      };\r\n\r\n      const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n      return response.json();\r\n    },\r\n    onSuccess: (data) => {\r\n      // Redirect to Paystack payment page\r\n      window.location.href = data.paymentUrl;\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      \r\n      toast({\r\n        title: \"❌ Payment Failed\",\r\n        description: `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: CheckoutFormData) => {\r\n    // Normalize phone number\r\n    const normalizedPhone = normalizePhoneNumber(data.customerPhone);\r\n    \r\n    // Validate phone against network for data bundles\r\n    if (isDataBundle && bundle) {\r\n      const validation = validatePhoneNetwork(normalizedPhone, bundle.network);\r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(bundle.network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: validation.error || `This bundle is for ${bundle.network.toUpperCase()} network. Valid prefixes: ${prefixes.join(\", \")}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    // Use normalized phone for the mutation\r\n    initializePaymentMutation.mutate({\r\n      ...data,\r\n      customerPhone: normalizedPhone,\r\n    });\r\n  };\r\n\r\n  const isLoading = bundleLoading || checkerLoading;\r\n  const product = isDataBundle ? bundle : checkerInfo;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1\">\r\n          <PageLoader text=\"Loading product...\" />\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full mx-4\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <h2 className=\"text-xl font-semibold mb-2\">Product Not Found</h2>\r\n              <p className=\"text-muted-foreground mb-4\">The product you're looking for doesn't exist or is no longer available.</p>\r\n              <Button onClick={() => setLocation(\"/\")}>Back to Products</Button>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-12 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-4xl\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-8\">\r\n            {/* Order Summary */}\r\n            <div className=\"lg:col-span-2 order-2 lg:order-1\">\r\n              <Card className=\"sticky top-24\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Order Summary</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  {isDataBundle && bundle && (\r\n                    <>\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <NetworkBadge network={bundle.network} size=\"md\" />\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-lg\" data-testid=\"text-product-name\">{bundle.name}</h3>\r\n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground mt-1\">\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Wifi className=\"h-4 w-4\" />\r\n                            <span>{bundle.dataAmount}</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Clock className=\"h-4 w-4\" />\r\n                            <span>{bundle.validity}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n\r\n                  {isResultChecker && checkerInfo && (\r\n                    <>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <FileCheck className=\"h-5 w-5 text-primary\" />\r\n                        <span className=\"font-medium uppercase\">{checkerInfo.type}</span>\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-lg\" data-testid=\"text-product-name\">\r\n                          {checkerInfo.type.toUpperCase()} Result Checker\r\n                        </h3>\r\n                        <p className=\"text-sm text-muted-foreground mt-1\">\r\n                          Year: {checkerInfo.year} &bull; {checkerInfo.stock} in stock\r\n                        </p>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n\r\n                  <Separator />\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-muted-foreground\">Subtotal</span>\r\n                    <span className=\"font-medium\">{formatCurrency(price!)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between text-lg font-bold\">\r\n                    <span>Total</span>\r\n                    <span className=\"text-primary\" data-testid=\"text-total-price\">{formatCurrency(price!)}</span>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground pt-4\">\r\n                    <Lock className=\"h-3 w-3\" />\r\n                    <span>Secured by Paystack</span>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Checkout Form */}\r\n            <div className=\"lg:col-span-3 order-1 lg:order-2\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle>Checkout</CardTitle>\r\n                  <CardDescription>\r\n                    Enter your details to complete the purchase\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                      {/* Payment Method Selection */}\r\n                      <FormField\r\n                        control={form.control}\r\n                        name=\"paymentMethod\"\r\n                        render={({ field }) => (\r\n                          <FormItem className=\"space-y-3\">\r\n                            <FormLabelWithoutFor>Payment Method</FormLabelWithoutFor>\r\n                            <FormControl>\r\n                              <RadioGroup\r\n                                onValueChange={field.onChange}\r\n                                value={field.value}\r\n                                className=\"grid gap-3\"\r\n                              >\r\n                                <div>\r\n                                  <RadioGroupItem\r\n                                    value=\"paystack\"\r\n                                    id=\"paystack\"\r\n                                    className=\"peer sr-only\"\r\n                                  />\r\n                                  <Label\r\n                                    className=\"flex items-center justify-between rounded-lg border-2 border-muted !bg-white p-4 hover:border-green-500 peer-data-[state=checked]:border-green-500 peer-data-[state=checked]:bg-green-50 cursor-pointer transition-all\"\r\n                                  >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                      <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                                      <div>\r\n                                        <div className=\"font-medium text-green-700\">Paystack</div>\r\n                                        <div className=\"text-sm text-green-600\">\r\n                                          Pay with card, bank transfer\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                    {field.value === \"paystack\" && (\r\n                                      <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                                    )}\r\n                                  </Label>\r\n                                </div>\r\n                              </RadioGroup>\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      {hasInsufficientBalance && form.watch(\"paymentMethod\") === \"wallet\" && (\r\n                        <Alert variant=\"default\" className=\"border-destructive/50 bg-white text-destructive\">\r\n                          <AlertCircle className=\"h-4 w-4\" />\r\n                          <AlertDescription className=\"text-sm\">\r\n                            <strong>Insufficient Balance:</strong> You need GH₵{(price - walletBalance).toFixed(2)} more. \r\n                            <a href=\"/user/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack below.\r\n                          </AlertDescription>\r\n                        </Alert>\r\n                      )}\r\n\r\n                      <FormField\r\n                        control={form.control}\r\n                        name=\"customerPhone\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Phone Number *</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                                <Input\r\n                                  placeholder=\"0241234567\"\r\n                                  autoComplete=\"tel\"\r\n                                  className=\"pl-10\"\r\n                                  data-testid=\"input-phone\"\r\n                                  {...field}\r\n                                />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>\r\n                              {isDataBundle && bundle ? (\r\n                                <span className=\"text-xs\">\r\n                                  For <strong>{bundle.network.toUpperCase()}</strong> network only. \r\n                                  Valid prefixes: <strong>{getNetworkPrefixes(bundle.network).join(\", \")}</strong>\r\n                                </span>\r\n                              ) : (\r\n                                \"We'll send the result checker PIN to this number\"\r\n                              )}\r\n                            </FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      {/* API Provider Selection - Only for admins on data bundle purchases */}\r\n                      {user?.role === \"admin\" && isDataBundle && providers && providers.length > 0 && (\r\n                        <FormField\r\n                          control={form.control}\r\n                          name=\"providerId\"\r\n                          render={({ field }) => (\r\n                            <FormItem>\r\n                              <FormLabel>API Provider</FormLabel>\r\n                              <Select onValueChange={field.onChange} value={field.value}>\r\n                                <FormControl>\r\n                                  <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Select API provider\" />\r\n                                  </SelectTrigger>\r\n                                </FormControl>\r\n                                <SelectContent>\r\n                                  {providers.map((provider: any) => (\r\n                                    <SelectItem key={provider.id} value={provider.id}>\r\n                                      {provider.name} {provider.isDefault ? \"(Default)\" : \"\"}\r\n                                    </SelectItem>\r\n                                  ))}\r\n                                </SelectContent>\r\n                              </Select>\r\n                              <FormDescription>\r\n                                Choose which external API provider to use for this transaction\r\n                              </FormDescription>\r\n                              <FormMessage />\r\n                            </FormItem>\r\n                          )}\r\n                        />\r\n                      )}\r\n\r\n                      <FormField\r\n                        control={form.control}\r\n                        name=\"customerEmail\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Email (optional)</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                                <Input\r\n                                  placeholder=\"you@example.com\"\r\n                                  type=\"email\"\r\n                                  autoComplete=\"email\"\r\n                                  className=\"pl-10\"\r\n                                  data-testid=\"input-email\"\r\n                                  {...field}\r\n                                />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>\r\n                              We'll send a receipt to this email\r\n                            </FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 flex items-start gap-3\">\r\n                        <ShieldCheck className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5\" />\r\n                        <div className=\"text-sm\">\r\n                          <p className=\"font-medium text-green-800 dark:text-green-300\">\r\n                            Secure Payment\r\n                          </p>\r\n                          <p className=\"text-green-700 dark:text-green-400\">\r\n                            Your payment is processed securely through Paystack. We never store your card details.\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <Button\r\n                        type=\"submit\"\r\n                        size=\"lg\"\r\n                        className=\"w-full gap-2\"\r\n                        disabled={isProcessing}\r\n                        data-testid=\"button-pay\"\r\n                      >\r\n                        {isProcessing ? (\r\n                          <>\r\n                            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            Pay {formatCurrency(price!)}\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    </form>\r\n                  </Form>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useLocation, useSearch } from \"wouter\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { PageLoader } from \"@/components/ui/loading-spinner\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { CheckCircle, XCircle, Clock, Copy, ArrowRight, Phone as PhoneIcon } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport type { Transaction } from \"@shared/schema\";\r\n\r\nexport default function CheckoutSuccessPage() {\r\n  const search = useSearch();\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const { user, isLoading: authLoading } = useAuth();\r\n  const params = new URLSearchParams(search);\r\n  const reference = params.get(\"reference\");\r\n  const paystackReference = params.get(\"trxref\"); // Paystack adds this\r\n  const paystackStatus = params.get(\"status\"); // Paystack payment status\r\n\r\n  // Function to get the return URL\r\n  const getReturnUrl = () => {\r\n    try {\r\n      const agentStorefront = localStorage.getItem(\"agentStorefront\");\r\n      if (agentStorefront) {\r\n        const { role, slug, network } = JSON.parse(agentStorefront);\r\n        localStorage.removeItem(\"agentStorefront\"); // Clear after reading\r\n        return `/store/${role}/${slug}/${network}`;\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Failed to parse agentStorefront:\", e);\r\n    }\r\n    return \"/\";\r\n  };\r\n\r\n  // Function to get dashboard URL based on user role\r\n  const getDashboardUrl = () => {\r\n    if (!user) return \"/\";\r\n    if (user.role === \"agent\" || user.role === \"dealer\" || user.role === \"super_dealer\") {\r\n      return `/${user.role}/dashboard`;\r\n    }\r\n    return \"/user/dashboard\";\r\n  };\r\n\r\n  // Determine if this was an agent storefront purchase\r\n  const isAgentStorefrontPurchase = () => {\r\n    try {\r\n      const agentStorefront = localStorage.getItem(\"agentStorefront\");\r\n      return !!agentStorefront;\r\n    } catch {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const [verificationComplete, setVerificationComplete] = useState(false);\r\n  const [paymentFailed, setPaymentFailed] = useState(paystackStatus === \"failed\" || paystackStatus === \"cancelled\");\r\n  const [autoDownloadTriggered, setAutoDownloadTriggered] = useState(false);\r\n\r\n  const { data: verifyResult } = useQuery<{ success: boolean; transaction: Transaction }>({\r\n    queryKey: [`/api/transactions/verify/${reference || paystackReference}`],\r\n    queryFn: async () => {\r\n      const response = await fetch(`/api/transactions/verify/${reference || paystackReference}`, {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Cache-Control': 'no-cache, no-store, must-revalidate',\r\n          'Pragma': 'no-cache',\r\n          'Expires': '0',\r\n        },\r\n        cache: 'no-store',\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n        throw new Error(errorData.error || errorData.message || `API request failed: ${response.status} ${response.statusText}`);\r\n      }\r\n      \r\n      return response.json();\r\n    },\r\n    enabled: !!(reference || paystackReference) && !paymentFailed,\r\n    retry: 1,\r\n    retryDelay: 1000,\r\n  });\r\n\r\n  // Mark verification as complete once we get data\r\n  useEffect(() => {\r\n    if (verifyResult) {\r\n      setVerificationComplete(true);\r\n      if (verifyResult.success === false) {\r\n        setPaymentFailed(true);\r\n      }\r\n    }\r\n  }, [verifyResult]);\r\n\r\n  const transaction = verifyResult?.transaction;\r\n\r\n  // Auto-download result checker PDF when verification completes\r\n  useEffect(() => {\r\n    console.log(\"=== Auto-download effect triggered ===\");\r\n    console.log(\"hasTransaction:\", !!transaction);\r\n    console.log(\"verificationComplete:\", verificationComplete);\r\n    console.log(\"authLoading:\", authLoading);\r\n    console.log(\"hasUser:\", !!user);\r\n    console.log(\"transactionType:\", transaction?.type);\r\n    console.log(\"transactionId:\", transaction?.id);\r\n    console.log(\"autoDownloadTriggered:\", autoDownloadTriggered);\r\n\r\n    // Remove user requirement - rely on credentials in the request\r\n    if (\r\n      transaction &&\r\n      verificationComplete &&\r\n      transaction.type === \"result_checker\" &&\r\n      transaction.id &&\r\n      !autoDownloadTriggered\r\n    ) {\r\n      console.log(\"✅ All conditions met! Triggering auto-download for result checker\");\r\n      setAutoDownloadTriggered(true);\r\n      \r\n      // Auto-download after a brief delay for better UX\r\n      const timer = setTimeout(async () => {\r\n        try {\r\n          console.log(\"🔍 Fetching PDF for guest download...\");\r\n          \r\n          // Use guest-accessible endpoint with transaction reference\r\n          // No authentication required - validates via reference\r\n          const response = await fetch(`/api/result-checker/download/${transaction.reference}`, {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n            headers: {\r\n              'Content-Type': 'application/pdf',\r\n            },\r\n          });\r\n\r\n          if (!response.ok) {\r\n            console.warn(\"PDF not ready yet, status:\", response.status);\r\n            const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n            console.error(\"PDF error:\", errorData);\r\n            \r\n            toast({\r\n              title: \"PDF Not Ready\",\r\n              description: errorData.error || \"Please click the download button manually\",\r\n              variant: \"destructive\",\r\n            });\r\n            return;\r\n          }\r\n\r\n          // Get the PDF blob\r\n          const blob = await response.blob();\r\n          \r\n          // Create download link\r\n          const url = window.URL.createObjectURL(blob);\r\n          const link = document.createElement('a');\r\n          link.href = url;\r\n          link.download = `${transaction.productName.replace(/\\s+/g, '-')}-${transaction.reference}.pdf`;\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          document.body.removeChild(link);\r\n          \r\n          // Clean up\r\n          window.URL.revokeObjectURL(url);\r\n          \r\n          toast({\r\n            title: \"Download Started\",\r\n            description: \"Your result checker credentials are downloading\",\r\n          });\r\n          \r\n          console.log(\"📥 Auto-download triggered successfully\");\r\n        } catch (error) {\r\n          console.error(\"Auto-download failed:\", error);\r\n          toast({\r\n            title: \"Auto-download Failed\",\r\n            description: \"Please click the download button manually\",\r\n            variant: \"destructive\",\r\n          });\r\n        }\r\n      }, 2000); // Increased delay to allow auth to settle\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [transaction, verificationComplete, autoDownloadTriggered, toast]);\r\n\r\n  // Show loading while authentication is being restored\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <PageLoader />\r\n              <h2 className=\"text-xl font-semibold mb-2 mt-4\">Restoring Session</h2>\r\n              <p className=\"text-muted-foreground\">Please wait while we verify your authentication...</p>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast({\r\n      title: \"Copied!\",\r\n      description: \"Details copied to clipboard\",\r\n    });\r\n  };\r\n\r\n  if (!reference && !paystackReference) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <XCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">Invalid Request</h2>\r\n              <p className=\"text-muted-foreground mb-4\">No transaction reference provided.</p>\r\n              <Button onClick={() => {\r\n                const agentStore = localStorage.getItem(\"agentStore\");\r\n                setLocation(agentStore ? `/store/agent/${agentStore}` : \"/\");\r\n              }} data-testid=\"button-go-home\">\r\n                {localStorage.getItem(\"agentStore\") ? \"Back to Store\" : \"Go to Home\"}\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show payment failed state if Paystack indicates failure\r\n  if (paymentFailed) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <XCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">Payment {paystackStatus === \"cancelled\" ? \"Cancelled\" : \"Failed\"}</h2>\r\n              <p className=\"text-muted-foreground mb-4\">\r\n                {paystackStatus === \"cancelled\" \r\n                  ? \"You cancelled the payment. No charges were made to your account.\"\r\n                  : \"Your payment could not be processed. Please try again.\"}\r\n              </p>\r\n              <div className=\"flex flex-col gap-2\">\r\n                <Button onClick={() => {\r\n                  const agentStore = localStorage.getItem(\"agentStore\");\r\n                  setLocation(agentStore ? `/store/agent/${agentStore}` : \"/\");\r\n                }}>\r\n                  {localStorage.getItem(\"agentStore\") ? \"Back to Store\" : \"Go to Home\"}\r\n                </Button>\r\n                <Button variant=\"outline\" onClick={() => window.history.back()}>\r\n                  Try Again\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show success immediately and verify in background\r\n  const statusConfig = {\r\n    completed: {\r\n      icon: CheckCircle,\r\n      color: \"text-white\",\r\n      bgColor: \"bg-green-500 dark:bg-green-600\",\r\n      title: \"Payment Successful!\",\r\n      description: verificationComplete ? \"Your transaction has been completed successfully.\" : \"Verifying transaction...\",\r\n    },\r\n    pending: {\r\n      icon: Clock,\r\n      color: \"text-white\",\r\n      bgColor: \"bg-orange-500 dark:bg-orange-600\",\r\n      title: \"Payment Processing\",\r\n      description: \"Your payment is being processed. Please wait...\",\r\n    },\r\n    failed: {\r\n      icon: XCircle,\r\n      color: \"text-white\",\r\n      bgColor: \"bg-red-500 dark:bg-red-600\",\r\n      title: \"Payment Failed\",\r\n      description: \"Your payment could not be processed. Please try again.\",\r\n    },\r\n  };\r\n\r\n  // Determine effective status based on transaction type\r\n  let effectiveStatus: keyof typeof statusConfig;\r\n  \r\n  if (transaction?.type === \"data_bundle\" && transaction?.paymentStatus === \"paid\") {\r\n    // Data bundles: show success when payment is confirmed even if delivery is pending\r\n    effectiveStatus = \"completed\";\r\n  } else if (transaction?.type === \"result_checker\" && transaction?.paymentStatus === \"paid\") {\r\n    // Result checkers: show success when payment is confirmed and item is marked as completed\r\n    effectiveStatus = transaction.status === \"completed\" ? \"completed\" : \"pending\";\r\n  } else {\r\n    // Default: use actual transaction status\r\n    effectiveStatus = (transaction?.status as keyof typeof statusConfig) || (paystackStatus === \"success\" ? \"completed\" : \"pending\");\r\n  }\r\n  \r\n  const status = effectiveStatus;\r\n  const config = statusConfig[status];\r\n  const StatusIcon = config.icon;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-12 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-lg\">\r\n          <Card>\r\n            <CardHeader className=\"text-center\">\r\n              <div className={`flex h-16 w-16 items-center justify-center rounded-full ${config.bgColor} mx-auto mb-4`}>\r\n                <StatusIcon className={`h-8 w-8 ${config.color}`} />\r\n              </div>\r\n              <CardTitle className=\"text-2xl\" data-testid=\"text-status-title\">{config.title}</CardTitle>\r\n              <CardDescription>{config.description}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              {!verificationComplete && (\r\n                <div className=\"bg-blue-500 dark:bg-blue-600 rounded-lg p-4 flex items-center gap-3\">\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\r\n                  <p className=\"text-sm text-white font-medium\">Verifying transaction details...</p>\r\n                </div>\r\n              )}\r\n              {transaction && (\r\n                <>\r\n                  <div className=\"bg-slate-700 dark:bg-slate-800 rounded-lg p-4 space-y-3\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Transaction ID</span>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-xs font-mono text-white\" data-testid=\"text-transaction-id\">{transaction.id}</span>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-6 w-6 text-white hover:bg-white/20\"\r\n                          onClick={() => copyToClipboard(transaction.id)}\r\n                        >\r\n                          <Copy className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Reference</span>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-sm font-mono text-white\" data-testid=\"text-reference\">{transaction.reference}</span>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-6 w-6 text-white hover:bg-white/20\"\r\n                          onClick={() => copyToClipboard(transaction.reference)}\r\n                        >\r\n                          <Copy className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Product</span>\r\n                      <span className=\"text-sm font-medium text-white\" data-testid=\"text-product\">{transaction.productName}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Amount</span>\r\n                      <span className=\"text-sm font-medium text-white\" data-testid=\"text-amount\">{formatCurrency(transaction.amount)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Phone</span>\r\n                      <span className=\"text-sm font-medium text-white\">{transaction.customerPhone}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Date</span>\r\n                      <span className=\"text-sm text-white\">{formatDate(transaction.createdAt)}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Bulk Order Phone Numbers */}\r\n                  {(transaction as any).isBulkOrder && (transaction as any).phoneNumbers && (\r\n                    <div className=\"bg-blue-500 dark:bg-blue-600 rounded-lg p-4\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <h4 className=\"font-semibold text-white flex items-center gap-2\">\r\n                          <PhoneIcon className=\"h-4 w-4\" />\r\n                          Bulk Order Recipients ({((transaction as any).phoneNumbers as string[]).length})\r\n                        </h4>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          className=\"h-7 text-xs\"\r\n                          onClick={() => copyToClipboard(((transaction as any).phoneNumbers as string[]).join('\\n'))}\r\n                        >\r\n                          <Copy className=\"h-3 w-3 mr-1\" />\r\n                          Copy All\r\n                        </Button>\r\n                      </div>\r\n                      <div className=\"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto\">\r\n                        {((transaction as any).phoneNumbers as string[]).map((phone: string, idx: number) => (\r\n                          <div key={idx} className=\"flex items-center gap-2 text-sm text-blue-900 dark:text-white bg-white dark:bg-blue-700 rounded px-2 py-1\">\r\n                            <span className=\"text-xs text-muted-foreground\">{idx + 1}.</span>\r\n                            <code className=\"font-mono\">{phone}</code>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {transaction.status === \"completed\" && transaction.type === \"result_checker\" && (\r\n                    <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\">\r\n                      <h4 className=\"font-semibold text-green-800 dark:text-green-300 mb-3\">Download Your Result Checker</h4>\r\n                      <p className=\"text-sm text-green-700 dark:text-green-400 mb-3\">\r\n                        Your result checker has been purchased successfully. Download your PDF credentials below.\r\n                      </p>\r\n                      <Button\r\n                        onClick={async () => {\r\n                          try {\r\n                            // Use guest-accessible endpoint with transaction reference\r\n                            // No authentication required\r\n                            const response = await fetch(`/api/result-checker/download/${transaction.reference}`, {\r\n                              method: 'GET',\r\n                              credentials: 'include',\r\n                              headers: {\r\n                                'Content-Type': 'application/pdf',\r\n                              },\r\n                            });\r\n                            \r\n                            if (!response.ok) {\r\n                              const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n                              throw new Error(errorData.error || `Failed to download PDF: ${response.status}`);\r\n                            }\r\n                            \r\n                            // Get the PDF blob\r\n                            const blob = await response.blob();\r\n                            \r\n                            // Create download link\r\n                            const url = window.URL.createObjectURL(blob);\r\n                            const link = document.createElement('a');\r\n                            link.href = url;\r\n                            link.download = `${transaction.productName.replace(/\\s+/g, '-')}-${transaction.reference}.pdf`;\r\n                            document.body.appendChild(link);\r\n                            link.click();\r\n                            document.body.removeChild(link);\r\n                            \r\n                            // Clean up\r\n                            window.URL.revokeObjectURL(url);\r\n                            \r\n                            toast({\r\n                              title: \"✅ Downloaded\",\r\n                              description: \"Your PDF credentials have been downloaded successfully\",\r\n                            });\r\n                          } catch (error: any) {\r\n                            console.error(\"PDF Download error:\", error);\r\n                            toast({\r\n                              title: \"❌ Download Failed\",\r\n                              description: error.message || \"Failed to download PDF. Please contact support.\",\r\n                              variant: \"destructive\",\r\n                            });\r\n                          }\r\n                        }}\r\n                        className=\"w-full gap-2 bg-green-400 hover:bg-green-300 text-black border-2 border-green-400 font-semibold\"\r\n                        data-testid=\"button-download-pdf\"\r\n                      >\r\n                        <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                        </svg>\r\n                        Download PDF Credentials\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {status === \"completed\" && transaction.type === \"data_bundle\" && (\r\n                    <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\">\r\n                      <h4 className=\"font-semibold text-green-800 dark:text-green-300 mb-2 flex items-center gap-2\">\r\n                        <CheckCircle className=\"h-4 w-4\" />\r\n                        Order Placed Successfully\r\n                      </h4>\r\n                      <p className=\"text-sm text-green-700 dark:text-green-400\">\r\n                        Your data bundle order for <strong>{transaction.customerPhone}</strong> has been placed with our provider.\r\n                        {transaction.deliveryStatus === \"processing\" && (\r\n                          <span className=\"block mt-1\">\r\n                            ⏳ Delivery in progress - you will receive an SMS confirmation shortly.\r\n                          </span>\r\n                        )}\r\n                        {transaction.deliveryStatus === \"delivered\" && (\r\n                          <span className=\"block mt-1\">\r\n                            ✓ Delivered! Check your phone for confirmation.\r\n                          </span>\r\n                        )}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                {isAgentStorefrontPurchase() ? (\r\n                  <Button onClick={() => setLocation(getReturnUrl())} className=\"gap-2 flex-1\" variant=\"outline\" data-testid=\"button-continue-shopping\">\r\n                    Continue Shopping\r\n                    <ArrowRight className=\"h-4 w-4\" />\r\n                  </Button>\r\n                ) : (\r\n                  <Button onClick={() => setLocation(getDashboardUrl())} className=\"gap-2 flex-1\" variant=\"outline\" data-testid=\"button-continue-dashboard\">\r\n                    Back to Dashboard\r\n                    <ArrowRight className=\"h-4 w-4\" />\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Loader2, CheckCircle, XCircle, Wallet } from \"lucide-react\";\r\n\r\ninterface WalletTopupVerifyResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  amount?: number;\r\n  newBalance?: number;\r\n}\r\n\r\ninterface WalletTopupSuccessViewProps {\r\n  reference: string | null;\r\n  agent: any;\r\n  authLoading: boolean;\r\n  attempts: number;\r\n  query: {\r\n    data?: WalletTopupVerifyResponse;\r\n    isLoading: boolean;\r\n    isError: boolean;\r\n  };\r\n  setLocation: (path: string) => void;\r\n}\r\n\r\nexport function WalletTopupSuccessView({\r\n  reference,\r\n  agent,\r\n  authLoading,\r\n  attempts,\r\n  query,\r\n  setLocation,\r\n}: WalletTopupSuccessViewProps) {\r\n  const { data: verificationResult, isLoading, isError } = query;\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">\r\n                Restoring Session\r\n              </h2>\r\n              <p className=\"text-muted-foreground\">\r\n                Please wait while we verify your authentication.\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!reference) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2 text-destructive\">\r\n                <XCircle className=\"h-6 w-6\" />\r\n                Invalid Request\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <p className=\"text-muted-foreground mb-4\">\r\n                No transaction reference was found.\r\n              </p>\r\n              <Button\r\n                onClick={() => setLocation(\"/user/wallet\")}\r\n                className=\"w-full\"\r\n              >\r\n                Go to Wallet\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading || (!verificationResult && attempts < 10)) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                Verifying Payment\r\n              </CardTitle>\r\n              <CardDescription>\r\n                Attempt {attempts + 1} of 10\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <p className=\"text-muted-foreground\">\r\n                Please wait while we confirm your payment.\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isError || !verificationResult?.success) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full border-destructive/50\">\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2 text-destructive\">\r\n                <XCircle className=\"h-6 w-6\" />\r\n                Payment Verification Failed\r\n              </CardTitle>\r\n              <CardDescription>\r\n                Reference: {reference}\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <p className=\"text-muted-foreground\">\r\n                {verificationResult?.message ??\r\n                  \"We could not verify your payment.\"}\r\n              </p>\r\n\r\n              <Button\r\n                className=\"w-full\"\r\n                onClick={() =>\r\n                  agent\r\n                    ? setLocation(\"/agent/wallet\")\r\n                    : setLocation(\"/user/wallet\")\r\n                }\r\n              >\r\n                Check Wallet\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * SUCCESS\r\n   */\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header />\r\n      <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n        <Card className=\"max-w-md w-full\">\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2 text-green-600\">\r\n              <CheckCircle className=\"h-6 w-6\" />\r\n              Top-up Successful\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Your wallet has been credited\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"bg-green-500 text-white border border-green-600 rounded-lg p-4\">\r\n              <div className=\"flex justify-between\">\r\n                <span>Amount Added</span>\r\n                <span className=\"font-bold\">\r\n                  GH₵{verificationResult.amount}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span>New Balance</span>\r\n                <span className=\"font-bold\">\r\n                  GH₵{verificationResult.newBalance}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"w-full\"\r\n              onClick={() =>\r\n                agent\r\n                  ? setLocation(\"/agent/dashboard\")\r\n                  : setLocation(\"/user/dashboard\")\r\n              }\r\n            >\r\n              <Wallet className=\"w-4 h-4 mr-2\" />\r\n              Continue\r\n            </Button>\r\n\r\n            <p className=\"text-xs text-center text-muted-foreground\">\r\n              Reference: {reference}\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useEffect, useState } from \"react\";\r\nimport { useLocation, useSearch } from \"wouter\";\r\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { WalletTopupSuccessView } from \"./WalletTopupSuccessView\";\r\n\r\ninterface WalletTopupVerifyResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  amount?: number;\r\n  newBalance?: number;\r\n}\r\n\r\nexport function WalletTopupSuccessContainer() {\r\n  const [, setLocation] = useLocation();\r\n  const searchParams = new URLSearchParams(useSearch());\r\n  const reference = searchParams.get(\"reference\");\r\n\r\n  const { agent, isLoading: authLoading } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  const [attempts, setAttempts] = useState(0);\r\n\r\n  const query = useQuery<WalletTopupVerifyResponse>({\r\n    queryKey: reference\r\n      ? [\"wallet-topup-verify\", reference]\r\n      : [\"wallet-topup-missing-ref\"],\r\n    queryFn: async (): Promise<WalletTopupVerifyResponse> => {\r\n      return apiRequest(`/api/wallet/topup/verify/${reference}`, {\r\n        disableAutoLogout: true,\r\n      });\r\n    },\r\n    enabled: Boolean(reference) && !authLoading && attempts < 10,\r\n    refetchInterval: (query) => (query.state.data?.success ? false : 3000),\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!query.data || query.data.success || attempts >= 10) return;\r\n    setAttempts((a) => a + 1);\r\n  }, [query.data]);\r\n\r\n  useEffect(() => {\r\n    if (query.data?.success) {\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/user/stats\"],\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/auth/me\"],\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/agent/transactions\"],\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/agent/wallet\"],\r\n      });\r\n    }\r\n  }, [query.data, queryClient]);\r\n\r\n  return (\r\n    <WalletTopupSuccessView\r\n      reference={reference}\r\n      agent={agent}\r\n      authLoading={authLoading}\r\n      attempts={attempts}\r\n      query={query}\r\n      setLocation={setLocation}\r\n    />\r\n  );\r\n}","import { WalletTopupSuccessContainer } from \"./WalletTopupSuccessContainer\";\r\n\r\nexport default function WalletTopupSuccessPage() {\r\n  return <WalletTopupSuccessContainer />;\r\n}\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-white px-3 py-2 text-base text-black ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n","import { useState, useMemo } from \"react\";\r\nimport { Link } from \"wouter\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { Loader2, Mail, Lock, User, Phone, Store, Link2, Eye, EyeOff, ArrowLeft, AlertCircle, CheckCircle2, Info, Copy } from \"lucide-react\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nconst agentRegisterSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  phone: z.string().min(10, \"Phone must be at least 10 digits\"),\r\n  password: z.string().min(8, \"Password must be at least 8 characters\"),\r\n  confirmPassword: z.string(),\r\n  businessName: z.string().min(2, \"Business name is required\"),\r\n  storefrontSlug: z.string()\r\n    .min(3, \"URL must be at least 3 characters\")\r\n    .regex(/^[a-z0-9-]+$/, \"Only lowercase letters, numbers, and hyphens\"),\r\n  businessDescription: z.string().optional(),\r\n  agreedToTerms: z.boolean().refine((val) => val === true, {\r\n    message: \"You must agree to the terms and conditions\",\r\n  }),\r\n}).refine((data) => data.password === data.confirmPassword, {\r\n  message: \"Passwords don't match\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype AgentRegisterFormData = z.infer<typeof agentRegisterSchema>;\r\n\r\nexport default function AgentRegisterPage() {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showInfoDialog, setShowInfoDialog] = useState(() => {\r\n    // Only show dialog if user hasn't dismissed it before\r\n    if (typeof window !== 'undefined') {\r\n      const hasSeenDialog = localStorage.getItem('agent-info-dialog-seen');\r\n      return !hasSeenDialog;\r\n    }\r\n    return true;\r\n  });\r\n  const { toast } = useToast();\r\n  const { theme } = useTheme();\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast({\r\n      title: \"Copied!\",\r\n      description: \"URL copied to clipboard\",\r\n    });\r\n  };\r\n\r\n  const form = useForm<AgentRegisterFormData>({\r\n    resolver: zodResolver(agentRegisterSchema),\r\n    mode: 'onSubmit', // Only validate on submit to reduce re-renders\r\n    defaultValues: {\r\n      name: \"\",\r\n      email: typeof window !== 'undefined' ? new URLSearchParams(window.location.search).get('email') || '' : '',\r\n      phone: \"\",\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n      businessName: \"\",\r\n      storefrontSlug: \"\",\r\n      businessDescription: \"\",\r\n      agreedToTerms: false,\r\n    },\r\n  });\r\n\r\n  const registerMutation = useMutation({\r\n    mutationFn: async (data: AgentRegisterFormData) => {\r\n      const result = await apiRequest(\"POST\", \"/api/agent/register\", data);\r\n      return result as {\r\n        message: string;\r\n        paymentUrl: string;\r\n        paymentReference: string;\r\n        amount: number;\r\n      };\r\n    },\r\n    onSuccess: (data) => {\r\n      // Redirect to Paystack payment\r\n      if (data.paymentUrl) {\r\n        toast({\r\n          title: \"Registration successful!\",\r\n          description: \"Redirecting to payment...\",\r\n        });\r\n        // Redirect to Paystack payment page\r\n        window.location.href = data.paymentUrl;\r\n      } else {\r\n        toast({\r\n          title: \"Registration failed\",\r\n          description: \"Payment initialization failed\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      console.error(\"Mutation error:\", error);\r\n      // Check if it's a rate limit error\r\n      if (error.message && error.message.includes('rate limit')) {\r\n        toast({\r\n          title: \"Too Many Attempts\",\r\n          description: error.message || \"You've exceeded the registration attempt limit. Please wait a few minutes before trying again.\",\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n      } else {\r\n        toast({\r\n          title: \"Registration failed\",\r\n          description: error.message || \"Something went wrong\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: AgentRegisterFormData) => {\r\n    registerMutation.mutate(data);\r\n  };\r\n\r\n  const handleInfoDialogChange = (open: boolean) => {\r\n    setShowInfoDialog(open);\r\n    if (!open && typeof window !== 'undefined') {\r\n      // Remember that user has seen the dialog\r\n      localStorage.setItem('agent-info-dialog-seen', 'true');\r\n    }\r\n  };\r\n  \r\n  // Memoize the origin to prevent re-computation on every render\r\n  const siteOrigin = useMemo(() => typeof window !== 'undefined' ? window.location.origin : '', []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <nav className=\"mb-6 px-2\">\r\n        <Link href={typeof window !== \"undefined\" && getAgentId() ? `/store/${getAgentId()}` : \"/\"} data-testid=\"link-back-home\">\r\n          <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Home\r\n          </Button>\r\n        </Link>\r\n      </nav>\r\n      \r\n      <Dialog open={showInfoDialog} onOpenChange={handleInfoDialogChange}>\r\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-black\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-xl text-white\">\r\n              <Info className=\"h-6 w-6 text-blue-600\" />\r\n              Important Information for Agents\r\n            </DialogTitle>\r\n            <DialogDescription className=\"sr-only\">\r\n              Read important information about agent registration and activation requirements\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-blue-900\">Activation Fee</p>\r\n                  <p className=\"text-sm text-blue-800\">A one-time payment of <strong>GH₵60.00</strong> is required to activate your agent account.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-green-50 rounded-lg border border-green-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-green-900\">Instant Activation</p>\r\n                  <p className=\"text-sm text-green-800\">Your account will be automatically activated once payment is confirmed.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-purple-50 rounded-lg border border-purple-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-purple-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-purple-900\">Commission Structure</p>\r\n                  <p className=\"text-sm text-purple-800\">Earn competitive commissions on every transaction you process.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-indigo-50 rounded-lg border border-indigo-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-indigo-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-indigo-900\">Your Storefront</p>\r\n                  <p className=\"text-sm text-indigo-800\">Get a personalized storefront URL to share with your customers.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-cyan-50 rounded-lg border border-cyan-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-cyan-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-cyan-900\">Payment Methods</p>\r\n                  <p className=\"text-sm text-cyan-800\">Accept payments via Mobile Money, Cards, and Bank transfers.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-orange-50 rounded-lg border border-orange-200\">\r\n                <AlertCircle className=\"h-5 w-5 text-orange-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-orange-900\">Requirements</p>\r\n                  <p className=\"text-sm text-orange-800\">Valid phone number, email address, and business information.</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <DialogFooter>\r\n            <Button \r\n              onClick={() => setShowInfoDialog(false)}\r\n              className=\"w-full sm:w-auto\"\r\n            >\r\n              I Understand, Proceed to Registration\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <div className=\"w-full max-w-4xl\">\r\n          <Card className=\"w-full shadow-xl border-2 border-yellow-400\">\r\n            <CardHeader className=\"text-center space-y-2\">\r\n              <div className=\"flex justify-center mb-4\">\r\n                <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-12 w-auto\" />\r\n              </div>\r\n              <CardTitle className=\"text-2xl font-bold\">Become an Agent</CardTitle>\r\n              <CardDescription>\r\n                Create your {APP_NAME} agent account and start earning\r\n              </CardDescription>\r\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-4\">\r\n                <p className=\"text-sm font-semibold text-yellow-900\">Activation Fee: GH₵60.00</p>\r\n                <p className=\"text-xs text-yellow-700 mt-1\">Payment required after registration</p>\r\n              </div>\r\n            </CardHeader>\r\n        <CardContent>\r\n          <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"name\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Full Name</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input placeholder=\"John Doe\" autoComplete=\"name\" className=\"pl-10\" data-testid=\"input-name\" {...field} />\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"phone\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Phone Number</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input placeholder=\"0241234567\" autoComplete=\"tel\" className=\"pl-10\" data-testid=\"input-phone\" {...field} />\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </div>\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"email\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Email</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input placeholder=\"you@example.com\" type=\"email\" autoComplete=\"email\" className=\"pl-10\" data-testid=\"input-email\" {...field} />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"businessName\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Business Name</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Store className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input placeholder=\"My Data Store\" className=\"pl-10\" data-testid=\"input-business\" {...field} />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"storefrontSlug\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Storefront URL</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Link2 className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input placeholder=\"my-store\" className=\"pl-10\" data-testid=\"input-slug\" {...field} />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormDescription>\r\n                      {field.value && (\r\n                        <div className=\"flex items-center gap-2 text-xs\">\r\n                          <span>\r\n                            Your store: {siteOrigin}/store/agent/<strong>{field.value}</strong>\r\n                          </span>\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-6 w-6 p-0\"\r\n                            onClick={() => copyToClipboard(`${siteOrigin}/store/agent/${field.value}`)}\r\n                          >\r\n                            <Copy className=\"h-3 w-3\" />\r\n                          </Button>\r\n                        </div>\r\n                      )}\r\n                    </FormDescription>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"businessDescription\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Business Description (optional)</FormLabel>\r\n                    <FormControl>\r\n                      <Textarea placeholder=\"Tell customers about your business...\" className=\"resize-none\" data-testid=\"input-description\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"password\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Password</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input type={showPassword ? \"text\" : \"password\"} autoComplete=\"new-password\" className=\"pl-10 pr-10\" data-testid=\"input-password\" {...field} />\r\n                          <Button type=\"button\" variant=\"ghost\" size=\"icon\" className=\"absolute right-0 top-0 h-full px-3\" onClick={() => setShowPassword(!showPassword)}>\r\n                            {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                          </Button>\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"confirmPassword\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Confirm Password</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input type={showPassword ? \"text\" : \"password\"} autoComplete=\"new-password\" className=\"pl-10\" data-testid=\"input-confirm\" {...field} />\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </div>\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"agreedToTerms\"\r\n                render={({ field }) => (\r\n                  <FormItem className=\"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4\">\r\n                    <FormControl>\r\n                      <Checkbox\r\n                        checked={field.value}\r\n                        onCheckedChange={field.onChange}\r\n                        data-testid=\"checkbox-terms\"\r\n                      />\r\n                    </FormControl>\r\n                    <div className=\"space-y-1 leading-none\">\r\n                      <FormLabel className=\"text-sm font-medium\">\r\n                        I agree to pay the GH₵60.00 activation fee and accept the terms and conditions\r\n                      </FormLabel>\r\n                      <FormDescription className=\"text-xs\">\r\n                        By checking this box, you confirm that you understand the activation fee is required and agree to our terms of service.\r\n                      </FormDescription>\r\n                      <FormMessage />\r\n                    </div>\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <Button type=\"submit\" className=\"w-full\" disabled={registerMutation.isPending} data-testid=\"button-submit\">\r\n                {registerMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                Proceed to Payment (GH₵60.00)\r\n              </Button>\r\n            </form>\r\n          </Form>\r\n\r\n          <div className=\"mt-6 text-center text-sm\">\r\n            <span className=\"text-muted-foreground dark:text-gray-300\">Already have an account? </span>\r\n            <Link href=\"/login\" className=\"text-primary hover:underline font-medium\">Sign in</Link>\r\n          </div>\r\n        </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"wouter\";\r\nimport { Link } from \"wouter\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\r\nimport { CheckCircle2, Loader2, XCircle, AlertCircle } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nexport default function AgentActivationCompletePage() {\r\n  const [status, setStatus] = useState<\"processing\" | \"success\" | \"failed\" | \"cancelled\">(\"processing\");\r\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\r\n  const [agentEmail, setAgentEmail] = useState<string>(\"\");\r\n  const [, setLocation] = useLocation();\r\n  const [redirectCountdown, setRedirectCountdown] = useState<number>(6);\r\n  useAuth();\r\n  const { theme } = useTheme();\r\n\r\n  useEffect(() => {\r\n    // Get reference from URL\r\n    const params = new URLSearchParams(window.location.search);\r\n    const reference = params.get(\"reference\");\r\n    const isMock = params.get(\"mock\") === \"true\";\r\n\r\n    if (!reference) {\r\n      setStatus(\"failed\");\r\n      return;\r\n    }\r\n\r\n    // For mock payments, skip verification and show success\r\n    if (isMock) {\r\n      setStatus(\"success\");\r\n      setAgentEmail(\"test@example.com\"); // Mock email\r\n      // start auto-redirect countdown\r\n      setTimeout(() => {\r\n        const interval = setInterval(() => {\r\n          setRedirectCountdown((c) => {\r\n            if (c <= 1) {\r\n              clearInterval(interval);\r\n              setLocation(\"/login\");\r\n              return 0;\r\n            }\r\n            return c - 1;\r\n          });\r\n        }, 1000);\r\n      }, 1000);\r\n      return;\r\n    }\r\n\r\n    // Verify payment status\r\n    const verifyPayment = async () => {\r\n      try {\r\n        const response = await fetch(`/api/paystack/verify?reference=${reference}`);\r\n        const data = await response.json();\r\n\r\n        if (data.status === \"success\") {\r\n          setStatus(\"success\");\r\n          // Store agent email for display\r\n          if (data.data?.user?.email) {\r\n            setAgentEmail(data.data.user.email);\r\n          }\r\n          // start auto-redirect countdown\r\n          setTimeout(() => {\r\n            const interval = setInterval(() => {\r\n              setRedirectCountdown((c) => {\r\n                if (c <= 1) {\r\n                  clearInterval(interval);\r\n                  setLocation(\"/login\");\r\n                  return 0;\r\n                }\r\n                return c - 1;\r\n              });\r\n            }, 1000);\r\n          }, 1500);\r\n        } else if (data.status === \"cancelled\") {\r\n          setStatus(\"cancelled\");\r\n          setErrorMessage(data.message || \"Payment was cancelled\");\r\n        } else {\r\n          setStatus(\"failed\");\r\n          setErrorMessage(data.message || data.error || \"Payment verification failed\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Payment verification error:\", error);\r\n        setStatus(\"failed\");\r\n        setErrorMessage(\"Network error. Please check your connection and try again.\");\r\n      }\r\n    };\r\n\r\n    // Wait 3 seconds before verifying to allow webhook to process\r\n    setTimeout(() => {\r\n      verifyPayment();\r\n    }, 3000);\r\n  }, [setLocation]); // Added proper dependency\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <Card className=\"w-full max-w-lg shadow-xl border-2 bg-white dark:bg-black border-gray-200\">\r\n          <CardHeader className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-12 w-auto\" />\r\n            </div>\r\n            <CardTitle className=\"text-2xl font-bold\">Agent Activation</CardTitle>\r\n            <CardDescription>\r\n              Processing your payment\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            {status === \"processing\" && (\r\n              <Alert className=\"bg-white dark:bg-black border border-blue-200\">\r\n                <Loader2 className=\"h-5 w-5 text-blue-600 animate-spin\" />\r\n                <AlertTitle className=\"text-blue-900\">Processing Payment...</AlertTitle>\r\n                <AlertDescription className=\"text-blue-800\">\r\n                  Please wait while we verify your payment. This may take a few moments.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            {status === \"success\" && (\r\n              <>\r\n                <Alert className=\"bg-white dark:bg-black border border-green-200\">\r\n                  <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\r\n                  <AlertTitle className=\"text-green-900 text-lg font-semibold\">🎉 Account Activated Successfully!</AlertTitle>\r\n                  <AlertDescription className=\"text-green-800 space-y-3 mt-2\">\r\n                    <p className=\"font-semibold\">\r\n                      Congratulations! Your agent account has been successfully created and activated.\r\n                    </p>\r\n                    \r\n                    <div className=\"bg-white/80 dark:bg-black/80 p-3 rounded-md border border-green-300\">\r\n                      <p className=\"font-semibold text-sm mb-2\">✉️ Account Details:</p>\r\n                      {agentEmail && (\r\n                        <p className=\"text-sm\">\r\n                          <span className=\"font-medium\">Email:</span> {agentEmail}\r\n                        </p>\r\n                      )}\r\n                      <p className=\"text-sm mt-1 text-green-900\">\r\n                        Please use your registration email and password to login.\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 space-y-2 text-sm\">\r\n                      <p className=\"font-semibold\">🚀 What's next?</p>\r\n                      <ul className=\"list-disc list-inside space-y-1 ml-2\">\r\n                        <li>Login to access your agent dashboard</li>\r\n                        <li>Set up your storefront preferences</li>\r\n                        <li>Start selling and earning commissions</li>\r\n                        <li>Share your storefront URL with customers</li>\r\n                      </ul>\r\n                    </div>\r\n                  </AlertDescription>\r\n                </Alert>\r\n\r\n                <div className=\"text-center space-y-4\">\r\n                  <Link href=\"/login\">\r\n                    <Button className=\"w-full\" size=\"lg\">\r\n                      Login to Your Dashboard\r\n                    </Button>\r\n                  </Link>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Use your email and password to access your account\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground\">Redirecting to login in {redirectCountdown}s…</p>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {status === \"cancelled\" && (\r\n              <>\r\n                <Alert className=\"bg-white dark:bg-black border border-amber-200\">\r\n                  <AlertCircle className=\"h-5 w-5 text-amber-600\" />\r\n                  <AlertTitle className=\"text-amber-900 text-lg font-semibold\">Payment Cancelled</AlertTitle>\r\n                  <AlertDescription className=\"text-amber-800\">\r\n                    <p className=\"font-semibold\">{errorMessage || \"You cancelled the payment.\"}</p>\r\n                    <p className=\"mt-2\">\r\n                      Your registration was not completed because payment was cancelled. \r\n                      No charges have been made to your account.\r\n                    </p>\r\n                    <p className=\"mt-2 text-sm\">\r\n                      You can try again whenever you're ready to complete your agent registration.\r\n                    </p>\r\n                  </AlertDescription>\r\n                </Alert>\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <Link href=\"/agent/register\" className=\"flex-1\">\r\n                    <Button className=\"w-full\">\r\n                      Try Again\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href={typeof window !== \"undefined\" && getAgentId() ? `/store/${getAgentId()}` : \"/\"} className=\"flex-1\">\r\n                    <Button variant=\"outline\" className=\"w-full\">\r\n                      Back to Home\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {status === \"failed\" && (\r\n              <>\r\n                <Alert className=\"bg-white dark:bg-black border border-red-200\">\r\n                  <XCircle className=\"h-5 w-5 text-red-600\" />\r\n                  <AlertTitle className=\"text-red-900 text-lg font-semibold\">Activation Failed</AlertTitle>\r\n                  <AlertDescription className=\"text-red-800\">\r\n                    <p className=\"font-semibold\">{errorMessage || \"We couldn't verify your payment.\"}</p>\r\n                    <p className=\"mt-2\">This could be due to:</p>\r\n                    <ul className=\"list-disc list-inside mt-2 ml-2 space-y-1 text-sm\">\r\n                      <li>Payment failed to process</li>\r\n                      <li>Network connection issues</li>\r\n                      <li>Invalid payment reference</li>\r\n                    </ul>\r\n                    <p className=\"mt-3 text-sm font-semibold\">\r\n                      Please try registering again or contact support if you were charged.\r\n                    </p>\r\n                  </AlertDescription>\r\n                </Alert>\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <Link href=\"/agent/register\" className=\"flex-1\">\r\n                    <Button variant=\"outline\" className=\"w-full\">\r\n                      Try Again\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href={typeof window !== \"undefined\" && getAgentId() ? `/store/${getAgentId()}` : \"/\"} className=\"flex-1\">\r\n                    <Button className=\"w-full\">\r\n                      Back to Home\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Link } from \"wouter\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nexport default function AgentUpgradePage() {\r\n  const { theme } = useTheme();\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <Card className=\"w-full max-w-2xl shadow-xl border-2\">\r\n          <CardHeader className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-12 w-auto\" />\r\n            </div>\r\n            <CardTitle className=\"text-2xl font-bold\">Upgrade to Agent</CardTitle>\r\n            <CardDescription>Become an agent and start earning commissions</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"flex gap-3 justify-center\">\r\n              <Link href=\"/user/dashboard?upgrade=true\">\r\n                <Button variant=\"outline\">Use Same Account</Button>\r\n              </Link>\r\n              <Link href=\"/agent/register\">\r\n                <Button variant=\"default\">Create New Agent Account</Button>\r\n              </Link>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Loader2, Plus, Key, Trash2, Copy, Check, AlertCircle, Code } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface ApiKey {\r\n  id: string;\r\n  name: string;\r\n  key: string;\r\n  permissions: Record<string, any>;\r\n  isActive: boolean;\r\n  lastUsed: string | null;\r\n  createdAt: string;\r\n}\r\n\r\ninterface ApiIntegrationsModalProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function ApiIntegrationsModal({ open, onOpenChange }: ApiIntegrationsModalProps) {\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [newKeyName, setNewKeyName] = useState(\"\");\r\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\r\n  const [createdKey, setCreatedKey] = useState<string | null>(null);\r\n  const [copiedKey, setCopiedKey] = useState<string | null>(null);\r\n\r\n  const { data: apiKeys, isLoading } = useQuery<ApiKey[]>({\r\n    queryKey: [\"/api/user/api-keys\"],\r\n    enabled: !!user && open,\r\n  });\r\n\r\n  const createKeyMutation = useMutation({\r\n    mutationFn: async (name: string) => {\r\n      return await apiRequest<ApiKey>(\"POST\", \"/api/user/api-keys\", { name });\r\n    },\r\n    onSuccess: (newKey) => {\r\n      setCreatedKey(newKey.key);\r\n      setNewKeyName(\"\");\r\n      setShowCreateDialog(false);\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/api-keys\"] });\r\n      toast({\r\n        title: \"API Key Created\",\r\n        description: \"Your new API key has been generated. Copy it now - it won't be shown again.\",\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to create API key\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const deleteKeyMutation = useMutation({\r\n    mutationFn: async (keyId: string) => {\r\n      await apiRequest(\"DELETE\", `/api/user/api-keys/${keyId}`);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/api-keys\"] });\r\n      toast({\r\n        title: \"API Key Revoked\",\r\n        description: \"The API key has been permanently deleted.\",\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to revoke API key\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const copyToClipboard = async (text: string, keyId: string) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      setCopiedKey(keyId);\r\n      setTimeout(() => setCopiedKey(null), 2000);\r\n      toast({\r\n        title: \"Copied\",\r\n        description: \"API key copied to clipboard\",\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to copy to clipboard\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCreateKey = () => {\r\n    if (!newKeyName.trim()) return;\r\n    createKeyMutation.mutate(newKeyName.trim());\r\n  };\r\n\r\n  const handleDeleteKey = (keyId: string) => {\r\n    if (confirm(\"Are you sure you want to revoke this API key? This action cannot be undone.\")) {\r\n      deleteKeyMutation.mutate(keyId);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-[95vw] sm:max-w-md md:max-w-2xl lg:max-w-4xl max-h-[95vh] overflow-y-auto\">\r\n        <DialogHeader className=\"pb-3 sm:pb-4\">\r\n          <DialogTitle className=\"flex items-center gap-2 text-base sm:text-lg md:text-xl\">\r\n            <Code className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n            <span className=\"text-sm sm:text-base\">API & Integrations</span>\r\n          </DialogTitle>\r\n          <DialogDescription className=\"text-xs sm:text-sm leading-relaxed\">\r\n            Generate secure API keys to connect your app or third-party services.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-3 sm:space-y-4 md:space-y-6\">\r\n          {/* Created Key Alert */}\r\n          {createdKey && (\r\n            <Alert className=\"border-yellow-200 bg-yellow-50 p-3 sm:p-4\">\r\n              <AlertCircle className=\"h-3 w-3 sm:h-4 sm:w-4 text-yellow-600 flex-shrink-0\" />\r\n              <AlertDescription className=\"text-yellow-800 text-xs sm:text-sm leading-relaxed\">\r\n                <strong>New API Key Created:</strong> {createdKey}\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  className=\"ml-2 mt-2 sm:mt-0 h-6 px-2 text-xs sm:h-7 sm:px-3\"\r\n                  onClick={() => copyToClipboard(createdKey, \"created\")}\r\n                >\r\n                  {copiedKey === \"created\" ? <Check className=\"h-2.5 w-2.5\" /> : <Copy className=\"h-2.5 w-2.5\" />}\r\n                  <span className=\"ml-1 hidden sm:inline\">Copy</span>\r\n                </Button>\r\n              </AlertDescription>\r\n            </Alert>\r\n          )}\r\n\r\n          {/* API Keys Section */}\r\n          <Card className=\"p-3 sm:p-4 md:p-6\">\r\n            <CardHeader className=\"pb-2 sm:pb-3 px-0\">\r\n              <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-sm sm:text-base\">\r\n                    <Key className=\"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0\" />\r\n                    API Keys\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-xs sm:text-sm mt-1\">\r\n                    Manage your API keys for secure access to our platform\r\n                  </CardDescription>\r\n                </div>\r\n                <Dialog open={showCreateDialog} onOpenChange={setShowCreateDialog}>\r\n                  <DialogTrigger asChild>\r\n                    <Button size=\"sm\" className=\"w-full sm:w-auto h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm\">\r\n                      <Plus className=\"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2\" />\r\n                      <span>Create API Key</span>\r\n                    </Button>\r\n                  </DialogTrigger>\r\n                  <DialogContent className=\"w-[95vw] sm:w-full max-w-md mx-4 sm:mx-auto\">\r\n                    <DialogHeader className=\"pb-3 sm:pb-4\">\r\n                      <DialogTitle className=\"text-sm sm:text-base\">Create New API Key</DialogTitle>\r\n                      <DialogDescription className=\"text-xs sm:text-sm leading-relaxed\">\r\n                        Enter a name for your API key. This will help you identify it later.\r\n                      </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-3 sm:space-y-4\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"keyName\" className=\"text-xs sm:text-sm font-medium\">API Key Name</Label>\r\n                        <Input\r\n                          id=\"keyName\"\r\n                          placeholder=\"e.g., My App, Production API\"\r\n                          value={newKeyName}\r\n                          onChange={(e) => setNewKeyName(e.target.value)}\r\n                          onKeyDown={(e) => e.key === \"Enter\" && handleCreateKey()}\r\n                          className=\"h-9 sm:h-10 text-sm\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3\">\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => setShowCreateDialog(false)}\r\n                          size=\"sm\"\r\n                          className=\"w-full sm:w-auto h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm\"\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                        <Button\r\n                          onClick={handleCreateKey}\r\n                          disabled={!newKeyName.trim() || createKeyMutation.isPending}\r\n                          size=\"sm\"\r\n                          className=\"w-full sm:w-auto h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm\"\r\n                        >\r\n                          {createKeyMutation.isPending && <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />}\r\n                          Create Key\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </DialogContent>\r\n                </Dialog>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"px-0 pt-0\">\r\n              {isLoading ? (\r\n                <div className=\"flex items-center justify-center py-6 sm:py-8\">\r\n                  <Loader2 className=\"h-6 w-6 sm:h-8 sm:w-8 animate-spin\" />\r\n                </div>\r\n              ) : apiKeys && apiKeys.length > 0 ? (\r\n                <div className=\"space-y-2 sm:space-y-3 md:space-y-4\">\r\n                  {apiKeys.map((key) => (\r\n                    <div\r\n                      key={key.id}\r\n                      className=\"flex flex-col gap-3 p-3 sm:p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors\"\r\n                    >\r\n                      <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                        <div className=\"space-y-2 flex-1 min-w-0\">\r\n                          <div className=\"flex flex-wrap items-center gap-2\">\r\n                            <span className=\"font-medium text-sm sm:text-base truncate\">{key.name}</span>\r\n                            <Badge \r\n                              variant={key.isActive ? \"default\" : \"secondary\"} \r\n                              className=\"text-xs px-2 py-0.5\"\r\n                            >\r\n                              {key.isActive ? \"Active\" : \"Inactive\"}\r\n                            </Badge>\r\n                          </div>\r\n                          <div className=\"text-xs sm:text-sm text-muted-foreground space-y-1\">\r\n                            <div>Created {new Date(key.createdAt).toLocaleDateString()}</div>\r\n                            {key.lastUsed && (\r\n                              <div>Last used {new Date(key.lastUsed).toLocaleDateString()}</div>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"font-mono text-xs sm:text-sm bg-muted px-2 py-1.5 rounded break-all sm:break-normal\">\r\n                            sk_••••••••••••••••••••••••••••••••\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => copyToClipboard(`sk_••••••••••••••••••••••••••••••••`, key.id)}\r\n                            className=\"h-8 w-8 p-0 sm:h-9 sm:w-9 sm:p-2\"\r\n                            title=\"Copy API Key\"\r\n                          >\r\n                            {copiedKey === key.id ? <Check className=\"h-3 w-3 sm:h-4 sm:w-4\" /> : <Copy className=\"h-3 w-3 sm:h-4 sm:w-4\" />}\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleDeleteKey(key.id)}\r\n                            disabled={deleteKeyMutation.isPending}\r\n                            className=\"h-8 w-8 p-0 sm:h-9 sm:w-9 sm:p-2 text-destructive hover:text-destructive\"\r\n                            title=\"Delete API Key\"\r\n                          >\r\n                            <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-6 sm:py-8 text-muted-foreground\">\r\n                  <Code className=\"h-8 w-8 sm:h-12 sm:w-12 mx-auto mb-3 sm:mb-4 opacity-50\" />\r\n                  <p className=\"text-xs sm:text-sm\">No API keys yet. Create your first key to get started.</p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* API Documentation */}\r\n          <Card className=\"p-3 sm:p-4 md:p-6\">\r\n            <CardHeader className=\"pb-2 sm:pb-3 px-0\">\r\n              <CardTitle className=\"text-sm sm:text-base\">API Documentation</CardTitle>\r\n              <CardDescription className=\"text-xs sm:text-sm leading-relaxed\">\r\n                Example API calls using your API keys\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"px-0 pt-0 space-y-3 sm:space-y-4\">\r\n              <div className=\"space-y-3 sm:space-y-4\">\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2 text-sm sm:text-base\">Get Account Balance</h4>\r\n                  <div className=\"bg-muted p-3 sm:p-4 rounded-md font-mono text-xs sm:text-sm overflow-x-auto\">\r\n                    <div className=\"whitespace-nowrap sm:whitespace-normal\">GET /api/v1/user/balance</div>\r\n                    <div className=\"text-muted-foreground mt-1 whitespace-nowrap sm:whitespace-normal\">Authorization: Bearer YOUR_API_KEY</div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2 text-sm sm:text-base\">Get Transaction History</h4>\r\n                  <div className=\"bg-muted p-3 sm:p-4 rounded-md font-mono text-xs sm:text-sm overflow-x-auto\">\r\n                    <div className=\"whitespace-nowrap sm:whitespace-normal\">GET /api/v1/user/transactions?limit=10&offset=0</div>\r\n                    <div className=\"text-muted-foreground mt-1 whitespace-nowrap sm:whitespace-normal\">Authorization: Bearer YOUR_API_KEY</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"text-xs sm:text-sm text-muted-foreground leading-relaxed pt-2 border-t\">\r\n                All API endpoints require Bearer token authentication with your API key.\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import { Link, useLocation } from \"wouter\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  LayoutDashboard,\r\n  Store,\r\n  BarChart3,\r\n  Wallet,\r\n  Settings,\r\n  MessageCircle,\r\n  LogOut,\r\n  ExternalLink,\r\n  Smartphone,\r\n  CreditCard,\r\n  Code,\r\n  DollarSign,\r\n  Trophy,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport type { Agent, User } from \"@shared/schema\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    user: User;\r\n    profitBalance: number;\r\n    walletBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n  };\r\n  stats: any;\r\n}\r\n\r\n// Function to get ranking badge based on user role\r\nconst _getRankingBadge = (role: string) => {\r\n  const rankings = {\r\n    admin: { label: \"Administrator\", variant: \"destructive\" as const, icon: \"👑\" },\r\n    master: { label: \"Master Reseller\", variant: \"default\" as const, icon: \"🏆\" },\r\n    super_dealer: { label: \"Super Dealer\", variant: \"secondary\" as const, icon: \"⭐\" },\r\n    dealer: { label: \"Dealer\", variant: \"outline\" as const, icon: \"💎\" },\r\n    agent: { label: \"Agent\", variant: \"outline\" as const, icon: \"🔹\" },\r\n    user: { label: \"User\", variant: \"outline\" as const, icon: \"👤\" },\r\n    guest: { label: \"Guest\", variant: \"outline\" as const, icon: \"👋\" },\r\n  };\r\n\r\n  return rankings[role as keyof typeof rankings] || rankings.user;\r\n};\r\n\r\nconst sidebarNavItems = [\r\n  { title: \"Dashboard\", href: \"/agent/dashboard\", icon: LayoutDashboard },\r\n  { title: \"My Storefront\", href: \"/agent/storefront\", icon: Store },\r\n  { title: \"Pricing\", href: \"/agent/pricing\", icon: DollarSign },\r\n  { title: \"Transactions\", href: \"/agent/transactions\", icon: BarChart3 },\r\n  { title: \"MTN Bundles\", href: \"/agent/bundles/mtn\", icon: Smartphone },\r\n  { title: \"AT iShare Bundles\", href: \"/agent/bundles/at_ishare\", icon: Smartphone },\r\n  { title: \"AT BIG TIME Bundles\", href: \"/agent/bundles/at_bigtime\", icon: Smartphone },\r\n  { title: \"TELECEL Bundles\", href: \"/agent/bundles/telecel\", icon: Smartphone },\r\n  { title: \"Top Up Wallet\", href: \"/agent/wallet\", icon: CreditCard },\r\n  { title: \"API Keys & Integrations\", href: \"/dashboard/api-integrations\", icon: Code },\r\n  { title: \"Withdrawals\", href: \"/agent/withdrawals\", icon: Wallet },\r\n  { title: \"Settings\", href: \"/agent/settings\", icon: Settings },\r\n  { title: \"Support Chat\", href: \"/agent/support\", icon: MessageCircle },\r\n];\r\n\r\nexport function AgentSidebarV2({ onClose }: { onClose?: () => void } = {}) {\r\n  const [location] = useLocation();\r\n  const { logout, isLoggingOut, user } = useAuth();\r\n  const { theme: _theme } = useTheme();\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Get user rank\r\n const { data: rankData } = useQuery<{ rank: number }>({\r\n    queryKey: [\"user-rank\"],\r\n    queryFn: () => apiRequest(\"GET\", \"/api/user/rank\"),\r\n    enabled: !!user,\r\n  });\r\n\r\n  const { data: profileData, error } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n  });\r\n\r\n  const { data: unreadCount = 0 } = useQuery<number>({\r\n    queryKey: [\"/api/support/admin/unread-count\"],\r\n    enabled: user?.role === 'admin',\r\n    queryFn: async () => {\r\n      try {\r\n        const res = await apiRequest(\"GET\", \"/api/support/admin/unread-count\") as Response;\r\n        const data = await res.json();\r\n        return data.count || 0;\r\n      } catch (error) {\r\n        return 0;\r\n      }\r\n    },\r\n    refetchInterval: 30000, // Refresh every 30 seconds instead of 5\r\n  });\r\n\r\n  const agent = profileData?.profile;\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={`flex h-full w-64 flex-col border-r text-sidebar-foreground relative ${\r\n        onClose ? 'bg-white' : 'bg-sidebar'\r\n      }`}>\r\n        <div className={`flex h-16 items-center justify-center border-b px-6 ${onClose ? 'pr-4' : ''}`}>\r\n          <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-primary text-primary-foreground font-bold text-xs\">\r\n            {user?.name?.charAt(0).toUpperCase() || 'A'}\r\n          </div>\r\n        </div>\r\n\r\n        <ScrollArea className=\"flex-1 px-3 py-4\">\r\n          <nav className=\"flex flex-col gap-1\">\r\n            {sidebarNavItems.map((item) => {\r\n              const isActive = location === item.href || (item.href !== \"/agent/dashboard\" && location.startsWith(item.href));\r\n              const isSupport = item.href === \"/agent/support\";\r\n\r\n              return (\r\n                <Link key={item.href} href={item.href}>\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant={isActive ? \"default\" : \"ghost\"}\r\n                    className={cn(\r\n                      \"w-full justify-start gap-2 px-2 py-1.5 text-xs font-normal relative\",\r\n                      isActive && \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                    )}\r\n                    onClick={() => onClose && onClose()}\r\n                  >\r\n                    <item.icon className=\"h-4 w-4\" />\r\n                    <span className=\"flex-1 text-left\">{item.title}</span>\r\n                    {isSupport && unreadCount > 0 && (\r\n                      <Badge variant=\"destructive\" className=\"ml-auto\">{unreadCount}</Badge>\r\n                    )}\r\n                  </Button>\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n        </ScrollArea>\r\n\r\n        <div className=\"border-t p-3\">\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"ghost\"\r\n            className=\"w-full justify-start gap-2 px-2 py-1.5 text-xs text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n            onClick={() => { onClose && onClose(); logout(); }}\r\n            disabled={isLoggingOut}\r\n          >\r\n            <LogOut className=\"h-4 w-4\" />\r\n            {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`flex h-full w-64 flex-col border-r text-sidebar-foreground relative ${\r\n      onClose ? 'bg-white dark:bg-black dark:text-white' : 'bg-sidebar dark:bg-black dark:text-white'\r\n    }`}>\r\n      <div className={`flex h-16 items-center justify-center border-b px-6 ${onClose ? 'pr-4' : ''} dark:border-gray-700`}>\r\n        <div className=\"flex flex-col items-center text-center w-full\">\r\n          <div className=\"flex items-center justify-center gap-4 mb-1 w-full\">\r\n            <div className=\"flex flex-col items-center\">\r\n              <p className=\"text-sm font-medium dark:text-white\">{user?.name || 'Agent'}</p>\r\n              <p className=\"text-xs text-muted-foreground dark:text-gray-300\">{user?.email}</p>\r\n            </div>\r\n            {rankData && (\r\n              <div className=\"flex items-center gap-1 rounded-full bg-green-500 px-2 py-0.5 text-xs font-medium text-white border border-green-600 dark:bg-green-600 dark:border-green-700\">\r\n                <Trophy className=\"h-2.5 w-2.5\" />\r\n                <span>\r\n                  {rankData.rank && rankData.rank > 0 ? `#${rankData.rank}` : 'Unranked'}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {agent && (\r\n        <div className=\"border-b p-3 dark:border-gray-700\">\r\n          <div className=\"rounded-lg bg-green-500 p-3 dark:bg-green-600\">\r\n            <p className=\"text-xs text-white mb-1\">Profit Balance</p>\r\n            <p className=\"text-xl font-bold tabular-nums text-white\" data-testid=\"text-agent-profit-balance\">{formatCurrency(agent.profitBalance)}</p>\r\n            <p className=\"text-xs text-white mt-1\">Wallet Balance: {formatCurrency(agent.walletBalance)}</p>\r\n            <p className=\"text-xs text-white mt-1\">Total Withdrawals: {formatCurrency(agent.totalWithdrawals)}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <ScrollArea className=\"flex-1 px-3 py-4\">\r\n        <nav className=\"flex flex-col gap-1\">\r\n          {sidebarNavItems.map((item) => {\r\n            const isActive = location === item.href || (item.href !== \"/agent/dashboard\" && location.startsWith(item.href));\r\n            const isSupport = item.href === \"/agent/support\";\r\n            return (\r\n              <Link key={item.href} href={item.href}>\r\n                <Button\r\n                  variant={isActive ? \"default\" : \"ghost\"}\r\n                  className={cn(\r\n                    \"w-full justify-start gap-3 font-normal relative dark:text-white dark:hover:bg-gray-700\",\r\n                    isActive && \"bg-yellow-500 text-white font-medium shadow-sm dark:bg-yellow-600\"\r\n                  )}\r\n                  data-testid={`link-agent-${item.title.toLowerCase().replace(/ /g, \"-\")}`}\r\n                  onClick={() => onClose && onClose()}\r\n                >\r\n                  <item.icon className=\"h-4 w-4 dark:text-white\" />\r\n                  <span className=\"flex-1 text-left dark:text-white\">{item.title}</span>\r\n                  {isSupport && unreadCount > 0 && user?.role === 'admin' && (\r\n                    <Badge variant=\"destructive\" className=\"ml-auto dark:bg-red-600 dark:text-white\">{unreadCount}</Badge>\r\n                  )}\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n\r\n          {agent && (\r\n            <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"mt-2\">\r\n              <Button variant=\"outline\" className=\"w-full justify-start gap-3 bg-green-600 hover:bg-green-700 text-white border-green-600 dark:border-green-600 dark:bg-green-600 dark:hover:bg-green-700\" data-testid=\"link-view-storefront\" onClick={() => onClose && onClose()}>\r\n                <ExternalLink className=\"h-4 w-4\" />\r\n                View Public Store\r\n              </Button>\r\n            </a>\r\n          )}\r\n        </nav>\r\n      </ScrollArea>\r\n\r\n      <div className=\"border-t p-3 dark:border-gray-700\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          className=\"w-full justify-start gap-3 text-destructive hover:text-destructive hover:bg-destructive/10 dark:text-red-400 dark:hover:bg-red-900/20\"\r\n          onClick={() => { onClose && onClose(); logout(); }}\r\n          disabled={isLoggingOut}\r\n        >\r\n          <LogOut className=\"h-4 w-4 dark:text-red-400\" />\r\n          {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n        </Button>\r\n        \r\n        {/* Developer Credit */}\r\n        <div className=\"mt-3 pt-3 border-t border-border/50 dark:border-gray-600\">\r\n          <p className=\"text-xs text-muted-foreground text-center dark:text-gray-400\">\r\n            Developed by{' '}\r\n            <a\r\n              href=\"https://bm-portfolio-up2x.onrender.com\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-primary hover:text-primary/80 font-medium dark:text-blue-400 dark:hover:text-blue-300\"\r\n            >\r\n              BlusMotif\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <ApiIntegrationsModal open={showApiModal} onOpenChange={setShowApiModal} />\r\n    </div>\r\n  );\r\n}\r\n","import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { LucideIcon } from \"lucide-react\";\r\n\r\ninterface StatCardProps {\r\n  title: string;\r\n  value: string | number;\r\n  description?: string;\r\n  icon?: LucideIcon;\r\n  trend?: string;\r\n  trendLabel?: string;\r\n  className?: string;\r\n}\r\n\r\nexport function StatCard({\r\n  title,\r\n  value,\r\n  description,\r\n  icon: Icon,\r\n  trend,\r\n  trendLabel,\r\n  className,\r\n}: StatCardProps) {\r\n  return (\r\n    <Card className={cn(\"bg-green-500 border border-yellow-500 text-white\", className)}>\r\n      <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\r\n        <CardTitle className=\"text-sm font-medium text-white\">\r\n          {title}\r\n        </CardTitle>\r\n        {Icon && (\r\n          <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-white/20\">\r\n            <Icon className=\"h-4 w-4 text-white\" />\r\n          </div>\r\n        )}\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"text-2xl font-bold tabular-nums\">{value}</div>\r\n        {(description || trend) && (\r\n          <div className=\"flex items-center gap-2 mt-1\">\r\n            {trend && (\r\n              <span className=\"text-xs font-medium text-white\">\r\n                {trend}\r\n              </span>\r\n            )}\r\n            {trendLabel && (\r\n              <span className=\"text-xs text-white\">\r\n                {trendLabel}\r\n              </span>\r\n            )}\r\n            {description && !trend && !trendLabel && (\r\n              <p className=\"text-xs text-white\">{description}</p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Link } from \"wouter\";\r\nimport { useLocation } from \"wouter\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport {\r\n  DollarSign,\r\n  ShoppingCart,\r\n  TrendingUp,\r\n  Wallet,\r\n  ExternalLink,\r\n  Menu,\r\n  Package,\r\n  Code,\r\n  BarChart3,\r\n  Users,\r\n  Zap,\r\n  Award} from \"lucide-react\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\nimport { Agent, Transaction } from \"@shared/schema\";\r\nimport { XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar } from 'recharts';\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ninterface AgentStats {\r\n  balance: number;\r\n  totalProfit: number;\r\n  totalSales: number;\r\n  totalTransactions: number;\r\n  todayProfit: number;\r\n  todayTransactions: number;\r\n}\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    user: {\r\n      name: string;\r\n      email: string;\r\n      phone: string | null;\r\n    };\r\n    profitBalance: number;\r\n    walletBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n  };\r\n  stats: any;\r\n}\r\n\r\n// Performance Chart Component\r\nconst PerformanceChart = ({ stats }: { stats?: AgentStats }) => {\r\n  const { data: performanceData, isLoading } = useQuery({\r\n    queryKey: [\"/api/agent/performance-history\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"w-full h-64 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Use real data if available, otherwise fallback to sample data\r\n  const chartData = Array.isArray(performanceData) ? performanceData : [\r\n    { day: 'Mon', profit: 25.50, transactions: 3 },\r\n    { day: 'Tue', profit: 45.20, transactions: 5 },\r\n    { day: 'Wed', profit: 32.80, transactions: 4 },\r\n    { day: 'Thu', profit: 67.90, transactions: 8 },\r\n    { day: 'Fri', profit: 89.30, transactions: 12 },\r\n    { day: 'Sat', profit: 54.60, transactions: 7 },\r\n    { day: 'Sun', profit: stats?.todayProfit || 42.10, transactions: stats?.todayTransactions || 5 },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <h4 className=\"text-sm font-medium mb-4 text-muted-foreground\">Weekly Performance</h4>\r\n      <ResponsiveContainer width=\"100%\" height={200}>\r\n        <BarChart data={chartData}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" className=\"opacity-30\" />\r\n          <XAxis\r\n            dataKey=\"day\"\r\n            axisLine={false}\r\n            tickLine={false}\r\n            tick={{ fontSize: 12, fill: 'hsl(var(--muted-foreground))' }}\r\n          />\r\n          <YAxis\r\n            axisLine={false}\r\n            tickLine={false}\r\n            tick={{ fontSize: 12, fill: 'hsl(var(--muted-foreground))' }}\r\n            tickFormatter={(value) => `GH₵${value}`}\r\n          />\r\n          <Tooltip\r\n            contentStyle={{\r\n              backgroundColor: 'hsl(var(--background))',\r\n              border: '1px solid hsl(var(--border))',\r\n              borderRadius: '6px',\r\n              fontSize: '12px'\r\n            }}\r\n            formatter={(value: number, name: string) => [\r\n              name === 'profit' ? `GH₵${value.toFixed(2)}` : value,\r\n              name === 'profit' ? 'Profit' : 'Transactions'\r\n            ]}\r\n            labelStyle={{ color: 'hsl(var(--foreground))' }}\r\n          />\r\n          <Bar\r\n            dataKey=\"profit\"\r\n            fill=\"hsl(var(--primary))\"\r\n            radius={[4, 4, 0, 0]}\r\n            name=\"profit\"\r\n          />\r\n        </BarChart>\r\n      </ResponsiveContainer>\r\n      <div className=\"flex justify-between items-center mt-4 text-xs text-muted-foreground\">\r\n        <span>Daily profit over the last 7 days</span>\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-1\">\r\n            <div className=\"w-3 h-3 bg-primary rounded\"></div>\r\n            <span>Profit</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function AgentDashboard() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n  const [, setLocation] = useLocation();\r\n  const hasRedirected = useRef(false);\r\n  const { user } = useAuth();\r\n\r\n  const { data: profileData } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n  });\r\n\r\n  const agent = profileData?.profile;\r\n  const [location] = useLocation();\r\n\r\n  // Redirect to activation if agent is not approved (run only once)\r\n  useEffect(() => {\r\n    if (agent && !agent.isApproved && location !== \"/agent/activation-complete\" && !hasRedirected.current) {\r\n      hasRedirected.current = true;\r\n      console.log('Redirecting to activation page - agent not approved');\r\n      setLocation(\"/agent/activation-complete\");\r\n    }\r\n  }, [agent, location, setLocation]);\r\n\r\n  const { data: stats, isLoading: statsLoading, error: statsError } = useQuery<AgentStats>({\r\n    queryKey: [\"/api/agent/stats\"],\r\n    refetchInterval: 5000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0,\r\n  });\r\n\r\n  // Force re-render when stats change\r\n  const [displayProfit, setDisplayProfit] = useState(0);\r\n  useEffect(() => {\r\n    if (stats?.totalProfit !== undefined) {\r\n      setDisplayProfit(stats.totalProfit);\r\n    }\r\n  }, [stats?.totalProfit]);\r\n\r\n  // Debug logging\r\n  console.log(\"[Dashboard] Stats data:\", stats);\r\n  console.log(\"[Dashboard] Stats error:\", statsError);\r\n  console.log(\"[Dashboard] totalProfit:\", stats?.totalProfit);\r\n  console.log(\"[Dashboard] displayProfit:\", displayProfit);\r\n\r\n  useQuery<Transaction[]>({\r\n    queryKey: [\"/api/agent/transactions/recent\"],\r\n    refetchInterval: 5000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0,\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b bg-background px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <div>\r\n              <h1 className=\"text-lg lg:text-xl font-semibold\">Agent Dashboard</h1>\r\n              <p className=\"text-sm text-muted-foreground hidden sm:block\">\r\n                Welcome back, {agent?.user?.name || 'Agent'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            {agent && (\r\n              <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                <Button variant=\"outline\" size=\"sm\" className=\"gap-2 hidden sm:flex\">\r\n                  <ExternalLink className=\"h-4 w-4\" />\r\n                  View Store\r\n                </Button>\r\n              </a>\r\n            )}\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Welcome Message */}\r\n            <Card className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 border-yellow-600 shadow-xl overflow-hidden relative\">\r\n              <div className=\"absolute top-0 right-0 w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 bg-white/10 rounded-full -translate-y-10 sm:-translate-y-12 lg:-translate-y-16 translate-x-10 sm:translate-x-12 lg:translate-x-16\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 bg-white/5 rounded-full translate-y-8 sm:translate-y-10 lg:translate-y-12 -translate-x-8 sm:-translate-x-10 lg:-translate-x-12\"></div>\r\n              <CardContent className=\"p-3 sm:p-4 md:p-6 relative\">\r\n                <div className=\"flex flex-col gap-3 sm:gap-4\">\r\n                  <div className=\"flex items-start gap-3 sm:gap-4\">\r\n                    <div className=\"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-white/20 rounded-full shadow-lg backdrop-blur-sm flex-shrink-0\">\r\n                      <span className=\"text-lg sm:text-xl md:text-2xl animate-bounce\">👋</span>\r\n                    </div>\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <h2 className=\"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 drop-shadow-sm leading-tight\">\r\n                        Welcome back, {user?.name?.toUpperCase() || 'AGENT'}!\r\n                      </h2>\r\n                      <p className=\"text-yellow-100 text-xs sm:text-sm md:text-base font-medium leading-relaxed\">\r\n                        Here's what's happening with your business today ✨\r\n                      </p>\r\n                      <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-2\">\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-400 rounded-full animate-pulse\"></div>\r\n                          <span className=\"text-xs font-medium\">Live Dashboard</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-blue-400 rounded-full animate-pulse\" style={{animationDelay: '0.5s'}}></div>\r\n                          <span className=\"text-xs font-medium\">Real-time Updates</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4\">\r\n                    <div className=\"flex items-center gap-2 bg-white/10 rounded-full px-2 sm:px-3 py-1 backdrop-blur-sm w-fit\">\r\n                      <span className=\"text-xs text-white font-medium\">\r\n                        {new Date().toLocaleDateString('en-US', {\r\n                          weekday: 'short',\r\n                          month: 'short',\r\n                          day: 'numeric'\r\n                        })}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1 text-white/80\">\r\n                      <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full\"></div>\r\n                      <span className=\"text-xs\">All systems operational</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Key Metrics */}\r\n            {statsLoading ? (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {Array.from({ length: 4 }).map((_, i) => (\r\n                  <Card key={i} className=\"animate-pulse\">\r\n                    <CardContent className=\"pt-6\">\r\n                      <div className=\"h-4 bg-muted rounded w-1/2 mb-4\" />\r\n                      <div className=\"h-8 bg-muted rounded w-3/4\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <StatCard\r\n                  title=\"Available Balance\"\r\n                  value={formatCurrency(stats?.balance || 0)}\r\n                  icon={Wallet}\r\n                  description=\"Ready for withdrawal\"\r\n                  trend=\"+12%\"\r\n                  trendLabel=\"vs last month\"\r\n                />\r\n                <StatCard\r\n                  title=\"Today's Profit\"\r\n                  value={formatCurrency(stats?.todayProfit || 0)}\r\n                  icon={TrendingUp}\r\n                  description={`${stats?.todayTransactions || 0} transactions`}\r\n                  trend=\"+8%\"\r\n                  trendLabel=\"vs yesterday\"\r\n                />\r\n                <StatCard\r\n                  key={`profit-${displayProfit}`}\r\n                  title=\"Total Profit\"\r\n                  value={formatCurrency(displayProfit)}\r\n                  icon={DollarSign}\r\n                  description={`All-time earnings - Raw value: ${displayProfit}`}\r\n                  trend=\"+24%\"\r\n                  trendLabel=\"vs last month\"\r\n                />\r\n                <StatCard\r\n                  title=\"Active Orders\"\r\n                  value={stats?.totalTransactions || 0}\r\n                  icon={ShoppingCart}\r\n                  description=\"Completed transactions\"\r\n                  trend=\"+15%\"\r\n                  trendLabel=\"vs last month\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 gap-6\">\r\n              {/* Performance Overview */}\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <BarChart3 className=\"h-5 w-5\" />\r\n                    Performance Overview\r\n                  </CardTitle>\r\n                  <CardDescription>Your business metrics at a glance</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-6\">\r\n                  {/* Performance Chart */}\r\n                  <div className=\"h-64 w-full\">\r\n                    <PerformanceChart stats={stats} />\r\n                  </div>\r\n\r\n                  {/* Quick Actions */}\r\n                  <div>\r\n                    <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n                      <Zap className=\"h-4 w-4\" />\r\n                      Quick Actions\r\n                    </h4>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                      <Link href=\"/agent/bundles/mtn\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Package className=\"h-5 w-5\" />\r\n                          <span>MTN</span>\r\n                        </Button>\r\n                      </Link>\r\n                      <Link href=\"/agent/bundles/telecel\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Package className=\"h-5 w-5\" />\r\n                          <span>Telecel</span>\r\n                        </Button>\r\n                      </Link>\r\n                      <Link href=\"/agent/bundles/at-bigtime\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Package className=\"h-5 w-5\" />\r\n                          <span>AT BigTime</span>\r\n                        </Button>\r\n                      </Link>\r\n                      <Link href=\"/agent/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Wallet className=\"h-5 w-5\" />\r\n                          <span>Top Up</span>\r\n                        </Button>\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Storefront & Order Tracker */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {/* Your Storefront */}\r\n              {agent && (\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Users className=\"h-5 w-5\" />\r\n                      Your Storefront\r\n                    </CardTitle>\r\n                    <CardDescription>Share your store link with customers</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"p-4 bg-green-500 text-white rounded-lg border border-green-600\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"text-sm font-medium text-white\">{agent.businessName}</span>\r\n                          <Badge variant=\"outline\" className=\"bg-white text-green-600 border-green-700\">Live</Badge>\r\n                        </div>\r\n                        <p className=\"text-xs text-white/90 mb-3\">\r\n                          Share this link with your customers:\r\n                        </p>\r\n                        <code className=\"text-xs sm:text-sm bg-white text-green-600 px-2 py-1 rounded mt-2 block sm:inline-block border border-green-700 break-all sm:break-normal\">\r\n                          {window.location.origin}/store/agent/{agent.storefrontSlug}\r\n                        </code>\r\n                      </div>\r\n                      <div className=\"flex flex-col sm:flex-row gap-2\">\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => navigator.clipboard.writeText(`${window.location.origin}/store/agent/${agent.storefrontSlug}`)}\r\n                          className=\"w-full sm:w-auto\"\r\n                        >\r\n                          Copy Link\r\n                        </Button>\r\n                        <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-full sm:w-auto\">\r\n                          <Button size=\"sm\" className=\"w-full\">\r\n                            <ExternalLink className=\"h-4 w-4 mr-1\" />\r\n                            Visit\r\n                          </Button>\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n\r\n              {/* Order Tracker */}\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Package className=\"h-5 w-5\" />\r\n                    Order Tracker\r\n                  </CardTitle>\r\n                  <CardDescription>Monitor your customers' purchase status</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <OrderTracker />\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* API & Tools */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Code className=\"h-5 w-5\" />\r\n                  API & Tools\r\n                </CardTitle>\r\n                <CardDescription>Automate your business operations</CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"justify-start h-auto p-4 text-left\"\r\n                    onClick={() => setShowApiModal(true)}\r\n                  >\r\n                    <div>\r\n                      <div className=\"font-medium text-sm md:text-base\">API Keys</div>\r\n                      <div className=\"text-xs md:text-sm text-muted-foreground\">Integrate with external systems</div>\r\n                    </div>\r\n                  </Button>\r\n                  <Link href=\"/agent/settings\">\r\n                    <Button variant=\"outline\" className=\"justify-start h-auto p-4 w-full text-left\">\r\n                      <div>\r\n                        <div className=\"font-medium text-sm md:text-base\">Settings</div>\r\n                        <div className=\"text-xs md:text-sm text-muted-foreground\">Manage your profile & links</div>\r\n                      </div>\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n      <ApiIntegrationsModal open={showApiModal} onOpenChange={setShowApiModal} />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code, Users, TrendingUp } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\n\r\nexport default function DealerDashboard() {\r\n  const { user, agent } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Fetch dealer stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/dealer/stats\"],\r\n    queryFn: () => apiRequest(\"/api/dealer/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Mobile sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"w-64 p-0 bg-sidebar\">\r\n          <div className=\"flex flex-col h-full\">\r\n            <div className=\"p-4 border-b\">\r\n              <SheetTitle>Dealer Dashboard</SheetTitle>\r\n              <SheetDescription>\r\n                <VisuallyHidden>Navigation menu for dealer dashboard</VisuallyHidden>\r\n              </SheetDescription>\r\n            </div>\r\n            <nav className=\"flex-1 p-4 space-y-2\">\r\n              <Link href=\"/dealer/dashboard\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Users className=\"inline w-4 h-4 mr-2\" />\r\n                Dashboard\r\n              </Link>\r\n              <Link href=\"/dealer/bundles\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Package className=\"inline w-4 h-4 mr-2\" />\r\n                Data Bundles\r\n              </Link>\r\n              <Link href=\"/dealer/wallet\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Wallet className=\"inline w-4 h-4 mr-2\" />\r\n                Wallet\r\n              </Link>\r\n              <Link href=\"/dealer/transactions\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <CreditCard className=\"inline w-4 h-4 mr-2\" />\r\n                Transactions\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex\">\r\n        {/* Desktop sidebar */}\r\n        <div className=\"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-white border-r\">\r\n          <div className=\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto\">\r\n            <div className=\"flex items-center flex-shrink-0 px-4\">\r\n              <h1 className=\"text-xl font-bold text-gray-900\">Dealer Dashboard</h1>\r\n            </div>\r\n            <div className=\"mt-5 flex-grow flex flex-col\">\r\n              <nav className=\"flex-1 px-2 space-y-1\">\r\n                <Link href=\"/dealer/dashboard\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-900\">\r\n                  <Users className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Dashboard\r\n                </Link>\r\n                <Link href=\"/dealer/bundles\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Package className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Data Bundles\r\n                </Link>\r\n                <Link href=\"/dealer/wallet\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Wallet className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Wallet\r\n                </Link>\r\n                <Link href=\"/dealer/transactions\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <CreditCard className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Transactions\r\n                </Link>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main content area */}\r\n        <div className=\"md:pl-64 flex flex-col flex-1\">\r\n          <div className=\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow md:hidden\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-6 w-6\" />\r\n            </button>\r\n            <div className=\"flex-1 px-4 flex justify-between\">\r\n              <div className=\"flex-1 flex\">\r\n                <h1 className=\"text-xl font-semibold text-gray-900\">Dealer Dashboard</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <main className=\"flex-1\">\r\n            <div className=\"py-6\">\r\n              <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n                <h1 className=\"text-base sm:text-2xl font-semibold text-gray-900\">Welcome back, {user.name}!</h1>\r\n                <p className=\"mt-1 text-xs sm:text-sm text-gray-600\">Here's what's happening with your dealer account today.</p>\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                      <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.walletBalance || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <Link href=\"/dealer/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-2\">\r\n                          Top Up Wallet\r\n                        </Button>\r\n                      </Link>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Sales</CardTitle>\r\n                      <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.totalSales || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+20.1% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Profit</CardTitle>\r\n                      <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.totalProfit || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+15.3% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Active Agents</CardTitle>\r\n                      <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.activeAgents || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Agents under your management</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Recent Transactions */}\r\n                <div className=\"mt-8\">\r\n                  <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n                    <div className=\"px-4 py-5 sm:px-6\">\r\n                      <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Recent Transactions</h3>\r\n                      <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">Your latest transaction activity</p>\r\n                    </div>\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                      {transactionsLoading ? (\r\n                        <li className=\"px-4 py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </li>\r\n                      ) : transactions?.length > 0 ? (\r\n                        transactions.map((transaction: any) => (\r\n                          <li key={transaction.id} className=\"px-4 py-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"flex items-center\">\r\n                                <Package className=\"flex-shrink-0 h-5 w-5 text-gray-400\" />\r\n                                <div className=\"ml-3\">\r\n                                  <p className=\"text-sm font-medium text-gray-900\">\r\n                                    {transaction.type === 'purchase' ? 'Data Purchase' : 'Wallet Top-up'}\r\n                                  </p>\r\n                                  <p className=\"text-sm text-gray-500\">\r\n                                    {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'}>\r\n                                  {transaction.status}\r\n                                </Badge>\r\n                                <span className=\"ml-2 text-sm font-medium text-gray-900\">\r\n                                  GH₵{transaction.amount}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </li>\r\n                        ))\r\n                      ) : (\r\n                        <li className=\"px-4 py-4 text-center text-gray-500\">\r\n                          No recent transactions\r\n                        </li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"mt-8\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">Quick Actions</h3>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Package className=\"h-8 w-8 text-blue-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Sell Data Bundles</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your data bundle offerings</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/dealer/bundles\">\r\n                            <Button className=\"w-full\">View Bundles</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Wallet className=\"h-8 w-8 text-green-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Wallet Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Top up and manage your wallet</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/dealer/wallet\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Wallet</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Code className=\"h-8 w-8 text-purple-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">API Integrations</h4>\r\n                            <p className=\"text-sm text-gray-500\">Integrate with external systems</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setShowApiModal(true)}\r\n                          >\r\n                            API Settings\r\n                          </Button>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Integrations Modal */}\r\n      <ApiIntegrationsModal\r\n        isOpen={showApiModal}\r\n        onClose={() => setShowApiModal(false)}\r\n      />\r\n\r\n      {/* Order Tracker */}\r\n      <OrderTracker />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code, Users, TrendingUp, Crown } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\n\r\nexport default function SuperDealerDashboard() {\r\n  const { user, agent } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Fetch super dealer stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/super-dealer/stats\"],\r\n    queryFn: () => apiRequest(\"/api/super-dealer/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Mobile sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"w-64 p-0 bg-sidebar\">\r\n          <div className=\"flex flex-col h-full\">\r\n            <div className=\"p-4 border-b\">\r\n              <SheetTitle>Super Dealer Dashboard</SheetTitle>\r\n              <SheetDescription>\r\n                <VisuallyHidden>Navigation menu for super dealer dashboard</VisuallyHidden>\r\n              </SheetDescription>\r\n            </div>\r\n            <nav className=\"flex-1 p-4 space-y-2\">\r\n              <Link href=\"/super-dealer/dashboard\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Crown className=\"inline w-4 h-4 mr-2\" />\r\n                Dashboard\r\n              </Link>\r\n              <Link href=\"/super-dealer/bundles\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Package className=\"inline w-4 h-4 mr-2\" />\r\n                Data Bundles\r\n              </Link>\r\n              <Link href=\"/super-dealer/wallet\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Wallet className=\"inline w-4 h-4 mr-2\" />\r\n                Wallet\r\n              </Link>\r\n              <Link href=\"/super-dealer/transactions\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <CreditCard className=\"inline w-4 h-4 mr-2\" />\r\n                Transactions\r\n              </Link>\r\n              <Link href=\"/super-dealer/dealers\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Users className=\"inline w-4 h-4 mr-2\" />\r\n                Manage Dealers\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex\">\r\n        {/* Desktop sidebar */}\r\n        <div className=\"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-white border-r\">\r\n          <div className=\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto\">\r\n            <div className=\"flex items-center flex-shrink-0 px-4\">\r\n              <div className=\"flex items-center\">\r\n                <Crown className=\"w-8 h-8 text-yellow-500 mr-2\" />\r\n                <h1 className=\"text-xl font-bold text-gray-900\">Super Dealer</h1>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-5 flex-grow flex flex-col\">\r\n              <nav className=\"flex-1 px-2 space-y-1\">\r\n                <Link href=\"/super-dealer/dashboard\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-900\">\r\n                  <Crown className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Dashboard\r\n                </Link>\r\n                <Link href=\"/super-dealer/bundles\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Package className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Data Bundles\r\n                </Link>\r\n                <Link href=\"/super-dealer/wallet\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Wallet className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Wallet\r\n                </Link>\r\n                <Link href=\"/super-dealer/transactions\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <CreditCard className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Transactions\r\n                </Link>\r\n                <Link href=\"/super-dealer/dealers\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Users className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Manage Dealers\r\n                </Link>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main content area */}\r\n        <div className=\"md:pl-64 flex flex-col flex-1\">\r\n          <div className=\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow md:hidden\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-6 w-6\" />\r\n            </button>\r\n            <div className=\"flex-1 px-4 flex justify-between\">\r\n              <div className=\"flex-1 flex\">\r\n                <h1 className=\"text-xl font-semibold text-gray-900\">Super Dealer Dashboard</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <main className=\"flex-1\">\r\n            <div className=\"py-6\">\r\n              <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n                <div className=\"flex items-center\">\r\n                  <Crown className=\"w-4 sm:w-8 h-4 sm:h-8 text-yellow-500 mr-3\" />\r\n                  <h1 className=\"text-lg sm:text-2xl font-semibold text-gray-900\">Welcome back, {user.name}!</h1>\r\n                </div>\r\n                <p className=\"mt-1 text-xs sm:text-sm text-gray-600\">Super Dealer Dashboard - Advanced management and analytics.</p>\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                      <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.walletBalance || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <Link href=\"/super-dealer/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-2\">\r\n                          Top Up Wallet\r\n                        </Button>\r\n                      </Link>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Sales</CardTitle>\r\n                      <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.totalSales || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+25.5% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Profit</CardTitle>\r\n                      <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.totalProfit || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+22.1% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Managed Dealers</CardTitle>\r\n                      <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.managedDealers || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Dealers under your supervision</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Recent Transactions */}\r\n                <div className=\"mt-8\">\r\n                  <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n                    <div className=\"px-4 py-5 sm:px-6\">\r\n                      <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Recent Transactions</h3>\r\n                      <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">Your latest transaction activity</p>\r\n                    </div>\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                      {transactionsLoading ? (\r\n                        <li className=\"px-4 py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </li>\r\n                      ) : transactions?.length > 0 ? (\r\n                        transactions.map((transaction: any) => (\r\n                          <li key={transaction.id} className=\"px-4 py-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"flex items-center\">\r\n                                <Package className=\"flex-shrink-0 h-5 w-5 text-gray-400\" />\r\n                                <div className=\"ml-3\">\r\n                                  <p className=\"text-sm font-medium text-gray-900\">\r\n                                    {transaction.type === 'purchase' ? 'Data Purchase' : 'Wallet Top-up'}\r\n                                  </p>\r\n                                  <p className=\"text-sm text-gray-500\">\r\n                                    {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'}>\r\n                                  {transaction.status}\r\n                                </Badge>\r\n                                <span className=\"ml-2 text-sm font-medium text-gray-900\">\r\n                                  GH₵{transaction.amount}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </li>\r\n                        ))\r\n                      ) : (\r\n                        <li className=\"px-4 py-4 text-center text-gray-500\">\r\n                          No recent transactions\r\n                        </li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"mt-8\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">Quick Actions</h3>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Package className=\"h-8 w-8 text-blue-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Sell Data Bundles</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your data bundle offerings</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/super-dealer/bundles\">\r\n                            <Button className=\"w-full\">View Bundles</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Wallet className=\"h-8 w-8 text-green-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Wallet Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Top up and manage your wallet</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/super-dealer/wallet\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Wallet</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Users className=\"h-8 w-8 text-purple-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Manage Dealers</h4>\r\n                            <p className=\"text-sm text-gray-500\">Oversee your dealer network</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/super-dealer/dealers\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Dealers</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Code className=\"h-8 w-8 text-indigo-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">API Integrations</h4>\r\n                            <p className=\"text-sm text-gray-500\">Integrate with external systems</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setShowApiModal(true)}\r\n                          >\r\n                            API Settings\r\n                          </Button>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Integrations Modal */}\r\n      <ApiIntegrationsModal\r\n        isOpen={showApiModal}\r\n        onClose={() => setShowApiModal(false)}\r\n      />\r\n\r\n      {/* Order Tracker */}\r\n      <OrderTracker />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code, Users, TrendingUp, Crown, Shield, BarChart3 } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\n\r\nexport default function MasterDashboard() {\r\n  const { user, agent } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Fetch master stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/master/stats\"],\r\n    queryFn: () => apiRequest(\"/api/master/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Mobile sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"w-64 p-0 bg-sidebar\">\r\n          <div className=\"flex flex-col h-full\">\r\n            <div className=\"p-4 border-b\">\r\n              <SheetTitle>Master Dashboard</SheetTitle>\r\n              <SheetDescription>\r\n                <VisuallyHidden>Navigation menu for master dashboard</VisuallyHidden>\r\n              </SheetDescription>\r\n            </div>\r\n            <nav className=\"flex-1 p-4 space-y-2\">\r\n              <Link href=\"/master/dashboard\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Shield className=\"inline w-4 h-4 mr-2\" />\r\n                Dashboard\r\n              </Link>\r\n              <Link href=\"/master/bundles\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Package className=\"inline w-4 h-4 mr-2\" />\r\n                Data Bundles\r\n              </Link>\r\n              <Link href=\"/master/wallet\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Wallet className=\"inline w-4 h-4 mr-2\" />\r\n                Wallet\r\n              </Link>\r\n              <Link href=\"/master/transactions\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <CreditCard className=\"inline w-4 h-4 mr-2\" />\r\n                Transactions\r\n              </Link>\r\n              <Link href=\"/master/network\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Users className=\"inline w-4 h-4 mr-2\" />\r\n                Network Management\r\n              </Link>\r\n              <Link href=\"/master/analytics\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <BarChart3 className=\"inline w-4 h-4 mr-2\" />\r\n                Analytics\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex\">\r\n        {/* Desktop sidebar */}\r\n        <div className=\"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-white border-r\">\r\n          <div className=\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto\">\r\n            <div className=\"flex items-center flex-shrink-0 px-4\">\r\n              <div className=\"flex items-center\">\r\n                <Shield className=\"w-8 h-8 text-red-500 mr-2\" />\r\n                <h1 className=\"text-xl font-bold text-gray-900\">Master</h1>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-5 flex-grow flex flex-col\">\r\n              <nav className=\"flex-1 px-2 space-y-1\">\r\n                <Link href=\"/master/dashboard\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-900\">\r\n                  <Shield className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Dashboard\r\n                </Link>\r\n                <Link href=\"/master/bundles\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Package className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Data Bundles\r\n                </Link>\r\n                <Link href=\"/master/wallet\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Wallet className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Wallet\r\n                </Link>\r\n                <Link href=\"/master/transactions\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <CreditCard className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Transactions\r\n                </Link>\r\n                <Link href=\"/master/network\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Users className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Network Management\r\n                </Link>\r\n                <Link href=\"/master/analytics\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <BarChart3 className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Analytics\r\n                </Link>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main content area */}\r\n        <div className=\"md:pl-64 flex flex-col flex-1\">\r\n          <div className=\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow md:hidden\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-6 w-6\" />\r\n            </button>\r\n            <div className=\"flex-1 px-4 flex justify-between\">\r\n              <div className=\"flex-1 flex\">\r\n                <h1 className=\"text-xl font-semibold text-gray-900\">Master Dashboard</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <main className=\"flex-1\">\r\n            <div className=\"py-6\">\r\n              <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n                <div className=\"flex items-center\">\r\n                  <Shield className=\"w-4 sm:w-8 h-4 sm:h-8 text-red-500 mr-3\" />\r\n                  <h1 className=\"text-base sm:text-2xl font-semibold text-gray-900\">Welcome back, {user.name}!</h1>\r\n                </div>\r\n                <p className=\"mt-1 text-xs sm:text-sm text-gray-600\">Master Dashboard - Complete system oversight and management.</p>\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-5\">\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                      <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.walletBalance || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <Link href=\"/master/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-2\">\r\n                          Top Up Wallet\r\n                        </Button>\r\n                      </Link>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Sales</CardTitle>\r\n                      <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.totalSales || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+30.2% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Profit</CardTitle>\r\n                      <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.totalProfit || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+28.7% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Network Size</CardTitle>\r\n                      <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.networkSize || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Total agents in network</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">System Health</CardTitle>\r\n                      <BarChart3 className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold text-green-600\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          '98.5%'\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Uptime this month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Recent Transactions */}\r\n                <div className=\"mt-8\">\r\n                  <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n                    <div className=\"px-4 py-5 sm:px-6\">\r\n                      <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Recent Transactions</h3>\r\n                      <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">Your latest transaction activity</p>\r\n                    </div>\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                      {transactionsLoading ? (\r\n                        <li className=\"px-4 py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </li>\r\n                      ) : transactions?.length > 0 ? (\r\n                        transactions.map((transaction: any) => (\r\n                          <li key={transaction.id} className=\"px-4 py-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"flex items-center\">\r\n                                <Package className=\"flex-shrink-0 h-5 w-5 text-gray-400\" />\r\n                                <div className=\"ml-3\">\r\n                                  <p className=\"text-sm font-medium text-gray-900\">\r\n                                    {transaction.type === 'purchase' ? 'Data Purchase' : 'Wallet Top-up'}\r\n                                  </p>\r\n                                  <p className=\"text-sm text-gray-500\">\r\n                                    {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'}>\r\n                                  {transaction.status}\r\n                                </Badge>\r\n                                <span className=\"ml-2 text-sm font-medium text-gray-900\">\r\n                                  GH₵{transaction.amount}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </li>\r\n                        ))\r\n                      ) : (\r\n                        <li className=\"px-4 py-4 text-center text-gray-500\">\r\n                          No recent transactions\r\n                        </li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"mt-8\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">Quick Actions</h3>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5\">\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Package className=\"h-8 w-8 text-blue-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Sell Data Bundles</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your data bundle offerings</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/bundles\">\r\n                            <Button className=\"w-full\">View Bundles</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Wallet className=\"h-8 w-8 text-green-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Wallet Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Top up and manage your wallet</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/wallet\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Wallet</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Users className=\"h-8 w-8 text-purple-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Network Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your entire agent network</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/network\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Network</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <BarChart3 className=\"h-8 w-8 text-orange-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Analytics</h4>\r\n                            <p className=\"text-sm text-gray-500\">View detailed analytics and reports</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/analytics\">\r\n                            <Button variant=\"outline\" className=\"w-full\">View Analytics</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Code className=\"h-8 w-8 text-indigo-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">API Integrations</h4>\r\n                            <p className=\"text-sm text-gray-500\">Integrate with external systems</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setShowApiModal(true)}\r\n                          >\r\n                            API Settings\r\n                          </Button>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Integrations Modal */}\r\n      <ApiIntegrationsModal\r\n        isOpen={showApiModal}\r\n        onClose={() => setShowApiModal(false)}\r\n      />\r\n\r\n      {/* Order Tracker */}\r\n      <OrderTracker />\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n","import { Badge } from \"@/components/ui/badge\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { CheckCircle, Clock, XCircle, RefreshCw, Layers } from \"lucide-react\";\r\n\r\ninterface StatusBadgeProps {\r\n  status: string;\r\n  statusConfig?: Record<string, { label: string; color: string }>;\r\n  className?: string;\r\n}\r\n\r\nconst defaultStatusConfig: Record<string, { label: string; color: string; icon?: typeof CheckCircle }> = {\r\n  pending: { label: \"Pending\", color: \"bg-amber-500 text-white\", icon: Clock },\r\n  processing: { label: \"Processing\", color: \"bg-blue-500 text-white\", icon: Layers },\r\n  confirmed: { label: \"Confirmed\", color: \"bg-blue-600 text-white\", icon: CheckCircle },\r\n  completed: { label: \"Completed\", color: \"bg-green-500 text-white\", icon: CheckCircle },\r\n  delivered: { label: \"Delivered\", color: \"bg-green-500 text-white\", icon: CheckCircle },\r\n  cancelled: { label: \"Cancelled\", color: \"bg-red-500 text-white\", icon: XCircle },\r\n  failed: { label: \"Failed\", color: \"bg-red-500 text-white\", icon: XCircle },\r\n  refunded: { label: \"Refunded\", color: \"bg-blue-500 text-white\", icon: RefreshCw },\r\n  approved: { label: \"Approved\", color: \"bg-blue-500 text-white\", icon: CheckCircle },\r\n  rejected: { label: \"Rejected\", color: \"bg-red-500 text-white\", icon: XCircle },\r\n  sent: { label: \"Sent\", color: \"bg-green-500 text-white\", icon: CheckCircle },\r\n  retrying: { label: \"Retrying\", color: \"bg-yellow-500 text-white\", icon: RefreshCw },\r\n};\r\n\r\nexport function StatusBadge({ status, statusConfig, className }: StatusBadgeProps) {\r\n  const config = statusConfig?.[status] || defaultStatusConfig[status] || {\r\n    label: status,\r\n    color: \"bg-gray-100 text-gray-700 dark:bg-white dark:text-gray-300\",\r\n  };\r\n\r\n  const Icon = (defaultStatusConfig[status] as any)?.icon;\r\n\r\n  return (\r\n    <Badge\r\n      variant=\"outline\"\r\n      className={cn(\r\n        \"gap-1 border-0 font-medium\",\r\n        config.color,\r\n        className\r\n      )}\r\n    >\r\n      {Icon && <Icon className=\"h-3 w-3\" />}\r\n      {config.label}\r\n    </Badge>\r\n  );\r\n}\r\n","\"use client\"\r\n\r\nimport { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatusBadge } from \"@/components/ui/status-badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { formatCurrency, formatDate, NETWORKS } from \"@/lib/constants\";\r\nimport { BarChart3, Search, DollarSign, TrendingUp, ShoppingCart, Menu, Layers, ChevronDown } from \"lucide-react\";\r\nimport type { Transaction } from \"@shared/schema\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@radix-ui/react-popover\";\r\n\r\n// Status display utility\r\n\r\n\r\ninterface AgentTransactionStats {\r\n  totalTransactions: number;\r\n  totalRevenue: number;\r\n  totalProfit: number;\r\n  todayTransactions: number;\r\n}\r\n\r\nexport default function AgentTransactions() {\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [typeFilter, setTypeFilter] = useState<string>(\"all\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: transactions, isLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/agent/transactions\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time updates\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const { data: stats } = useQuery<AgentTransactionStats>({\r\n    queryKey: [\"/api/agent/transactions/stats\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time stats\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const filteredTransactions = transactions?.filter((tx) => {\r\n    if (statusFilter !== \"all\" && tx.status !== statusFilter) return false;\r\n    if (typeFilter !== \"all\" && tx.type !== typeFilter) return false;\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      if (\r\n        !tx.reference.toLowerCase().includes(term) &&\r\n        !tx.productName.toLowerCase().includes(term) &&\r\n        !(tx.customerPhone && tx.customerPhone.toLowerCase().includes(term))\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">My Transactions</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6\">\r\n              <StatCard\r\n                title=\"Total Transactions\"\r\n                value={stats?.totalTransactions || 0}\r\n                icon={ShoppingCart}\r\n                description=\"All time\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n              <StatCard\r\n                title=\"Total Revenue\"\r\n                value={formatCurrency(stats?.totalRevenue || 0)}\r\n                icon={DollarSign}\r\n                description=\"From sales\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n              <StatCard\r\n                title=\"Total Profit\"\r\n                value={formatCurrency(stats?.totalProfit || 0)}\r\n                icon={TrendingUp}\r\n                description=\"Your earnings\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n              <StatCard\r\n                title=\"Today\"\r\n                value={stats?.todayTransactions || 0}\r\n                icon={BarChart3}\r\n                description=\"Transactions today\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n            </div>\r\n\r\n            <Card className=\"bg-white text-black border-gray-200 md:col-span-2 lg:col-span-3\">\r\n              <CardHeader className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-3 pb-3 md:pb-6\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-base md:text-lg text-black\">\r\n                    <BarChart3 className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                    <span className=\"truncate\">Transaction History</span>\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-sm md:text-base text-gray-600\">\r\n                    View all your customer orders and earnings\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex flex-col sm:flex-row flex-wrap gap-2 w-full lg:w-auto\">\r\n                  <div className=\"relative flex-1 sm:flex-initial\">\r\n                    <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search...\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"pl-9 w-full sm:w-48 text-sm\"\r\n                      data-testid=\"input-search\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-32 text-xs md:text-sm\" data-testid=\"filter-status\">\r\n                        <SelectValue placeholder=\"Status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Status</SelectItem>\r\n                        <SelectItem value=\"pending\">Pending</SelectItem>\r\n                        <SelectItem value=\"confirmed\">Confirmed</SelectItem>\r\n                        <SelectItem value=\"completed\">Completed</SelectItem>\r\n                        <SelectItem value=\"delivered\">Delivered</SelectItem>\r\n                        <SelectItem value=\"cancelled\">Cancelled</SelectItem>\r\n                        <SelectItem value=\"failed\">Failed</SelectItem>\r\n                        <SelectItem value=\"refunded\">Refunded</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Select value={typeFilter} onValueChange={setTypeFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-36 md:w-40 text-xs md:text-sm\" data-testid=\"filter-type\">\r\n                        <SelectValue placeholder=\"Type\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Types</SelectItem>\r\n                        <SelectItem value=\"data_bundle\">Data Bundles</SelectItem>\r\n                        <SelectItem value=\"result_checker\">Result Checkers</SelectItem>\r\n                        <SelectItem value=\"wallet_topup\">Wallet Top-up</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"px-3 md:px-6\">\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : filteredTransactions && filteredTransactions.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"text-xs md:text-sm\">Reference</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Product</TableHead>\r\n                          <TableHead className=\"hidden sm:table-cell text-xs md:text-sm\">Network</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Amount</TableHead>\r\n                          <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">My Profit</TableHead>\r\n                          <TableHead className=\"hidden lg:table-cell text-xs md:text-sm\">Customer</TableHead>\r\n                          <TableHead className=\"hidden xl:table-cell text-xs md:text-sm\">Payment</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Status</TableHead>\r\n                          <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">Date</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {filteredTransactions.slice(0, 20).map((tx) => {\r\n                          const network = NETWORKS.find((n) => n.id === tx.network);\r\n                          const isBulkOrder = (tx as any).isBulkOrder;\r\n                          const phoneNumbersRaw = (tx as any).phoneNumbers;\r\n                          const phoneNumbers = phoneNumbersRaw ? (typeof phoneNumbersRaw === 'string' ? JSON.parse(phoneNumbersRaw) : phoneNumbersRaw) as Array<{phone: string, bundleName: string, dataAmount: string}> : undefined;\r\n                          const isWalletTopup = tx.type === \"wallet_topup\";\r\n                          return (\r\n                            <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\r\n                              <TableCell className=\"font-mono text-xs md:text-sm\">{tx.reference}</TableCell>\r\n                              <TableCell className=\"max-w-[150px] md:max-w-[200px]\">\r\n                                <div className=\"font-medium truncate text-xs md:text-sm\">{tx.productName}</div>\r\n                                <div className=\"flex gap-1 mt-1 flex-wrap\">\r\n                                  <Badge variant=\"outline\" className=\"text-xs px-1 py-0\">\r\n                                    {tx.type === \"data_bundle\" ? \"Data\" :\r\n                                     tx.type === \"result_checker\" ? \"Result\" :\r\n                                     tx.type === \"wallet_topup\" ? \"Wallet\" : tx.type}\r\n                                  </Badge>\r\n                                  {isBulkOrder && (\r\n                                    <Badge variant=\"secondary\" className=\"text-xs px-1 py-0 flex items-center gap-1\">\r\n                                      <Layers className=\"h-2.5 w-2.5\" />\r\n                                      {phoneNumbers?.length || 0}\r\n                                    </Badge>\r\n                                  )}\r\n                                </div>\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden sm:table-cell\">\r\n                                {isWalletTopup ? (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                ) : network ? (\r\n                                  <Badge\r\n                                    style={{\r\n                                      backgroundColor: network.color,\r\n                                      color: network.textColor,\r\n                                    }}\r\n                                    className=\"text-xs px-1 py-0\"\r\n                                  >\r\n                                    {network.name}\r\n                                  </Badge>\r\n                                ) : (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"font-medium tabular-nums text-xs md:text-sm\">\r\n                                <div>{formatCurrency(tx.amount)}</div>\r\n                                {isBulkOrder && phoneNumbers && (\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {formatCurrency(parseFloat(tx.amount) / phoneNumbers.length)} each\r\n                                  </div>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden md:table-cell text-green-600 tabular-nums font-medium text-xs md:text-sm\">\r\n                                {isWalletTopup ? (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                ) : (\r\n                                  <div>+{formatCurrency(tx.agentProfit || 0)}</div>\r\n                                )}\r\n                                {isBulkOrder && phoneNumbers && !isWalletTopup && (\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {formatCurrency(parseFloat(tx.agentProfit || \"0\") / phoneNumbers.length)} each\r\n                                  </div>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden lg:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                                {isWalletTopup ? (\r\n                                  <span className=\"text-muted-foreground\">Self</span>\r\n                                ) : isBulkOrder && phoneNumbers ? (\r\n                                  <Popover>\r\n                                    <PopoverTrigger asChild>\r\n                                      <Button variant=\"ghost\" size=\"sm\" className=\"h-auto p-1 text-left justify-start text-muted-foreground hover:text-foreground\">\r\n                                        <div className=\"text-xs\">\r\n                                          <div className=\"font-semibold\">{phoneNumbers.length} numbers</div>\r\n                                          <div className=\"truncate max-w-[80px] md:max-w-[100px]\">\r\n                                            {phoneNumbers[0]?.phone}\r\n                                          </div>\r\n                                        </div>\r\n                                        <ChevronDown className=\"h-3 w-3 ml-1\" />\r\n                                      </Button>\r\n                                    </PopoverTrigger>\r\n                                    <PopoverContent className=\"w-80\">\r\n                                      <div className=\"space-y-2\">\r\n                                        <h4 className=\"font-medium\">Bulk Order Numbers</h4>\r\n                                        <div className=\"space-y-1 max-h-40 overflow-y-auto\">\r\n                                          {phoneNumbers.map((item, index) => (\r\n                                            <div key={index} className=\"text-sm\">\r\n                                              <div className=\"font-mono\">{item.phone}</div>\r\n                                              <div className=\"text-muted-foreground text-xs\">\r\n                                                {item.bundleName} - {item.dataAmount}\r\n                                              </div>\r\n                                            </div>\r\n                                          ))}\r\n                                        </div>\r\n                                      </div>\r\n                                    </PopoverContent>\r\n                                  </Popover>\r\n                                ) : (\r\n                                  tx.customerPhone\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden xl:table-cell\">\r\n                                <Badge\r\n                                  variant={\r\n                                    (tx as any).paymentStatus === \"paid\" ? \"default\" :\r\n                                    (tx as any).paymentStatus === \"failed\" ? \"destructive\" :\r\n                                    (tx as any).paymentStatus === \"cancelled\" ? \"outline\" :\r\n                                    \"secondary\"\r\n                                  }\r\n                                  className=\"text-xs\"\r\n                                >\r\n                                  {(tx as any).paymentStatus || \"pending\"}\r\n                                </Badge>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <StatusBadge status={tx.status} />\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden md:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                                {formatDate(tx.createdAt)}\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-6 md:py-12 text-muted-foreground text-sm md:text-base\">\r\n                    No transactions found. Share your store link to start making sales!\r\n                  </div>\r\n                )}\r\n                {filteredTransactions && filteredTransactions.length > 20 && (\r\n                  <div className=\"text-center py-2 md:py-4 text-xs md:text-sm text-muted-foreground\">\r\n                    Showing 20 of {filteredTransactions.length} items\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage } from \"@/components/ui/form\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate, WITHDRAWAL_STATUSES } from \"@/lib/constants\";\r\nimport { Wallet, Plus, DollarSign, Clock, CheckCircle, Menu, Smartphone, Building2 } from \"lucide-react\";\r\nimport type { Withdrawal, Agent } from \"@shared/schema\";\r\n\r\nconst withdrawalSchema = z.object({\r\n  amount: z.string()\r\n    .min(1, \"Amount is required\")\r\n    .refine((val) => parseFloat(val) >= 10, \"Minimum withdrawal amount is GH₵10\")\r\n    .refine((val) => parseFloat(val) <= 100000, \"Maximum withdrawal amount is GH₵100,000\"),\r\n  paymentMethod: z.enum([\"mtn_momo\", \"telecel_cash\", \"airtel_tigo_cash\", \"vodafone_cash\"], {\r\n    required_error: \"Please select a payment method\"\r\n  }),\r\n  accountNumber: z.string().min(5, \"Phone number is required\"),\r\n  accountName: z.string().min(2, \"Account name is required\"),\r\n});\r\n\r\ntype WithdrawalFormData = z.infer<typeof withdrawalSchema>;\r\n\r\nexport default function AgentWithdrawals() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [isRequestOpen, setIsRequestOpen] = useState(false);\r\n\r\n  const { data: profileData } = useQuery<{ profile: Agent & { profitBalance: number; walletBalance: number; totalWithdrawals: number; role: string } }>({\r\n    queryKey: [\"/api/profile\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time balance updates\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0, // Always fetch fresh data\r\n  });\r\n\r\n  const agent = profileData?.profile;\r\n\r\n  const { data: withdrawals, isLoading } = useQuery<Withdrawal[]>({\r\n    queryKey: [\"/api/agent/withdrawals\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time withdrawal status updates\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0, // Always fetch fresh data\r\n  });\r\n\r\n  const form = useForm<WithdrawalFormData>({\r\n    resolver: zodResolver(withdrawalSchema),\r\n    defaultValues: {\r\n      amount: \"\",\r\n      paymentMethod: \"mtn_momo\",\r\n      accountNumber: \"\",\r\n      accountName: \"\",\r\n    },\r\n  });\r\n\r\n  const paymentMethods = [\r\n    { value: \"mtn_momo\", label: \"MTN Mobile Money\", icon: Smartphone, description: \"Send to MTN MoMo number\" },\r\n    { value: \"telecel_cash\", label: \"Telecel Cash\", icon: Smartphone, description: \"Send to Telecel Cash number\" },\r\n    { value: \"airtel_tigo_cash\", label: \"AirtelTigo Cash\", icon: Smartphone, description: \"Send to AirtelTigo Cash number\" },\r\n    { value: \"vodafone_cash\", label: \"Vodafone Cash\", icon: Smartphone, description: \"Send to Vodafone Cash number\" },\r\n  ];\r\n\r\n  const requestMutation = useMutation({\r\n    mutationFn: (data: WithdrawalFormData) =>\r\n      apiRequest(\"POST\", \"/api/agent/withdrawals\", { ...data, amount: parseFloat(data.amount) }),\r\n    onSuccess: (response: any) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/withdrawals\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/profile\"] });\r\n      setIsRequestOpen(false);\r\n      form.reset();\r\n      toast({ \r\n        title: \"Withdrawal Requested!\", \r\n        description: response.message || \"Your withdrawal request has been submitted and is pending admin approval.\"\r\n      });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Withdrawal failed\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: WithdrawalFormData) => {\r\n    const amount = parseFloat(data.amount);\r\n    const balance = agent?.profitBalance || 0;\r\n\r\n    if (amount < 10) {\r\n      toast({\r\n        title: \"Amount too low\",\r\n        description: \"Minimum withdrawal amount is GH₵10\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (amount > balance) {\r\n      toast({\r\n        title: \"Insufficient balance\",\r\n        description: `Available balance: ${formatCurrency(balance)}`,\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n    requestMutation.mutate(data);\r\n  };\r\n\r\n  const stats = {\r\n    pending: withdrawals?.filter((w) => w.status === \"pending\").length || 0,\r\n    approved: withdrawals?.filter((w) => w.status === \"approved\" || w.status === \"paid\").length || 0,\r\n    totalWithdrawn: withdrawals\r\n      ?.filter((w) => w.status === \"paid\")\r\n      .reduce((sum, w) => sum + parseFloat(w.amount), 0) || 0,\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig = WITHDRAWAL_STATUSES[status as keyof typeof WITHDRAWAL_STATUSES];\r\n    return (\r\n      <Badge className={statusConfig?.color || \"\"}>\r\n        {statusConfig?.label || status}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-xs md:text-lg lg:text-xl font-semibold\">Withdrawals</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isRequestOpen} onOpenChange={setIsRequestOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-request-withdrawal\" className=\"flex items-center text-xs px-1 py-0.5 h-6 md:text-sm md:px-3 md:py-2 md:h-10 lg:text-base lg:px-4 lg:py-2 lg:h-10\">\r\n                  <Plus className=\"h-2.5 w-2.5 mr-0.5 md:h-4 md:w-4 md:mr-2\" />\r\n                  Request Withdrawal\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"bg-white\">\r\n                <DialogHeader>\r\n                  <DialogTitle>Request Profit Withdrawal</DialogTitle>\r\n                  <DialogDescription>\r\n                    Request profit withdrawal (Minimum: GH₵10). Funds will be transferred after admin approval.\r\n                  </DialogDescription>\r\n                </DialogHeader>\r\n                <Form {...form}>\r\n                  <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                    <div className=\"p-4 bg-muted rounded-lg mb-4\">\r\n                      <p className=\"text-sm text-muted-foreground\">Profit Balance</p>\r\n                      <p className=\"text-2xl font-bold\">{formatCurrency(agent?.profitBalance || 0)}</p>\r\n                    </div>\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"amount\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Amount (GHS) - Minimum GH₵10</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"number\"\r\n                              step=\"0.01\"\r\n                              min=\"10\"\r\n                              placeholder=\"10.00\"\r\n                              data-testid=\"input-amount\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"paymentMethod\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabelWithoutFor>Payment Method</FormLabelWithoutFor>\r\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                            <FormControl>\r\n                              <SelectTrigger>\r\n                                <SelectValue placeholder=\"Select payment method\" />\r\n                              </SelectTrigger>\r\n                            </FormControl>\r\n                            <SelectContent>\r\n                              {paymentMethods.map((method) => (\r\n                                <SelectItem key={method.value} value={method.value}>\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <method.icon className=\"h-4 w-4\" />\r\n                                    <div>\r\n                                      <div className=\"font-medium\">{method.label}</div>\r\n                                      <div className=\"text-xs text-muted-foreground\">{method.description}</div>\r\n                                    </div>\r\n                                  </div>\r\n                                </SelectItem>\r\n                              ))}\r\n                            </SelectContent>\r\n                          </Select>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"accountNumber\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Phone Number</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Enter phone number (e.g., 0241234567)\"\r\n                              data-testid=\"input-account-number\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"accountName\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Account Name</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Name on account\"\r\n                              data-testid=\"input-account-name\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      className=\"w-full\"\r\n                      disabled={requestMutation.isPending}\r\n                      data-testid=\"button-submit-withdrawal\"\r\n                    >\r\n                      {requestMutation.isPending ? \"Submitting...\" : \"Submit Request\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <StatCard\r\n                title=\"Profit Balance\"\r\n                value={formatCurrency(agent?.profitBalance || 0)}\r\n                icon={Wallet}\r\n                description=\"Ready to withdraw\"\r\n              />\r\n              <StatCard\r\n                title=\"Pending Requests\"\r\n                value={stats.pending}\r\n                icon={Clock}\r\n                description=\"Awaiting approval\"\r\n              />\r\n              <StatCard\r\n                title=\"Approved\"\r\n                value={stats.approved}\r\n                icon={CheckCircle}\r\n                description=\"Processed requests\"\r\n              />\r\n              <StatCard\r\n                title=\"Total Withdrawn\"\r\n                value={formatCurrency(stats.totalWithdrawn)}\r\n                icon={DollarSign}\r\n                description=\"All time\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Wallet className=\"h-5 w-5\" />\r\n                  Withdrawal History\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Track your withdrawal requests and their status\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : withdrawals && withdrawals.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Amount</TableHead>\r\n                        <TableHead>Payment Method</TableHead>\r\n                        <TableHead>Account Details</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Requested</TableHead>\r\n                        <TableHead>Processed</TableHead>\r\n                        <TableHead>Note</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {withdrawals.map((withdrawal) => (\r\n                        <TableRow key={withdrawal.id} data-testid={`row-withdrawal-${withdrawal.id}`}>\r\n                          <TableCell className=\"font-bold tabular-nums text-lg\">\r\n                            {formatCurrency(withdrawal.amount)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              {withdrawal.paymentMethod === \"bank\" ? (\r\n                                <Building2 className=\"h-4 w-4 text-blue-600\" />\r\n                              ) : (\r\n                                <Smartphone className=\"h-4 w-4 text-green-600\" />\r\n                              )}\r\n                              <span className=\"text-sm font-medium capitalize\">\r\n                                {withdrawal.paymentMethod?.replace(\"_\", \" \") || \"Bank\"}\r\n                              </span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium\">{withdrawal.accountName}</div>\r\n                              <div className=\"text-muted-foreground\">{withdrawal.accountNumber}</div>\r\n                              {withdrawal.paymentMethod === \"bank\" && withdrawal.bankName && (\r\n                                <div className=\"text-muted-foreground text-xs\">{withdrawal.bankName}</div>\r\n                              )}\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>{getStatusBadge(withdrawal.status)}</TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {formatDate(withdrawal.createdAt)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {withdrawal.paidAt ? formatDate(withdrawal.paidAt) : \"-\"}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm max-w-[150px] truncate\">\r\n                            {withdrawal.adminNote || \"-\"}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No withdrawal requests yet. Click \"Request Withdrawal\" to submit a withdrawal request (Min: GH₵10).\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { Store, ExternalLink, Copy, Save, Smartphone, Menu } from \"lucide-react\";\r\nimport type { Agent } from \"../../../../src/shared/schema\";\r\n\r\nconst storefrontSchema = z.object({\r\n  businessName: z.string().min(2, \"Business name must be at least 2 characters\"),\r\n  businessDescription: z.string().optional(),\r\n  whatsappSupportLink: z.string().url(\"Please enter a valid WhatsApp link\").optional().or(z.literal(\"\")),\r\n  whatsappChannelLink: z.string().url(\"Please enter a valid WhatsApp Channel link\").optional().or(z.literal(\"\")),\r\n});\r\n\r\ntype StorefrontFormData = z.infer<typeof storefrontSchema>;\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    walletBalance: number;\r\n    profitBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n    user: {\r\n      name: string | null;\r\n      email: string | null;\r\n      phone: string | null;\r\n    };\r\n  };\r\n  stats: any;\r\n}\r\n\r\nexport default function AgentStorefront() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: profileData, isLoading: profileLoading } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n    refetchOnWindowFocus: true,\r\n  });\r\n  \r\n  const agent = profileData?.profile;\r\n\r\n  const form = useForm<StorefrontFormData>({\r\n    resolver: zodResolver(storefrontSchema),\r\n    defaultValues: {\r\n      businessName: \"\",\r\n      businessDescription: \"\",\r\n      whatsappSupportLink: \"\",\r\n      whatsappChannelLink: \"\",\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (agent) {\r\n      form.reset({\r\n        businessName: agent.businessName || \"\",\r\n        businessDescription: agent.businessDescription || \"\",\r\n        whatsappSupportLink: agent.whatsappSupportLink || \"\",\r\n        whatsappChannelLink: agent.whatsappChannelLink || \"\",\r\n      });\r\n    }\r\n  }, [agent, form]);\r\n\r\n  const updateStoreMutation = useMutation({\r\n    mutationFn: (data: StorefrontFormData) =>\r\n      apiRequest(\"PATCH\", \"/api/agent/storefront\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/profile\"] });\r\n      toast({ title: \"Store details updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update store\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: StorefrontFormData) => {\r\n    updateStoreMutation.mutate(data);\r\n  };\r\n\r\n  const copyStoreLink = () => {\r\n    if (agent) {\r\n      const url = `${window.location.origin}/store/agent/${agent.storefrontSlug}`;\r\n      navigator.clipboard.writeText(url);\r\n      toast({ title: \"Store link copied to clipboard!\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">My Storefront</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          {/* Hero Section */}\r\n          <div className=\"max-w-4xl mx-auto mb-8\">\r\n            <div className=\"relative bg-green-500 rounded-lg p-8 border border-green-600\">\r\n              <div className=\"flex items-center gap-4 mb-4\">\r\n                <div className=\"p-3 bg-white/20 rounded-full\">\r\n                  <Store className=\"h-8 w-8 text-white\" />\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-white\">\r\n                    {agent?.businessName || \"Your Storefront\"}\r\n                  </h2>\r\n                  <p className=\"text-green-100\">\r\n                    Manage and customize your online store\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white/10 rounded-md p-4 border border-white/20\">\r\n                <p className=\"text-white/90 leading-relaxed\">\r\n                  {agent?.businessDescription || \"No business description provided. Update it below to tell customers about your store.\"}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-4 mt-6\">\r\n                <div className=\"flex items-center gap-2 text-sm text-white/90\">\r\n                  <Smartphone className=\"h-4 w-4\" />\r\n                  <span>Active Storefront</span>\r\n                </div>\r\n                {agent?.storefrontSlug && (\r\n                  <Badge variant=\"secondary\" className=\"text-xs bg-white/20 text-white border-white/30\">\r\n                    /{agent.storefrontSlug}\r\n                  </Badge>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"max-w-4xl mx-auto space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Store className=\"h-5 w-5\" />\r\n                  Store Link\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Share this link with your customers\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center gap-2\">\r\n                  <Input\r\n                    value={agent ? `${window.location.origin}/store/agent/${agent.storefrontSlug}` : \"\"}\r\n                    readOnly\r\n                    className=\"font-mono text-sm flex-1 min-w-0\"\r\n                    data-testid=\"input-store-url\"\r\n                  />\r\n                  <div className=\"flex items-center gap-2 sm:shrink-0\">\r\n                    <Button variant=\"outline\" size=\"icon\" onClick={copyStoreLink} data-testid=\"button-copy-link\">\r\n                      <Copy className=\"h-4 w-4\" />\r\n                    </Button>\r\n                    {agent && (\r\n                      <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Open storefront in new tab\">\r\n                        <Button variant=\"outline\" size=\"icon\" data-testid=\"button-open-store\">\r\n                          <ExternalLink className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </a>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Store Details</CardTitle>\r\n                <CardDescription>\r\n                  Customize how your store appears to customers\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <Form {...form}>\r\n                  <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"businessName\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Business Name</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Your business name\"\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-business-name\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"businessDescription\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Description</FormLabel>\r\n                          <FormControl>\r\n                            <Textarea\r\n                              placeholder=\"Tell customers about your business...\"\r\n                              className=\"resize-none\"\r\n                              rows={3}\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-business-description\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            This will be shown on your storefront page\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"whatsappSupportLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Support Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://wa.me/1234567890\"\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-whatsapp-support\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp for customer support. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"whatsappChannelLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Channel Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://whatsapp.com/channel/...\"\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-whatsapp-channel\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp Channel. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={updateStoreMutation.isPending || profileLoading}\r\n                      data-testid=\"button-save-details\"\r\n                    >\r\n                      <Save className=\"h-4 w-4 mr-2\" />\r\n                      {updateStoreMutation.isPending ? \"Saving...\" : profileLoading ? \"Loading...\" : \"Save Changes to my storefront page\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { Settings, User, Lock, Save, Menu } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport type { Agent, User as UserType } from \"@shared/schema\";\r\n\r\nconst profileSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  phone: z.string().optional(),\r\n  whatsappSupportLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n  whatsappChannelLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n});\r\n\r\nconst passwordSchema = z.object({\r\n  currentPassword: z.string().min(6, \"Password must be at least 6 characters\"),\r\n  newPassword: z.string().min(6, \"Password must be at least 6 characters\"),\r\n  confirmPassword: z.string(),\r\n}).refine((data) => data.newPassword === data.confirmPassword, {\r\n  message: \"Passwords don't match\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype ProfileFormData = z.infer<typeof profileSchema>;\r\ntype PasswordFormData = z.infer<typeof passwordSchema>;\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    user: UserType;\r\n    profitBalance: number;\r\n    walletBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n  };\r\n  stats: any;\r\n}\r\n\r\nexport default function AgentSettings() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: profileData } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n  });\r\n  \r\n  const profile = profileData?.profile;\r\n\r\n  const profileForm = useForm<ProfileFormData>({\r\n    resolver: zodResolver(profileSchema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      whatsappSupportLink: \"\",\r\n      whatsappChannelLink: \"\",\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (profile) {\r\n      profileForm.reset({\r\n        name: profile.user?.name || \"\",\r\n        email: profile.user?.email || \"\",\r\n        phone: profile.user?.phone || \"\",\r\n        whatsappSupportLink: profile.whatsappSupportLink || \"\",\r\n        whatsappChannelLink: profile.whatsappChannelLink || \"\",\r\n      });\r\n    }\r\n  }, [profile, profileForm]);\r\n\r\n  const passwordForm = useForm<PasswordFormData>({\r\n    resolver: zodResolver(passwordSchema),\r\n    defaultValues: {\r\n      currentPassword: \"\",\r\n      newPassword: \"\",\r\n      confirmPassword: \"\",\r\n    },\r\n  });\r\n\r\n  const updateProfileMutation = useMutation({\r\n    mutationFn: (data: ProfileFormData) =>\r\n      apiRequest(\"PATCH\", \"/api/agent/profile\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/profile\"] });\r\n      toast({ title: \"Profile updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update profile\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updatePasswordMutation = useMutation({\r\n    mutationFn: (data: PasswordFormData) =>\r\n      apiRequest(\"POST\", \"/api/agent/password\", data),\r\n    onSuccess: () => {\r\n      passwordForm.reset();\r\n      toast({ title: \"Password updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update password\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const onProfileSubmit = (data: ProfileFormData) => {\r\n    updateProfileMutation.mutate(data);\r\n  };\r\n\r\n  const onPasswordSubmit = (data: PasswordFormData) => {\r\n    updatePasswordMutation.mutate(data);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Settings</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-2xl mx-auto space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <User className=\"h-5 w-5\" />\r\n                  Profile Information\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Update your personal details\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <Form {...profileForm}>\r\n                  <form onSubmit={profileForm.handleSubmit(onProfileSubmit)} className=\"space-y-4\">\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"name\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Full Name</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Your full name\"\r\n                              data-testid=\"input-name\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"email\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Email Address</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"email\"\r\n                              placeholder=\"your@email.com\"\r\n                              data-testid=\"input-email\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"phone\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Phone Number</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"+233 XX XXX XXXX\"\r\n                              data-testid=\"input-phone\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Used for account recovery and notifications\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"whatsappSupportLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Support Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://wa.me/1234567890\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp for customer support. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"whatsappChannelLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Channel Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://whatsapp.com/channel/...\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp Channel. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={updateProfileMutation.isPending}\r\n                      data-testid=\"button-save-profile\"\r\n                    >\r\n                      <Save className=\"h-4 w-4 mr-2\" />\r\n                      {updateProfileMutation.isPending ? \"Saving...\" : \"Save Changes\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Lock className=\"h-5 w-5\" />\r\n                  Change Password\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Update your account password\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <Form {...passwordForm}>\r\n                  <form onSubmit={passwordForm.handleSubmit(onPasswordSubmit)} className=\"space-y-4\">\r\n                    <FormField\r\n                      control={passwordForm.control}\r\n                      name=\"currentPassword\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Current Password</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"password\"\r\n                              placeholder=\"Enter current password\"\r\n                              data-testid=\"input-current-password\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Separator />\r\n\r\n                    <FormField\r\n                      control={passwordForm.control}\r\n                      name=\"newPassword\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>New Password</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"password\"\r\n                              placeholder=\"Enter new password\"\r\n                              data-testid=\"input-new-password\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={passwordForm.control}\r\n                      name=\"confirmPassword\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Confirm New Password</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"password\"\r\n                              placeholder=\"Confirm new password\"\r\n                              data-testid=\"input-confirm-password\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={updatePasswordMutation.isPending}\r\n                      data-testid=\"button-change-password\"\r\n                    >\r\n                      <Lock className=\"h-4 w-4 mr-2\" />\r\n                      {updatePasswordMutation.isPending ? \"Updating...\" : \"Change Password\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { MessageCircle, Send } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface ChatMessage {\r\n  id: string;\r\n  message: string;\r\n  senderType: \"user\" | \"admin\";\r\n  isRead: boolean;\r\n  createdAt: string;\r\n}\r\n\r\ninterface SupportChat {\r\n  id: string;\r\n  userId: string;\r\n  status: \"open\" | \"closed\";\r\n  createdAt: string;\r\n}\r\n\r\ninterface ChatDetails {\r\n  chat: SupportChat;\r\n  messages: ChatMessage[];\r\n}\r\n\r\nexport function SupportChat() {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [chatId, setChatId] = useState<string | null>(null);\r\n  const [activeSupport, setActiveSupport] = useState<\"whatsapp\" | \"chat\">(\"chat\");\r\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\r\n  const queryClient = useQueryClient();\r\n  const { toast } = useToast();\r\n\r\n  // Get or create chat session\r\n  const { data: chats } = useQuery<SupportChat[]>({\r\n    queryKey: [\"/api/support/chats\"],\r\n    queryFn: async () => {\r\n      const response = await apiRequest(\"GET\", \"/api/support/chats\") as Response;\r\n      return response.json();\r\n    },\r\n  });\r\n\r\n  // Create chat if none exists\r\n  const createChatMutation = useMutation({\r\n    mutationFn: async () => {\r\n      const response = await apiRequest(\"POST\", \"/api/support/chat/create\", {}) as Response;\r\n      return response.json();\r\n    },\r\n    onSuccess: (data) => {\r\n      console.log('Chat created successfully:', data);\r\n      setChatId(data.chatId);\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/support/chats\"] });\r\n    },\r\n    onError: (error) => {\r\n      console.error('Failed to create chat:', error);\r\n      toast({\r\n        title: \"Failed to create chat\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  // Get chat messages\r\n  const { data: chatData, isLoading } = useQuery<ChatDetails>({\r\n    queryKey: [\"/api/support/chat\", chatId],\r\n    queryFn: async () => {\r\n      const response = await apiRequest(\"GET\", `/api/support/chat/${chatId}`) as Response;\r\n      return response.json();\r\n    },\r\n    enabled: !!chatId,\r\n    refetchInterval: 5000, // Poll every 5 seconds\r\n  });\r\n\r\n  // Set chatId from existing chats or create new one\r\n  useEffect(() => {\r\n    console.log('useEffect triggered - chats:', chats, 'chatId:', chatId, 'createChatMutation.isPending:', createChatMutation.isPending);\r\n    if (chats && !chatId && !createChatMutation.isPending) {\r\n      // Use the most recent open chat\r\n      const openChat = chats.find(c => c.status === \"open\");\r\n      console.log('Found open chat:', openChat);\r\n      if (openChat) {\r\n        console.log('Setting chatId to existing chat:', openChat.id);\r\n        setChatId(openChat.id);\r\n      } else {\r\n        // There are chats but none are open, create new one\r\n        console.log('Chats exist but none open, creating new chat');\r\n        createChatMutation.mutate();\r\n      }\r\n    } else if (chats && chats.length === 0 && !chatId && !createChatMutation.isPending) {\r\n      // No chats exist, create one\r\n      console.log('No chats exist, creating new chat');\r\n      createChatMutation.mutate();\r\n    }\r\n  }, [chats, chatId, createChatMutation.isPending]); // Added back chatId but now it should work\r\n\r\n  const sendMessageMutation = useMutation({\r\n    mutationFn: async (message: string) => {\r\n      const response = await apiRequest(\"POST\", `/api/support/chat/${chatId}/message`, { message }) as Response;\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/support/chat\", chatId] });\r\n      setMessage(\"\");\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to send message\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleSendMessage = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!message.trim() || !chatId) return;\r\n    sendMessageMutation.mutate(message);\r\n  };\r\n\r\n  const handleWhatsAppSupport = () => {\r\n    setActiveSupport(\"whatsapp\");\r\n    const phoneNumber = \"+233501234567\"; // Replace with actual support number\r\n    const messageText = encodeURIComponent(\"Hi, I need help with my data bundle purchase.\");\r\n    window.open(`https://wa.me/${phoneNumber}?text=${messageText}`, \"_blank\");\r\n  };\r\n\r\n  const handleLiveChatSupport = () => {\r\n    setActiveSupport(\"chat\");\r\n    document.getElementById('chat-section')?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (scrollAreaRef.current) {\r\n      scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\r\n    }\r\n  }, [chatData?.messages]);\r\n\r\n  // Mark admin messages as read when user views them\r\n  useEffect(() => {\r\n    if (chatData?.messages && chatId) {\r\n      const unreadAdminMessages = chatData.messages.filter(\r\n        msg => msg.senderType === 'admin' && !msg.isRead\r\n      );\r\n      \r\n      // Mark each unread admin message as read\r\n      unreadAdminMessages.forEach(async (msg) => {\r\n        try {\r\n          await apiRequest(\"PUT\", `/api/support/message/${msg.id}/read`, {}) as Response;\r\n        } catch (error) {\r\n          console.error('Failed to mark message as read:', error);\r\n        }\r\n      });\r\n      \r\n      // Invalidate unread count query to update badge\r\n      if (unreadAdminMessages.length > 0) {\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/support/unread-count\"] });\r\n      }\r\n    }\r\n  }, [chatData?.messages, chatId, queryClient]);\r\n\r\n  const messages = chatData?.messages || [];\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold mb-2\">Customer Support</h2>\r\n        <p className=\"text-sm text-muted-foreground mb-4\">\r\n          Choose your preferred support channel\r\n        </p>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n          <Button\r\n            onClick={handleWhatsAppSupport}\r\n            className={`h-auto py-4 text-sm flex-col gap-2 ${\r\n              activeSupport === \"whatsapp\"\r\n                ? \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                : \"bg-green-600 hover:bg-green-700 text-white\"\r\n            }`}\r\n          >\r\n            <MessageCircle className=\"h-6 w-6\" />\r\n            <span>WhatsApp Support</span>\r\n            <span className=\"text-xs opacity-90\">Get instant help via WhatsApp</span>\r\n          </Button>\r\n          <Button\r\n            onClick={handleLiveChatSupport}\r\n            className={`h-auto py-4 text-sm flex-col gap-2 ${\r\n              activeSupport === \"chat\"\r\n                ? \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                : \"border hover:bg-accent\"\r\n            }`}\r\n          >\r\n            <MessageCircle className=\"h-6 w-6\" />\r\n            <span>Live Chat</span>\r\n            <span className=\"text-xs text-muted-foreground\">Chat with our support team</span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <Card id=\"chat-section\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2 text-base md:text-lg\">\r\n            <MessageCircle className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n            Live Chat\r\n            {chatId ? (\r\n              <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full\">\r\n                Connected\r\n              </span>\r\n            ) : (\r\n              <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full\">\r\n                {createChatMutation.isPending ? \"Connecting...\" : \"Initializing...\"}\r\n              </span>\r\n            )}\r\n          </CardTitle>\r\n          <CardDescription className=\"text-xs md:text-sm\">\r\n            Send us a message and we'll respond as soon as possible\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n\r\n        <div className=\"border rounded-lg h-[600px] flex flex-col\">\r\n          <ScrollArea className=\"flex-1 p-4\" ref={scrollAreaRef}>\r\n            {isLoading ? (\r\n              <div className=\"text-center text-muted-foreground\">Loading messages...</div>\r\n            ) : messages.length === 0 ? (\r\n              <div className=\"text-center text-muted-foreground\">\r\n                No messages yet. Start a conversation!\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {messages.map((msg: ChatMessage) => (\r\n                  <div\r\n                    key={msg.id}\r\n                    className={`flex gap-3 ${\r\n                      msg.senderType === \"user\" ? \"justify-end\" : \"justify-start\"\r\n                    }`}\r\n                  >\r\n                    {msg.senderType === \"admin\" && (\r\n                      <Avatar className=\"h-8 w-8\">\r\n                        <AvatarFallback className=\"text-xs\">ST</AvatarFallback>\r\n                      </Avatar>\r\n                    )}\r\n                    <div\r\n                      className={`max-w-[70%] rounded-lg px-3 py-2 ${\r\n                        msg.senderType === \"user\"\r\n                          ? \"bg-primary text-primary-foreground\"\r\n                          : \"bg-muted\"\r\n                      }`}\r\n                    >\r\n                      <p className=\"text-sm\">{msg.message}</p>\r\n                      <p className=\"text-xs opacity-70 mt-1\">\r\n                        {new Date(msg.createdAt).toLocaleTimeString()}\r\n                      </p>\r\n                    </div>\r\n                    {msg.senderType === \"user\" && (\r\n                      <Avatar className=\"h-8 w-8\">\r\n                        <AvatarFallback>ME</AvatarFallback>\r\n                      </Avatar>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </ScrollArea>\r\n\r\n          <form onSubmit={handleSendMessage} className=\"p-4 border-t\">\r\n            <div className=\"flex gap-2\">\r\n              <Input\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                placeholder=\"Type your message...\"\r\n                disabled={sendMessageMutation.isPending}\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                size=\"sm\"\r\n                disabled={sendMessageMutation.isPending || !message.trim() || !chatId}\r\n                title={\r\n                  !chatId ? \"Chat not initialized\" :\r\n                  !message.trim() ? \"Message cannot be empty\" :\r\n                  sendMessageMutation.isPending ? \"Sending message...\" :\r\n                  \"Send message\"\r\n                }\r\n              >\r\n                <Send className=\"h-4 w-4\" />\r\n                {sendMessageMutation.isPending && \"Sending...\"}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { SupportChat } from \"@/components/user/support-chat\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Menu } from \"lucide-react\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n\r\nexport default function AgentSupportPage() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for support</SheetDescription>\r\n          </VisuallyHidden>\r\n          <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for support</SheetDescription>\r\n                </VisuallyHidden>\r\n                <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Support Chat</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Get help from our support team</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            <SupportChat />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo } from \"react\";\r\nimport { useParams } from \"wouter\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Smartphone, Upload, Menu, Package, AlertCircle, Wallet, CreditCard, CheckCircle } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\n\r\ntype BundleWithPrice = DataBundle & {\r\n  effective_price: string;\r\n  description?: string;\r\n};\r\n\r\ninterface AgentProfile {\r\n  markupPercentage: number;\r\n}\r\n\r\ninterface AgentData {\r\n  profile: AgentProfile;\r\n}\r\n\r\ninterface MutationResponse {\r\n  newBalance: string;\r\n  paymentUrl: string;\r\n}\r\n\r\nconst NetworkInfo = {\r\n  mtn: {\r\n    name: \"MTN\",\r\n    color: \"bg-yellow-400\",\r\n    logo: mtnLogo,\r\n  },\r\n  \"at_ishare\": {\r\n    name: \"AirtelTigo iShare\",\r\n    color: \"bg-red-500\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  \"at_bigtime\": {\r\n    name: \"AirtelTigo BIG TIME\",\r\n    color: \"bg-red-600\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  telecel: {\r\n    name: \"Telecel\",\r\n    color: \"bg-green-500\",\r\n    logo: telecelLogo,\r\n  },\r\n};\r\n\r\nexport default function AgentBundlesPage() {\r\n  const { network } = useParams<{ network: string }>();\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  \r\n  // Single purchase state\r\n  const [selectedBundle, setSelectedBundle] = useState<BundleWithPrice | null>(null);\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [paymentMethod, setPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>('paystack');\r\n  \r\n  // Bulk purchase state\r\n  const [bulkPhoneNumbers, setBulkPhoneNumbers] = useState(\"\");\r\n  const [bulkPaymentMethod, setBulkPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>('paystack');\r\n\r\n  // Fetch bundles for the selected network\r\n  const { data: bundles, isLoading: bundlesLoading } = useQuery({\r\n    queryKey: [\"/api/products/data-bundles\", network],\r\n    queryFn: async () => {\r\n      // Convert hyphens to underscores for API call\r\n      const apiNetwork = network?.replace(/-/g, '_');\r\n      const response = await apiRequest<BundleWithPrice[]>(\"GET\", `/api/products/data-bundles?network=${apiNetwork}`);\r\n      return response;\r\n    },\r\n    enabled: !!network,\r\n  });\r\n\r\n  // Fetch agent data for pricing\r\n  const { data: agentData } = useQuery<AgentData>({\r\n    queryKey: [\"/api/profile\"],\r\n    queryFn: async () => apiRequest(\"GET\", \"/api/profile\") as Promise<AgentData>,\r\n  });\r\n\r\n  // Fetch wallet balance\r\n  const { data: walletData } = useQuery<{ user: { walletBalance: string } }>({\r\n    queryKey: [\"/api/auth/me\"],\r\n    enabled: true,\r\n  });\r\n\r\n  const walletBalance = walletData?.user?.walletBalance ? parseFloat(walletData.user.walletBalance) : 0;\r\n\r\n  // Calculate bulk purchase total\r\n  const bulkTotal = useMemo(() => {\r\n    if (!bulkPhoneNumbers.trim() || !bundles) return null;\r\n    \r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    let total = 0;\r\n    let count = 0;\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gbAmount = parseFloat(parts[1]);\r\n        if (!isNaN(gbAmount) && gbAmount > 0) {\r\n          const matchingBundle = bundles.find(b => {\r\n            const dataAmount = b.dataAmount.toLowerCase();\r\n            const gbMatch = dataAmount.match(/(\\d+(?:\\.\\d+)?)/);\r\n            if (gbMatch) {\r\n              const bundleGB = parseFloat(gbMatch[1]);\r\n              return bundleGB === gbAmount;\r\n            }\r\n            return false;\r\n          });\r\n          \r\n          if (matchingBundle) {\r\n            const agentPrice = parseFloat(matchingBundle.effective_price);\r\n            total += agentPrice;\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return count > 0 ? { total, count } : null;\r\n  }, [bulkPhoneNumbers, bundles]);\r\n\r\n  // Single purchase mutation\r\n  const purchaseMutation = useMutation({\r\n    mutationFn: async (data: { bundleId: string; phoneNumber: string; paymentMethod: \"wallet\" | \"paystack\" }) => {\r\n      const bundle = bundles?.find(b => b.id === data.bundleId);\r\n      if (!bundle) throw new Error(\"Bundle not found\");\r\n      \r\n      const phoneNumbers = [data.phoneNumber];\r\n      const agentPrice = parseFloat(bundle.effective_price);\r\n      const isBulk = false;\r\n\r\n      console.log(\"[Frontend] Single order payment initialization\");\r\n      console.log(\"[Frontend] Phone numbers:\", phoneNumbers);\r\n      console.log(\"[Frontend] Is bulk:\", isBulk);\r\n\r\n      if (data.paymentMethod === \"wallet\") {\r\n        const payload = {\r\n          productType: \"data_bundle\",\r\n          productId: bundle.id,\r\n          productName: bundle.name,\r\n          network: bundle.network,\r\n          amount: agentPrice.toFixed(2),\r\n          customerPhone: phoneNumbers[0],\r\n          phoneNumbers: undefined,\r\n          isBulkOrder: isBulk,\r\n        };\r\n        \r\n        console.log(\"[Frontend] Wallet payload:\", JSON.stringify(payload, null, 2));\r\n        \r\n        const response = await apiRequest(\"POST\", \"/api/wallet/pay\", payload);\r\n        return response as MutationResponse;\r\n      } else {\r\n        const payload = {\r\n          productType: \"data_bundle\",\r\n          productId: bundle.id,\r\n          customerPhone: phoneNumbers[0],\r\n          phoneNumbers: undefined,\r\n          isBulkOrder: isBulk,\r\n          customerEmail: user?.email || undefined,\r\n        };\r\n        \r\n        console.log(\"[Frontend] Paystack payload:\", JSON.stringify(payload, null, 2));\r\n        \r\n        const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n        return response as MutationResponse;\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setSelectedBundle(null);\r\n        setPhoneNumber(\"\");\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      \r\n      toast({\r\n        title: isInsufficientBalance ? \"⚠️ Insufficient Wallet Balance\" : \"❌ Payment Failed\",\r\n        description: isInsufficientBalance \r\n          ? \"Your wallet balance is too low for this purchase. Please top up your wallet or use Paystack.\"\r\n          : `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Bulk purchase mutation\r\n  const bulkPurchaseMutation = useMutation({\r\n    mutationFn: async (data: {\r\n      bundleId: string;\r\n      phoneNumbers: string[];\r\n      paymentMethod: \"wallet\" | \"paystack\";\r\n      orderItems?: Array<{ phone: string; bundleId: string; bundleName: string; price: number }>;\r\n      totalAmount?: number;\r\n    }) => {\r\n      const isBulk = true;\r\n\r\n      // Use new orderItems format if available\r\n      if (data.orderItems && data.totalAmount !== undefined) {\r\n        const phoneNumbers = data.orderItems.map(item => item.phone);\r\n        const totalAmount = data.totalAmount;\r\n\r\n        console.log(\"[Frontend] ========== NEW BULK FORMAT PAYMENT ==========\");\r\n        console.log(\"[Frontend] Order items:\", data.orderItems);\r\n        console.log(\"[Frontend] Total amount:\", totalAmount);\r\n        console.log(\"[Frontend] ================================================\");\r\n\r\n        if (data.paymentMethod === \"wallet\") {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            productName: `Bulk Order - ${data.orderItems.length} items`,\r\n            network: network,\r\n            amount: totalAmount.toFixed(2),\r\n            customerPhone: phoneNumbers[0],\r\n            isBulkOrder: isBulk,\r\n            orderItems: data.orderItems,\r\n          };\r\n\r\n          console.log(\"[Frontend] Wallet payload:\", JSON.stringify(payload, null, 2));\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/wallet/pay\", payload);\r\n          return response as MutationResponse;\r\n        } else {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            network: network,\r\n            customerPhone: phoneNumbers[0],\r\n            isBulkOrder: isBulk,\r\n            orderItems: data.orderItems,\r\n            totalAmount: totalAmount,\r\n            customerEmail: user?.email || undefined,\r\n          };\r\n\r\n          console.log(\"[Frontend] Paystack payload:\", JSON.stringify(payload, null, 2));\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n\r\n          console.log(\"[Frontend] ===== SERVER RESPONSE =====\");\r\n          console.log(\"[Frontend] Result:\", response);\r\n          console.log(\"[Frontend] ================================\");\r\n\r\n          return response as MutationResponse;\r\n        }\r\n      } else {\r\n        // Fallback to old format for backward compatibility\r\n        const bundle = bundles?.find(b => b.id === data.bundleId);\r\n        if (!bundle) throw new Error(\"Bundle not found\");\r\n\r\n        const phoneNumbers = data.phoneNumbers;\r\n        const basePrice = parseFloat(bundle.basePrice);\r\n        const markup = agentData?.profile?.markupPercentage || 0;\r\n        const agentPrice = basePrice + (basePrice * markup / 100);\r\n        const totalAmount = agentPrice * phoneNumbers.length;\r\n\r\n        console.log(\"[Frontend] ========== LEGACY BULK FORMAT ==========\");\r\n        console.log(\"[Frontend] Phone numbers:\", phoneNumbers);\r\n        console.log(\"[Frontend] Total amount:\", totalAmount);\r\n        console.log(\"[Frontend] ================================================\");\r\n\r\n        if (data.paymentMethod === \"wallet\") {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            productId: bundle.id,\r\n            productName: bundle.name,\r\n            network: bundle.network,\r\n            amount: totalAmount.toFixed(2),\r\n            customerPhone: phoneNumbers[0],\r\n            phoneNumbers: phoneNumbers,\r\n            isBulkOrder: isBulk,\r\n          };\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/wallet/pay\", payload);\r\n          return response as MutationResponse;\r\n        } else {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            productId: bundle.id,\r\n            customerPhone: phoneNumbers[0],\r\n            phoneNumbers: phoneNumbers,\r\n            isBulkOrder: isBulk,\r\n            customerEmail: user?.email || undefined,\r\n          };\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n          return response as MutationResponse;\r\n        }\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your bulk purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setBulkPhoneNumbers(\"\");\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      \r\n      toast({\r\n        title: isInsufficientBalance ? \"⚠️ Insufficient Wallet Balance\" : \"❌ Payment Failed\",\r\n        description: isInsufficientBalance \r\n          ? \"Your wallet balance is too low for this purchase. Please top up your wallet or use Paystack.\"\r\n          : `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleSinglePurchase = () => {\r\n    if (!selectedBundle || !phoneNumber) return;\r\n    \r\n    const agentPrice = parseFloat(selectedBundle.effective_price);\r\n    \r\n    if (paymentMethod === \"wallet\" && agentPrice > walletBalance) {\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${(agentPrice - walletBalance).toFixed(2)} more. Please top up your wallet or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!paymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    purchaseMutation.mutate({\r\n      bundleId: selectedBundle.id,\r\n      phoneNumber,\r\n      paymentMethod,\r\n    });\r\n  };\r\n\r\n  const handleBulkPurchase = () => {\r\n    if (!bulkPhoneNumbers.trim()) {\r\n      toast({\r\n        title: \"❌ Missing Information\",\r\n        description: \"Please enter phone numbers with GB amounts\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Parse and validate bulk input\r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    const parsedData: Array<{ phone: string; gb: number }> = [];\r\n\r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) {\r\n        toast({\r\n          title: \"❌ Invalid Format\",\r\n          description: `Line \"${line}\" must have format: phone_number GB_amount (e.g., \"0241234567 2\")`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      let phoneStr = parts[0];\r\n      const gbAmount = parseFloat(parts[1]);\r\n\r\n      if (isNaN(gbAmount) || gbAmount <= 0) {\r\n        toast({\r\n          title: \"❌ Invalid GB Amount\",\r\n          description: `GB amount \"${parts[1]}\" must be a positive number`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      // Normalize the phone number\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n\r\n      // Validate phone number for the selected network\r\n      const validation = validatePhoneNetwork(normalizedPhone, network);\r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: `${phoneStr}: ${validation.error || `Must be for ${networkInfo?.name} network. Valid prefixes: ${prefixes.join(\", \")}`}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      parsedData.push({ phone: normalizedPhone, gb: gbAmount });\r\n    }\r\n\r\n    if (parsedData.length === 0) {\r\n      toast({\r\n        title: \"No Data\",\r\n        description: \"Please enter at least one phone number with GB amount\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Find matching bundles for each GB amount from our bundles list\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let totalAmount = 0;\r\n\r\n    for (const item of parsedData) {\r\n      // Find a bundle that matches the GB amount (looking for bundles with the GB in the dataAmount)\r\n      const matchingBundle = bundles?.find(b => {\r\n        const dataAmount = b.dataAmount;\r\n        // Try to extract GB from dataAmount (e.g., \"5GB\" -> 5)\r\n        const gbMatch = dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n        if (gbMatch) {\r\n          const bundleGB = parseFloat(gbMatch[1]);\r\n          return bundleGB === item.gb;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (!matchingBundle) {\r\n        toast({\r\n          title: \"❌ Bundle Not Found\",\r\n          description: `No ${item.gb}GB bundle available for ${networkInfo?.name}. Please check available bundles.`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Validate phone network but don't deny - just alert\r\n      const validation = validatePhoneNetwork(item.phone, network);\r\n      if (!validation.isValid) {\r\n        toast({\r\n          title: \"⚠️ Network Mismatch\",\r\n          description: `${item.phone}: ${validation.error}. Purchase will proceed but may fail if network doesn't match.`,\r\n          variant: \"default\",\r\n          duration: 6000,\r\n        });\r\n      }\r\n\r\n      const agentPrice = matchingBundle.agentPrice ? parseFloat(matchingBundle.agentPrice) : \r\n        parseFloat(matchingBundle.basePrice) + (parseFloat(matchingBundle.basePrice) * (agentData?.profile?.markupPercentage || 0) / 100);\r\n\r\n      orderItems.push({\r\n        phone: item.phone,\r\n        bundleId: matchingBundle.id,\r\n        bundleName: matchingBundle.name,\r\n        price: agentPrice,\r\n      });\r\n\r\n      totalAmount += agentPrice;\r\n    }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    if (bulkPaymentMethod === \"wallet\" && walletBalance < totalAmount) {\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${(totalAmount - walletBalance).toFixed(2)} more. Please top up your wallet or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!bulkPaymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    bulkPurchaseMutation.mutate({\r\n      bundleId: \"\", // Not used in new format\r\n      phoneNumbers: [], // Not used in new format\r\n      paymentMethod: bulkPaymentMethod,\r\n      orderItems,\r\n      totalAmount,\r\n    });\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const networkInfo = NetworkInfo[(network?.replace(/-/g, '_')) as keyof typeof NetworkInfo];\r\n\r\n  if (!networkInfo) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold mb-4\">Network Not Found</h1>\r\n          <p className=\"text-muted-foreground\">The requested network is not available.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block flex-shrink-0\">\r\n        <AgentSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n          </VisuallyHidden>\r\n          <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 flex-shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div className=\"flex items-center gap-3\">\r\n              <img\r\n                src={networkInfo.logo}\r\n                alt={networkInfo.name}\r\n                className=\"h-8 w-8 rounded\"\r\n              />\r\n              <div>\r\n                <h1 className=\"text-xl font-bold\">{networkInfo.name} Bundles</h1>\r\n                <p className=\"text-sm text-muted-foreground\">Purchase data bundles for your customers</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto space-y-6\">\r\n            {/* Network Header */}\r\n            <Card>\r\n              <CardContent className=\"pt-6\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className={`w-4 h-4 rounded-full ${networkInfo.color}`} />\r\n                  <div>\r\n                    <h2 className=\"text-lg font-semibold\">{networkInfo.name} Data Bundles</h2>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      Purchase data bundles for your customers with your markup pricing\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Tabs defaultValue=\"single\" className=\"w-full\">\r\n              <TabsList className=\"grid w-full grid-cols-2\">\r\n                <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                  <Smartphone className=\"h-4 w-4 mr-2\" />\r\n                  Single Purchase\r\n                </TabsTrigger>\r\n                {network !== \"at_ishare\" && (\r\n                  <TabsTrigger value=\"bulk\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                    <Package className=\"h-4 w-4 mr-2\" />\r\n                    Bulk Purchase\r\n                  </TabsTrigger>\r\n                )}\r\n              </TabsList>\r\n\r\n              {/* Single Purchase Tab */}\r\n              <TabsContent value=\"single\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Purchase Data Bundle</CardTitle>\r\n                    <CardDescription>Select a bundle and enter recipient details</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Bundle Dropdown */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label>Select Bundle</Label>\r\n                      {bundlesLoading ? (\r\n                        <div className=\"flex justify-center py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </div>\r\n                      ) : (\r\n                        <Select\r\n                          value={selectedBundle?.id || \"\"}\r\n                          onValueChange={(value) => {\r\n                            const bundle = bundles?.find(b => b.id === value);\r\n                            setSelectedBundle(bundle || null);\r\n                          }}\r\n                        >\r\n                          <SelectTrigger>\r\n                            <SelectValue placeholder=\"Choose a data bundle\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {bundles && bundles.length > 0 ? (\r\n                              bundles.map((bundle) => {\r\n                                const effectivePrice = parseFloat(bundle.effective_price);\r\n                                return (\r\n                                  <SelectItem key={bundle.id} value={bundle.id}>\r\n                                    {bundle.name} - {bundle.validity} - GH₵{effectivePrice.toFixed(2)}\r\n                                  </SelectItem>\r\n                                );\r\n                              })\r\n                            ) : (\r\n                              <SelectItem value=\"no-bundles\" disabled>\r\n                                No bundles available\r\n                              </SelectItem>\r\n                            )}\r\n                          </SelectContent>\r\n                        </Select>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Selected Bundle Display */}\r\n                    {selectedBundle && (\r\n                      <div className=\"p-2 bg-yellow-500 text-white rounded-lg border border-yellow-600\">\r\n                        <p className=\"text-sm text-white\">Selected Bundle</p>\r\n                        <p className=\"font-medium text-lg text-white\">{selectedBundle.name}</p>\r\n                        <p className=\"text-sm text-white\">{selectedBundle.validity}</p>\r\n                        {selectedBundle.description && (\r\n                          <p className=\"text-xs text-white mt-1\">{selectedBundle.description}</p>\r\n                        )}\r\n                        <div className=\"flex items-center gap-2 mt-2\">\r\n                          <span className=\"text-2xl font-bold text-white\">\r\n                            GH₵{parseFloat(selectedBundle.effective_price).toFixed(2)}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"phone\">Beneficiary Number</Label>\r\n                      <Input\r\n                        id=\"phone\"\r\n                        placeholder=\"0241234567\"\r\n                        value={phoneNumber}\r\n                        onChange={(e) => setPhoneNumber(e.target.value)}\r\n                      />\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        For <strong>{networkInfo?.name}</strong> network only. \r\n                        Valid prefixes: <strong>{selectedBundle ? getNetworkPrefixes(selectedBundle.network).join(\", \") : \"\"}</strong>\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label>Payment Method</Label>\r\n                      <RadioGroup \r\n                        value={paymentMethod || \"\"} \r\n                        onValueChange={(value: \"wallet\" | \"paystack\") => setPaymentMethod(value)}\r\n                        className=\"grid gap-3\"\r\n                      >\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <RadioGroupItem\r\n                            value=\"wallet\"\r\n                            id=\"wallet-single\"\r\n                            disabled={selectedBundle ? parseFloat(selectedBundle.effective_price) > walletBalance : false}\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"wallet-single\"\r\n                            className={`flex items-center justify-between rounded-lg border-2 border-muted bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all ${\r\n                              selectedBundle ? parseFloat(selectedBundle.effective_price) > walletBalance : false\r\n                                ? \"opacity-50 cursor-not-allowed\"\r\n                                : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Wallet Balance</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Available: GH₵{walletBalance.toFixed(2)}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                          {selectedBundle ? parseFloat(selectedBundle.effective_price) > walletBalance : false && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <RadioGroupItem\r\n                            value=\"paystack\"\r\n                            id=\"paystack-single\"\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"paystack-single\"\r\n                            className=\"flex items-center justify-between rounded-lg border-2 border-muted bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all\"\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Pay with MoMo</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                        </div>\r\n                      </RadioGroup>\r\n                    </div>\r\n\r\n                    {selectedBundle && paymentMethod === \"wallet\" && parseFloat(selectedBundle.effective_price) > walletBalance && (\r\n                      <Alert variant=\"default\" className=\"border-destructive bg-white text-destructive\">\r\n                        <AlertCircle className=\"h-4 w-4\" />\r\n                        <AlertDescription className=\"text-sm\">\r\n                          <strong>Insufficient Balance:</strong> You need GH₵{(parseFloat(selectedBundle.effective_price) - walletBalance).toFixed(2)} more.\r\n                          <a href=\"/agent/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                        </AlertDescription>\r\n                      </Alert>\r\n                    )}\r\n\r\n                    <Button\r\n                      className=\"w-full\"\r\n                      size=\"lg\"\r\n                      onClick={handleSinglePurchase}\r\n                      disabled={!selectedBundle || !phoneNumber || !paymentMethod || purchaseMutation.isPending || (paymentMethod === \"wallet\" && selectedBundle && parseFloat(selectedBundle.effective_price) > walletBalance)}\r\n                    >\r\n                      {purchaseMutation.isPending ? (\r\n                        <>\r\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                          Processing...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Smartphone className=\"mr-2 h-4 w-4\" />\r\n                          Purchase Bundle\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              {/* Bulk Purchase Tab */}\r\n              {network !== \"at_ishare\" && (\r\n                <TabsContent value=\"bulk\" className=\"space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                      <CardTitle>Bulk Purchase</CardTitle>\r\n                      <CardDescription>Enter phone numbers with GB amounts for {networkInfo?.name}</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <Label htmlFor=\"bulk-phones\">Beneficiary Numbers and GB Amounts</Label>\r\n                          {bulkPhoneNumbers.trim() && (\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              {bulkPhoneNumbers.split('\\n').filter(line => line.trim()).length} entries\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        <Textarea\r\n                          id=\"bulk-phones\"\r\n                          placeholder=\"0546591622 1&#10;0247064874 3&#10;0245696072 2&#10;233547897522 10&#10;...add as many as you need (no limit)\"\r\n                          rows={20}\r\n                          value={bulkPhoneNumbers}\r\n                          onChange={(e) => setBulkPhoneNumbers(e.target.value)}\r\n                          className=\"font-mono text-sm\"\r\n                        />\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          Enter one number per line with GB amount (e.g., \"0241234567 2\" for 2GB). \r\n                          Supports formats: 0241234567 or 233241234567 (no + sign). \r\n                          <strong className=\"text-green-600\">✓ No limit - add 100+ numbers!</strong>\r\n                          <br />\r\n                          All numbers must be for <strong>{networkInfo?.name}</strong> network.\r\n                          Valid prefixes: <strong>{network ? getNetworkPrefixes(network).join(\", \") : \"\"}</strong>\r\n                        </p>\r\n                      </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label>Payment Method</Label>\r\n                      <RadioGroup \r\n                        value={bulkPaymentMethod || \"\"} \r\n                        onValueChange={(value: \"wallet\" | \"paystack\") => setBulkPaymentMethod(value)}\r\n                        className=\"grid gap-3\"\r\n                      >\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <RadioGroupItem\r\n                            value=\"wallet\"\r\n                            id=\"wallet-bulk\"\r\n                            disabled={bulkTotal ? walletBalance < bulkTotal.total : false}\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"wallet-bulk\"\r\n                            className={`flex items-center justify-between rounded-lg border-2 border-muted !bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all ${\r\n                              bulkTotal ? walletBalance < bulkTotal.total : false ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Wallet Balance</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Available: GH₵{walletBalance.toFixed(2)}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                          {bulkTotal ? walletBalance < bulkTotal.total : false && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <RadioGroupItem\r\n                            value=\"paystack\"\r\n                            id=\"paystack-bulk\"\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"paystack-bulk\"\r\n                            className=\"flex items-center justify-between rounded-lg border-2 border-muted bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all\"\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Pay with MoMo</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                        </div>\r\n                      </RadioGroup>\r\n                    </div>\r\n\r\n                    {/* Insufficient Balance Alert for Bulk */}\r\n                    {bulkTotal && bulkPaymentMethod === \"wallet\" && walletBalance < bulkTotal.total && (\r\n                      <Alert variant=\"default\" className=\"border-destructive bg-white text-destructive\">\r\n                        <AlertCircle className=\"h-4 w-4\" />\r\n                        <AlertDescription className=\"text-sm\">\r\n                          <strong>Insufficient Balance:</strong> You need GH₵{(bulkTotal.total - walletBalance).toFixed(2)} more.\r\n                          <a href=\"/agent/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                        </AlertDescription>\r\n                      </Alert>\r\n                    )}\r\n\r\n                      <Button\r\n                        className=\"w-full\"\r\n                        size=\"lg\"\r\n                        onClick={handleBulkPurchase}\r\n                        disabled={\r\n                          !bulkPhoneNumbers.trim() ||\r\n                          !bulkPaymentMethod ||\r\n                          bulkPurchaseMutation.isPending ||\r\n                          (bulkPaymentMethod === \"wallet\" && bulkTotal !== null && walletBalance < bulkTotal.total)\r\n                        }\r\n                      >\r\n                        {bulkPurchaseMutation.isPending ? (\r\n                          <>\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Upload className=\"mr-2 h-4 w-4\" />\r\n                            {bulkTotal\r\n                              ? `Purchase for GH₵${bulkTotal.total.toFixed(2)} (${bulkTotal.count} items)`\r\n                              : \"Purchase Data Bundles\"\r\n                            }\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    </CardContent>\r\n                  </Card>\r\n              </TabsContent>\r\n              )}\r\n            </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useMutation, useQueryClient, useQuery } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage } from \"@/components/ui/form\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Wallet, Plus, Loader2, CreditCard, CheckCircle } from \"lucide-react\";\r\n\r\nconst topupSchema = z.object({\r\n  amount: z.string().refine((val) => {\r\n    const num = parseFloat(val);\r\n    return !isNaN(num) && num >= 1;\r\n  }, \"Minimum top-up amount is GHS 1\"),\r\n  paymentMethod: z.enum([\"paystack\"], {\r\n    required_error: \"Please select a payment method\",\r\n  }),\r\n});\r\n\r\ntype TopupFormData = z.infer<typeof topupSchema>;\r\n\r\nexport function WalletTopup() {\r\n  const [open, setOpen] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data: userStats } = useQuery({\r\n    queryKey: [\"user-stats\"],\r\n    queryFn: () => apiRequest(\"/api/user/stats\"),\r\n    enabled: !!user,\r\n  });\r\n\r\n  const form = useForm<TopupFormData>({\r\n    resolver: zodResolver(topupSchema),\r\n    defaultValues: {\r\n      amount: \"\",\r\n      paymentMethod: \"paystack\",\r\n    },\r\n  });\r\n\r\n  const walletBalance = userStats?.walletBalance ? parseFloat(userStats.walletBalance) : 0;\r\n  const topupAmount = parseFloat(form.watch(\"amount\") || \"0\");\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      form.reset({\r\n        amount: \"\",\r\n        paymentMethod: \"paystack\",\r\n      });\r\n    }\r\n  }, [open, form]);\r\n\r\n  const topupMutation = useMutation({\r\n    mutationFn: async (data: TopupFormData) => {\r\n      return await apiRequest(\"/api/wallet/topup/initialize\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ amount: data.amount, paymentMethod: data.paymentMethod }),\r\n      });\r\n    },\r\n    onSuccess: (data: any) => {\r\n      // Redirect to Paystack payment page\r\n      if (data.authorizationUrl) {\r\n        window.location.href = data.authorizationUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to initialize payment\";\r\n      toast({\r\n        title: \"❌ Wallet Top-up Failed\",\r\n        description: `${errorMessage}. Please check your connection and try again. If the issue persists, contact support.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: TopupFormData) => {\r\n    setIsProcessing(true);\r\n    topupMutation.mutate(data);\r\n  };\r\n\r\n  const quickAmounts = [10, 20, 50, 100, 200, 500];\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button variant=\"default\" size=\"sm\">\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          Top Up Wallet\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-md bg-white text-black\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Wallet className=\"w-5 h-5\" />\r\n            Top Up Wallet\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Add money to your wallet to make instant purchases\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"amount\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Amount (GHS)</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Enter amount\"\r\n                      step=\"0.01\"\r\n                      min=\"1\"\r\n                      {...field}\r\n                      disabled={isProcessing}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {/* Payment Method */}\r\n            <FormField\r\n              control={form.control}\r\n              name=\"paymentMethod\"\r\n              render={({ field }) => (\r\n                <FormItem className=\"space-y-3\">\r\n                  <FormLabelWithoutFor className=\"text-green-700\">Payment Method</FormLabelWithoutFor>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"grid gap-3\"\r\n                    >\r\n                      <div className=\"flex items-center space-x-3 p-4 rounded-lg border-2 border-black !bg-white hover:border-green-500 hover:shadow-md cursor-pointer transition-all\">\r\n                        <RadioGroupItem value=\"paystack\" id=\"paystack\" />\r\n                        <div className=\"flex items-center justify-between flex-1\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                            <div>\r\n                              <div className=\"font-medium text-green-700\">Pay with MoMo</div>\r\n                              <div className=\"text-sm text-green-600\">\r\n                                Secure payment via Paystack\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          {field.value === \"paystack\" && (\r\n                            <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <div>\r\n              <p className=\"text-sm text-muted-foreground mb-2\">Quick amounts:</p>\r\n              <div className=\"grid grid-cols-3 gap-2\">\r\n                {quickAmounts.map((amount) => (\r\n                  <Button\r\n                    key={amount}\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => form.setValue(\"amount\", amount.toString())}\r\n                    disabled={isProcessing}\r\n                  >\r\n                    GHS {amount}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"w-full\"\r\n              disabled={isProcessing}\r\n            >\r\n              {isProcessing ? (\r\n                <>\r\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                  Processing...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <CreditCard className=\"w-4 h-4 mr-2\" />\r\n                  Continue to Payment\r\n                </>\r\n              )}\r\n            </Button>\r\n          </form>\r\n        </Form>\r\n\r\n        <div className=\"text-xs text-muted-foreground space-y-1 mt-4\">\r\n          <p>• Secure payment via Paystack</p>\r\n          <p>• Funds reflect instantly after payment</p>\r\n          <p>• Use wallet for faster checkout</p>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Wallet, TrendingUp, Clock, CheckCircle, XCircle, ArrowDownRight, CreditCard, Menu } from \"lucide-react\";\r\nimport { Link } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { WalletTopup } from \"@/components/user/wallet-topup\";\r\n\r\ninterface Transaction {\r\n  id: string;\r\n  reference: string;\r\n  type: string;\r\n  productName: string;\r\n  amount: string;\r\n  status: string;\r\n  paymentMethod: string;\r\n  createdAt: string;\r\n  completedAt: string | null;\r\n}\r\n\r\ninterface WalletStats {\r\n  balance: string;\r\n  totalTopups: number;\r\n  totalTopupAmount: string;\r\n  totalSpent: string;\r\n  lastTopupDate: string | null;\r\n  lastTopupAmount: string | null;\r\n}\r\n\r\nconst getStatusConfig = (status: string) => {\r\n  switch (status.toLowerCase()) {\r\n    case 'completed':\r\n    case 'delivered':\r\n      return {\r\n        variant: 'default' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-green-500',\r\n        label: status === 'completed' ? 'Completed' : 'Delivered'\r\n      };\r\n    case 'confirmed':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-500',\r\n        label: 'Confirmed'\r\n      };\r\n    case 'pending':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-amber-500',\r\n        label: 'Pending'\r\n      };\r\n    case 'failed':\r\n      return {\r\n        variant: 'destructive' as const,\r\n        icon: XCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-red-500',\r\n        label: 'Failed'\r\n      };\r\n    default:\r\n      return {\r\n        variant: 'outline' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-gray-500',\r\n        label: status\r\n      };\r\n  }\r\n};\r\n\r\nexport default function AgentWalletPage() {\r\n  const { user } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Fetch wallet stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery<WalletStats>({\r\n    queryKey: [\"/api/agent/wallet\"],\r\n    queryFn: () => apiRequest(\"/api/agent/wallet\", { disableAutoLogout: true }),\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 10)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/agent/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/agent/transactions\", { disableAutoLogout: true }),\r\n    refetchInterval: 30000,\r\n    select: (data) => data.slice(0, 10), // Only show 10 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n          </VisuallyHidden>\r\n          <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-base sm:text-lg font-bold\">Agent Wallet</h1>\r\n              <p className=\"text-xs text-muted-foreground\">Manage your wallet balance and transactions</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <Card className=\"bg-blue-500 border-blue-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">User Wallet Balance</CardTitle>\r\n                  <Wallet className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold text-white\">\r\n                    GH₵{user?.walletBalance || '0.00'}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Available for purchases</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card className=\"bg-green-500 border-green-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">Agent Profit Balance</CardTitle>\r\n                  <TrendingUp className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold text-white\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.balance || '0.00'}`\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Withdrawable earnings</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card className=\"bg-purple-500 border-purple-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">Total Top-ups</CardTitle>\r\n                  <CreditCard className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold text-white\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      stats?.totalTopups || 0\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Wallet top-up transactions</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card className=\"bg-red-500 border-red-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">Total Spent</CardTitle>\r\n                  <ArrowDownRight className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold text-white\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.totalSpent || '0.00'}`\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Total amount spent</p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Top-up Section */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Top Up User Wallet</CardTitle>\r\n                <CardDescription>Add funds to your user wallet to purchase data bundles and make instant payments</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <WalletTopup />\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Recent Transactions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle>Recent Transactions</CardTitle>\r\n                    <CardDescription>Your latest wallet transactions</CardDescription>\r\n                  </div>\r\n                  <Link href=\"/agent/transactions\">\r\n                    <Button variant=\"outline\" size=\"sm\">\r\n                      View All\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                  </div>\r\n                ) : transactions && transactions.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Reference</TableHead>\r\n                        <TableHead>Type</TableHead>\r\n                        <TableHead>Product</TableHead>\r\n                        <TableHead>Amount</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Date</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {transactions.map((transaction) => {\r\n                        const statusConfig = getStatusConfig(transaction.status);\r\n                        const StatusIcon = statusConfig.icon;\r\n\r\n                        return (\r\n                          <TableRow key={transaction.id}>\r\n                            <TableCell className=\"font-mono text-sm\">\r\n                              {transaction.reference}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Badge variant=\"outline\" className=\"capitalize\">\r\n                                {transaction.type.replace('_', ' ')}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"max-w-[200px] truncate\">\r\n                              {transaction.productName}\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium tabular-nums\">\r\n                              GH₵{transaction.amount}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${statusConfig.bgColor}`}>\r\n                                <StatusIcon className={`h-3 w-3 ${statusConfig.color}`} />\r\n                                <span className={statusConfig.color}>{statusConfig.label}</span>\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-muted-foreground text-sm\">\r\n                              {new Date(transaction.createdAt).toLocaleString()}\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        );\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    No transactions yet. Start by topping up your wallet.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { Menu, TrendingUp, AlertCircle } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ntype PricingData = {\r\n  bundleId: string;\r\n  agentPrice: string;\r\n  adminBasePrice: string;\r\n  agentProfit: string;\r\n};\r\n\r\ntype DataBundle = {\r\n  id: string;\r\n  name: string;\r\n  network: string;\r\n  dataAmount: string;\r\n  validity: string;\r\n  basePrice: string;\r\n};\r\n\r\nexport default function AgentPricingPage() {\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [priceChanges, setPriceChanges] = useState<Record<string, { agentPrice: string; agentProfit: string }>>({});\r\n\r\n  const { data: pricing, isLoading } = useQuery<PricingData[]>({\r\n    queryKey: [\"/api/agent/pricing\"],\r\n  });\r\n\r\n  const { data: bundles } = useQuery<DataBundle[]>({\r\n    queryKey: [\"/api/products/data-bundles\"],\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: (prices: Record<string, { agentPrice: string; agentProfit: string }>) =>\r\n      apiRequest(\"POST\", \"/api/agent/pricing\", { prices }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/pricing\"] });\r\n      setPriceChanges({});\r\n      toast({ title: \"Pricing updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update pricing\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const getBundleName = (bundleId: string) => {\r\n    const bundle = bundles?.find(b => b.id === bundleId);\r\n    return bundle ? `${bundle.network.toUpperCase()} ${bundle.dataAmount} - ${bundle.validity}` : bundleId;\r\n  };\r\n\r\n  const getCurrentPrice = (bundleId: string) => {\r\n    const existing = pricing?.find(p => p.bundleId === bundleId);\r\n    const changes = priceChanges[bundleId];\r\n    return {\r\n      agentPrice: changes?.agentPrice || existing?.agentPrice || \"0.00\",\r\n      agentProfit: changes?.agentProfit || existing?.agentProfit || \"0.00\",\r\n      adminBasePrice: existing?.adminBasePrice || \"0.00\",\r\n    };\r\n  };\r\n\r\n  const handlePriceChange = (bundleId: string, field: 'agentPrice' | 'agentProfit', value: string) => {\r\n    const current = getCurrentPrice(bundleId);\r\n    const numValue = parseFloat(value) || 0;\r\n\r\n    if (field === 'agentPrice') {\r\n      // When agent price changes, calculate profit\r\n      const basePrice = parseFloat(current.adminBasePrice);\r\n      const profit = Math.max(0, numValue - basePrice);\r\n      setPriceChanges(prev => ({\r\n        ...prev,\r\n        [bundleId]: {\r\n          agentPrice: value,\r\n          agentProfit: profit.toFixed(2),\r\n        }\r\n      }));\r\n    } else {\r\n      // When profit changes, calculate selling price\r\n      const basePrice = parseFloat(current.adminBasePrice);\r\n      const sellingPrice = basePrice + numValue;\r\n      setPriceChanges(prev => ({\r\n        ...prev,\r\n        [bundleId]: {\r\n          agentPrice: sellingPrice.toFixed(2),\r\n          agentProfit: value,\r\n        }\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (Object.keys(priceChanges).length === 0) {\r\n      toast({ title: \"No changes to save\" });\r\n      return;\r\n    }\r\n    updateMutation.mutate(priceChanges);\r\n  };\r\n\r\n  const hasUnsavedChanges = Object.keys(priceChanges).length > 0;\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-sm lg:text-base font-semibold\">Pricing Management</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            {hasUnsavedChanges && (\r\n              <div className=\"flex items-center gap-2 text-sm text-orange-600\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                Unsaved changes\r\n              </div>\r\n            )}\r\n            <Button\r\n              onClick={handleSave}\r\n              disabled={updateMutation.isPending || !hasUnsavedChanges}\r\n            >\r\n              {updateMutation.isPending ? \"Saving...\" : \"Save Changes\"}\r\n            </Button>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <TrendingUp className=\"h-5 w-5\" />\r\n                  Set Your Selling Prices\r\n                </CardTitle>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Set your selling prices for data bundles. Your profit margin will be calculated automatically.\r\n                </p>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : pricing && pricing.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Data Bundle</TableHead>\r\n                        <TableHead>Base Price</TableHead>\r\n                        <TableHead>Your Price</TableHead>\r\n                        <TableHead>Your Profit</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {pricing.map((price) => {\r\n                        const current = getCurrentPrice(price.bundleId);\r\n                        const hasChanges = priceChanges[price.bundleId];\r\n\r\n                        return (\r\n                          <TableRow key={price.bundleId} className={hasChanges ? \"bg-blue-50\" : \"\"}>\r\n                            <TableCell className=\"font-medium\">\r\n                              {getBundleName(price.bundleId)}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {formatCurrency(current.adminBasePrice)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={current.agentPrice}\r\n                                onChange={(e) => handlePriceChange(price.bundleId, 'agentPrice', e.target.value)}\r\n                                className=\"w-24 tabular-nums\"\r\n                                min={current.adminBasePrice}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={current.agentProfit}\r\n                                onChange={(e) => handlePriceChange(price.bundleId, 'agentProfit', e.target.value)}\r\n                                className=\"w-24 tabular-nums\"\r\n                                min=\"0\"\r\n                              />\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        );\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No pricing data available. Please contact admin to set up base prices.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>How Pricing Works</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div className=\"p-4 border rounded-lg\">\r\n                    <h4 className=\"font-medium mb-2\">Base Price</h4>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      The minimum price set by admin for each role. You cannot sell below this price.\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"p-4 border rounded-lg\">\r\n                    <h4 className=\"font-medium mb-2\">Your Price</h4>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      The price you charge customers. Must be at least the base price.\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"p-4 border rounded-lg\">\r\n                    <h4 className=\"font-medium mb-2\">Your Profit</h4>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      Your Price minus Base Price. This is your profit margin per sale.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Crown } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\n\r\nexport default function DealerPricingPage() {\r\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\r\n\r\n  const { data: pricing, isLoading } = useQuery({\r\n    queryKey: [\"/api/dealer/pricing\"],\r\n    queryFn: () => apiRequest(\"/api/dealer/pricing\"),\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <Crown className=\"mx-auto h-12 w-12 text-yellow-500\" />\r\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Dealer Pricing Plans</h2>\r\n          <p className=\"mt-2 text-lg text-gray-600\">\r\n            Choose the perfect plan for your dealer business\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-16 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {pricing?.plans?.map((plan: any) => (\r\n            <Card\r\n              key={plan.id}\r\n              className={`relative ${selectedPlan === plan.id ? 'ring-2 ring-blue-500' : ''}`}\r\n            >\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center justify-between\">\r\n                  {plan.name}\r\n                  {plan.recommended && (\r\n                    <Badge variant=\"default\">Recommended</Badge>\r\n                  )}\r\n                </CardTitle>\r\n                <CardDescription>{plan.description}</CardDescription>\r\n                <div className=\"mt-4\">\r\n                  <span className=\"text-3xl font-bold\">GH₵{plan.price}</span>\r\n                  <span className=\"text-gray-500\">/{plan.interval}</span>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-2\">\r\n                  {plan.features?.map((feature: string, index: number) => (\r\n                    <li key={index} className=\"flex items-center\">\r\n                      <span className=\"text-green-500 mr-2\">✓</span>\r\n                      {feature}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <Button\r\n                  className=\"w-full mt-6\"\r\n                  variant={selectedPlan === plan.id ? \"default\" : \"outline\"}\r\n                  onClick={() => setSelectedPlan(plan.id)}\r\n                >\r\n                  {selectedPlan === plan.id ? \"Selected\" : \"Select Plan\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        {selectedPlan && (\r\n          <div className=\"mt-12 text-center\">\r\n            <Button size=\"lg\" className=\"px-8\">\r\n              Upgrade to Selected Plan\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Crown } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\n\r\nexport default function SuperDealerPricingPage() {\r\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\r\n\r\n  const { data: pricing, isLoading } = useQuery({\r\n    queryKey: [\"/api/super-dealer/pricing\"],\r\n    queryFn: () => apiRequest(\"/api/super-dealer/pricing\"),\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <Crown className=\"mx-auto h-12 w-12 text-yellow-500\" />\r\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Super Dealer Pricing Plans</h2>\r\n          <p className=\"mt-2 text-lg text-gray-600\">\r\n            Advanced plans for managing dealer networks\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-16 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {pricing?.plans?.map((plan: any) => (\r\n            <Card\r\n              key={plan.id}\r\n              className={`relative ${selectedPlan === plan.id ? 'ring-2 ring-blue-500' : ''}`}\r\n            >\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center justify-between\">\r\n                  {plan.name}\r\n                  {plan.recommended && (\r\n                    <Badge variant=\"default\">Recommended</Badge>\r\n                  )}\r\n                </CardTitle>\r\n                <CardDescription>{plan.description}</CardDescription>\r\n                <div className=\"mt-4\">\r\n                  <span className=\"text-3xl font-bold\">GH₵{plan.price}</span>\r\n                  <span className=\"text-gray-500\">/{plan.interval}</span>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-2\">\r\n                  {plan.features?.map((feature: string, index: number) => (\r\n                    <li key={index} className=\"flex items-center\">\r\n                      <span className=\"text-green-500 mr-2\">✓</span>\r\n                      {feature}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <Button\r\n                  className=\"w-full mt-6\"\r\n                  variant={selectedPlan === plan.id ? \"default\" : \"outline\"}\r\n                  onClick={() => setSelectedPlan(plan.id)}\r\n                >\r\n                  {selectedPlan === plan.id ? \"Selected\" : \"Select Plan\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        {selectedPlan && (\r\n          <div className=\"mt-12 text-center\">\r\n            <Button size=\"lg\" className=\"px-8\">\r\n              Upgrade to Selected Plan\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Shield } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\n\r\nexport default function MasterPricingPage() {\r\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\r\n\r\n  const { data: pricing, isLoading } = useQuery({\r\n    queryKey: [\"/api/master/pricing\"],\r\n    queryFn: () => apiRequest(\"/api/master/pricing\"),\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <Shield className=\"mx-auto h-12 w-12 text-red-500\" />\r\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Master Pricing Plans</h2>\r\n          <p className=\"mt-2 text-lg text-gray-600\">\r\n            Enterprise-level plans for complete system management\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-16 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {pricing?.plans?.map((plan: any) => (\r\n            <Card\r\n              key={plan.id}\r\n              className={`relative ${selectedPlan === plan.id ? 'ring-2 ring-blue-500' : ''}`}\r\n            >\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center justify-between\">\r\n                  {plan.name}\r\n                  {plan.recommended && (\r\n                    <Badge variant=\"default\">Recommended</Badge>\r\n                  )}\r\n                </CardTitle>\r\n                <CardDescription>{plan.description}</CardDescription>\r\n                <div className=\"mt-4\">\r\n                  <span className=\"text-3xl font-bold\">GH₵{plan.price}</span>\r\n                  <span className=\"text-gray-500\">/{plan.interval}</span>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-2\">\r\n                  {plan.features?.map((feature: string, index: number) => (\r\n                    <li key={index} className=\"flex items-center\">\r\n                      <span className=\"text-green-500 mr-2\">✓</span>\r\n                      {feature}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <Button\r\n                  className=\"w-full mt-6\"\r\n                  variant={selectedPlan === plan.id ? \"default\" : \"outline\"}\r\n                  onClick={() => setSelectedPlan(plan.id)}\r\n                >\r\n                  {selectedPlan === plan.id ? \"Selected\" : \"Select Plan\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        {selectedPlan && (\r\n          <div className=\"mt-12 text-center\">\r\n            <Button size=\"lg\" className=\"px-8\">\r\n              Upgrade to Selected Plan\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { Link, useLocation } from \"wouter\";\r\nimport {\r\n  LayoutDashboard,\r\n  Smartphone,\r\n  FileCheck,\r\n  Users,\r\n  UserCircle,\r\n  Wallet,\r\n  BarChart3,\r\n  Settings,\r\n  LogOut,\r\n  Bell,\r\n  X,\r\n  MessageCircle,\r\n  AlertTriangle,\r\n  Code,\r\n  Trophy,\r\n  Video,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\n\r\nconst sidebarNavItems = [\r\n  {\r\n    title: \"Dashboard\",\r\n    href: \"/admin\",\r\n    icon: LayoutDashboard,\r\n  },\r\n  {\r\n    title: \"Data Bundles\",\r\n    href: \"/admin/data-bundles\",\r\n    icon: Smartphone,\r\n  },\r\n  {\r\n    title: \"Role Base Prices\",\r\n    href: \"/admin/role-base-prices\",\r\n    icon: Settings,\r\n  },\r\n  {\r\n    title: \"Result Checkers\",\r\n    href: \"/admin/result-checkers\",\r\n    icon: FileCheck,\r\n  },\r\n  {\r\n    title: \"Transactions\",\r\n    href: \"/admin/transactions\",\r\n    icon: BarChart3,\r\n  },\r\n  {\r\n    title: \"Users\",\r\n    href: \"/admin/users\",\r\n    icon: UserCircle,\r\n  },\r\n  {\r\n    title: \"Agents\",\r\n    href: \"/admin/agents\",\r\n    icon: Users,\r\n  },\r\n  {\r\n    title: \"User Rankings\",\r\n    href: \"/admin/rankings\",\r\n    icon: Trophy,\r\n  },\r\n  {\r\n    title: \"Withdrawals\",\r\n    href: \"/admin/withdrawals\",\r\n    icon: Wallet,\r\n  },\r\n  {\r\n    title: \"Chat Support\",\r\n    href: \"/admin/chat-support\",\r\n    icon: MessageCircle,\r\n  },\r\n  {\r\n    title: \"Announcements\",\r\n    href: \"/admin/announcements\",\r\n    icon: Bell,\r\n  },\r\n  {\r\n    title: \"Video Guides\",\r\n    href: \"/admin/guides\",\r\n    icon: Video,\r\n  },\r\n  {\r\n    title: \"External API Providers\",\r\n    href: \"/admin/external-api-providers\",\r\n    icon: Code,\r\n  },\r\n  {\r\n    title: \"API Keys & Integrations\",\r\n    href: \"/dashboard/api-integrations\",\r\n    icon: Code,\r\n  },\r\n  {\r\n    title: \"Break Settings\",\r\n    href: \"/admin/break-settings\",\r\n    icon: AlertTriangle,\r\n  },\r\n  {\r\n    title: \"Settings\",\r\n    href: \"/admin/settings\",\r\n    icon: Settings,\r\n  },\r\n];\r\n\r\nexport function AdminSidebar({ onClose }: { onClose?: () => void } = {}) {\r\n  const [location] = useLocation();\r\n  const { user, logout, isLoggingOut } = useAuth();\r\n\r\n  // Get unread message count for admin\r\n  const { data: unreadCount = 0 } = useQuery<number>({\r\n    queryKey: [\"/api/support/admin/unread-count\"],\r\n    queryFn: async () => {\r\n      try {\r\n        const data = await apiRequest<{ count: number }>(\"GET\", \"/api/support/admin/unread-count\");\r\n        return data.count || 0;\r\n      } catch (error) {\r\n        return 0;\r\n      }\r\n    },\r\n    refetchInterval: 5000, // Refetch every 5 seconds\r\n  });\r\n\r\n  return (\r\n    <div \r\n      className={`flex h-screen w-64 flex-col border-r text-white relative overflow-hidden bg-black`}\r\n    >\r\n      {onClose && (\r\n        <div className=\"absolute top-4 right-4 md:hidden\">\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <X className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      )}\r\n      <div className={`flex h-16 items-center gap-2 border-b px-6 bg-black ${onClose ? 'pr-16' : ''}`}>\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"font-semibold text-sm text-white\">{user?.name || 'Admin'}</span>\r\n          <span className=\"text-xs text-gray-400\">Admin Panel</span>\r\n        </div>\r\n      </div>\r\n\r\n      <ScrollArea className=\"flex-1 px-3 py-4\">\r\n        <nav className=\"flex flex-col gap-1\">\r\n          {sidebarNavItems.map((item) => {\r\n            const isActive = location === item.href || (item.href !== \"/admin\" && location.startsWith(item.href));\r\n            const isChatSupport = item.href === \"/admin/chat-support\";\r\n            return (\r\n              <Link key={item.href} href={item.href}>\r\n                <Button\r\n                  variant={isActive ? \"default\" : \"ghost\"}\r\n                  className={cn(\r\n                    \"w-full justify-start gap-2 px-2 py-1.5 text-xs font-normal relative\",\r\n                    isActive && \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                  )}\r\n                  onClick={onClose}\r\n                  data-testid={`link-admin-${item.title.toLowerCase().replace(\" \", \"-\")}`}\r\n                >\r\n                  <item.icon className=\"h-4 w-4\" />\r\n                  <span className=\"flex-1 text-left\">{item.title}</span>\r\n                  {isChatSupport && unreadCount > 0 && (\r\n                    <Badge variant=\"destructive\" className=\"ml-auto\">\r\n                      {unreadCount}\r\n                    </Badge>\r\n                  )}\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n        </nav>\r\n      </ScrollArea>\r\n\r\n      <div className=\"border-t p-3\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          className=\"w-full justify-start gap-2 px-2 py-1.5 text-xs bg-black text-red-500 hover:bg-gray-800\"\r\n          onClick={() => logout()}\r\n          disabled={isLoggingOut}\r\n          data-testid=\"button-admin-logout\"\r\n        >\r\n          <LogOut className=\"h-4 w-4\" />\r\n          {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Link, useLocation } from \"wouter\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  LayoutDashboard,\r\n  Smartphone,\r\n  Wallet,\r\n  History,\r\n  MessageCircle,\r\n  LogOut,\r\n  Settings,\r\n  Trophy,\r\n  Code,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\n\r\nconst sidebarNavItems = [\r\n  { title: \"Dashboard\", href: \"/user/dashboard\", icon: LayoutDashboard },\r\n  { title: \"MTN Bundles\", href: \"/user/bundles/mtn\", icon: Smartphone },\r\n  { title: \"AT iShare Bundles\", href: \"/user/bundles/at_ishare\", icon: Smartphone },\r\n  { title: \"AT BIG TIME Bundles\", href: \"/user/bundles/at_bigtime\", icon: Smartphone },\r\n  { title: \"TELECEL Bundles\", href: \"/user/bundles/telecel\", icon: Smartphone },\r\n  { title: \"Top Up Wallet\", href: \"/user/wallet\", icon: Wallet },\r\n  { title: \"API Keys & Integrations\", href: \"/dashboard/api-integrations\", icon: Code },\r\n  { title: \"Settings\", href: \"/user/settings\", icon: Settings },\r\n  { title: \"Order History\", href: \"/user/history\", icon: History },\r\n  { title: \"Support\", href: \"/user/support\", icon: MessageCircle },\r\n];\r\n\r\nexport function UserSidebar({ onClose }: { onClose?: () => void } = {}) {\r\n  const [location] = useLocation();\r\n  const { logout, isLoggingOut, user, agent } = useAuth();\r\n  const { theme } = useTheme();\r\n\r\n  // Get user rank\r\n  const { data: rankData } = useQuery<{ rank: number }>({\r\n    queryKey: [\"user-rank\"],\r\n    queryFn: () => apiRequest(\"GET\", \"/api/user/rank\"),\r\n    enabled: !!user,\r\n  });\r\n\r\n  return (\r\n    <div className={`flex h-full w-64 flex-col border-r text-sidebar-foreground relative ${\r\n      onClose ? 'bg-white dark:bg-black dark:text-white' : 'bg-sidebar dark:bg-black dark:text-white'\r\n    }`}>\r\n      <div className={`flex h-16 items-center justify-center border-b px-6 ${onClose ? 'pr-4' : ''} dark:border-gray-700`}>\r\n        <div className=\"flex flex-col items-center text-center w-full\">\r\n          <div className=\"flex items-center justify-center gap-4 mb-1 w-full\">\r\n            <div className=\"flex flex-col items-center\">\r\n              <p className=\"text-sm font-medium dark:text-white\">{user?.name || 'User'}</p>\r\n              <p className=\"text-xs text-muted-foreground dark:text-gray-300\">{user?.email}</p>\r\n            </div>\r\n            {rankData && (\r\n              <div className=\"flex items-center gap-1 rounded-full bg-green-500 px-2 py-0.5 text-xs font-medium text-white border border-green-600 dark:bg-green-600 dark:border-green-700\">\r\n                <Trophy className=\"h-2.5 w-2.5\" />\r\n                <span>\r\n                  {rankData.rank && rankData.rank > 0 ? `#${rankData.rank}` : 'Unranked'}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <ScrollArea className=\"flex-1 px-3 py-4\">\r\n        <nav className=\"flex flex-col gap-1\">\r\n          {sidebarNavItems.map((item) => {\r\n            const isActive = location === item.href || (item.href !== \"/user/dashboard\" && location.startsWith(item.href));\r\n\r\n            return (\r\n              <Link key={item.href} href={item.href}>\r\n                <Button\r\n                  variant={isActive ? \"default\" : \"ghost\"}\r\n                  className={cn(\r\n                    \"w-full justify-start gap-3 font-normal relative dark:text-white dark:hover:bg-gray-700\",\r\n                    isActive && \"bg-yellow-500 text-white font-medium shadow-sm dark:bg-yellow-600\"\r\n                  )}\r\n                  onClick={() => onClose && onClose()}\r\n                >\r\n                  <item.icon className=\"h-4 w-4 dark:text-white\" />\r\n                  <span className=\"flex-1 text-left dark:text-white\">{item.title}</span>\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n\r\n          {!agent && (\r\n            <Link href=\"/agent/register\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full justify-start gap-3 mt-2 bg-green-500 text-white border-green-500 hover:bg-green-600 hover:border-green-600 dark:bg-green-600 dark:border-green-600 dark:hover:bg-green-700\"\r\n                onClick={() => onClose && onClose()}\r\n              >\r\n                <Smartphone className=\"h-4 w-4\" />\r\n                Become an Agent\r\n              </Button>\r\n            </Link>\r\n          )}\r\n        </nav>\r\n      </ScrollArea>\r\n\r\n      <div className=\"border-t p-3 dark:border-gray-700\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          className=\"w-full justify-start gap-3 text-destructive hover:text-destructive hover:bg-destructive/10 dark:text-red-400 dark:hover:bg-red-900/20\"\r\n          onClick={() => { onClose && onClose(); logout(); }}\r\n          disabled={isLoggingOut}\r\n        >\r\n          <LogOut className=\"h-4 w-4 dark:text-red-400\" />\r\n          {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n        </Button>\r\n\r\n        {/* Developer Credit */}\r\n        <div className=\"mt-3 pt-3 border-t border-border/50 dark:border-gray-600\">\r\n          <p className=\"text-xs text-muted-foreground text-center dark:text-gray-400\">\r\n            Developed by{' '}\r\n            <a\r\n              href=\"https://bm-portfolio-up2x.onrender.com\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-primary hover:text-primary/80 font-medium dark:text-blue-400 dark:hover:text-blue-300\"\r\n            >\r\n              BlusMotif\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n","import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { toast } from 'sonner';\r\nimport { Key, Plus, Trash2, Eye, EyeOff, Copy, CheckCircle, XCircle, Settings, Code, Webhook, Menu } from 'lucide-react';\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ninterface ApiKey {\r\n  id: string;\r\n  name: string;\r\n  key: string;\r\n  permissions: string;\r\n  isActive: boolean;\r\n  lastUsed?: string;\r\n  createdAt: string;\r\n}\r\n\r\nconst ApiKeysPage: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [apiKeys, setApiKeys] = useState<ApiKey[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [creating, setCreating] = useState(false);\r\n  const [newKeyName, setNewKeyName] = useState('');\r\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\r\n  const [createdKey, setCreatedKey] = useState<string>('');\r\n  const [showCreatedKey, setShowCreatedKey] = useState(false);\r\n  const [visibleKeys, setVisibleKeys] = useState<Set<string>>(new Set());\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchApiKeys();\r\n  }, []);\r\n\r\n  const fetchApiKeys = async () => {\r\n    try {\r\n      const response = await fetch('/api/user/api-keys');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setApiKeys(data);\r\n      } else {\r\n        toast.error('Failed to fetch API keys');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error fetching API keys');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createApiKey = async () => {\r\n    if (!newKeyName.trim()) {\r\n      toast.error('Please enter a name for your API key');\r\n      return;\r\n    }\r\n\r\n    setCreating(true);\r\n    try {\r\n      const response = await fetch('/api/user/api-keys', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ name: newKeyName.trim() })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setCreatedKey(data.key);\r\n        setShowCreatedKey(true);\r\n        setNewKeyName('');\r\n        setShowCreateDialog(false);\r\n        fetchApiKeys();\r\n        toast.success('API key created successfully');\r\n      } else {\r\n        const error = await response.json();\r\n        toast.error(error.error || 'Failed to create API key');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error creating API key');\r\n    } finally {\r\n      setCreating(false);\r\n    }\r\n  };\r\n\r\n  const toggleApiKey = async (keyId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/user/api-keys/${keyId}/toggle`, {\r\n        method: 'PUT'\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setApiKeys(keys => keys.map(key =>\r\n          key.id === keyId ? { ...key, isActive: data.isActive } : key\r\n        ));\r\n        toast.success(`API key ${data.isActive ? 'activated' : 'deactivated'}`);\r\n      } else {\r\n        toast.error('Failed to update API key status');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error updating API key status');\r\n    }\r\n  };\r\n\r\n  const deleteApiKey = async (keyId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/user/api-keys/${keyId}`, {\r\n        method: 'DELETE'\r\n      });\r\n\r\n      if (response.ok) {\r\n        setApiKeys(keys => keys.filter(key => key.id !== keyId));\r\n        toast.success('API key deleted successfully');\r\n      } else {\r\n        toast.error('Failed to delete API key');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error deleting API key');\r\n    }\r\n  };\r\n\r\n  const updatePermissions = async (keyId: string, permissions: Record<string, boolean>) => {\r\n    try {\r\n      const response = await fetch(`/api/user/api-keys/${keyId}/permissions`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ permissions })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setApiKeys(keys => keys.map(key =>\r\n          key.id === keyId ? { ...key, permissions: JSON.stringify(permissions) } : key\r\n        ));\r\n        toast.success('Permissions updated successfully');\r\n      } else {\r\n        toast.error('Failed to update permissions');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error updating permissions');\r\n    }\r\n  };\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast.success('Copied to clipboard');\r\n  };\r\n\r\n  const maskApiKey = (key: string) => {\r\n    return `${key.substring(0, 8)}****${key.substring(key.length - 4)}`;\r\n  };\r\n\r\n  const toggleKeyVisibility = (keyId: string) => {\r\n    setVisibleKeys(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(keyId)) {\r\n        newSet.delete(keyId);\r\n      } else {\r\n        newSet.add(keyId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const getPermissions = (permissions: string) => {\r\n    try {\r\n      return JSON.parse(permissions);\r\n    } catch {\r\n      return {};\r\n    }\r\n  };\r\n\r\n  const renderSidebar = () => {\r\n    if (!user) return null;\r\n\r\n    switch (user.role) {\r\n      case 'admin':\r\n        return <AdminSidebar onClose={() => setSidebarOpen(false)} />;\r\n      case 'agent':\r\n      case 'dealer':\r\n      case 'super_dealer':\r\n      case 'master':\r\n        return <AgentSidebar onClose={() => setSidebarOpen(false)} />;\r\n      case 'user':\r\n        return <UserSidebar onClose={() => setSidebarOpen(false)} />;\r\n      default:\r\n        return <AdminSidebar onClose={() => setSidebarOpen(false)} />;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex h-screen bg-background\">\r\n        {renderSidebar()}\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-lg\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            {renderSidebar()}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        {renderSidebar()}\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">API Keys & Integrations</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-muted-foreground\">\r\n                  Manage your API keys and integrate with third-party services\r\n                </p>\r\n              </div>\r\n              <Dialog open={showCreateDialog} onOpenChange={setShowCreateDialog}>\r\n          <DialogTrigger asChild>\r\n            <Button>\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Create API Key\r\n            </Button>\r\n          </DialogTrigger>\r\n          <DialogContent className=\"bg-black text-white border-gray-700\">\r\n            <DialogHeader>\r\n              <DialogTitle className=\"text-white\">Create New API Key</DialogTitle>\r\n              <DialogDescription className=\"text-gray-300\">\r\n                Create a new API key to access our services programmatically.\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"keyName\" className=\"text-white\">API Key Name</Label>\r\n                <Input\r\n                  id=\"keyName\"\r\n                  placeholder=\"e.g., Production App, Development\"\r\n                  value={newKeyName}\r\n                  onChange={(e) => setNewKeyName(e.target.value)}\r\n                  className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-end space-x-2\">\r\n                <Button variant=\"outline\" onClick={() => setShowCreateDialog(false)} className=\"border-gray-600 text-white hover:bg-gray-800\">\r\n                  Cancel\r\n                </Button>\r\n                <Button onClick={createApiKey} disabled={creating} className=\"bg-yellow-500 text-black hover:bg-yellow-600\">\r\n                  {creating ? 'Creating...' : 'Create Key'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n\r\n      {/* Created Key Dialog */}\r\n      <Dialog open={showCreatedKey} onOpenChange={setShowCreatedKey}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>API Key Created</DialogTitle>\r\n            <DialogDescription>\r\n              Your new API key has been created. Copy it now - you won't be able to see it again!\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"p-4 bg-muted rounded-lg\">\r\n              <code className=\"text-sm break-all\">{createdKey}</code>\r\n            </div>\r\n            <div className=\"flex justify-end space-x-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => copyToClipboard(createdKey)}\r\n              >\r\n                <Copy className=\"w-4 h-4 mr-2\" />\r\n                Copy Key\r\n              </Button>\r\n              <Button onClick={() => setShowCreatedKey(false)}>\r\n                Done\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Tabs defaultValue=\"keys\" className=\"space-y-6\">\r\n        <TabsList className=\"grid w-full grid-cols-4\">\r\n          <TabsTrigger value=\"keys\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">API Keys</TabsTrigger>\r\n          <TabsTrigger value=\"integrations\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">Integrations</TabsTrigger>\r\n          <TabsTrigger value=\"webhooks\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">Webhooks</TabsTrigger>\r\n          <TabsTrigger value=\"docs\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">Documentation</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"keys\" className=\"space-y-6\">\r\n          {apiKeys.length === 0 ? (\r\n            <Card>\r\n              <CardContent className=\"flex flex-col items-center justify-center py-12\">\r\n                <Key className=\"w-12 h-12 text-muted-foreground mb-4\" />\r\n                <h3 className=\"text-lg font-semibold mb-2\">No API Keys Yet</h3>\r\n                <p className=\"text-muted-foreground text-center mb-4\">\r\n                  Create your first API key to start integrating with our services.\r\n                </p>\r\n                <Button onClick={() => setShowCreateDialog(true)}>\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Create Your First API Key\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"grid gap-4\">\r\n              {apiKeys.map((apiKey) => (\r\n                <Card key={apiKey.id}>\r\n                  <CardHeader>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <Key className=\"w-5 h-5\" />\r\n                        <div>\r\n                          <CardTitle className=\"text-lg\">{apiKey.name}</CardTitle>\r\n                          <CardDescription>\r\n                            Created {new Date(apiKey.createdAt).toLocaleDateString()}\r\n                            {apiKey.lastUsed && ` • Last used ${new Date(apiKey.lastUsed).toLocaleDateString()}`}\r\n                          </CardDescription>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Badge variant={apiKey.isActive ? \"default\" : \"secondary\"}>\r\n                          {apiKey.isActive ? (\r\n                            <><CheckCircle className=\"w-3 h-3 mr-1\" /> Active</>\r\n                          ) : (\r\n                            <><XCircle className=\"w-3 h-3 mr-1\" /> Inactive</>\r\n                          )}\r\n                        </Badge>\r\n                        <Switch\r\n                          checked={apiKey.isActive}\r\n                          onCheckedChange={() => toggleApiKey(apiKey.id)}\r\n                          className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"space-y-4\">\r\n                      <div>\r\n                        <Label className=\"text-sm font-medium\">API Key</Label>\r\n                        <div className=\"flex items-center space-x-2 mt-1\">\r\n                          <code className=\"flex-1 p-2 bg-muted rounded text-sm font-mono\">\r\n                            {visibleKeys.has(apiKey.id) ? apiKey.key : maskApiKey(apiKey.key)}\r\n                          </code>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => toggleKeyVisibility(apiKey.id)}\r\n                          >\r\n                            {visibleKeys.has(apiKey.id) ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => copyToClipboard(apiKey.key)}\r\n                          >\r\n                            <Copy className=\"w-4 h-4\" />\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center space-x-4\">\r\n                          <Dialog>\r\n                            <DialogTrigger asChild>\r\n                              <Button variant=\"outline\" size=\"sm\">\r\n                                <Settings className=\"w-4 h-4 mr-2\" />\r\n                                Permissions\r\n                              </Button>\r\n                            </DialogTrigger>\r\n                            <DialogContent>\r\n                              <DialogHeader>\r\n                                <DialogTitle>API Key Permissions</DialogTitle>\r\n                                <DialogDescription>\r\n                                  Configure what this API key can access.\r\n                                </DialogDescription>\r\n                              </DialogHeader>\r\n                              <PermissionsEditor\r\n                                permissions={getPermissions(apiKey.permissions)}\r\n                                onSave={(permissions) => updatePermissions(apiKey.id, permissions)}\r\n                              />\r\n                            </DialogContent>\r\n                          </Dialog>\r\n\r\n                          <AlertDialog>\r\n                            <AlertDialogTrigger asChild>\r\n                              <Button variant=\"destructive\" size=\"sm\">\r\n                                <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                                Delete\r\n                              </Button>\r\n                            </AlertDialogTrigger>\r\n                            <AlertDialogContent>\r\n                              <AlertDialogHeader>\r\n                                <AlertDialogTitle>Delete API Key</AlertDialogTitle>\r\n                                <AlertDialogDescription>\r\n                                  Are you sure you want to delete this API key? This action cannot be undone.\r\n                                </AlertDialogDescription>\r\n                              </AlertDialogHeader>\r\n                              <AlertDialogFooter>\r\n                                <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                                <AlertDialogAction onClick={() => deleteApiKey(apiKey.id)}>\r\n                                  Delete\r\n                                </AlertDialogAction>\r\n                              </AlertDialogFooter>\r\n                            </AlertDialogContent>\r\n                          </AlertDialog>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"integrations\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Third-Party Integrations</CardTitle>\r\n              <CardDescription>\r\n                Connect your applications and services to our platform\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-lg flex items-center\">\r\n                      <Code className=\"w-5 h-5 mr-2\" />\r\n                      REST API\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">\r\n                      Use our REST API to programmatically access data bundles, result checkers, and transactions.\r\n                    </p>\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => toast.info(\"View API Docs - Coming Soon!\")}>\r\n                      View API Docs\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-lg flex items-center\">\r\n                      <Webhook className=\"w-5 h-5 mr-2\" />\r\n                      Webhooks\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">\r\n                      Receive real-time notifications about transaction status changes and other events.\r\n                    </p>\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => toast.info(\"Configure Webhooks - Coming Soon!\")}>\r\n                      Configure Webhooks\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"webhooks\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Webhook Configuration</CardTitle>\r\n              <CardDescription>\r\n                Set up webhooks to receive real-time notifications\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <Label htmlFor=\"webhookUrl\">Webhook URL</Label>\r\n                  <Input\r\n                    id=\"webhookUrl\"\r\n                    placeholder=\"https://your-app.com/webhooks/resellers-hub-gh-pro\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <Label>Events to Subscribe</Label>\r\n                  <div className=\"space-y-2 mt-2\">\r\n                    {['transaction.completed', 'transaction.failed', 'bundle.delivered'].map((event) => (\r\n                      <div key={event} className=\"flex items-center space-x-2\">\r\n                        <Switch id={event} className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\" />\r\n                        <Label htmlFor={event} className=\"text-sm\">{event}</Label>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                <Button onClick={() => toast.info(\"Save Webhook Configuration - Coming Soon!\")}>Save Webhook Configuration</Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"docs\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>API Documentation</CardTitle>\r\n              <CardDescription>\r\n                Complete documentation for integrating with our platform\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => toast.info(\"REST API Reference - Coming Soon!\")}>\r\n                  <Code className=\"w-4 h-4 mr-2\" />\r\n                  REST API Reference\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => toast.info(\"Webhook Documentation - Coming Soon!\")}>\r\n                  <Webhook className=\"w-4 h-4 mr-2\" />\r\n                  Webhook Documentation\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => toast.info(\"Authentication Guide - Coming Soon!\")}>\r\n                  <Key className=\"w-4 h-4 mr-2\" />\r\n                  Authentication Guide\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => toast.info(\"Download Postman Collection - Coming Soon!\")}>\r\n                  Download Postman Collection\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PermissionsEditor: React.FC<{\r\n  permissions: Record<string, boolean>;\r\n  onSave: (permissions: Record<string, boolean>) => void;\r\n}> = ({ permissions, onSave }) => {\r\n  const [localPermissions, setLocalPermissions] = useState(permissions);\r\n\r\n  const permissionOptions = [\r\n    { key: 'read', label: 'Read Data', description: 'Access bundles, transactions, and user data' },\r\n    { key: 'purchase', label: 'Make Purchases', description: 'Purchase data bundles and result checkers' },\r\n    { key: 'webhook', label: 'Receive Webhooks', description: 'Receive webhook notifications' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {permissionOptions.map((option) => (\r\n        <div key={option.key} className=\"flex items-start space-x-3\">\r\n          <Switch\r\n            id={option.key}\r\n            checked={localPermissions[option.key] || false}\r\n            onCheckedChange={(checked) =>\r\n              setLocalPermissions(prev => ({ ...prev, [option.key]: checked }))\r\n            }\r\n            className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n          />\r\n          <div className=\"flex-1\">\r\n            <Label htmlFor={option.key} className=\"font-medium\">\r\n              {option.label}\r\n            </Label>\r\n            <p className=\"text-sm text-muted-foreground\">{option.description}</p>\r\n          </div>\r\n        </div>\r\n      ))}\r\n      <div className=\"flex justify-end space-x-2 pt-4\">\r\n        <Button variant=\"outline\" onClick={() => setLocalPermissions(permissions)}>\r\n          Reset\r\n        </Button>\r\n        <Button onClick={() => onSave(localPermissions)}>\r\n          Save Permissions\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ApiKeysPage;","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { StatusBadge } from \"@/components/ui/status-badge\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { DollarSign, ShoppingCart, Users, Wallet, TrendingUp, Package, Menu, Trophy, Award, Medal } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\nimport { Transaction } from \"@shared/schema\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar } from \"recharts\";\r\n\r\ninterface DashboardStats {\r\n  totalRevenue: number;\r\n  totalTransactions: number;\r\n  totalAgents: number;\r\n  pendingWithdrawals: number;\r\n  pendingAgents: number;\r\n  activationRevenue: number;\r\n  todayRevenue: number;\r\n  todayTransactions: number;\r\n  totalAgentProfits: number;\r\n}\r\n\r\ninterface TopCustomer {\r\n  customerEmail: string;\r\n  customerPhone: string | null;\r\n  customerName: string | null;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n  rank: number;\r\n  lastPurchase: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n  const { user } = useAuth();\r\n  const { data: stats, isLoading: statsLoading } = useQuery<DashboardStats>({\r\n    queryKey: [\"/api/admin/stats\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n  });\r\n\r\n  const { data: recentTransactions, isLoading: transactionsLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/admin/transactions/recent\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n  });\r\n\r\n  const { data: topCustomers, isLoading: rankingsLoading } = useQuery<TopCustomer[]>({\r\n    queryKey: [\"/api/admin/rankings/customers\"],\r\n    refetchInterval: 60000, // Refresh every minute\r\n  });\r\n\r\n  const { data: analyticsData, isLoading: analyticsLoading } = useQuery<Array<{ date: string; revenue: number; transactions: number }>>({\r\n    queryKey: [\"/api/admin/analytics/revenue\"],\r\n    refetchInterval: 300000, // Refresh every 5 minutes\r\n  });\r\n\r\n  // Format chart data for display\r\n  const chartData = analyticsData ? analyticsData.map(item => ({\r\n    name: new Date(item.date).toLocaleDateString('en-US', { weekday: 'short' }),\r\n    revenue: item.revenue,\r\n    transactions: item.transactions,\r\n  })) : [];\r\n\r\n  const getRankIcon = (index: number) => {\r\n    if (index === 0) return <Trophy className=\"h-5 w-5 text-yellow-500\" />;\r\n    if (index === 1) return <Medal className=\"h-5 w-5 text-gray-400\" />;\r\n    if (index === 2) return <Award className=\"h-5 w-5 text-amber-600\" />;\r\n    return <span className=\"text-sm font-semibold text-muted-foreground\">#{index + 1}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Dashboard</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-4 lg:space-y-6\">\r\n            {/* Welcome Message */}\r\n            <Card className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 border-yellow-600 shadow-xl overflow-hidden relative\">\r\n              <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12\"></div>\r\n              <CardContent className=\"p-6 relative\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex items-center justify-center w-14 h-14 bg-white/20 rounded-full shadow-lg backdrop-blur-sm\">\r\n                      <span className=\"text-3xl animate-bounce\">👋</span>\r\n                    </div>\r\n                    <div>\r\n                      <h2 className=\"text-2xl lg:text-3xl font-bold text-white mb-1 drop-shadow-sm\">\r\n                        Welcome back, {user?.name?.toUpperCase() || 'ADMIN'}! \r\n                      </h2>\r\n                      <p className=\"text-yellow-100 text-sm lg:text-base font-medium\">\r\n                        Here's what's happening with your business today ✨\r\n                      </p>\r\n                      <div className=\"flex items-center gap-2 mt-2\">\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\r\n                          <span className=\"text-xs font-medium\">Live Dashboard</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-pulse\" style={{animationDelay: '0.5s'}}></div>\r\n                          <span className=\"text-xs font-medium\">Real-time Updates</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"hidden lg:flex flex-col items-end gap-2\">\r\n                    <div className=\"flex items-center gap-2 bg-white/10 rounded-full px-3 py-1 backdrop-blur-sm\">\r\n                      <span className=\"text-xs text-white font-medium\">\r\n                        {new Date().toLocaleDateString('en-US', { \r\n                          weekday: 'long', \r\n                          year: 'numeric', \r\n                          month: 'long', \r\n                          day: 'numeric' \r\n                        })}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1 text-white/80\">\r\n                      <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full\"></div>\r\n                      <span className=\"text-xs\">All systems operational</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {statsLoading ? (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6\">\r\n                {Array.from({ length: 4 }).map((_, i) => (\r\n                  <Card key={i} className=\"animate-pulse\">\r\n                    <CardContent className=\"pt-4 lg:pt-6\">\r\n                      <div className=\"h-4 bg-muted rounded w-1/2 mb-4\" />\r\n                      <div className=\"h-8 bg-muted rounded w-3/4\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 lg:gap-6\">\r\n                <StatCard\r\n                  title=\"Total Revenue\"\r\n                  value={formatCurrency(stats?.totalRevenue || 0)}\r\n                  icon={DollarSign}\r\n                  description=\"All time\"\r\n                />\r\n                <StatCard\r\n                  title=\"Total Transactions\"\r\n                  value={stats?.totalTransactions || 0}\r\n                  icon={ShoppingCart}\r\n                  description=\"Completed orders\"\r\n                />\r\n                <StatCard\r\n                  title=\"Active Agents\"\r\n                  value={stats?.totalAgents || 0}\r\n                  icon={Users}\r\n                  description=\"Registered agents\"\r\n                />\r\n                <StatCard\r\n                  title=\"Total Agent Profits\"\r\n                  value={formatCurrency(stats?.totalAgentProfits || 0)}\r\n                  icon={TrendingUp}\r\n                  description=\"Combined agent earnings\"\r\n                />\r\n                <StatCard\r\n                  title=\"Pending Withdrawals\"\r\n                  value={stats?.pendingWithdrawals || 0}\r\n                  icon={Wallet}\r\n                  description=\"Awaiting approval\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Analytics Chart */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                  <TrendingUp className=\"h-5 w-5 text-blue-500\" />\r\n                  Revenue Analytics\r\n                </CardTitle>\r\n                <CardDescription>Weekly revenue and transaction trends</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {analyticsLoading ? (\r\n                  <div className=\"h-64 flex items-center justify-center\">\r\n                    <div className=\"animate-pulse text-muted-foreground\">Loading analytics...</div>\r\n                  </div>\r\n                ) : chartData.length > 0 ? (\r\n                  <div className=\"h-64\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <BarChart data={chartData}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" />\r\n                        <XAxis dataKey=\"name\" />\r\n                        <YAxis />\r\n                        <Tooltip \r\n                          formatter={(value, name) => [\r\n                            name === 'revenue' ? formatCurrency(Number(value)) : value,\r\n                            name === 'revenue' ? 'Revenue' : 'Transactions'\r\n                          ]}\r\n                        />\r\n                        <Bar \r\n                          dataKey=\"revenue\" \r\n                          fill=\"#10b981\" \r\n                          radius={[4, 4, 0, 0]}\r\n                        />\r\n                      </BarChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"h-64 flex items-center justify-center\">\r\n                    <div className=\"text-muted-foreground\">No analytics data available</div>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n              <Card className=\"lg:col-span-2\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                  <CardTitle className=\"text-lg\">Recent Transactions</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  {transactionsLoading ? (\r\n                    <TableSkeleton rows={5} />\r\n                  ) : recentTransactions && recentTransactions.length > 0 ? (\r\n                    <div className=\"overflow-x-auto\">\r\n                      <Table>\r\n                        <TableHeader>\r\n                          <TableRow>\r\n                            <TableHead>Reference</TableHead>\r\n                            <TableHead>Product</TableHead>\r\n                            <TableHead>Amount</TableHead>\r\n                            <TableHead>Status</TableHead>\r\n                            <TableHead>Date</TableHead>\r\n                          </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                          {recentTransactions.slice(0, 10).map((tx) => (\r\n                            <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\r\n                              <TableCell className=\"font-mono text-sm\">{tx.reference}</TableCell>\r\n                              <TableCell className=\"max-w-[200px] truncate\">{tx.productName}</TableCell>\r\n                              <TableCell className=\"font-medium tabular-nums\">{formatCurrency(tx.amount)}</TableCell>\r\n                              <TableCell><StatusBadge status={tx.status} /></TableCell>\r\n                              <TableCell className=\"text-muted-foreground text-sm\">{formatDate(tx.createdAt)}</TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                      No transactions yet\r\n                    </div>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Quick Stats</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between p-3 bg-green-500 text-white rounded-lg border border-green-600\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <TrendingUp className=\"h-5 w-5 text-white\" />\r\n                      <span className=\"text-sm font-medium text-white\">Today's Revenue</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-white\">\r\n                      {formatCurrency(stats?.todayRevenue || 0)}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-3 bg-blue-500 text-white rounded-lg border border-blue-600\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Package className=\"h-5 w-5 text-white\" />\r\n                      <span className=\"text-sm font-medium text-white\">Today's Orders</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-white\">\r\n                      {stats?.todayTransactions || 0}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-3 bg-purple-500 text-white rounded-lg border border-purple-600\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <DollarSign className=\"h-5 w-5 text-white\" />\r\n                      <span className=\"text-sm font-medium text-white\">Activation Revenue</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-white\">\r\n                      {formatCurrency(stats?.activationRevenue || 0)}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-3 bg-orange-100 dark:bg-orange-900 rounded-lg border border-orange-200 dark:border-orange-800\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Users className=\"h-5 w-5 text-orange-600 dark:text-orange-400\" />\r\n                      <span className=\"text-sm font-medium text-orange-900 dark:text-orange-100\">Pending Agents</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-orange-700 dark:text-orange-300\">\r\n                      {stats?.pendingAgents || 0}\r\n                    </span>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                    <Trophy className=\"h-5 w-5 text-yellow-500\" />\r\n                    Top Customers\r\n                  </CardTitle>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">Highest spending customers</p>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {rankingsLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : topCustomers && topCustomers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"w-16\">Rank</TableHead>\r\n                          <TableHead>Customer</TableHead>\r\n                          <TableHead className=\"text-right\">Total Spent</TableHead>\r\n                          <TableHead className=\"text-right\">Purchases</TableHead>\r\n                          <TableHead className=\"text-right\">Last Purchase</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {topCustomers.map((customer, index) => (\r\n                          <TableRow key={customer.rank}>\r\n                            <TableCell className=\"text-center\">\r\n                              {getRankIcon(index)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"flex flex-col\">\r\n                                <span className=\"font-medium\">\r\n                                  {customer.customerName || customer.customerEmail}\r\n                                </span>\r\n                                {customer.customerPhone && (\r\n                                  <span className=\"text-xs text-muted-foreground\">\r\n                                    {customer.customerPhone}\r\n                                  </span>\r\n                                )}\r\n                                <span className=\"text-xs text-muted-foreground truncate max-w-[200px]\">\r\n                                  {customer.customerEmail}\r\n                                </span>\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <span className=\"font-bold text-green-600 dark:text-green-400\">\r\n                                {formatCurrency(customer.totalSpent)}\r\n                              </span>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <Badge variant=\"secondary\">\r\n                                {customer.totalPurchases} {customer.totalPurchases === 1 ? 'order' : 'orders'}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right text-sm text-muted-foreground\">\r\n                              {formatDate(customer.lastPurchase)}\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    <Trophy className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n                    <p>No customer rankings yet</p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Order Tracker */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Track Orders</CardTitle>\r\n              <CardDescription>Search and monitor order status across the platform</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <OrderTracker />\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n      </div>\r\n      <ApiIntegrationsModal open={showApiModal} onOpenChange={setShowApiModal} />\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, NETWORKS } from \"@/lib/constants\";\r\nimport { Plus, Pencil, Trash2, Smartphone, Menu, AlertTriangle } from \"lucide-react\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\nexport default function AdminDataBundles() {\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\r\n  const [editingBundle, setEditingBundle] = useState<DataBundle | null>(null);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: bundles, isLoading } = useQuery<DataBundle[]>({\r\n    queryKey: [\"/api/admin/data-bundles\"],\r\n    refetchInterval: 60000, // Refetch every minute for product data\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const { data: roleBasePrices } = useQuery<Array<{ bundleId: string; role: string; basePrice: string }>>({\r\n    queryKey: [\"/api/admin/role-base-prices\"],\r\n    enabled: user?.role === 'admin',\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: Partial<DataBundle>) =>\r\n      apiRequest(\"POST\", \"/api/admin/data-bundles\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/data-bundles\"] });\r\n      setIsCreateOpen(false);\r\n      toast({ title: \"Data bundle created successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to create bundle\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<DataBundle> }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/data-bundles/${id}`, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/data-bundles\"] });\r\n      setEditingBundle(null);\r\n      toast({ title: \"Data bundle updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update bundle\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) =>\r\n      apiRequest(\"DELETE\", `/api/admin/data-bundles/${id}`),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/data-bundles\"] });\r\n      toast({ title: \"Data bundle deleted successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete bundle\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const getRoleBasePrice = (bundleId: string, role: string) => {\r\n    const price = roleBasePrices?.find(p => p.bundleId === bundleId && p.role === role);\r\n    return price ? formatCurrency(price.basePrice) : '-';\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Data Bundles</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-create-bundle\">\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Bundle\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"bg-white text-blue-800\">\r\n                <DialogHeader>\r\n                  <DialogTitle className=\"text-blue-800\">Create Data Bundle</DialogTitle>\r\n                </DialogHeader>\r\n                <BundleForm\r\n                  onSubmit={(data) => createMutation.mutate(data)}\r\n                  isLoading={createMutation.isPending}\r\n                />\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Smartphone className=\"h-5 w-5\" />\r\n                  All Data Bundles\r\n                </CardTitle>\r\n                <Badge variant=\"secondary\">{bundles?.length || 0} bundles</Badge>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : bundles && bundles.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Network</TableHead>\r\n                        <TableHead>Name</TableHead>\r\n                        <TableHead>Data</TableHead>\r\n                        <TableHead>Validity</TableHead>\r\n                        <TableHead>Base Price</TableHead>\r\n                        <TableHead>Agent Base</TableHead>\r\n                        <TableHead>Dealer Base</TableHead>\r\n                        <TableHead>Super Dealer Base</TableHead>\r\n                        <TableHead>Master Base</TableHead>\r\n                        <TableHead>Admin Price</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {bundles.map((bundle) => {\r\n                        const network = NETWORKS.find((n) => n.id === bundle.network);\r\n                        return (\r\n                          <TableRow key={bundle.id} data-testid={`row-bundle-${bundle.id}`}>\r\n                            <TableCell>\r\n                              <Badge\r\n                                style={{\r\n                                  backgroundColor: network?.color,\r\n                                  color: network?.textColor,\r\n                                }}\r\n                              >\r\n                                {network?.name || bundle.network.toUpperCase()}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium\">{bundle.network.toUpperCase()} {bundle.dataAmount} - {bundle.validity}</TableCell>\r\n                            <TableCell>{bundle.dataAmount}</TableCell>\r\n                            <TableCell>{bundle.validity}</TableCell>\r\n                            <TableCell className=\"font-medium tabular-nums\">\r\n                              {formatCurrency(bundle.basePrice)}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'agent')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'dealer')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'super_dealer')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'master')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {bundle.adminPrice ? formatCurrency(bundle.adminPrice) : '-'}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Badge variant={bundle.isActive ? \"default\" : \"secondary\"}>\r\n                                {bundle.isActive ? \"Active\" : \"Inactive\"}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <div className=\"flex justify-end gap-2\">\r\n                                <Button\r\n                                  size=\"icon\"\r\n                                  variant=\"ghost\"\r\n                                  onClick={() => setEditingBundle(bundle)}\r\n                                  data-testid={`button-edit-${bundle.id}`}\r\n                                >\r\n                                  <Pencil className=\"h-4 w-4\" />\r\n                                </Button>\r\n                                <Button\r\n                                  size=\"icon\"\r\n                                  variant=\"ghost\"\r\n                                  onClick={() => {\r\n                                    if (confirm(\"Are you sure you want to delete this bundle?\")) {\r\n                                      deleteMutation.mutate(bundle.id);\r\n                                    }\r\n                                  }}\r\n                                  data-testid={`button-delete-${bundle.id}`}\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                                </Button>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        );\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No data bundles found. Click \"Add Bundle\" to create one.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <Dialog open={!!editingBundle} onOpenChange={(open) => !open && setEditingBundle(null)}>\r\n        <DialogContent className=\"bg-white text-blue-800\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-blue-800\">Edit Data Bundle</DialogTitle>\r\n          </DialogHeader>\r\n          {editingBundle && (\r\n            <BundleForm\r\n              bundle={editingBundle}\r\n              onSubmit={(data) => updateMutation.mutate({ id: editingBundle.id, data })}\r\n              isLoading={updateMutation.isPending}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BundleForm({\r\n  bundle,\r\n  onSubmit,\r\n  isLoading,\r\n}: {\r\n  bundle?: DataBundle;\r\n  onSubmit: (data: Partial<DataBundle>) => void;\r\n  isLoading: boolean;\r\n}) {\r\n  const { user } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    name: bundle?.name || \"\",\r\n    network: bundle?.network || \"mtn\",\r\n    dataAmount: bundle?.dataAmount || \"\",\r\n    validity: bundle?.validity || \"\",\r\n    basePrice: bundle?.basePrice || \"\",\r\n    adminPrice: bundle?.adminPrice || \"\",\r\n    isActive: bundle?.isActive ?? true,\r\n  });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Convert empty strings to undefined for price fields\r\n    const processedData = {\r\n      ...formData,\r\n      basePrice: formData.basePrice === \"\" ? undefined : formData.basePrice,\r\n      adminPrice: formData.adminPrice === \"\" ? undefined : formData.adminPrice,\r\n    };\r\n    \r\n    onSubmit(processedData);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"name\" className=\"text-blue-800\">Name</Label>\r\n          <Input\r\n            id=\"name\"\r\n            value={formData.name}\r\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n            placeholder=\"e.g., MTN 1GB Daily\"\r\n            required\r\n            data-testid=\"input-bundle-name\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-blue-800\">Network</Label>\r\n          <Select\r\n            value={formData.network}\r\n            onValueChange={(value) => setFormData({ ...formData, network: value })}\r\n          >\r\n            <SelectTrigger data-testid=\"select-bundle-network\" className=\"text-blue-800\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {NETWORKS.map((n) => (\r\n                <SelectItem key={n.id} value={n.id} className=\"text-blue-800\">\r\n                  {n.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"dataAmount\" className=\"text-blue-800\">Data Amount</Label>\r\n          <Input\r\n            id=\"dataAmount\"\r\n            value={formData.dataAmount}\r\n            onChange={(e) => setFormData({ ...formData, dataAmount: e.target.value })}\r\n            placeholder=\"e.g., 1GB, 500MB\"\r\n            required\r\n            data-testid=\"input-bundle-data\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"validity\" className=\"text-blue-800\">Validity</Label>\r\n          <Input\r\n            id=\"validity\"\r\n            value={formData.validity}\r\n            onChange={(e) => setFormData({ ...formData, validity: e.target.value })}\r\n            placeholder=\"e.g., 1 Day, 30 Days\"\r\n            required\r\n            data-testid=\"input-bundle-validity\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"basePrice\" className=\"text-blue-800\">Base Price (GHS)</Label>\r\n          <Input\r\n            id=\"basePrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.basePrice}\r\n            onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            required\r\n            data-testid=\"input-bundle-price\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"adminPrice\" className=\"text-blue-800\">Admin Price (GHS)</Label>\r\n          <Input\r\n            id=\"adminPrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.adminPrice}\r\n            onChange={(e) => setFormData({ ...formData, adminPrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            data-testid=\"input-bundle-admin-price\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {user?.role === 'admin' && (\r\n        <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n          <div className=\"flex items-start gap-2\">\r\n            <AlertTriangle className=\"h-5 w-5 text-blue-600 mt-0.5\" />\r\n            <div className=\"text-sm\">\r\n              <p className=\"font-medium text-blue-900\">Role-Based Pricing System</p>\r\n              <p className=\"text-blue-700 mt-1\">\r\n                Role-specific base prices are now managed separately. Use the \"Role Base Prices\" section\r\n                in the admin panel to set minimum prices for each role (agent, dealer, super_dealer, master).\r\n                Roles can then set their own profit margins above these base prices.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Per-bundle API selection removed; system-wide API configuration used instead */}\r\n\r\n      {(formData.network && formData.dataAmount && formData.validity && formData.basePrice) && (\r\n        <div className=\"p-4 bg-muted rounded-lg border\">\r\n          <Label className=\"text-sm font-medium text-blue-800 mb-2 block\">Preview (How users will see this bundle)</Label>\r\n          <div className=\"text-sm font-medium\">\r\n            {formData.network.toUpperCase()} {formData.dataAmount} - {formData.validity} - GH₵{formData.basePrice}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Switch\r\n            id=\"isActive\"\r\n            checked={formData.isActive}\r\n            onCheckedChange={(checked) => setFormData({ ...formData, isActive: checked })}\r\n            data-testid=\"switch-bundle-active\"\r\n            className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n          />\r\n          <Label className=\"text-blue-800\">Active</Label>\r\n        </div>\r\n        <Button type=\"submit\" disabled={isLoading} data-testid=\"button-submit-bundle\">\r\n          {isLoading ? \"Saving...\" : bundle ? \"Update Bundle\" : \"Create Bundle\"}\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { Plus, Pencil, Trash2, Menu, Settings } from \"lucide-react\";\r\n\r\ntype RoleBasePrice = {\r\n  bundleId: string;\r\n  role: string;\r\n  basePrice: string;\r\n};\r\n\r\ntype DataBundle = {\r\n  id: string;\r\n  name: string;\r\n  network: string;\r\n  dataAmount: string;\r\n  validity: string;\r\n};\r\n\r\nexport default function AdminRoleBasePrices() {\r\n  const { toast } = useToast();\r\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\r\n  const [editingPrice, setEditingPrice] = useState<RoleBasePrice | null>(null);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: roleBasePrices, isLoading } = useQuery<RoleBasePrice[]>({\r\n    queryKey: [\"/api/admin/role-base-prices\"],\r\n  });\r\n\r\n  const { data: bundles } = useQuery<DataBundle[]>({\r\n    queryKey: [\"/api/admin/data-bundles\"],\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: { bundleId: string; role: string; basePrice: string }) =>\r\n      apiRequest(\"POST\", \"/api/admin/role-base-prices\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/role-base-prices\"] });\r\n      setIsCreateOpen(false);\r\n      toast({ title: \"Role base price set successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to set role base price\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ bundleId, role, basePrice }: { bundleId: string; role: string; basePrice: string }) =>\r\n      apiRequest(\"POST\", \"/api/admin/role-base-prices\", { bundleId, role, basePrice }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/role-base-prices\"] });\r\n      setEditingPrice(null);\r\n      toast({ title: \"Role base price updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update role base price\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: ({ bundleId, role }: { bundleId: string; role: string }) =>\r\n      apiRequest(\"DELETE\", `/api/admin/role-base-prices/${bundleId}/${role}`),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/role-base-prices\"] });\r\n      toast({ title: \"Role base price deleted successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete role base price\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const getBundleName = (bundleId: string) => {\r\n    const bundle = bundles?.find(b => b.id === bundleId);\r\n    return bundle ? `${bundle.network.toUpperCase()} ${bundle.dataAmount} - ${bundle.validity}` : bundleId;\r\n  };\r\n\r\n  const getRoleLabel = (role: string) => {\r\n    const labels: Record<string, string> = {\r\n      agent: \"Agent\",\r\n      dealer: \"Dealer\",\r\n      super_dealer: \"Super Dealer\",\r\n      master: \"Master\",\r\n    };\r\n    return labels[role] || role;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Role Base Prices</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-create-price\">\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Set Base Price\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"bg-white text-blue-800\">\r\n                <DialogHeader>\r\n                  <DialogTitle className=\"text-blue-800\">Set Role Base Price</DialogTitle>\r\n                </DialogHeader>\r\n                <PriceForm\r\n                  onSubmit={(data) => createMutation.mutate(data)}\r\n                  isLoading={createMutation.isPending}\r\n                  bundles={bundles}\r\n                />\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Settings className=\"h-5 w-5\" />\r\n                  Role Base Prices\r\n                </CardTitle>\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {roleBasePrices?.length || 0} prices configured\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : roleBasePrices && roleBasePrices.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Data Bundle</TableHead>\r\n                        <TableHead>Role</TableHead>\r\n                        <TableHead>Base Price</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {roleBasePrices.map((price, index) => (\r\n                        <TableRow key={`${price.bundleId}-${price.role}-${index}`}>\r\n                          <TableCell className=\"font-medium\">\r\n                            {getBundleName(price.bundleId)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {getRoleLabel(price.role)}\r\n                          </TableCell>\r\n                          <TableCell className=\"font-medium tabular-nums\">\r\n                            {formatCurrency(price.basePrice)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <div className=\"flex justify-end gap-2\">\r\n                              <Button\r\n                                size=\"icon\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => setEditingPrice(price)}\r\n                              >\r\n                                <Pencil className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button\r\n                                size=\"icon\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => {\r\n                                  if (confirm(\"Are you sure you want to delete this base price?\")) {\r\n                                    deleteMutation.mutate({ bundleId: price.bundleId, role: price.role });\r\n                                  }\r\n                                }}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                              </Button>\r\n                            </div>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No role base prices configured. Click \"Set Base Price\" to create one.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <Dialog open={!!editingPrice} onOpenChange={(open) => !open && setEditingPrice(null)}>\r\n        <DialogContent className=\"bg-white text-blue-800\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-blue-800\">Edit Role Base Price</DialogTitle>\r\n          </DialogHeader>\r\n          {editingPrice && (\r\n            <PriceForm\r\n              price={editingPrice}\r\n              onSubmit={(data) => updateMutation.mutate(data)}\r\n              isLoading={updateMutation.isPending}\r\n              bundles={bundles}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PriceForm({\r\n  price,\r\n  onSubmit,\r\n  isLoading,\r\n  bundles,\r\n}: {\r\n  price?: RoleBasePrice;\r\n  onSubmit: (data: { bundleId: string; role: string; basePrice: string }) => void;\r\n  isLoading: boolean;\r\n  bundles?: DataBundle[];\r\n}) {\r\n  const [formData, setFormData] = useState({\r\n    bundleId: price?.bundleId || \"\",\r\n    role: price?.role || \"agent\",\r\n    basePrice: price?.basePrice || \"\",\r\n  });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    const priceNum = parseFloat(formData.basePrice);\r\n    if (isNaN(priceNum) || priceNum < 0) {\r\n      return;\r\n    }\r\n\r\n    onSubmit({\r\n      bundleId: formData.bundleId,\r\n      role: formData.role,\r\n      basePrice: priceNum.toFixed(2),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"space-y-2\">\r\n        <Label className=\"text-blue-800\">Data Bundle</Label>\r\n        <Select\r\n          value={formData.bundleId}\r\n          onValueChange={(value) => setFormData({ ...formData, bundleId: value })}\r\n        >\r\n          <SelectTrigger className=\"text-blue-800\">\r\n            <SelectValue placeholder=\"Select a data bundle\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {bundles?.map((bundle) => (\r\n              <SelectItem key={bundle.id} value={bundle.id} className=\"text-blue-800\">\r\n                {bundle.network.toUpperCase()} {bundle.dataAmount} - {bundle.validity}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label className=\"text-blue-800\">Role</Label>\r\n        <Select\r\n          value={formData.role}\r\n          onValueChange={(value) => setFormData({ ...formData, role: value })}\r\n        >\r\n          <SelectTrigger className=\"text-blue-800\">\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"agent\" className=\"text-blue-800\">Agent</SelectItem>\r\n            <SelectItem value=\"dealer\" className=\"text-blue-800\">Dealer</SelectItem>\r\n            <SelectItem value=\"super_dealer\" className=\"text-blue-800\">Super Dealer</SelectItem>\r\n            <SelectItem value=\"master\" className=\"text-blue-800\">Master</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"basePrice\" className=\"text-blue-800\">Base Price (GHS)</Label>\r\n        <Input\r\n          id=\"basePrice\"\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          value={formData.basePrice}\r\n          onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n          className=\"text-blue-800 placeholder-blue-400\"\r\n          placeholder=\"0.00\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex justify-end\">\r\n        <Button type=\"submit\" disabled={isLoading}>\r\n          {isLoading ? \"Saving...\" : price ? \"Update Price\" : \"Set Price\"}\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate, RESULT_CHECKER_TYPES } from \"@/lib/constants\";\r\nimport { Plus, FileCheck, Package, AlertCircle, Menu } from \"lucide-react\";\r\nimport type { ResultChecker } from \"@shared/schema\";\r\n\r\ninterface StockSummary {\r\n  type: string;\r\n  year: number;\r\n  total: number;\r\n  available: number;\r\n  sold: number;\r\n}\r\n\r\nexport default function AdminResultCheckers() {\r\n  const { toast } = useToast();\r\n  const [isBulkAddOpen, setIsBulkAddOpen] = useState(false);\r\n  const [isEditOpen, setIsEditOpen] = useState(false);\r\n  const [editingChecker, setEditingChecker] = useState<ResultChecker | null>(null);\r\n  const [selectedType, setSelectedType] = useState<string>(\"all\");\r\n  const [selectedYear, setSelectedYear] = useState<string>(\"all\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: checkers, isLoading } = useQuery<ResultChecker[]>({\r\n    queryKey: [\"/api/admin/result-checkers\"],\r\n    refetchInterval: 60000, // Refetch every minute for stock data\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const { data: stockSummary } = useQuery<StockSummary[]>({\r\n    queryKey: [\"/api/admin/result-checkers/summary\"],\r\n    refetchInterval: 60000, // Refetch every minute for stock summary\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const bulkAddMutation = useMutation<{ added: number }, Error, { type: string; year: number; basePrice: string; costPrice: string; checkers: string; file?: File }>({\r\n    mutationFn: async (data: { type: string; year: number; basePrice: string; costPrice: string; checkers: string; file?: File }) => {\r\n      if (data.file) {\r\n        // Handle file upload\r\n        const formData = new FormData();\r\n        formData.append('type', data.type);\r\n        formData.append('year', data.year.toString());\r\n        formData.append('basePrice', data.basePrice);\r\n        formData.append('costPrice', data.costPrice);\r\n        formData.append('file', data.file);\r\n\r\n        const response = await fetch('/api/admin/result-checkers/bulk-upload', {\r\n          method: 'POST',\r\n          body: formData,\r\n          credentials: 'include',\r\n          headers: await(async () => {\r\n            const { data } = await supabase.auth.getSession();\r\n            const token = data.session?.access_token;\r\n            const headers: Record<string, string> = {};\r\n            if (token) {\r\n              headers['Authorization'] = `Bearer ${token}`;\r\n            }\r\n            return headers;\r\n          })(),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json().catch(() => ({ message: 'Upload failed' }));\r\n          throw new Error(errorData.message || 'Upload failed');\r\n        }\r\n\r\n        return response.json();\r\n      } else {\r\n        // Handle text input\r\n        const response = await apiRequest(\"POST\", \"/api/admin/result-checkers/bulk\", {\r\n          type: data.type,\r\n          year: data.year,\r\n          basePrice: data.basePrice,\r\n          costPrice: data.costPrice,\r\n          checkers: data.checkers,\r\n        });\r\n        return response;\r\n      }\r\n    },\r\n    onSuccess: (data: { added: number }) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers/summary\"] });\r\n      setIsBulkAddOpen(false);\r\n      toast({ title: `${data.added} result checkers added successfully` });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to add checkers\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: async (data: { id: string; updates: Partial<ResultChecker> }) => {\r\n      const response = await apiRequest(\"PUT\", `/api/admin/result-checkers/${data.id}`, data.updates);\r\n      return response;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers/summary\"] });\r\n      setIsEditOpen(false);\r\n      setEditingChecker(null);\r\n      toast({ title: \"Result checker updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update checker\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      await apiRequest(\"DELETE\", `/api/admin/result-checkers/${id}`);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers/summary\"] });\r\n      toast({ title: \"Result checker deleted successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete checker\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const filteredCheckers = checkers?.filter((checker) => {\r\n    if (selectedType !== \"all\" && checker.type !== selectedType) return false;\r\n    if (selectedYear !== \"all\" && checker.year.toString() !== selectedYear) return false;\r\n    return true;\r\n  });\r\n\r\n  const currentYear = new Date().getFullYear();\r\n  const years = [currentYear, currentYear - 1, currentYear - 2];\r\n\r\n  const totalStock = stockSummary?.reduce((acc, s) => acc + s.total, 0) || 0;\r\n  const availableStock = stockSummary?.reduce((acc, s) => acc + s.available, 0) || 0;\r\n  const soldStock = stockSummary?.reduce((acc, s) => acc + s.sold, 0) || 0;\r\n\r\n  const handleEdit = (checker: ResultChecker) => {\r\n    setEditingChecker(checker);\r\n    setIsEditOpen(true);\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    if (confirm(\"Are you sure you want to delete this result checker?\")) {\r\n      deleteMutation.mutate(id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Result Checkers</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isBulkAddOpen} onOpenChange={setIsBulkAddOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-bulk-add\">\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Bulk Add\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"max-w-lg bg-black\">\r\n                <DialogHeader>\r\n                  <DialogTitle className=\"text-white\">Bulk Add Result Checkers</DialogTitle>\r\n                </DialogHeader>\r\n                <BulkAddForm\r\n                  onSubmit={(data) => bulkAddMutation.mutate(data)}\r\n                  isLoading={bulkAddMutation.isPending}\r\n                />\r\n              </DialogContent>\r\n            </Dialog>\r\n            <Dialog open={isEditOpen} onOpenChange={setIsEditOpen}>\r\n              <DialogContent className=\"max-w-lg\">\r\n                <DialogHeader>\r\n                  <DialogTitle>Edit Result Checker</DialogTitle>\r\n                </DialogHeader>\r\n                {editingChecker && (\r\n                  <EditForm\r\n                    checker={editingChecker}\r\n                    onSubmit={(updates) => updateMutation.mutate({ id: editingChecker.id, updates })}\r\n                    isLoading={updateMutation.isPending}\r\n                  />\r\n                )}\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <StatCard\r\n                title=\"Total Stock\"\r\n                value={totalStock}\r\n                icon={Package}\r\n                description=\"All result checkers\"\r\n              />\r\n              <StatCard\r\n                title=\"Available\"\r\n                value={availableStock}\r\n                icon={FileCheck}\r\n                description=\"Ready for sale\"\r\n              />\r\n              <StatCard\r\n                title=\"Sold\"\r\n                value={soldStock}\r\n                icon={AlertCircle}\r\n                description=\"Delivered to customers\"\r\n              />\r\n            </div>\r\n\r\n            {stockSummary && stockSummary.length > 0 && (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {stockSummary.map((item) => (\r\n                  <Card key={`${item.type}-${item.year}`}>\r\n                    <CardHeader className=\"pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">\r\n                        {item.type.toUpperCase()} {item.year}\r\n                      </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"flex items-baseline justify-between\">\r\n                        <span className=\"text-2xl font-bold\">{item.available}</span>\r\n                        <span className=\"text-sm text-muted-foreground\">/ {item.total} total</span>\r\n                      </div>\r\n                      <div className=\"mt-2 h-2 bg-muted rounded-full overflow-hidden\">\r\n                        {/* eslint-disable-next-line react/forbid-dom-props */}\r\n                        {/* Dynamic width for progress bar - inline style required for calculated percentage */}\r\n                        <div\r\n                          className=\"h-full bg-primary transition-all\"\r\n                          style={{ width: `${Math.min((item.available / item.total) * 100, 100)}%` }}\r\n                        />\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            <Card className=\"md:col-span-2 lg:col-span-3\">\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2 pb-3 md:pb-6\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-base md:text-lg\">\r\n                    <FileCheck className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                    <span className=\"truncate\">Result Checker Inventory</span>\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-sm md:text-base\">\r\n                    View and manage PIN/Serial inventory\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex gap-1 md:gap-2 flex-shrink-0\">\r\n                  <Select value={selectedType} onValueChange={setSelectedType}>\r\n                    <SelectTrigger className=\"w-24 md:w-32 text-xs md:text-sm\" data-testid=\"filter-type\">\r\n                      <SelectValue placeholder=\"Type\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Types</SelectItem>\r\n                      {RESULT_CHECKER_TYPES.map((t) => (\r\n                        <SelectItem key={t.id} value={t.id}>\r\n                          {t.name}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <Select value={selectedYear} onValueChange={setSelectedYear}>\r\n                    <SelectTrigger className=\"w-20 md:w-32 text-xs md:text-sm\" data-testid=\"filter-year\">\r\n                      <SelectValue placeholder=\"Year\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Years</SelectItem>\r\n                      {years.map((y) => (\r\n                        <SelectItem key={y} value={y.toString()}>\r\n                          {y}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"px-3 md:px-6\">\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : filteredCheckers && filteredCheckers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"text-xs md:text-sm\">Type</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Year</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Serial</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">PIN</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Price</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Status</TableHead>\r\n                          <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">Sold To</TableHead>\r\n                          <TableHead className=\"hidden lg:table-cell text-xs md:text-sm\">Date</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {filteredCheckers.slice(0, 20).map((checker) => (\r\n                          <TableRow key={checker.id} data-testid={`row-checker-${checker.id}`}>\r\n                            <TableCell className=\"text-xs md:text-sm\">\r\n                              <Badge variant=\"outline\" className=\"text-xs\">{checker.type.toUpperCase()}</Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium text-xs md:text-sm\">{checker.year}</TableCell>\r\n                            <TableCell className=\"font-mono text-xs md:text-sm\">{checker.serialNumber}</TableCell>\r\n                            <TableCell className=\"font-mono text-xs md:text-sm\">\r\n                              {checker.isSold ? checker.pin : \"****\"}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums text-xs md:text-sm\">\r\n                              {formatCurrency(checker.basePrice)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Badge variant={checker.isSold ? \"secondary\" : \"default\"} className=\"text-xs\">\r\n                                {checker.isSold ? \"Sold\" : \"Available\"}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"hidden md:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                              {checker.soldToPhone || \"-\"}\r\n                            </TableCell>\r\n                            <TableCell className=\"hidden lg:table-cell text-muted-foreground text-xs\">\r\n                              {checker.soldAt ? formatDate(checker.soldAt) : formatDate(checker.createdAt)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"flex gap-1 md:gap-2\">\r\n                                <Button\r\n                                  variant=\"outline\"\r\n                                  size=\"sm\"\r\n                                  onClick={() => handleEdit(checker)}\r\n                                  disabled={checker.isSold}\r\n                                  className=\"text-xs px-2 py-1 h-7\"\r\n                                >\r\n                                  Edit\r\n                                </Button>\r\n                                <Button\r\n                                  variant=\"outline\"\r\n                                  size=\"sm\"\r\n                                  onClick={() => handleDelete(checker.id)}\r\n                                  className=\"text-destructive hover:text-destructive text-xs px-2 py-1 h-7\"\r\n                                >\r\n                                  Delete\r\n                                </Button>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-6 md:py-12 text-muted-foreground text-sm md:text-base\">\r\n                    No result checkers found. Use \"Bulk Add\" to add inventory.\r\n                  </div>\r\n                )}\r\n                {filteredCheckers && filteredCheckers.length > 20 && (\r\n                  <div className=\"text-center py-2 md:py-4 text-xs md:text-sm text-muted-foreground\">\r\n                    Showing 20 of {filteredCheckers.length} items\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BulkAddForm({\r\n  onSubmit,\r\n  isLoading,\r\n}: {\r\n  onSubmit: (data: { type: string; year: number; basePrice: string; costPrice: string; checkers: string; file?: File }) => void;\r\n  isLoading: boolean;\r\n}) {\r\n  const currentYear = new Date().getFullYear();\r\n  const [formData, setFormData] = useState({\r\n    type: \"bece\",\r\n    year: currentYear.toString(),\r\n    basePrice: \"\",\r\n    costPrice: \"\",\r\n    checkers: \"\",\r\n  });\r\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSubmit({\r\n      ...formData,\r\n      year: parseInt(formData.year),\r\n      file: uploadedFile || undefined,\r\n    });\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setUploadedFile(file);\r\n      // Clear manual input when file is selected\r\n      setFormData({ ...formData, checkers: \"\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-white\">Type</Label>\r\n          <Select\r\n            value={formData.type}\r\n            onValueChange={(value) => setFormData({ ...formData, type: value })}\r\n          >\r\n            <SelectTrigger data-testid=\"select-checker-type\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {RESULT_CHECKER_TYPES.map((t) => (\r\n                <SelectItem key={t.id} value={t.id}>\r\n                  {t.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-white\">Year</Label>\r\n          <Select\r\n            value={formData.year}\r\n            onValueChange={(value) => setFormData({ ...formData, year: value })}\r\n          >\r\n            <SelectTrigger data-testid=\"select-checker-year\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {[currentYear, currentYear + 1, currentYear - 1].map((y) => (\r\n                <SelectItem key={y} value={y.toString()}>\r\n                  {y}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"costPrice\" className=\"text-white\">Cost Price (GHS)</Label>\r\n          <Input\r\n            id=\"costPrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.costPrice}\r\n            onChange={(e) => setFormData({ ...formData, costPrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            required\r\n            data-testid=\"input-checker-cost\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"basePrice\" className=\"text-white\">Selling Price (GHS)</Label>\r\n          <Input\r\n            id=\"basePrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.basePrice}\r\n            onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            required\r\n            data-testid=\"input-checker-price\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"checkers\" className=\"text-white\">PIN/Serial Pairs</Label>\r\n        <Textarea\r\n          id=\"checkers\"\r\n          value={formData.checkers}\r\n          onChange={(e) => setFormData({ ...formData, checkers: e.target.value })}\r\n          placeholder=\"Enter one per line in format: SERIAL,PIN&#10;e.g.,&#10;ABC123456,1234567890&#10;DEF789012,0987654321\"\r\n          rows={8}\r\n          required={!uploadedFile}\r\n          disabled={!!uploadedFile}\r\n          data-testid=\"input-checker-pairs\"\r\n        />\r\n        <p className=\"text-xs text-gray-300\">\r\n          Format: SERIAL,PIN (one per line) - OR upload a CSV file below\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"file\" className=\"text-white\">Upload CSV File (Optional)</Label>\r\n        <Input\r\n          id=\"file\"\r\n          type=\"file\"\r\n          accept=\".csv\"\r\n          onChange={handleFileChange}\r\n          data-testid=\"input-checker-file\"\r\n        />\r\n        <p className=\"text-xs text-gray-300\">\r\n          CSV format: SERIAL,PIN (one pair per line, no headers)\r\n        </p>\r\n        {uploadedFile && (\r\n          <p className=\"text-sm text-green-400\">\r\n            File selected: {uploadedFile.name}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      <Button type=\"submit\" className=\"w-full\" disabled={isLoading} data-testid=\"button-submit-checkers\">\r\n        {isLoading ? \"Adding...\" : \"Add Result Checkers\"}\r\n      </Button>\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction EditForm({\r\n  checker,\r\n  onSubmit,\r\n  isLoading,\r\n}: {\r\n  checker: ResultChecker;\r\n  onSubmit: (updates: Partial<ResultChecker>) => void;\r\n  isLoading: boolean;\r\n}) {\r\n  const [formData, setFormData] = useState({\r\n    type: checker.type,\r\n    year: checker.year.toString(),\r\n    serialNumber: checker.serialNumber,\r\n    pin: checker.pin,\r\n    basePrice: checker.basePrice,\r\n  });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSubmit({\r\n      type: formData.type,\r\n      year: parseInt(formData.year),\r\n      serialNumber: formData.serialNumber,\r\n      pin: formData.pin,\r\n      basePrice: formData.basePrice,\r\n    });\r\n  };\r\n\r\n  const currentYear = new Date().getFullYear();\r\n  const years = [currentYear, currentYear - 1, currentYear - 2];\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div>\r\n          <Label>Type</Label>\r\n          <Select value={formData.type} onValueChange={(value) => setFormData({ ...formData, type: value })}>\r\n            <SelectTrigger>\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {RESULT_CHECKER_TYPES.map((t) => (\r\n                <SelectItem key={t.id} value={t.id}>\r\n                  {t.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        <div>\r\n          <Label>Year</Label>\r\n          <Select value={formData.year} onValueChange={(value) => setFormData({ ...formData, year: value })}>\r\n            <SelectTrigger>\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {years.map((y) => (\r\n                <SelectItem key={y} value={y.toString()}>\r\n                  {y}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <Label htmlFor=\"edit-serial\">Serial Number</Label>\r\n        <Input\r\n          id=\"edit-serial\"\r\n          value={formData.serialNumber}\r\n          onChange={(e) => setFormData({ ...formData, serialNumber: e.target.value })}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <Label htmlFor=\"edit-pin\">PIN</Label>\r\n        <Input\r\n          id=\"edit-pin\"\r\n          value={formData.pin}\r\n          onChange={(e) => setFormData({ ...formData, pin: e.target.value })}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div>\r\n          <Label htmlFor=\"edit-base-price\">Base Price</Label>\r\n          <Input\r\n            id=\"edit-base-price\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.basePrice}\r\n            onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\r\n        {isLoading ? \"Updating...\" : \"Update Result Checker\"}\r\n      </Button>\r\n    </form>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatusBadge } from \"@/components/ui/status-badge\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { formatCurrency, formatDate, NETWORKS } from \"@/lib/constants\";\r\nimport { BarChart3, Search, Menu, Layers, Download, Edit, ChevronUp, ChevronDown, ChevronRight } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport type { Transaction } from \"@shared/schema\";\r\n\r\ninterface SortableTableHeadProps {\r\n  field: string;\r\n  children: React.ReactNode;\r\n  sortField: string;\r\n  sortDirection: \"asc\" | \"desc\";\r\n  onSort: (field: string) => void;\r\n}\r\n\r\nfunction SortableTableHead({ field, children, sortField, sortDirection, onSort }: SortableTableHeadProps) {\r\n  return (\r\n    <TableHead\r\n      className=\"cursor-pointer select-none hover:bg-muted/50 transition-colors\"\r\n      onClick={() => onSort(field)}\r\n    >\r\n      <div className=\"flex items-center gap-1\">\r\n        {children}\r\n        {sortField === field && (\r\n          sortDirection === \"asc\" ? (\r\n            <ChevronUp className=\"h-4 w-4\" />\r\n          ) : (\r\n            <ChevronDown className=\"h-4 w-4\" />\r\n          )\r\n        )}\r\n      </div>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nexport default function AdminTransactions() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [typeFilter, setTypeFilter] = useState<string>(\"all\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [editingDeliveryStatus, setEditingDeliveryStatus] = useState<string | null>(null);\r\n  const [deliveryStatusValue, setDeliveryStatusValue] = useState<string>(\"\");\r\n  const [exportPaymentStatus, setExportPaymentStatus] = useState<string>(\"all\");\r\n  const [sortField, setSortField] = useState<string>(\"createdAt\");\r\n  const [sortDirection, setSortDirection] = useState<\"asc\" | \"desc\">(\"desc\");\r\n  const [expandedResultCheckers, setExpandedResultCheckers] = useState<Set<string>>(new Set());\r\n  const [resultCheckersData, setResultCheckersData] = useState<Record<string, any>>({});\r\n\r\n  const { data: transactions, isLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/admin/transactions\"],\r\n    refetchInterval: 15000, // Refetch every 15 seconds for transactions\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  // Update delivery status mutation\r\n  const updateDeliveryStatusMutation = useMutation({\r\n    mutationFn: async ({ transactionId, deliveryStatus }: { transactionId: string; deliveryStatus: string }) => {\r\n      return apiRequest(\"PATCH\", `/api/admin/transactions/${transactionId}/delivery-status`, { deliveryStatus });\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/transactions\"] });\r\n      toast({ title: \"Delivery status updated successfully\" });\r\n      setEditingDeliveryStatus(null);\r\n      setDeliveryStatusValue(\"\");\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to update delivery status\", description: error?.message || 'Unknown error', variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Toggle result checker expansion and fetch data if needed\r\n  const toggleResultCheckerExpand = async (transactionId: string) => {\r\n    const newExpanded = new Set(expandedResultCheckers);\r\n\r\n    if (newExpanded.has(transactionId)) {\r\n      newExpanded.delete(transactionId);\r\n    } else {\r\n      newExpanded.add(transactionId);\r\n\r\n      // Fetch result checker data if not already loaded\r\n      if (!resultCheckersData[transactionId]) {\r\n        try {\r\n          const data = await apiRequest(\"GET\", `/api/admin/result-checker/${transactionId}`);\r\n          setResultCheckersData(prev => ({\r\n            ...prev,\r\n            [transactionId]: data\r\n          }));\r\n        } catch (error: any) {\r\n          toast({ \r\n            title: \"Failed to fetch result checker details\", \r\n            description: error?.message || 'Unknown error', \r\n            variant: \"destructive\" \r\n          });\r\n          return; // Don't expand if fetch failed\r\n        }\r\n      }\r\n    }\r\n\r\n    setExpandedResultCheckers(newExpanded);\r\n  };\r\n\r\n  // Export transactions mutation\r\n  const exportTransactionsMutation = useMutation({\r\n    mutationFn: async () => {\r\n      const params = new URLSearchParams();\r\n      if (exportPaymentStatus !== 'all') {\r\n        params.append('paymentStatus', exportPaymentStatus);\r\n      }\r\n      const response = await apiRequest(\"GET\", `/api/admin/transactions/export?${params.toString()}`);\r\n      return response;\r\n    },\r\n    onSuccess: (data) => {\r\n      // Convert to CSV and download\r\n      if (data && Array.isArray(data)) {\r\n        const csvContent = convertToCSV(data);\r\n        const statusLabel = exportPaymentStatus === 'all' ? 'all' : exportPaymentStatus;\r\n        downloadCSV(csvContent, `transactions-${statusLabel}-${new Date().toISOString().split('T')[0]}.csv`);\r\n        toast({ title: \"Transactions exported successfully\" });\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to export transactions\", description: error?.message || 'Unknown error', variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const filteredTransactions = transactions?.filter((tx) => {\r\n    if (statusFilter !== \"all\" && tx.status !== statusFilter) return false;\r\n    if (typeFilter !== \"all\" && tx.type !== typeFilter) return false;\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      if (\r\n        !tx.reference.toLowerCase().includes(term) &&\r\n        !tx.productName.toLowerCase().includes(term) &&\r\n        (!tx.customerPhone || !tx.customerPhone.includes(term))\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const stats = {\r\n    total: transactions?.length || 0,\r\n    completed: transactions?.filter((t) => t.status === \"completed\").length || 0,\r\n    pending: transactions?.filter((t) => t.status === \"pending\").length || 0,\r\n    failed: transactions?.filter((t) => t.status === \"failed\").length || 0,\r\n  };\r\n\r\n  // Sort handler\r\n  const handleSort = (field: string) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === \"asc\" ? \"desc\" : \"asc\");\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection(\"asc\");\r\n    }\r\n  };\r\n\r\n  // Sort transactions\r\n  const sortedTransactions = filteredTransactions?.sort((a, b) => {\r\n    let aValue: any = a[sortField as keyof Transaction];\r\n    let bValue: any = b[sortField as keyof Transaction];\r\n\r\n    // Handle special cases\r\n    if (sortField === \"amount\" || sortField === \"profit\") {\r\n      aValue = parseFloat(aValue);\r\n      bValue = parseFloat(bValue);\r\n    } else if (sortField === \"createdAt\") {\r\n      aValue = new Date(aValue).getTime();\r\n      bValue = new Date(bValue).getTime();\r\n    } else if (sortField === \"productName\") {\r\n      aValue = aValue.toLowerCase();\r\n      bValue = bValue.toLowerCase();\r\n    } else if (sortField === \"customerPhone\") {\r\n      aValue = aValue.toLowerCase();\r\n      bValue = bValue.toLowerCase();\r\n    }\r\n\r\n    if (aValue < bValue) return sortDirection === \"asc\" ? -1 : 1;\r\n    if (aValue > bValue) return sortDirection === \"asc\" ? 1 : -1;\r\n    return 0;\r\n  });\r\n\r\n  // Helper functions\r\n  const convertToCSV = (data: any[]) => {\r\n    if (data.length === 0) return '';\r\n\r\n    const headers = Object.keys(data[0]);\r\n    const csvRows = [];\r\n\r\n    // Add headers\r\n    csvRows.push(headers.join(','));\r\n\r\n    // Add data rows\r\n    for (const row of data) {\r\n      const values = headers.map(header => {\r\n        const value = row[header];\r\n        // Handle arrays and objects\r\n        if (Array.isArray(value)) {\r\n          return `\"${value.map(item => \r\n            typeof item === 'object' ? JSON.stringify(item) : item\r\n          ).join('; ')}\"`;\r\n        }\r\n        if (typeof value === 'object' && value !== null) {\r\n          return `\"${JSON.stringify(value)}\"`;\r\n        }\r\n        // Escape quotes and wrap in quotes if contains comma\r\n        const stringValue = String(value || '');\r\n        if (stringValue.includes(',') || stringValue.includes('\"')) {\r\n          return `\"${stringValue.replace(/\"/g, '\"\"')}\"`;\r\n        }\r\n        return stringValue;\r\n      });\r\n      csvRows.push(values.join(','));\r\n    }\r\n\r\n    return csvRows.join('\\n');\r\n  };\r\n\r\n  const downloadCSV = (csvContent: string, filename: string) => {\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', filename);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleEditDeliveryStatus = (transactionId: string, currentStatus: string) => {\r\n    setEditingDeliveryStatus(transactionId);\r\n    setDeliveryStatusValue(currentStatus || \"pending\");\r\n  };\r\n\r\n  const handleSaveDeliveryStatus = (transactionId: string) => {\r\n    if (deliveryStatusValue) {\r\n      updateDeliveryStatusMutation.mutate({ transactionId, deliveryStatus: deliveryStatusValue });\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingDeliveryStatus(null);\r\n    setDeliveryStatusValue(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Transactions</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4\">\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold\">{stats.total}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Total Transactions</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold text-green-600\">{stats.completed}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Completed</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold text-orange-600\">{stats.pending}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Pending</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold text-red-600\">{stats.failed}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Failed</p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            <Card className=\"md:col-span-2 lg:col-span-3\">\r\n              <CardHeader className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-3 pb-3 md:pb-6\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-base md:text-lg\">\r\n                    <BarChart3 className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                    <span className=\"truncate\">All Transactions</span>\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-sm md:text-base\">\r\n                    View and track all customer orders\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex flex-col sm:flex-row flex-wrap gap-2 w-full lg:w-auto\">\r\n                  <div className=\"flex gap-2\">\r\n                    <Select value={exportPaymentStatus} onValueChange={setExportPaymentStatus}>\r\n                      <SelectTrigger className=\"w-full sm:w-36 md:w-40 text-xs md:text-sm\" data-testid=\"export-payment-status\">\r\n                        <SelectValue placeholder=\"Export Filter\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Payments</SelectItem>\r\n                        <SelectItem value=\"paid\">Paid Only</SelectItem>\r\n                        <SelectItem value=\"pending\">Pending Only</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Button\r\n                      onClick={() => exportTransactionsMutation.mutate()}\r\n                      disabled={exportTransactionsMutation.isPending}\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"gap-2 text-xs px-2 py-1 h-8\"\r\n                    >\r\n                      <Download className=\"h-3 w-3 md:h-4 md:w-4\" />\r\n                      {exportTransactionsMutation.isPending ? \"Exporting...\" : \"Export CSV\"}\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <div className=\"relative flex-1 sm:flex-initial\">\r\n                      <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                      <Input\r\n                        placeholder=\"Search...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"pl-9 w-full sm:w-48 text-sm\"\r\n                        data-testid=\"input-search\"\r\n                      />\r\n                    </div>\r\n                    <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-32 text-xs md:text-sm\" data-testid=\"filter-status\">\r\n                        <SelectValue placeholder=\"Status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Status</SelectItem>\r\n                        <SelectItem value=\"completed\">Completed</SelectItem>\r\n                        <SelectItem value=\"pending\">Pending</SelectItem>\r\n                        <SelectItem value=\"failed\">Failed</SelectItem>\r\n                        <SelectItem value=\"refunded\">Refunded</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Select value={typeFilter} onValueChange={setTypeFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-36 md:w-40 text-xs md:text-sm\" data-testid=\"filter-type\">\r\n                        <SelectValue placeholder=\"Type\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Types</SelectItem>\r\n                        <SelectItem value=\"data_bundle\">Data Bundles</SelectItem>\r\n                        <SelectItem value=\"result_checker\">Result Checkers</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"px-3 md:px-6\">\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : sortedTransactions && sortedTransactions.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"text-xs md:text-sm\">Reference</TableHead>\r\n                          <SortableTableHead field=\"productName\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                            <span className=\"text-xs md:text-sm\">Product</span>\r\n                          </SortableTableHead>\r\n                          <TableHead className=\"hidden sm:table-cell text-xs md:text-sm\">Network</TableHead>\r\n                          <SortableTableHead field=\"amount\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                            <span className=\"text-xs md:text-sm\">Amount</span>\r\n                          </SortableTableHead>\r\n                          <SortableTableHead field=\"profit\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                            <span className=\"text-xs md:text-sm\">Profit</span>\r\n                          </SortableTableHead>\r\n                          <TableHead className=\"hidden lg:table-cell text-xs md:text-sm\">Customer</TableHead>\r\n                          <TableHead className=\"hidden xl:table-cell text-xs md:text-sm\">Payment</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Status</TableHead>\r\n                          <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">Delivery</TableHead>\r\n                          <SortableTableHead field=\"createdAt\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                            <span className=\"text-xs md:text-sm\">Date</span>\r\n                          </SortableTableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {sortedTransactions.map((tx) => {\r\n                          let network = NETWORKS.find((n) => n.id === tx.network);\r\n                          const isBulkOrder = (tx as any).isBulkOrder;\r\n                          const phoneNumbersRaw = (tx as any).phoneNumbers;\r\n                          const phoneNumbers = phoneNumbersRaw ? (typeof phoneNumbersRaw === 'string' ? (() => { try { return JSON.parse(phoneNumbersRaw); } catch (e) { console.error('Failed to parse phoneNumbers:', e, phoneNumbersRaw); return []; } })() : phoneNumbersRaw) as Array<{phone: string, bundleName: string, dataAmount: string}> : undefined;\r\n                          const deliveryStatus = (tx as any).deliveryStatus || \"pending\";\r\n                          \r\n                          // For bulk orders, if network is not found, try to extract from bundle name\r\n                          if (!network && isBulkOrder && phoneNumbers && phoneNumbers.length > 0) {\r\n                            const bundleName = phoneNumbers[0].bundleName;\r\n                            if (bundleName) {\r\n                              const lower = bundleName.toLowerCase();\r\n                              if (lower.includes('mtn')) {\r\n                                network = NETWORKS.find(n => n.id === 'mtn');\r\n                              } else if (lower.includes('telecel')) {\r\n                                network = NETWORKS.find(n => n.id === 'telecel');\r\n                              } else if (lower.includes('bigtime')) {\r\n                                network = NETWORKS.find(n => n.id === 'at_bigtime');\r\n                              } else if (lower.includes('ishare')) {\r\n                                network = NETWORKS.find(n => n.id === 'at_ishare');\r\n                              }\r\n                            }\r\n                          }\r\n                          \r\n                          const isResultChecker = tx.type === \"result_checker\";\r\n                          const isExpanded = expandedResultCheckers.has(tx.id);\r\n                          const checkerData = resultCheckersData[tx.id];\r\n                          const quantity = (tx as any).quantity || 1;\r\n                          \r\n                          return (\r\n                            <>\r\n                            <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\r\n                              <TableCell className=\"font-mono text-xs md:text-sm\">{tx.reference}</TableCell>\r\n                              <TableCell className=\"max-w-[150px] md:max-w-[200px]\">\r\n                                <div className=\"font-medium truncate text-xs md:text-sm\">{tx.productName}</div>\r\n                                <div className=\"flex gap-1 mt-1 flex-wrap\">\r\n                                  <Badge variant=\"outline\" className=\"text-xs px-1 py-0\">\r\n                                    {tx.type === \"data_bundle\" ? \"Data\" : \"Result\"}\r\n                                  </Badge>\r\n                                  {(isBulkOrder || (isResultChecker && quantity > 1)) && (\r\n                                    <Badge variant=\"secondary\" className=\"text-xs px-1 py-0 flex items-center gap-1\">\r\n                                      <Layers className=\"h-2.5 w-2.5\" />\r\n                                      {phoneNumbers?.length || quantity}\r\n                                    </Badge>\r\n                                  )}\r\n                                </div>\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden sm:table-cell\">\r\n                                {network ? (\r\n                                  <Badge\r\n                                    style={{\r\n                                      backgroundColor: network.color,\r\n                                      color: network.textColor,\r\n                                    }}\r\n                                    className=\"text-xs px-1 py-0\"\r\n                                  >\r\n                                    {network.name}\r\n                                  </Badge>\r\n                                ) : (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"font-medium tabular-nums text-xs md:text-sm\">\r\n                                <div>{formatCurrency(tx.amount)}</div>\r\n                                {((isBulkOrder && phoneNumbers) || (isResultChecker && quantity > 1)) && (\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {formatCurrency(parseFloat(tx.amount) / (phoneNumbers?.length || quantity))} each\r\n                                  </div>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"text-green-600 tabular-nums text-xs md:text-sm\">\r\n                                {formatCurrency(tx.profit)}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden lg:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                                {isBulkOrder && phoneNumbers ? (\r\n                                  <div className=\"text-xs\">\r\n                                    <div className=\"font-semibold\">\r\n                                      {phoneNumbers.length} items: {phoneNumbers.map(p => p.dataAmount).join(', ')}\r\n                                    </div>\r\n                                    <div className=\"text-muted-foreground truncate max-w-[80px] md:max-w-[120px]\">\r\n                                      {phoneNumbers[0]?.phone || 'Unknown'}\r\n                                    </div>\r\n                                  </div>\r\n                                ) : (\r\n                                  tx.customerPhone\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden xl:table-cell\">\r\n                                <Badge\r\n                                  variant={\r\n                                    (tx as any).paymentStatus === \"paid\" ? \"default\" :\r\n                                    (tx as any).paymentStatus === \"failed\" ? \"destructive\" :\r\n                                    (tx as any).paymentStatus === \"cancelled\" ? \"outline\" :\r\n                                    \"secondary\"\r\n                                  }\r\n                                  className=\"text-xs\"\r\n                                >\r\n                                  {(tx as any).paymentStatus || \"pending\"}\r\n                                </Badge>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <StatusBadge status={tx.status} />\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden md:table-cell\">\r\n                                {editingDeliveryStatus === tx.id ? (\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <Select value={deliveryStatusValue} onValueChange={setDeliveryStatusValue}>\r\n                                      <SelectTrigger className=\"w-24 md:w-32 h-7 md:h-8 text-xs\">\r\n                                        <SelectValue />\r\n                                      </SelectTrigger>\r\n                                      <SelectContent>\r\n                                        <SelectItem value=\"pending\">Pending</SelectItem>\r\n                                        <SelectItem value=\"processing\">Processing</SelectItem>\r\n                                        <SelectItem value=\"delivered\">Delivered</SelectItem>\r\n                                        <SelectItem value=\"failed\">Failed</SelectItem>\r\n                                      </SelectContent>\r\n                                    </Select>\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      onClick={() => handleSaveDeliveryStatus(tx.id)}\r\n                                      disabled={updateDeliveryStatusMutation.isPending}\r\n                                      className=\"h-7 px-2 text-xs\"\r\n                                    >\r\n                                      {updateDeliveryStatusMutation.isPending ? \"...\" : \"Save\"}\r\n                                    </Button>\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      variant=\"outline\"\r\n                                      onClick={handleCancelEdit}\r\n                                      className=\"h-7 px-2 text-xs\"\r\n                                    >\r\n                                      Cancel\r\n                                    </Button>\r\n                                  </div>\r\n                                ) : (\r\n                                  <Badge\r\n                                    variant={\r\n                                      deliveryStatus === \"delivered\" ? \"default\" :\r\n                                      deliveryStatus === \"processing\" ? \"secondary\" :\r\n                                      deliveryStatus === \"failed\" ? \"destructive\" :\r\n                                      \"outline\"\r\n                                    }\r\n                                    className=\"cursor-pointer text-xs\"\r\n                                    onClick={() => handleEditDeliveryStatus(tx.id, deliveryStatus)}\r\n                                  >\r\n                                    {deliveryStatus}\r\n                                  </Badge>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"text-muted-foreground text-xs md:text-sm\">\r\n                                {formatDate(tx.createdAt)}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <div className=\"flex gap-1\">\r\n                                  {isResultChecker && quantity > 1 && (\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      variant=\"ghost\"\r\n                                      onClick={() => toggleResultCheckerExpand(tx.id)}\r\n                                      className=\"h-6 w-6 p-0\"\r\n                                      title={isExpanded ? \"Collapse PINs\" : \"View all PINs\"}\r\n                                    >\r\n                                      <ChevronRight className={`h-4 w-4 transition-transform ${isExpanded ? 'rotate-90' : ''}`} />\r\n                                    </Button>\r\n                                  )}\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    variant=\"ghost\"\r\n                                    onClick={() => handleEditDeliveryStatus(tx.id, deliveryStatus)}\r\n                                    disabled={editingDeliveryStatus === tx.id}\r\n                                    className=\"h-6 w-6 p-0\"\r\n                                  >\r\n                                    <Edit className=\"h-3 w-3\" />\r\n                                  </Button>\r\n                                </div>\r\n                              </TableCell>\r\n                            </TableRow>\r\n\r\n                            {/* Expanded row for result checker details */}\r\n                            {isResultChecker && isExpanded && checkerData && (\r\n                              <TableRow key={`${tx.id}-expanded`}>\r\n                                <TableCell colSpan={11} className=\"bg-muted/30 p-4\">\r\n                                  <div className=\"space-y-3\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                      <h4 className=\"text-sm font-semibold\">Result Checker PINs ({checkerData.checkers?.length || 0})</h4>\r\n                                      <div className=\"text-xs text-muted-foreground\">\r\n                                        Customer: {checkerData.transaction?.customerPhone || 'N/A'}\r\n                                      </div>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n                                      {checkerData.checkers?.map((checker: any, index: number) => (\r\n                                        <div \r\n                                          key={checker.id} \r\n                                          className=\"p-3 rounded-lg border bg-card text-card-foreground\"\r\n                                        >\r\n                                          <div className=\"flex items-center justify-between mb-2\">\r\n                                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                                              PIN #{index + 1}\r\n                                            </Badge>\r\n                                            <span className=\"text-xs text-muted-foreground\">\r\n                                              {checker.type.toUpperCase()} {checker.year}\r\n                                            </span>\r\n                                          </div>\r\n                                          <div className=\"space-y-1\">\r\n                                            <div className=\"flex flex-col\">\r\n                                              <span className=\"text-xs text-muted-foreground\">Serial Number:</span>\r\n                                              <span className=\"font-mono text-sm font-medium\">{checker.serialNumber}</span>\r\n                                            </div>\r\n                                            <div className=\"flex flex-col\">\r\n                                              <span className=\"text-xs text-muted-foreground\">PIN:</span>\r\n                                              <span className=\"font-mono text-sm font-medium\">{checker.pin}</span>\r\n                                            </div>\r\n                                            {checker.soldAt && (\r\n                                              <div className=\"text-xs text-muted-foreground mt-2\">\r\n                                                Sold: {formatDate(checker.soldAt)}\r\n                                              </div>\r\n                                            )}\r\n                                          </div>\r\n                                        </div>\r\n                                      ))}\r\n                                    </div>\r\n                                  </div>\r\n                                </TableCell>\r\n                              </TableRow>\r\n                            )}\r\n                            </>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No transactions found matching your criteria.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { UserCircle, Trash2, ShoppingBag, Menu, Search } from \"lucide-react\";\r\n\r\ninterface UserWithLastPurchase {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  phone: string | null;\r\n  role: string;\r\n  createdAt: string;\r\n  lastPurchase: {\r\n    date: string;\r\n    amount: number;\r\n    productType: string;\r\n  } | null;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n}\r\n\r\nexport default function AdminUsers() {\r\n  const { toast } = useToast();\r\n  const [roleFilter, setRoleFilter] = useState<string>(\"all\");\r\n  const [searchQuery, setSearchQuery] = useState<string>(\"\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [deleteUserId, setDeleteUserId] = useState<string | null>(null);\r\n  const [deleteInactiveDays, setDeleteInactiveDays] = useState<number | null>(null);\r\n  const [showDeleteInactiveDialog, setShowDeleteInactiveDialog] = useState(false);\r\n  const [editedRoles, setEditedRoles] = useState<Record<string, string>>({});\r\n\r\n  const { data: users, isLoading } = useQuery<UserWithLastPurchase[]>({\r\n    queryKey: [\"/api/admin/users\"],\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/users/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\r\n      toast({ title: \"✅ User deleted successfully\" });\r\n      setDeleteUserId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to delete user\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const deleteInactiveMutation = useMutation({\r\n    mutationFn: (days: number) => apiRequest(\"DELETE\", `/api/admin/users/delete-inactive?days=${days}`, {}),\r\n    onSuccess: (data: { deletedCount: number; errors?: string[] }) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\r\n      toast({ \r\n        title: `✅ Deleted ${data.deletedCount} inactive users`,\r\n        description: data.errors ? `Errors: ${data.errors.join(', ')}` : undefined\r\n      });\r\n      setDeleteInactiveDays(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to delete inactive users\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const updateRoleMutation = useMutation({\r\n    mutationFn: ({ id, role }: { id: string; role: string }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/users/${id}/role`, { role }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      toast({ title: \"✅ User role updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to update user role\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const filteredUsers = users?.filter((user) => {\r\n    // Role filter\r\n    const roleMatch = roleFilter === \"all\" ||\r\n      (roleFilter === \"guest\" && user.role === \"guest\") ||\r\n      (roleFilter === \"user\" && user.role === \"user\") ||\r\n      (roleFilter === \"agent\" && user.role === \"agent\") ||\r\n      (roleFilter === \"dealer\" && user.role === \"dealer\") ||\r\n      (roleFilter === \"super_dealer\" && user.role === \"super_dealer\") ||\r\n      (roleFilter === \"master\" && user.role === \"master\") ||\r\n      (roleFilter === \"admin\" && user.role === \"admin\");\r\n\r\n    // Search filter\r\n    const searchMatch = !searchQuery ||\r\n      user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      (user.phone && user.phone.includes(searchQuery));\r\n\r\n    return roleMatch && searchMatch;\r\n  });\r\n\r\n  const stats = {\r\n    total: users?.length || 0,\r\n    guests: users?.filter((u) => u.role === \"guest\").length || 0,\r\n    users: users?.filter((u) => u.role === \"user\").length || 0,\r\n    agents: users?.filter((u) => u.role === \"agent\").length || 0,\r\n    dealers: users?.filter((u) => u.role === \"dealer\").length || 0,\r\n      superDealers: users?.filter((u) => u.role === \"super_dealer\").length || 0,\r\n      masters: users?.filter((u) => u.role === \"master\").length || 0,\r\n    admins: users?.filter((u) => u.role === \"admin\").length || 0,\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Users</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <StatCard\r\n                title=\"Total Users\"\r\n                value={stats.total}\r\n                icon={UserCircle}\r\n                description=\"All registered users\"\r\n              />\r\n              <StatCard\r\n                title=\"Users\"\r\n                value={stats.users}\r\n                icon={UserCircle}\r\n                description=\"Regular users\"\r\n              />\r\n              <StatCard\r\n                title=\"Agents\"\r\n                value={stats.agents}\r\n                icon={UserCircle}\r\n                description=\"Agent accounts\"\r\n              />\r\n              <StatCard\r\n                title=\"Dealers\"\r\n                value={stats.dealers}\r\n                icon={UserCircle}\r\n                description=\"Dealer accounts\"\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <StatCard\r\n                title=\"Super Dealers\"\r\n                value={stats.superDealers}\r\n                icon={UserCircle}\r\n                description=\"Super dealer accounts\"\r\n              />\r\n              <StatCard\r\n                title=\"Guests\"\r\n                value={stats.guests}\r\n                icon={UserCircle}\r\n                description=\"Guest accounts\"\r\n              />\r\n              <StatCard\r\n                title=\"Admins\"\r\n                value={stats.admins}\r\n                icon={UserCircle}\r\n                description=\"Administrator accounts\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <UserCircle className=\"h-5 w-5\" />\r\n                    All Users\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    Manage user accounts and track purchases\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Days\"\r\n                      className=\"w-20\"\r\n                      value={deleteInactiveDays || \"\"}\r\n                      onChange={(e) => setDeleteInactiveDays(parseInt(e.target.value) || null)}\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"destructive\"\r\n                      onClick={() => setShowDeleteInactiveDialog(true)}\r\n                      disabled={!deleteInactiveDays}\r\n                    >\r\n                      Delete Inactive\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"relative\">\r\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search users...\"\r\n                      className=\"w-64 pl-10\"\r\n                      value={searchQuery}\r\n                      onChange={(e) => setSearchQuery(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <Select value={roleFilter} onValueChange={setRoleFilter}>\r\n                    <SelectTrigger className=\"w-40\">\r\n                      <SelectValue placeholder=\"Role\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-white dark:bg-black border-2 border-gray-300 dark:border-gray-600 text-black dark:text-white\">\r\n                      <SelectItem value=\"all\">All Users</SelectItem>\r\n                      <SelectItem value=\"guest\">Guests</SelectItem>\r\n                      <SelectItem value=\"user\">Users</SelectItem>\r\n                      <SelectItem value=\"agent\">Agents</SelectItem>\r\n                      <SelectItem value=\"dealer\">Dealers</SelectItem>\r\n                      <SelectItem value=\"super_dealer\">Super Dealers</SelectItem>\r\n                      <SelectItem value=\"master\">Master</SelectItem>\r\n                      <SelectItem value=\"admin\">Admins</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={10} />\r\n                ) : filteredUsers && filteredUsers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Name</TableHead>\r\n                          <TableHead>Email</TableHead>\r\n                          <TableHead>Phone</TableHead>\r\n                          <TableHead>Role</TableHead>\r\n                          <TableHead>Last Purchase</TableHead>\r\n                          <TableHead>Total Purchases</TableHead>\r\n                          <TableHead>Total Spent</TableHead>\r\n                          <TableHead>Joined</TableHead>\r\n                          <TableHead className=\"text-right\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {filteredUsers.map((user) => (\r\n                          <TableRow key={user.id}>\r\n                            <TableCell>\r\n                              <div className=\"font-medium\">{user.name}</div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"text-sm text-muted-foreground\">{user.email}</div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"text-sm\">{user.phone || \"—\"}</div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Select\r\n                                value={editedRoles[user.id] || user.role}\r\n                                onValueChange={(newRole) => {\r\n                                  setEditedRoles(prev => ({ ...prev, [user.id]: newRole }));\r\n                                }}\r\n                                disabled={updateRoleMutation.isPending}\r\n                              >\r\n                                <SelectTrigger className=\"w-32\">\r\n                                  <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent className=\"bg-white dark:bg-black border-2 border-gray-300 dark:border-gray-600 text-black dark:text-white\">\r\n                                  <SelectItem value=\"guest\">Guest</SelectItem>\r\n                                  <SelectItem value=\"user\">User</SelectItem>\r\n                                  <SelectItem value=\"agent\">Agent</SelectItem>\r\n                                  <SelectItem value=\"dealer\">Dealer</SelectItem>\r\n                                  <SelectItem value=\"super_dealer\">Super Dealer</SelectItem>\r\n                                  <SelectItem value=\"master\">Master</SelectItem>\r\n                                  <SelectItem value=\"admin\">Admin</SelectItem>\r\n                                </SelectContent>\r\n                              </Select>\r\n                              {editedRoles[user.id] && editedRoles[user.id] !== user.role && (\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"outline\"\r\n                                  className=\"ml-2\"\r\n                                  onClick={() => {\r\n                                    updateRoleMutation.mutate({ id: user.id, role: editedRoles[user.id] });\r\n                                    setEditedRoles(prev => {\r\n                                      const newEdited = { ...prev };\r\n                                      delete newEdited[user.id];\r\n                                      return newEdited;\r\n                                    });\r\n                                  }}\r\n                                  disabled={updateRoleMutation.isPending}\r\n                                >\r\n                                  Save\r\n                                </Button>\r\n                              )}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              {user.lastPurchase ? (\r\n                                <div className=\"text-sm\">\r\n                                  <div className=\"font-medium\">\r\n                                    {formatCurrency(user.lastPurchase.amount)}\r\n                                  </div>\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {user.lastPurchase.productType} • {formatDate(user.lastPurchase.date)}\r\n                                  </div>\r\n                                </div>\r\n                              ) : (\r\n                                <span className=\"text-muted-foreground text-sm\">No purchases</span>\r\n                              )}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              <div className=\"flex items-center gap-1\">\r\n                                <ShoppingBag className=\"h-3 w-3 text-muted-foreground\" />\r\n                                {user.totalPurchases}\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium tabular-nums\">\r\n                              {formatCurrency(user.totalSpent)}\r\n                            </TableCell>\r\n                            <TableCell className=\"text-muted-foreground text-sm\">\r\n                              {formatDate(user.createdAt)}\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                className=\"text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                onClick={() => setDeleteUserId(user.id)}\r\n                                disabled={user.role === \"admin\"}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No users found.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete inactive users confirmation dialog */}\r\n      <AlertDialog open={showDeleteInactiveDialog} onOpenChange={setShowDeleteInactiveDialog}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Inactive Users</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete all users who haven't made a purchase in the last {deleteInactiveDays} days? \r\n              This action cannot be undone. All user data and transactions will be permanently removed.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => {\r\n                if (deleteInactiveDays) {\r\n                  deleteInactiveMutation.mutate(deleteInactiveDays);\r\n                  setShowDeleteInactiveDialog(false);\r\n                }\r\n              }}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n              disabled={deleteInactiveMutation.isPending}\r\n            >\r\n              Delete Inactive Users\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <AlertDialog open={!!deleteUserId} onOpenChange={(open) => !open && setDeleteUserId(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete User</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete this user? This action cannot be undone.\r\n              All user data and transactions will be permanently removed.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => deleteUserId && deleteMutation.mutate(deleteUserId)}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { Users, CheckCircle, Clock, Store, Menu, Trash2, Edit } from \"lucide-react\";\r\nimport type { Agent } from \"@shared/schema\";\r\n\r\nconst whatsappSchema = z.object({\r\n  whatsappSupportLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n  whatsappChannelLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n});\r\n\r\ntype WhatsappFormData = z.infer<typeof whatsappSchema>;\r\n\r\ninterface AgentWithUser extends Agent {\r\n  user: { name: string; email: string; phone: string } | null;\r\n}\r\n\r\nexport default function AdminAgents() {\r\n  const { toast } = useToast();\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [deleteAgentId, setDeleteAgentId] = useState<string | null>(null);\r\n  const [editAgentId, setEditAgentId] = useState<string | null>(null);\r\n\r\n  const whatsappForm = useForm<WhatsappFormData>({\r\n    resolver: zodResolver(whatsappSchema),\r\n    defaultValues: {\r\n      whatsappSupportLink: \"\",\r\n      whatsappChannelLink: \"\",\r\n    },\r\n  });\r\n\r\n  const { data: agents, isLoading } = useQuery<AgentWithUser[]>({\r\n    queryKey: [\"/api/admin/agents\"],\r\n    refetchInterval: 30000, // Refetch every 30 seconds\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/agents/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/agents\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\r\n      toast({ title: \"✅ Agent deleted successfully\" });\r\n      setDeleteAgentId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to delete agent\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const updateWhatsappMutation = useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: WhatsappFormData }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/agents/${id}/whatsapp`, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/agents\"] });\r\n      toast({ title: \"✅ WhatsApp links updated successfully\" });\r\n      setEditAgentId(null);\r\n      whatsappForm.reset();\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to update WhatsApp links\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const filteredAgents = agents?.filter((agent) => {\r\n    if (statusFilter === \"approved\") return agent.isApproved;\r\n    if (statusFilter === \"pending\") return !agent.isApproved;\r\n    return true;\r\n  });\r\n\r\n  const stats = {\r\n    total: agents?.length || 0,\r\n    approved: agents?.filter((a) => a.isApproved).length || 0,\r\n    pending: agents?.filter((a) => !a.isApproved).length || 0,\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Agents</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <StatCard\r\n                title=\"Total Agents\"\r\n                value={stats.total}\r\n                icon={Users}\r\n                description=\"Registered agents\"\r\n              />\r\n              <StatCard\r\n                title=\"Approved\"\r\n                value={stats.approved}\r\n                icon={CheckCircle}\r\n                description=\"Active agents\"\r\n              />\r\n              <StatCard\r\n                title=\"Pending Approval\"\r\n                value={stats.pending}\r\n                icon={Clock}\r\n                description=\"Awaiting review\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Store className=\"h-5 w-5\" />\r\n                    All Agents\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    Manage agent accounts and approvals\r\n                  </CardDescription>\r\n                </div>\r\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                  <SelectTrigger className=\"w-40\" data-testid=\"filter-status\">\r\n                    <SelectValue placeholder=\"Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Agents</SelectItem>\r\n                    <SelectItem value=\"approved\">Approved</SelectItem>\r\n                    <SelectItem value=\"pending\">Pending</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : filteredAgents && filteredAgents.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Business Name</TableHead>\r\n                        <TableHead>Contact</TableHead>\r\n                        <TableHead>Storefront</TableHead>\r\n                        <TableHead>Balance</TableHead>\r\n                        <TableHead>Total Sales</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Joined</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {filteredAgents.map((agent) => (\r\n                        <TableRow key={agent.id} data-testid={`row-agent-${agent.id}`}>\r\n                          <TableCell>\r\n                            <div className=\"font-medium\">{agent.businessName}</div>\r\n                            {agent.businessDescription && (\r\n                              <div className=\"text-sm text-muted-foreground truncate max-w-[200px]\">\r\n                                {agent.businessDescription}\r\n                              </div>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"text-sm\">{agent.user?.name}</div>\r\n                            <div className=\"text-xs text-muted-foreground\">{agent.user?.email}</div>\r\n                            <div className=\"text-xs text-muted-foreground\">{agent.user?.phone}</div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <a\r\n                              href={`/store/agent/${agent.storefrontSlug}`}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              className=\"text-primary hover:underline font-mono text-sm\"\r\n                            >\r\n                              /store/agent/{agent.storefrontSlug}\r\n                            </a>\r\n                          </TableCell>\r\n                          <TableCell className=\"font-medium tabular-nums\">\r\n                            {formatCurrency(agent.balance)}\r\n                          </TableCell>\r\n                          <TableCell className=\"tabular-nums\">\r\n                            {formatCurrency(agent.totalSales)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge variant={agent.isApproved ? \"default\" : \"secondary\"}>\r\n                              {agent.isApproved ? \"Approved\" : \"Pending\"}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {formatDate(agent.createdAt)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <div className=\"flex justify-end gap-2\">\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => {\r\n                                  setEditAgentId(agent.id);\r\n                                  whatsappForm.reset({\r\n                                    whatsappSupportLink: agent.whatsappSupportLink || \"\",\r\n                                    whatsappChannelLink: agent.whatsappChannelLink || \"\",\r\n                                  });\r\n                                }}\r\n                              >\r\n                                <Edit className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                className=\"text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                onClick={() => setDeleteAgentId(agent.id)}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </div>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No agents found.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <AlertDialog open={!!deleteAgentId} onOpenChange={(open) => !open && setDeleteAgentId(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Agent</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete this agent? This action cannot be undone.\r\n              The agent's storefront, transactions, and all related data will be permanently removed.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => deleteAgentId && deleteMutation.mutate(deleteAgentId)}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Edit WhatsApp Links Dialog */}\r\n      <Dialog open={!!editAgentId} onOpenChange={(open) => !open && setEditAgentId(null)}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Edit WhatsApp Links</DialogTitle>\r\n          </DialogHeader>\r\n          <form\r\n            onSubmit={whatsappForm.handleSubmit((data) => {\r\n              if (editAgentId) {\r\n                updateWhatsappMutation.mutate({ id: editAgentId, data });\r\n              }\r\n            })}\r\n            className=\"space-y-4\"\r\n          >\r\n            <div>\r\n              <Label htmlFor=\"whatsappSupportLink\">WhatsApp Support Link</Label>\r\n              <Input\r\n                id=\"whatsappSupportLink\"\r\n                placeholder=\"https://wa.me/1234567890\"\r\n                {...whatsappForm.register(\"whatsappSupportLink\")}\r\n              />\r\n              {whatsappForm.formState.errors.whatsappSupportLink && (\r\n                <p className=\"text-sm text-destructive mt-1\">\r\n                  {whatsappForm.formState.errors.whatsappSupportLink.message}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"whatsappChannelLink\">WhatsApp Channel Link</Label>\r\n              <Input\r\n                id=\"whatsappChannelLink\"\r\n                placeholder=\"https://whatsapp.com/channel/...\"\r\n                {...whatsappForm.register(\"whatsappChannelLink\")}\r\n              />\r\n              {whatsappForm.formState.errors.whatsappChannelLink && (\r\n                <p className=\"text-sm text-destructive mt-1\">\r\n                  {whatsappForm.formState.errors.whatsappChannelLink.message}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <DialogFooter>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={() => setEditAgentId(null)}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={updateWhatsappMutation.isPending}\r\n              >\r\n                {updateWhatsappMutation.isPending ? \"Saving...\" : \"Save Changes\"}\r\n              </Button>\r\n            </DialogFooter>\r\n          </form>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate, WITHDRAWAL_STATUSES } from \"@/lib/constants\";\r\nimport { Wallet, CheckCircle, XCircle, Clock, Banknote, Menu } from \"lucide-react\";\r\nimport type { Withdrawal } from \"@shared/schema\";\r\n\r\ninterface WithdrawalWithAgent extends Withdrawal {\r\n  agent: { businessName: string } | null;\r\n  user: { name: string } | null;\r\n}\r\n\r\nexport default function AdminWithdrawals() {\r\n  const { toast } = useToast();\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: withdrawals, isLoading, error } = useQuery<WithdrawalWithAgent[]>({\r\n    queryKey: [\"/api/admin/withdrawals\"],\r\n    refetchInterval: 20000, // Refetch every 20 seconds for withdrawals\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  // Show error if there's an issue fetching withdrawals\r\n  if (error) {\r\n    console.error(\"Error fetching withdrawals:\", error);\r\n    return (\r\n      <div className=\"flex h-screen bg-background\">\r\n        <AdminSidebar />\r\n        <div className=\"flex-1 p-8\">\r\n          <div className=\"text-center\">\r\n            <h1 className=\"text-2xl font-bold text-red-600 mb-4\">Error Loading Withdrawals</h1>\r\n            <p className=\"text-muted-foreground\">Unable to fetch withdrawal requests. Please try again later.</p>\r\n            <p className=\"text-sm text-muted-foreground mt-2\">Error: {error.message}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const filteredWithdrawals = Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => {\r\n    if (statusFilter === \"all\") return true;\r\n    return w.status === statusFilter;\r\n  }) : [];\r\n\r\n  const stats = {\r\n    total: Array.isArray(withdrawals) && withdrawals ? withdrawals.length : 0,\r\n    pending: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"pending\").length : 0,\r\n    approved: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"approved\").length : 0,\r\n    rejected: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"rejected\").length : 0,\r\n    paid: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"paid\").length : 0,\r\n    totalAmount: Array.isArray(withdrawals) && withdrawals ? withdrawals.reduce((sum, w) => sum + parseFloat(w.amount), 0) : 0,\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig = WITHDRAWAL_STATUSES[status as keyof typeof WITHDRAWAL_STATUSES];\r\n    return (\r\n      <Badge className={statusConfig?.color || \"\"}>\r\n        {statusConfig?.label || status}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const actionMutation = useMutation({\r\n    mutationFn: async ({ id, action }: { id: string; action: \"approve\" | \"reject\" | \"mark_paid\" }) => {\r\n      const response = await apiRequest(\"POST\", `/api/admin/withdrawals/${id}/${action}`);\r\n      return response;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/withdrawals\"] });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Withdrawal request updated successfully\",\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to update withdrawal request\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleApprove = (id: string) => {\r\n    actionMutation.mutate({ id, action: \"approve\" });\r\n  };\r\n\r\n  const handleReject = (id: string) => {\r\n    actionMutation.mutate({ id, action: \"reject\" });\r\n  };\r\n\r\n  const handleMarkPaid = (id: string) => {\r\n    actionMutation.mutate({ id, action: \"mark_paid\" });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Withdrawals</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <StatCard\r\n                title=\"Total Requests\"\r\n                value={stats.total}\r\n                icon={Wallet}\r\n                description=\"All time\"\r\n              />\r\n              <StatCard\r\n                title=\"Pending\"\r\n                value={stats.pending}\r\n                icon={Clock}\r\n                description=\"Awaiting approval\"\r\n              />\r\n              <StatCard\r\n                title=\"Approved\"\r\n                value={stats.approved}\r\n                icon={CheckCircle}\r\n                description=\"Ready for manual payout\"\r\n              />\r\n              <StatCard\r\n                title=\"Paid\"\r\n                value={stats.paid}\r\n                icon={CheckCircle}\r\n                description=\"Manually paid out\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Wallet className=\"h-5 w-5\" />\r\n                    Withdrawal Requests\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    Track all agent withdrawal requests and their transfer status\r\n                  </CardDescription>\r\n                </div>\r\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                  <SelectTrigger className=\"w-40\" data-testid=\"filter-status\">\r\n                    <SelectValue placeholder=\"Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Status</SelectItem>\r\n                    <SelectItem value=\"pending\">Pending</SelectItem>\r\n                    <SelectItem value=\"approved\">Approved</SelectItem>\r\n                    <SelectItem value=\"rejected\">Rejected</SelectItem>\r\n                    <SelectItem value=\"paid\">Paid</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : filteredWithdrawals && filteredWithdrawals.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Agent</TableHead>\r\n                        <TableHead>Amount</TableHead>\r\n                        <TableHead>Payment Method</TableHead>\r\n                        <TableHead>Account Details</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Requested</TableHead>\r\n                        <TableHead>Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {filteredWithdrawals.map((withdrawal) => (\r\n                        <TableRow key={withdrawal.id} data-testid={`row-withdrawal-${withdrawal.id}`}>\r\n                          <TableCell>\r\n                            <div className=\"font-medium\">{withdrawal.agent?.businessName}</div>\r\n                            <div className=\"text-sm text-muted-foreground\">{withdrawal.user?.name}</div>\r\n                          </TableCell>\r\n                          <TableCell className=\"font-bold tabular-nums text-lg\">\r\n                            {formatCurrency(withdrawal.amount)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              {withdrawal.paymentMethod === \"bank\" ? (\r\n                                <Banknote className=\"h-4 w-4 text-blue-600\" />\r\n                              ) : (\r\n                                <Wallet className=\"h-4 w-4 text-green-600\" />\r\n                              )}\r\n                              <span className=\"text-sm font-medium capitalize\">\r\n                                {withdrawal.paymentMethod?.replace(\"_\", \" \") || \"Bank\"}\r\n                              </span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium\">{withdrawal.accountName}</div>\r\n                              <div className=\"text-muted-foreground\">{withdrawal.accountNumber}</div>\r\n                              {withdrawal.paymentMethod === \"bank\" && withdrawal.bankName && (\r\n                                <div className=\"text-muted-foreground text-xs\">{withdrawal.bankName}</div>\r\n                              )}\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>{getStatusBadge(withdrawal.status)}</TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {formatDate(withdrawal.createdAt)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {withdrawal.status === \"pending\" && (\r\n                              <div className=\"flex gap-2\">\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"default\"\r\n                                  onClick={() => handleApprove(withdrawal.id)}\r\n                                  disabled={actionMutation.isPending}\r\n                                >\r\n                                  <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                                  Approve\r\n                                </Button>\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"destructive\"\r\n                                  onClick={() => handleReject(withdrawal.id)}\r\n                                  disabled={actionMutation.isPending}\r\n                                >\r\n                                  <XCircle className=\"h-4 w-4 mr-1\" />\r\n                                  Reject\r\n                                </Button>\r\n                              </div>\r\n                            )}\r\n                            {withdrawal.status === \"approved\" && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={() => handleMarkPaid(withdrawal.id)}\r\n                                disabled={actionMutation.isPending}\r\n                              >\r\n                                <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                                Mark as Paid\r\n                              </Button>\r\n                            )}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No withdrawal requests found.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { MessageCircle, Send, UserCircle, Clock, CheckCircle, Menu } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport type { SupportChat, ChatMessage } from \"@shared/schema\";\r\n\r\nexport default function AdminChatSupport() {\r\n  const [selectedChatId, setSelectedChatId] = useState<string | null>(null);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [filter, setFilter] = useState<\"open\" | \"closed\">(\"open\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  // Get unread message count\r\n  const { data: unreadCount = 0 } = useQuery<number>({\r\n    queryKey: [\"/api/support/admin/unread-count\"],\r\n    queryFn: async () => {\r\n      try {\r\n        const data = await apiRequest<{ count: number }>(\"GET\", \"/api/support/admin/unread-count\");\r\n        return data.count || 0;\r\n      } catch (error) {\r\n        return 0;\r\n      }\r\n    },\r\n    refetchInterval: 5000, // Poll every 5 seconds\r\n  });\r\n\r\n  // Get all chats\r\n  const { data: chats, isLoading } = useQuery<SupportChat[]>({\r\n    queryKey: [`/api/admin/support/chats?status=${filter}`],\r\n    refetchInterval: 10000, // Poll every 10 seconds\r\n  });\r\n\r\n  // Get selected chat details\r\n  const { data: chatData } = useQuery<{ chat: SupportChat; messages: ChatMessage[] }>({\r\n    queryKey: [`/api/support/chat/${selectedChatId}`],\r\n    enabled: !!selectedChatId,\r\n    refetchInterval: 5000, // Poll every 5 seconds for new messages\r\n  });\r\n\r\n  // Send message mutation\r\n  const sendMessageMutation = useMutation({\r\n    mutationFn: (msg: string) =>\r\n      apiRequest(\"POST\", `/api/support/chat/${selectedChatId}/message`, { message: msg }),\r\n    onSuccess: () => {\r\n      setMessage(\"\");\r\n      queryClient.invalidateQueries({ queryKey: [`/api/support/chat/${selectedChatId}`] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/support/chats\"], exact: false });\r\n    },\r\n    onError: () => {\r\n      toast({\r\n        title: \"❌ Error\",\r\n        description: \"Failed to send message\",\r\n        variant: \"destructive\",\r\n        duration: 4000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Assign chat mutation\r\n  const assignChatMutation = useMutation({\r\n    mutationFn: (chatId: string) =>\r\n      apiRequest(\"PUT\", `/api/admin/support/chat/${chatId}/assign`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/support/chats\"], exact: false });\r\n      queryClient.invalidateQueries({ queryKey: [`/api/support/chat/${selectedChatId}`] });\r\n      toast({\r\n        title: \"✅ Assigned\",\r\n        description: \"Chat assigned to you\",\r\n        duration: 3000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Close chat mutation\r\n  const closeChatMutation = useMutation({\r\n    mutationFn: (chatId: string) =>\r\n      apiRequest(\"PUT\", `/api/support/chat/${chatId}/close`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/support/chats\"], exact: false });\r\n      setSelectedChatId(null);\r\n      toast({\r\n        title: \"✅ Chat Closed\",\r\n        description: \"The chat has been closed\",\r\n        duration: 3000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n    }\r\n  }, [chatData?.messages]);\r\n\r\n  // Mark user messages as read when admin views them\r\n  useEffect(() => {\r\n    if (chatData?.messages && selectedChatId) {\r\n      const unreadUserMessages = chatData.messages.filter(\r\n        msg => msg.senderType === 'user' && !msg.isRead\r\n      );\r\n      \r\n      // Mark each unread user message as read\r\n      unreadUserMessages.forEach(async (msg) => {\r\n        try {\r\n          await apiRequest(\"PUT\", `/api/support/message/${msg.id}/read`, {});\r\n        } catch (error) {\r\n          console.error('Failed to mark message as read:', error);\r\n        }\r\n      });\r\n      \r\n      // Invalidate unread count query to update badge\r\n      if (unreadUserMessages.length > 0) {\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/support/admin/unread-count\"] });\r\n      }\r\n    }\r\n  }, [chatData?.messages, selectedChatId, queryClient]);\r\n\r\n  const handleSendMessage = () => {\r\n    if (!message.trim() || !selectedChatId) return;\r\n    sendMessageMutation.mutate(message);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        {/* Mobile header with menu button */}\r\n        <div className=\"lg:hidden border-b px-4 py-3 flex items-center justify-between bg-background\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={() => setSidebarOpen(true)}\r\n          >\r\n            <Menu className=\"h-5 w-5\" />\r\n          </Button>\r\n          <div className=\"flex items-center gap-2\">\r\n            <h1 className=\"text-lg font-semibold\">Support Chat</h1>\r\n            {unreadCount > 0 && (\r\n              <Badge variant=\"destructive\" className=\"h-5 min-w-5 flex items-center justify-center px-1.5\">\r\n                {unreadCount}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n          <div className=\"w-10\" /> {/* Spacer for centering */}\r\n        </div>\r\n\r\n        <div className=\"flex-1 overflow-auto p-4 md:p-6\">\r\n          <div className=\"mb-4 md:mb-6 hidden lg:block\">\r\n            <div className=\"flex items-center gap-3 mb-2\">\r\n              <h1 className=\"text-2xl md:text-3xl font-bold\">Support Chat</h1>\r\n              {unreadCount > 0 && (\r\n                <Badge variant=\"destructive\" className=\"text-sm px-2.5 py-1\">\r\n                  {unreadCount} New {unreadCount === 1 ? 'Message' : 'Messages'}\r\n                </Badge>\r\n              )}\r\n            </div>\r\n            <p className=\"text-sm md:text-base text-muted-foreground\">Manage customer support conversations</p>\r\n          </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 h-[calc(100vh-140px)] md:h-[calc(100vh-200px)]\">\r\n          {/* Chat List */}\r\n          <Card className=\"lg:col-span-1 max-h-[40vh] lg:max-h-none\">\r\n            <CardHeader className=\"border-b p-3 md:p-6\">\r\n              <Tabs value={filter} onValueChange={(v) => setFilter(v as \"open\" | \"closed\")}>\r\n                <TabsList className=\"grid w-full grid-cols-2\">\r\n                  <TabsTrigger \r\n                    value=\"open\" \r\n                    className=\"text-xs md:text-sm data-[state=active]:bg-yellow-500 data-[state=active]:text-white data-[state=active]:font-medium data-[state=active]:shadow-sm\"\r\n                  >\r\n                    Open\r\n                  </TabsTrigger>\r\n                  <TabsTrigger \r\n                    value=\"closed\" \r\n                    className=\"text-xs md:text-sm data-[state=active]:bg-yellow-500 data-[state=active]:text-white data-[state=active]:font-medium data-[state=active]:shadow-sm\"\r\n                  >\r\n                    Closed\r\n                  </TabsTrigger>\r\n                </TabsList>\r\n              </Tabs>\r\n            </CardHeader>\r\n            <CardContent className=\"p-0\">\r\n              <ScrollArea className=\"h-[calc(40vh-100px)] lg:h-[calc(100vh-340px)]\">\r\n                {isLoading ? (\r\n                  <div className=\"p-4 text-center text-muted-foreground text-sm\">Loading...</div>\r\n                ) : !chats || chats.length === 0 ? (\r\n                  <div className=\"p-4 md:p-8 text-center text-muted-foreground\">\r\n                    <MessageCircle className=\"h-8 w-8 md:h-12 md:w-12 mx-auto mb-3 opacity-50\" />\r\n                    <p className=\"text-xs md:text-sm\">No {filter} chats</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"divide-y\">\r\n                    {chats.map((chat) => (\r\n                      <button\r\n                        key={chat.id}\r\n                        onClick={() => setSelectedChatId(chat.id)}\r\n                        className={`w-full p-3 md:p-4 text-left hover:bg-muted/50 transition-colors ${\r\n                          selectedChatId === chat.id ? \"bg-muted\" : \"\"\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between mb-2\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <UserCircle className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <span className=\"font-medium text-sm\">{chat.userName}</span>\r\n                          </div>\r\n                          {chat.status === 'open' && (\r\n                            <Badge variant=\"default\" className=\"text-xs\">Open</Badge>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground truncate\">{chat.userEmail}</p>\r\n                        <div className=\"flex items-center gap-2 mt-2 text-xs text-muted-foreground\">\r\n                          <Clock className=\"h-3 w-3\" />\r\n                          <span>\r\n                            {new Date(chat.lastMessageAt).toLocaleString([], {\r\n                              month: 'short',\r\n                              day: 'numeric',\r\n                              hour: '2-digit',\r\n                              minute: '2-digit',\r\n                            })}\r\n                          </span>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </ScrollArea>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Chat View */}\r\n          <Card className=\"lg:col-span-2 flex flex-col min-h-[55vh] lg:min-h-0\">\r\n            {!selectedChatId || !chatData ? (\r\n              <CardContent className=\"flex-1 flex items-center justify-center p-4\">\r\n                <div className=\"text-center text-muted-foreground\">\r\n                  <MessageCircle className=\"h-12 w-12 md:h-16 md:w-16 mx-auto mb-4 opacity-50\" />\r\n                  <p className=\"text-sm md:text-base\">Select a chat to view conversation</p>\r\n                </div>\r\n              </CardContent>\r\n            ) : (\r\n              <>\r\n                <CardHeader className=\"border-b p-3 md:p-6\">\r\n                  <div className=\"flex items-start md:items-center justify-between gap-2 flex-col md:flex-row\">\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <CardTitle className=\"text-base md:text-lg flex items-center gap-2\">\r\n                        <UserCircle className=\"h-4 w-4 md:h-5 md:w-5 flex-shrink-0\" />\r\n                        <span className=\"truncate\">{chatData.chat.userName}</span>\r\n                      </CardTitle>\r\n                      <p className=\"text-xs md:text-sm text-muted-foreground mt-1 truncate\">\r\n                        {chatData.chat.userEmail}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"flex gap-2 flex-wrap w-full md:w-auto\">\r\n                      {!chatData.chat.assignedToAdminId && chatData.chat.status === 'open' && (\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => assignChatMutation.mutate(chatData.chat.id)}\r\n                          disabled={assignChatMutation.isPending}\r\n                          className=\"text-xs flex-1 md:flex-initial\"\r\n                        >\r\n                          Assign to Me\r\n                        </Button>\r\n                      )}\r\n                      {chatData.chat.status === 'open' && (\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => closeChatMutation.mutate(chatData.chat.id)}\r\n                          disabled={closeChatMutation.isPending}\r\n                          className=\"text-xs flex-1 md:flex-initial\"\r\n                        >\r\n                          <CheckCircle className=\"h-3 w-3 md:h-4 md:w-4 mr-1\" />\r\n                          Close Chat\r\n                        </Button>\r\n                      )}\r\n                      {chatData.chat.status === 'closed' && (\r\n                        <Badge variant=\"secondary\" className=\"text-xs\">Closed</Badge>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"flex-1 p-0 overflow-hidden\">\r\n                  <ScrollArea className=\"h-[calc(55vh-150px)] lg:h-[calc(100vh-380px)] p-3 md:p-4\" ref={scrollRef}>\r\n                    {chatData.messages.length === 0 ? (\r\n                      <div className=\"text-center text-muted-foreground py-8\">\r\n                        <p className=\"text-xs md:text-sm\">No messages yet</p>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"space-y-2 md:space-y-3\">\r\n                        {chatData.messages.map((msg) => (\r\n                          <div\r\n                            key={msg.id}\r\n                            className={`flex ${\r\n                              msg.senderType === 'admin' ? 'justify-end' : 'justify-start'\r\n                            }`}\r\n                          >\r\n                            <div\r\n                              className={`max-w-[85%] md:max-w-[80%] rounded-lg p-2 md:p-3 ${\r\n                                msg.senderType === 'admin'\r\n                                  ? 'bg-primary text-primary-foreground'\r\n                                  : 'bg-muted'\r\n                              }`}\r\n                            >\r\n                              {msg.senderType === 'user' && (\r\n                                <p className=\"text-[10px] md:text-xs font-semibold mb-1 opacity-80\">Customer</p>\r\n                              )}\r\n                              <p className=\"text-xs md:text-sm whitespace-pre-wrap break-words\">\r\n                                {msg.message}\r\n                              </p>\r\n                              <p className=\"text-[10px] md:text-xs opacity-70 mt-1\">\r\n                                {new Date(msg.createdAt).toLocaleTimeString([], {\r\n                                  hour: '2-digit',\r\n                                  minute: '2-digit',\r\n                                })}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </ScrollArea>\r\n                </CardContent>\r\n\r\n                <div className=\"border-t p-3 md:p-4\">\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      placeholder=\"Type your message...\"\r\n                      value={message}\r\n                      onChange={(e) => setMessage(e.target.value)}\r\n                      onKeyPress={handleKeyPress}\r\n                      disabled={\r\n                        sendMessageMutation.isPending || chatData.chat.status === 'closed'\r\n                      }\r\n                      className=\"flex-1 text-sm\"\r\n                    />\r\n                    <Button\r\n                      onClick={handleSendMessage}\r\n                      disabled={\r\n                        !message.trim() ||\r\n                        sendMessageMutation.isPending ||\r\n                        chatData.chat.status === 'closed'\r\n                      }\r\n                      size=\"icon\"\r\n                      className=\"flex-shrink-0\"\r\n                    >\r\n                      <Send className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </Card>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Settings, Bell, Smartphone, Save, X, Menu, Key, Plus, Trash2, ExternalLink } from \"lucide-react\";\r\n\r\ninterface Setting {\r\n  key: string;\r\n  value: string;\r\n  description?: string;\r\n}\r\n\r\ninterface User {\r\n  id: string;\r\n  email: string;\r\n  name: string;\r\n  phone?: string;\r\n  role: string;\r\n  isActive: boolean;\r\n  walletBalance: string;\r\n  createdAt: string;\r\n}\r\n\r\ninterface Announcement {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  isActive: boolean;\r\n  createdBy: string;\r\n  createdAt: string;\r\n}\r\n\r\n// Function to parse URLs from text and create clickable links\r\nfunction parseMessageWithLinks(text: string) {\r\n  // URL regex pattern\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  \r\n  // Split text by URLs and create elements\r\n  const parts = text.split(urlRegex);\r\n  \r\n  return parts.map((part, index) => {\r\n    if (urlRegex.test(part)) {\r\n      return (\r\n        <a\r\n          key={index}\r\n          href={part}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-blue-600 hover:text-blue-800 underline inline-flex items-center gap-1\"\r\n        >\r\n          {part}\r\n          <ExternalLink className=\"h-3 w-3\" />\r\n        </a>\r\n      );\r\n    }\r\n    return part;\r\n  });\r\n}\r\n\r\nexport default function AdminSettings() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [settings, setSettings] = useState<Record<string, string>>({\r\n    data_bundle_auto_processing: \"false\", // Default to disabled\r\n  });\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n  const [credentialForm, setCredentialForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    name: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [announcementForm, setAnnouncementForm] = useState({\r\n    title: \"\",\r\n    message: \"\",\r\n  });\r\n  const [announcements, setAnnouncements] = useState<Announcement[]>([]);\r\n\r\n  // Fetch settings from database\r\n  const { data: settingsData } = useQuery<Setting[]>({\r\n    queryKey: [\"/api/admin/settings\"],\r\n    refetchInterval: 30000, // Real-time updates every 30 seconds\r\n  });\r\n\r\n  // Fetch users for credential management\r\n  const { data: usersData } = useQuery<User[]>({\r\n    queryKey: [\"/api/admin/users\"],\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  // Fetch announcements\r\n  const { data: announcementsData } = useQuery<Announcement[]>({\r\n    queryKey: [\"/api/admin/announcements\"],\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  // Update setting mutation\r\n  const updateSettingMutation = useMutation({\r\n    mutationFn: async ({ key, value, description }: { key: string; value: string; description?: string }) => {\r\n      return apiRequest(\"PUT\", `/api/admin/settings/${key}`, { value, description });\r\n    },\r\n    onMutate: async ({ key, value }) => {\r\n      // Cancel any outgoing refetches\r\n      await queryClient.cancelQueries({ queryKey: [\"/api/admin/settings\"] });\r\n\r\n      // Snapshot the previous value\r\n      const previousSettings = queryClient.getQueryData<Setting[]>([\"/api/admin/settings\"]);\r\n\r\n      // Optimistically update the cache\r\n      queryClient.setQueryData<Setting[]>([\"/api/admin/settings\"], (old) => {\r\n        if (!old) return old;\r\n        return old.map(setting =>\r\n          setting.key === key ? { ...setting, value } : setting\r\n        );\r\n      });\r\n\r\n      // Also update local state optimistically\r\n      setSettings(prev => ({ ...prev, [key]: value }));\r\n\r\n      // Return a context object with the snapshotted value\r\n      return { previousSettings };\r\n    },\r\n    onError: (err, _, context) => {\r\n      // If the mutation fails, use the context returned from onMutate to roll back\r\n      if (context?.previousSettings) {\r\n        queryClient.setQueryData([\"/api/admin/settings\"], context.previousSettings);\r\n        // Also rollback local state\r\n        const previousMap: Record<string, string> = {};\r\n        context.previousSettings.forEach(setting => {\r\n          previousMap[setting.key] = setting.value;\r\n        });\r\n        setSettings(previousMap);\r\n      }\r\n      toast({ title: \"Failed to update setting\", description: err.message, variant: \"destructive\" });\r\n    },\r\n    onSuccess: () => {\r\n      toast({ title: \"Setting updated successfully\" });\r\n    },\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\r\n    },\r\n  });\r\n\r\n  // Update user credentials mutation\r\n  const updateCredentialsMutation = useMutation({\r\n    mutationFn: async ({ userId, data }: { userId: string; data: any }) => {\r\n      return apiRequest(\"PUT\", `/api/admin/users/${userId}/credentials`, data);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      setSelectedUser(null);\r\n      setCredentialForm({ email: \"\", password: \"\", name: \"\", phone: \"\" });\r\n      toast({ title: \"User credentials updated successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to update credentials\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Create announcement mutation\r\n  const createAnnouncementMutation = useMutation({\r\n    mutationFn: async (data: { title: string; message: string }) => {\r\n      return apiRequest(\"POST\", \"/api/admin/announcements\", data);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      setAnnouncementForm({ title: \"\", message: \"\" });\r\n      toast({ title: \"Announcement created successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to create announcement\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Update announcement mutation\r\n  const updateAnnouncementMutation = useMutation({\r\n    mutationFn: async ({ id, isActive }: { id: string; isActive: boolean }) => {\r\n      return apiRequest(\"PATCH\", `/api/admin/announcements/${id}`, { isActive });\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"Announcement updated successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to update announcement\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Delete announcement mutation\r\n  const deleteAnnouncementMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      return apiRequest(\"DELETE\", `/api/admin/announcements/${id}`);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"Announcement deleted successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to delete announcement\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Initialize settings when data loads\r\n  useEffect(() => {\r\n    if (settingsData) {\r\n      const settingsMap: Record<string, string> = {\r\n        data_bundle_auto_processing: \"false\", // Default to disabled\r\n      };\r\n      settingsData.forEach(setting => {\r\n        settingsMap[setting.key] = setting.value;\r\n      });\r\n      setSettings(settingsMap);\r\n    }\r\n  }, [settingsData]);\r\n\r\n  useEffect(() => {\r\n    if (usersData) {\r\n      setUsers(usersData);\r\n    }\r\n  }, [usersData]);\r\n\r\n  useEffect(() => {\r\n    if (announcementsData) {\r\n      setAnnouncements(announcementsData);\r\n    }\r\n  }, [announcementsData]);\r\n\r\n  const handleSettingChange = (key: string, value: string) => {\r\n    setSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleSaveSetting = (key: string, description?: string) => {\r\n    const value = settings[key];\r\n    if (value !== undefined) {\r\n      updateSettingMutation.mutate({ key, value, description });\r\n    }\r\n  };\r\n\r\n  const handleUserSelect = (user: User) => {\r\n    setSelectedUser(user);\r\n    setCredentialForm({\r\n      email: user.email,\r\n      password: \"\",\r\n      name: user.name,\r\n      phone: user.phone || \"\",\r\n    });\r\n  };\r\n\r\n  const handleUpdateCredentials = () => {\r\n    if (!selectedUser) return;\r\n\r\n    const data: any = {};\r\n    if (credentialForm.email && credentialForm.email !== selectedUser.email) data.email = credentialForm.email;\r\n    if (credentialForm.password) data.password = credentialForm.password;\r\n    if (credentialForm.name && credentialForm.name !== selectedUser.name) data.name = credentialForm.name;\r\n    if (credentialForm.phone !== selectedUser.phone) data.phone = credentialForm.phone;\r\n\r\n    if (Object.keys(data).length === 0) {\r\n      toast({ title: \"No changes detected\", variant: \"destructive\" });\r\n      return;\r\n    }\r\n\r\n    updateCredentialsMutation.mutate({ userId: selectedUser.id, data });\r\n  };\r\n\r\n  const handleCreateAnnouncement = () => {\r\n    if (!announcementForm.title.trim() || !announcementForm.message.trim()) {\r\n      toast({ title: \"Title and message are required\", variant: \"destructive\" });\r\n      return;\r\n    }\r\n\r\n    createAnnouncementMutation.mutate({\r\n      title: announcementForm.title.trim(),\r\n      message: announcementForm.message.trim(),\r\n    });\r\n  };\r\n\r\n  const handleToggleAnnouncement = (id: string, isActive: boolean) => {\r\n    updateAnnouncementMutation.mutate({ id, isActive: !isActive });\r\n  };\r\n\r\n  const handleDeleteAnnouncement = (id: string) => {\r\n    if (confirm(\"Are you sure you want to delete this announcement?\")) {\r\n      deleteAnnouncementMutation.mutate(id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Settings</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto space-y-6\">\r\n            {/* General Settings */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Settings className=\"h-5 w-5\" />\r\n                  General Settings\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Configure basic application settings\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"appName\">Application Name</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      id=\"appName\"\r\n                      value={settings.app_name || \"\"}\r\n                      onChange={(e) => handleSettingChange(\"app_name\", e.target.value)}\r\n                      placeholder=\"CLECTECH\"\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleSaveSetting(\"app_name\", \"Application name displayed in the UI\")}\r\n                      disabled={updateSettingMutation.isPending}\r\n                    >\r\n                      <Save className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"supportEmail\">Support Email</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      id=\"supportEmail\"\r\n                      type=\"email\"\r\n                      autoComplete=\"email\"\r\n                      value={settings.support_email || \"\"}\r\n                      onChange={(e) => handleSettingChange(\"support_email\", e.target.value)}\r\n                      placeholder=\"support@clectech.com\"\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleSaveSetting(\"support_email\", \"Support email for customer inquiries\")}\r\n                      disabled={updateSettingMutation.isPending}\r\n                    >\r\n                      <Save className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"supportPhone\">Support Phone</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      id=\"supportPhone\"\r\n                      autoComplete=\"tel\"\r\n                      value={settings.support_phone || \"\"}\r\n                      onChange={(e) => handleSettingChange(\"support_phone\", e.target.value)}\r\n                      placeholder=\"+233 XX XXX XXXX\"\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleSaveSetting(\"support_phone\", \"Support phone number\")}\r\n                      disabled={updateSettingMutation.isPending}\r\n                    >\r\n                      <Save className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* User Credential Management */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Key className=\"h-5 w-5\" />\r\n                  User Credential Management\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Manage user credentials and account information\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label>\r\n                    Select User to Manage\r\n                    <select\r\n                      className=\"w-full p-2 border rounded-md mt-1\"\r\n                      value={selectedUser?.id || \"\"}\r\n                      onChange={(e) => {\r\n                        const user = users.find(u => u.id === e.target.value);\r\n                        if (user) handleUserSelect(user);\r\n                      }}\r\n                    >\r\n                    <option value=\"\">Choose a user...</option>\r\n                    {users.map(user => (\r\n                      <option key={user.id} value={user.id}>\r\n                        {user.name} ({user.email}) - {user.role}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                  </Label>\r\n                </div>\r\n\r\n                {selectedUser && (\r\n                  <>\r\n                    <Separator />\r\n                    <div className=\"space-y-4\">\r\n                      <h3 className=\"font-medium\">Update Credentials for {selectedUser.name}</h3>\r\n                      \r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userEmail\">Email</Label>\r\n                        <Input\r\n                          id=\"userEmail\"\r\n                          type=\"email\"\r\n                          autoComplete=\"email\"\r\n                          value={credentialForm.email}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, email: e.target.value }))}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userName\">Name</Label>\r\n                        <Input\r\n                          id=\"userName\"\r\n                          autoComplete=\"name\"\r\n                          value={credentialForm.name}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, name: e.target.value }))}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userPhone\">Phone</Label>\r\n                        <Input\r\n                          id=\"userPhone\"\r\n                          autoComplete=\"tel\"\r\n                          value={credentialForm.phone}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, phone: e.target.value }))}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userPassword\">New Password (leave empty to keep current)</Label>\r\n                        <Input\r\n                          id=\"userPassword\"\r\n                          type=\"password\"\r\n                          autoComplete=\"new-password\"\r\n                          value={credentialForm.password}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, password: e.target.value }))}\r\n                          placeholder=\"Enter new password\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"flex gap-2\">\r\n                        <Button\r\n                          onClick={handleUpdateCredentials}\r\n                          disabled={updateCredentialsMutation.isPending}\r\n                        >\r\n                          {updateCredentialsMutation.isPending ? \"Updating...\" : \"Update Credentials\"}\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => {\r\n                            setSelectedUser(null);\r\n                            setCredentialForm({ email: \"\", password: \"\", name: \"\", phone: \"\" });\r\n                          }}\r\n                        >\r\n                          <X className=\"h-4 w-4 mr-2\" />\r\n                          Cancel\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Announcement Management */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Bell className=\"h-5 w-5\" />\r\n                  Announcement Management\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Create and manage system announcements for users\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"announcementTitle\">Title</Label>\r\n                    <Input\r\n                      id=\"announcementTitle\"\r\n                      value={announcementForm.title}\r\n                      onChange={(e) => setAnnouncementForm(prev => ({ ...prev, title: e.target.value }))}\r\n                      placeholder=\"Announcement title\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"announcementMessage\">Message</Label>\r\n                    <textarea\r\n                      id=\"announcementMessage\"\r\n                      className=\"w-full p-2 border rounded-md resize-none\"\r\n                      rows={3}\r\n                      value={announcementForm.message}\r\n                      onChange={(e) => setAnnouncementForm(prev => ({ ...prev, message: e.target.value }))}\r\n                      placeholder=\"Announcement message\"\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    onClick={handleCreateAnnouncement}\r\n                    disabled={createAnnouncementMutation.isPending}\r\n                    className=\"gap-2\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                    {createAnnouncementMutation.isPending ? \"Creating...\" : \"Create Announcement\"}\r\n                  </Button>\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label>Existing Announcements</Label>\r\n                  {announcements.length === 0 ? (\r\n                    <p className=\"text-sm text-muted-foreground\">No announcements yet</p>\r\n                  ) : (\r\n                    <div className=\"space-y-2\">\r\n                      {announcements.map(announcement => (\r\n                        <div key={announcement.id} className=\"flex items-center justify-between p-3 border rounded-md\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"font-medium\">{announcement.title}</h4>\r\n                            <div className=\"text-sm text-muted-foreground\">\r\n                              {parseMessageWithLinks(announcement.message)}\r\n                            </div>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                              By {announcement.createdBy} • {new Date(announcement.createdAt).toLocaleDateString()}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Switch\r\n                              checked={announcement.isActive}\r\n                              onCheckedChange={() => handleToggleAnnouncement(announcement.id, announcement.isActive)}\r\n                              className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                            />\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleDeleteAnnouncement(announcement.id)}\r\n                              className=\"text-red-600 hover:text-red-700\"\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { Trophy, Award, Medal, Menu } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface TopCustomer {\r\n  customerEmail: string;\r\n  customerPhone: string | null;\r\n  customerName: string | null;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n  rank: number;\r\n  lastPurchase: string;\r\n}\r\n\r\nexport default function AdminRankings() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: topCustomers, isLoading: rankingsLoading } = useQuery<TopCustomer[]>({\r\n    queryKey: [\"/api/admin/rankings/customers\"],\r\n    refetchInterval: 60000, // Refresh every minute\r\n  });\r\n\r\n  const getRankIcon = (index: number) => {\r\n    if (index === 0) return <Trophy className=\"h-5 w-5 text-yellow-500\" />;\r\n    if (index === 1) return <Medal className=\"h-5 w-5 text-gray-400\" />;\r\n    if (index === 2) return <Award className=\"h-5 w-5 text-amber-600\" />;\r\n    return <span className=\"text-sm font-semibold text-muted-foreground\">#{index + 1}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Users Ranking</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <Card>\r\n              <CardHeader>\r\n                <div>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                    <Trophy className=\"h-5 w-5 text-yellow-500\" />\r\n                    Top Customers\r\n                  </CardTitle>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">Highest spending customers</p>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {rankingsLoading ? (\r\n                  <TableSkeleton rows={10} />\r\n                ) : topCustomers && topCustomers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"w-16\">Rank</TableHead>\r\n                          <TableHead>Customer</TableHead>\r\n                          <TableHead className=\"text-right\">Total Spent</TableHead>\r\n                          <TableHead className=\"text-right\">Purchases</TableHead>\r\n                          <TableHead className=\"text-right\">Last Purchase</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {topCustomers.map((customer, index) => (\r\n                          <TableRow key={customer.rank}>\r\n                            <TableCell className=\"text-center\">\r\n                              {getRankIcon(index)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"flex flex-col\">\r\n                                <span className=\"font-medium\">\r\n                                  {customer.customerName || customer.customerEmail}\r\n                                </span>\r\n                                {customer.customerPhone && (\r\n                                  <span className=\"text-xs text-muted-foreground\">\r\n                                    {customer.customerPhone}\r\n                                  </span>\r\n                                )}\r\n                                <span className=\"text-xs text-muted-foreground truncate max-w-[200px]\">\r\n                                  {customer.customerEmail}\r\n                                </span>\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <span className=\"font-bold text-green-600 dark:text-green-400\">\r\n                                {formatCurrency(customer.totalSpent)}\r\n                              </span>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <Badge variant=\"secondary\">\r\n                                {customer.totalPurchases} {customer.totalPurchases === 1 ? 'order' : 'orders'}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right text-sm text-muted-foreground\">\r\n                              {formatDate(customer.lastPurchase)}\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    <Trophy className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\r\n                    <p className=\"text-lg font-medium mb-2\">No customer rankings yet</p>\r\n                    <p className=\"text-sm\">Customer rankings will appear here once transactions are completed</p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Lock, X, Menu, Settings, Save } from \"lucide-react\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ninterface BreakSettings {\r\n  isEnabled: boolean;\r\n  message: string;\r\n}\r\n\r\nexport default function AdminBreakSettings() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const { user, isLoading: authLoading } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [isEnabled, setIsEnabled] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  // Fetch current break settings\r\n  const { data: breakSettings } = useQuery<BreakSettings>({\r\n    queryKey: [\"/api/admin/break-settings\"],\r\n    enabled: !!user,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (breakSettings) {\r\n      setIsEnabled(breakSettings.isEnabled);\r\n      setMessage(breakSettings.message);\r\n    }\r\n  }, [breakSettings]);\r\n\r\n  // Update break settings mutation\r\n  const updateMutation = useMutation({\r\n    mutationFn: async (settings: BreakSettings) => {\r\n      return await apiRequest<BreakSettings>(\"POST\", \"/api/admin/break-settings\", settings);\r\n    },\r\n    onSuccess: (data) => {\r\n      // Invalidate and refetch the break settings query\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/break-settings\"] });\r\n      // Also invalidate the public break settings query used by BreakModeGuard\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/break-settings\"] });\r\n      toast({\r\n        title: \"Settings Updated\",\r\n        description: `Site break mode ${data.isEnabled ? \"enabled\" : \"disabled\"} successfully.`,\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Update Failed\",\r\n        description: error.message || \"Failed to update break settings.\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleSave = () => {\r\n    if (isEnabled && !message.trim()) {\r\n      toast({\r\n        title: \"Validation Error\",\r\n        description: \"Please enter a message when enabling break mode.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    updateMutation.mutate({\r\n      isEnabled,\r\n      message: message.trim(),\r\n    });\r\n  };\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Settings className=\"h-5 w-5\" />\r\n              <h1 className=\"text-lg lg:text-xl font-semibold\">Break Settings</h1>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-6 lg:p-8\">\r\n          <div className=\"max-w-5xl mx-auto space-y-8\">\r\n            {/* Break Mode Toggle - Slide Switch */}\r\n            <div className=\"p-6 border-2 border-gray-200 dark:border-gray-700 rounded-lg bg-red-500\">\r\n              <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n                <div className=\"space-y-2 flex-1\">\r\n                  <Label className=\"text-lg font-bold flex items-center gap-3 text-white\">\r\n                    <Lock className=\"h-6 w-6 text-white drop-shadow-lg\" />\r\n                    Enable Break Mode\r\n                  </Label>\r\n                  <p className=\"text-base leading-relaxed text-white\">\r\n                    ⚠️ When enabled, the site will be completely unavailable to all users except administrators\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4 lg:gap-6\">\r\n                  <span className={`px-4 py-2 rounded-full text-sm font-bold min-w-[100px] text-center ${\r\n                    isEnabled\r\n                      ? 'bg-red-500 text-white shadow-lg'\r\n                      : 'bg-green-500 text-white shadow-md'\r\n                  }`}>\r\n                    {isEnabled ? '🚫 ENABLED' : '✅ DISABLED'}\r\n                  </span>\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <Label htmlFor=\"break-mode-toggle\" className=\"text-sm font-medium text-white\">\r\n                      {isEnabled ? 'ON' : 'OFF'}\r\n                    </Label>\r\n                    <Switch\r\n                      id=\"break-mode-toggle\"\r\n                      checked={isEnabled}\r\n                      onCheckedChange={setIsEnabled}\r\n                      disabled={updateMutation.isPending}\r\n                      className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Custom Message */}\r\n            <div className=\"space-y-4 p-4 bg-white rounded-lg border-2 border-gray-300 text-black\">\r\n              <Label htmlFor=\"break-message\" className=\"text-lg font-semibold\">Maintenance Message</Label>\r\n              <Textarea\r\n                id=\"break-message\"\r\n                placeholder=\"Enter a message to display to users when the site is in break mode...\"\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                disabled={!isEnabled || updateMutation.isPending}\r\n                rows={5}\r\n                className=\"resize-none text-base p-4 border-2 border-gray-400\"\r\n              />\r\n              <p className=\"text-sm text-black leading-relaxed\">\r\n                This message will be displayed to users when they try to access the site.\r\n                Keep it clear and informative about when the site will be available again.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Preview */}\r\n            {isEnabled && message && (\r\n              <div className=\"space-y-4 p-6 bg-blue-50 dark:bg-blue-950/20 rounded-lg border-2 border-blue-200 dark:border-blue-800\">\r\n                <Label className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">Preview</Label>\r\n                <div className=\"p-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-inner\">\r\n                  <div className=\"text-center space-y-6\">\r\n                    <div className=\"flex justify-center\">\r\n                      <div className=\"relative\">\r\n                        <div className=\"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center shadow-lg\">\r\n                          <Lock className=\"h-10 w-10 text-red-600 dark:text-red-400\" />\r\n                        </div>\r\n                        <div className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg\">\r\n                          <X className=\"h-3 w-3 text-white\" />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <h2 className=\"text-2xl font-bold text-red-600 dark:text-red-400 mb-3\">\r\n                        Site Closed\r\n                      </h2>\r\n                      <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap text-base leading-relaxed\">\r\n                        {message}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Save Button */}\r\n            <div className=\"flex flex-col sm:flex-row justify-center sm:justify-end gap-4 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700\">\r\n              <Button\r\n                onClick={handleSave}\r\n                disabled={updateMutation.isPending}\r\n                className=\"min-w-40 h-12 text-lg font-semibold\"\r\n                size=\"lg\"\r\n              >\r\n                {updateMutation.isPending ? (\r\n                  <>\r\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3\" />\r\n                    Saving Changes...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Save className=\"h-5 w-5 mr-3\" />\r\n                    Save Settings\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useEffect, useState } from \"react\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Menu, Plus, Edit, Trash2, Star, StarOff, Eye, EyeOff, TestTube } from \"lucide-react\";\r\n\r\ninterface ExternalApiProvider {\r\n  id: string;\r\n  name: string;\r\n  provider: string;\r\n  apiKey: string;\r\n  apiSecret: string;\r\n  endpoint: string;\r\n  isActive: boolean;\r\n  isDefault: boolean;\r\n  networkMappings: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport default function AdminExternalApiProviders() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [providers, setProviders] = useState<ExternalApiProvider[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [editingProvider, setEditingProvider] = useState<ExternalApiProvider | null>(null);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [testingProvider, setTestingProvider] = useState<string | null>(null);\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    provider: \"\",\r\n    apiKey: \"\",\r\n    apiSecret: \"\",\r\n    endpoint: \"\",\r\n    isActive: true,\r\n    isDefault: false,\r\n    networkMappings: JSON.stringify({\r\n      \"mtn\": \"MTN\",\r\n      \"telecel\": \"TELECEL\",\r\n      \"at_bigtime\": \"AIRTELTIGO\",\r\n      \"at_ishare\": \"AIRTELTIGO\",\r\n      \"airteltigo\": \"AIRTELTIGO\"\r\n    }, null, 2)\r\n  });\r\n\r\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\r\n\r\n  useEffect(() => {\r\n    loadProviders();\r\n  }, []);\r\n\r\n  const loadProviders = async () => {\r\n    try {\r\n      const data = await apiRequest(\"GET\", \"/api/admin/external-providers\") as ExternalApiProvider[];\r\n      setProviders(data);\r\n    } catch (error) {\r\n      console.error(\"Failed to load providers:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load external API providers\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      name: \"\",\r\n      provider: \"\",\r\n      apiKey: \"\",\r\n      apiSecret: \"\",\r\n      endpoint: \"\",\r\n      isActive: true,\r\n      isDefault: false,\r\n      networkMappings: JSON.stringify({\r\n        \"mtn\": \"MTN\",\r\n        \"telecel\": \"TELECEL\",\r\n        \"at_bigtime\": \"AIRTELTIGO\",\r\n        \"at_ishare\": \"AIRTELTIGO\",\r\n        \"airteltigo\": \"AIRTELTIGO\"\r\n      }, null, 2)\r\n    });\r\n    setEditingProvider(null);\r\n  };\r\n\r\n  const openEditDialog = (provider: ExternalApiProvider) => {\r\n    setForm({\r\n      name: provider.name,\r\n      provider: provider.provider,\r\n      apiKey: provider.apiKey,\r\n      apiSecret: provider.apiSecret,\r\n      endpoint: provider.endpoint,\r\n      isActive: provider.isActive,\r\n      isDefault: provider.isDefault,\r\n      networkMappings: provider.networkMappings || JSON.stringify({\r\n        \"mtn\": \"MTN\",\r\n        \"telecel\": \"TELECEL\",\r\n        \"at_bigtime\": \"AIRTELTIGO\",\r\n        \"at_ishare\": \"AIRTELTIGO\",\r\n        \"airteltigo\": \"AIRTELTIGO\"\r\n      }, null, 2)\r\n    });\r\n    setEditingProvider(provider);\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsSaving(true);\r\n\r\n    try {\r\n      // Validate JSON\r\n      JSON.parse(form.networkMappings);\r\n\r\n      const payload = {\r\n        ...form,\r\n        networkMappings: form.networkMappings\r\n      };\r\n\r\n      if (editingProvider) {\r\n        await apiRequest(\"PUT\", `/api/admin/external-providers/${editingProvider.id}`, payload);\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"External API provider updated successfully\",\r\n        });\r\n      } else {\r\n        await apiRequest(\"POST\", \"/api/admin/external-providers\", payload);\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"External API provider created successfully\",\r\n        });\r\n      }\r\n\r\n      setDialogOpen(false);\r\n      resetForm();\r\n      loadProviders();\r\n    } catch (error: any) {\r\n      console.error(\"Failed to save provider:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to save external API provider\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm(\"Are you sure you want to delete this external API provider?\")) return;\r\n\r\n    try {\r\n      await apiRequest(\"DELETE\", `/api/admin/external-providers/${id}`);\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"External API provider deleted successfully\",\r\n      });\r\n      loadProviders();\r\n    } catch (error) {\r\n      console.error(\"Failed to delete provider:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete external API provider\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSetDefault = async (id: string) => {\r\n    try {\r\n      await apiRequest(\"POST\", `/api/admin/external-providers/${id}/set-default`);\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Default external API provider updated successfully\",\r\n      });\r\n      loadProviders();\r\n    } catch (error) {\r\n      console.error(\"Failed to set default provider:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to set default external API provider\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const testProvider = async (provider: ExternalApiProvider) => {\r\n    setTestingProvider(provider.id);\r\n    try {\r\n      const result = await apiRequest(\"GET\", `/api/admin/external-balance?providerId=${provider.id}`) as { success: boolean; error?: string; balance?: any; celebrate?: any };\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Test Successful\",\r\n          description: `Balance check successful for ${provider.name}`,\r\n        });\r\n      } else {\r\n        toast({\r\n          title: \"Test Failed\",\r\n          description: result.error || \"Balance check failed\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Test Failed\",\r\n        description: error.message || \"Balance check failed\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setTestingProvider(null);\r\n    }\r\n  };\r\n\r\n  const toggleSecretVisibility = (providerId: string) => {\r\n    setShowSecrets(prev => ({\r\n      ...prev,\r\n      [providerId]: !prev[providerId]\r\n    }));\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex h-screen bg-background\">\r\n        <AdminSidebar />\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-lg\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-white border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">External API Providers</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            {/* Header Actions */}\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6\">\r\n              <p className=\"text-muted-foreground\">\r\n                Manage external API providers for data bundle purchases\r\n              </p>\r\n              <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n                <DialogTrigger asChild>\r\n                  <Button>\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Add Provider\r\n                  </Button>\r\n                </DialogTrigger>\r\n                <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto bg-black text-white border-gray-700\">\r\n                  <DialogHeader>\r\n                    <DialogTitle className=\"text-white\">\r\n                      {editingProvider ? \"Edit\" : \"Add\"} External API Provider\r\n                    </DialogTitle>\r\n                    <DialogDescription className=\"text-gray-300\">\r\n                      {editingProvider\r\n                        ? \"Update the external API provider configuration.\"\r\n                        : \"Configure a new external API provider for data bundle purchases.\"\r\n                      }\r\n                    </DialogDescription>\r\n                  </DialogHeader>\r\n                  <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <Label htmlFor=\"name\" className=\"text-white\">Provider Name</Label>\r\n                        <Input\r\n                          id=\"name\"\r\n                          value={form.name}\r\n                          onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n                          placeholder=\"e.g., SkyTech GH\"\r\n                          required\r\n                          className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <Label htmlFor=\"provider\" className=\"text-white\">Provider Type</Label>\r\n                        <Select value={form.provider} onValueChange={(value) => setForm({ ...form, provider: value })}>\r\n                          <SelectTrigger className=\"bg-gray-800 border-gray-600 text-white\">\r\n                            <SelectValue placeholder=\"Select provider type\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent className=\"bg-gray-800 border-gray-600\">\r\n                            <SelectItem value=\"skytech\" className=\"text-white hover:bg-gray-700\">SkyTech</SelectItem>\r\n                            <SelectItem value=\"other\" className=\"text-white hover:bg-gray-700\">Other</SelectItem>\r\n                          </SelectContent>\r\n                        </Select>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"endpoint\" className=\"text-white\">API Endpoint</Label>\r\n                      <Input\r\n                        id=\"endpoint\"\r\n                        value={form.endpoint}\r\n                        onChange={(e) => setForm({ ...form, endpoint: e.target.value })}\r\n                        placeholder=\"https://api.example.com/v1/orders\"\r\n                        required\r\n                        className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <Label htmlFor=\"apiKey\" className=\"text-white\">API Key</Label>\r\n                        <Input\r\n                          id=\"apiKey\"\r\n                          type=\"password\"\r\n                          value={form.apiKey}\r\n                          onChange={(e) => setForm({ ...form, apiKey: e.target.value })}\r\n                          required\r\n                          className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <Label htmlFor=\"apiSecret\" className=\"text-white\">API Secret</Label>\r\n                        <Input\r\n                          id=\"apiSecret\"\r\n                          type=\"password\"\r\n                          value={form.apiSecret}\r\n                          onChange={(e) => setForm({ ...form, apiSecret: e.target.value })}\r\n                          required\r\n                          className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"networkMappings\" className=\"text-white\">Network Mappings (JSON)</Label>\r\n                      <Textarea\r\n                        id=\"networkMappings\"\r\n                        value={form.networkMappings}\r\n                        onChange={(e) => setForm({ ...form, networkMappings: e.target.value })}\r\n                        placeholder='{\"mtn\": \"MTN\", \"telecel\": \"TELECEL\"}'\r\n                        rows={6}\r\n                        required\r\n                        className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                      />\r\n                      <p className=\"text-sm text-gray-300 mt-1\">\r\n                        JSON mapping of internal network names to external API network codes\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Switch\r\n                          id=\"isActive\"\r\n                          checked={form.isActive}\r\n                          onCheckedChange={(checked) => setForm({ ...form, isActive: checked })}\r\n                          className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                        />\r\n                        <Label htmlFor=\"isActive\" className=\"text-white\">Active</Label>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Switch\r\n                          id=\"isDefault\"\r\n                          checked={form.isDefault}\r\n                          onCheckedChange={(checked) => setForm({ ...form, isDefault: checked })}\r\n                          className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                        />\r\n                        <Label htmlFor=\"isDefault\" className=\"text-white\">Set as Default</Label>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row justify-end gap-2 pt-4\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"outline\"\r\n                        onClick={() => setDialogOpen(false)}\r\n                        className=\"w-full sm:w-auto border-gray-600 text-white hover:bg-gray-700\"\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                      <Button type=\"submit\" disabled={isSaving} className=\"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white\">\r\n                        {isSaving ? \"Saving...\" : (editingProvider ? \"Update\" : \"Create\")}\r\n                      </Button>\r\n                    </div>\r\n                  </form>\r\n                </DialogContent>\r\n              </Dialog>\r\n            </div>\r\n\r\n            {/* Providers Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6\">\r\n              {providers.map((provider) => (\r\n                <Card key={provider.id} className=\"relative bg-black text-white\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <CardTitle className=\"text-lg flex items-center space-x-2 flex-wrap text-white\">\r\n                        <span className=\"truncate\">{provider.name}</span>\r\n                        {provider.isDefault && (\r\n                          <Badge variant=\"default\" className=\"text-xs shrink-0 bg-yellow-500 text-black\">\r\n                            <Star className=\"h-3 w-3 mr-1\" />\r\n                            Default\r\n                          </Badge>\r\n                        )}\r\n                        {!provider.isActive && (\r\n                          <Badge variant=\"secondary\" className=\"text-xs shrink-0 bg-gray-600 text-white\">\r\n                            Inactive\r\n                          </Badge>\r\n                        )}\r\n                      </CardTitle>\r\n                      <div className=\"flex space-x-1 shrink-0\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => testProvider(provider)}\r\n                          disabled={testingProvider === provider.id}\r\n                          title=\"Test Provider\"\r\n                          className=\"h-8 w-8\"\r\n                        >\r\n                          <TestTube className={`h-4 w-4 ${testingProvider === provider.id ? 'animate-pulse' : ''}`} />\r\n                        </Button>\r\n                        {!provider.isDefault && (\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => handleSetDefault(provider.id)}\r\n                            title=\"Set as Default\"\r\n                            className=\"h-8 w-8\"\r\n                          >\r\n                            <StarOff className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        )}\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => openEditDialog(provider)}\r\n                          title=\"Edit Provider\"\r\n                          className=\"h-8 w-8\"\r\n                        >\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => handleDelete(provider.id)}\r\n                          title=\"Delete Provider\"\r\n                          className=\"text-destructive hover:text-destructive h-8 w-8\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-3\">\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">Provider Type</Label>\r\n                      <p className=\"text-sm text-white\">{provider.provider}</p>\r\n                    </div>\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">Endpoint</Label>\r\n                      <p className=\"font-mono break-all text-xs text-white\">{provider.endpoint}</p>\r\n                    </div>\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">API Key</Label>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Input\r\n                          value={showSecrets[provider.id] ? provider.apiKey : \"••••••••••••••••\"}\r\n                          readOnly\r\n                          className=\"font-mono h-8 text-xs bg-gray-800 border-gray-600 text-white\"\r\n                        />\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => toggleSecretVisibility(provider.id)}\r\n                          className=\"h-8 w-8 shrink-0 text-white hover:bg-gray-700\"\r\n                        >\r\n                          {showSecrets[provider.id] ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">Network Mappings</Label>\r\n                      <div className=\"text-xs bg-gray-800 p-2 rounded max-h-20 overflow-y-auto border border-gray-600\">\r\n                        <pre className=\"whitespace-pre-wrap break-words text-white\">{provider.networkMappings || \"{}\"}</pre>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n\r\n            {providers.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"text-muted-foreground\">\r\n                  <p className=\"text-lg mb-2\">No external API providers configured</p>\r\n                  <p className=\"text-sm\">Add your first provider to enable external data bundle purchases</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatDate } from \"@/lib/constants\";\r\nimport { Bell, Plus, Trash2, Menu, Eye, EyeOff, ExternalLink } from \"lucide-react\";\r\n\r\ninterface Announcement {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  isActive: boolean;\r\n  createdAt: string;\r\n  createdBy: string;\r\n}\r\n\r\n// Function to parse URLs from text and create clickable links\r\nfunction parseMessageWithLinks(text: string) {\r\n  // URL regex pattern\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  \r\n  // Split text by URLs and create elements\r\n  const parts = text.split(urlRegex);\r\n  \r\n  return parts.map((part, index) => {\r\n    if (urlRegex.test(part)) {\r\n      return (\r\n        <a\r\n          key={index}\r\n          href={part}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-blue-600 hover:text-blue-800 underline inline-flex items-center gap-1\"\r\n        >\r\n          {part}\r\n          <ExternalLink className=\"h-3 w-3\" />\r\n        </a>\r\n      );\r\n    }\r\n    return part;\r\n  });\r\n}\r\n\r\nexport default function AdminAnnouncements() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [newAnnouncement, setNewAnnouncement] = useState({\r\n    title: \"\",\r\n    message: \"\",\r\n  });\r\n  const [deleteAnnouncementId, setDeleteAnnouncementId] = useState<string | null>(null);\r\n\r\n  const { data: announcements, isLoading } = useQuery<Announcement[]>({\r\n    queryKey: [\"/api/admin/announcements\"],\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: { title: string; message: string }) =>\r\n      apiRequest(\"POST\", \"/api/admin/announcements\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"✅ Announcement created successfully\" });\r\n      setNewAnnouncement({ title: \"\", message: \"\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to create announcement\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const toggleMutation = useMutation({\r\n    mutationFn: ({ id, isActive }: { id: string; isActive: boolean }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/announcements/${id}`, { isActive }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"✅ Announcement updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to update announcement\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/announcements/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"✅ Announcement deleted successfully\" });\r\n      setDeleteAnnouncementId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to delete announcement\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleCreate = () => {\r\n    if (!newAnnouncement.title.trim() || !newAnnouncement.message.trim()) {\r\n      toast({\r\n        title: \"Validation Error\",\r\n        description: \"Please fill in both title and message\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n    createMutation.mutate(newAnnouncement);\r\n  };\r\n\r\n  const activeAnnouncements = announcements?.filter(a => a.isActive) || [];\r\n  const inactiveAnnouncements = announcements?.filter(a => !a.isActive) || [];\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Announcements</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-6xl mx-auto space-y-6\">\r\n            {/* Create Announcement Card */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Plus className=\"h-5 w-5\" />\r\n                  Create New Announcement\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Create announcements that will be shown to all registered users when they login\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"title\">Title</Label>\r\n                  <Textarea\r\n                    id=\"title\"\r\n                    value={newAnnouncement.title}\r\n                    onChange={(e) => setNewAnnouncement({ ...newAnnouncement, title: e.target.value })}\r\n                    placeholder=\"Enter announcement title\"\r\n                    rows={2}\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"message\">Message</Label>\r\n                  <Textarea\r\n                    id=\"message\"\r\n                    value={newAnnouncement.message}\r\n                    onChange={(e) => setNewAnnouncement({ ...newAnnouncement, message: e.target.value })}\r\n                    placeholder=\"Enter announcement message\"\r\n                    rows={4}\r\n                  />\r\n                </div>\r\n                <Button\r\n                  onClick={handleCreate}\r\n                  disabled={createMutation.isPending}\r\n                  className=\"w-full\"\r\n                >\r\n                  {createMutation.isPending ? \"Creating...\" : \"Create Announcement\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Active Announcements */}\r\n            {activeAnnouncements.length > 0 && (\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Eye className=\"h-5 w-5 text-green-600\" />\r\n                    Active Announcements ({activeAnnouncements.length})\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    These announcements are currently visible to users\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-3 md:space-y-4\">\r\n                    {activeAnnouncements.map((announcement) => (\r\n                      <div key={announcement.id} className=\"border rounded-lg p-3 md:p-4\">\r\n                        <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <h3 className=\"font-semibold text-sm md:text-base leading-tight\">{announcement.title}</h3>\r\n                            <div className=\"text-muted-foreground mt-1 md:mt-2 text-xs md:text-sm leading-relaxed\">\r\n                              {parseMessageWithLinks(announcement.message)}\r\n                            </div>\r\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 md:mt-3 text-xs md:text-sm text-muted-foreground\">\r\n                              <span>Created: {formatDate(announcement.createdAt)}</span>\r\n                              <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800 text-xs w-fit\">\r\n                                Active\r\n                              </Badge>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex gap-1 sm:gap-2 flex-shrink-0\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => toggleMutation.mutate({ id: announcement.id, isActive: false })}\r\n                              disabled={toggleMutation.isPending}\r\n                              className=\"h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                            >\r\n                              <EyeOff className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Hide</span>\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              className=\"text-destructive hover:text-destructive h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                              onClick={() => setDeleteAnnouncementId(announcement.id)}\r\n                            >\r\n                              <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Delete</span>\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Inactive Announcements */}\r\n            {inactiveAnnouncements.length > 0 && (\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <EyeOff className=\"h-5 w-5 text-muted-foreground\" />\r\n                    Inactive Announcements ({inactiveAnnouncements.length})\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    These announcements are hidden from users\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-3 md:space-y-4\">\r\n                    {inactiveAnnouncements.map((announcement) => (\r\n                      <div key={announcement.id} className=\"border rounded-lg p-3 md:p-4 opacity-75\">\r\n                        <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <h3 className=\"font-semibold text-sm md:text-base leading-tight\">{announcement.title}</h3>\r\n                            <div className=\"text-muted-foreground mt-1 md:mt-2 text-xs md:text-sm leading-relaxed\">\r\n                              {parseMessageWithLinks(announcement.message)}\r\n                            </div>\r\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 md:mt-3 text-xs md:text-sm text-muted-foreground\">\r\n                              <span>Created: {formatDate(announcement.createdAt)}</span>\r\n                              <Badge variant=\"outline\" className=\"w-fit\">\r\n                                Inactive\r\n                              </Badge>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex gap-1 sm:gap-2 flex-shrink-0\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => toggleMutation.mutate({ id: announcement.id, isActive: true })}\r\n                              disabled={toggleMutation.isPending}\r\n                              className=\"h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                            >\r\n                              <Eye className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Show</span>\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              className=\"text-destructive hover:text-destructive h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                              onClick={() => setDeleteAnnouncementId(announcement.id)}\r\n                            >\r\n                              <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Delete</span>\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Empty State */}\r\n            {announcements?.length === 0 && !isLoading && (\r\n              <Card>\r\n                <CardContent className=\"text-center py-12\">\r\n                  <Bell className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold mb-2\">No Announcements Yet</h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Create your first announcement to communicate with users\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <AlertDialog open={!!deleteAnnouncementId} onOpenChange={(open) => !open && setDeleteAnnouncementId(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Announcement</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete this announcement? This action cannot be undone.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => deleteAnnouncementId && deleteMutation.mutate(deleteAnnouncementId)}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatDate } from \"@/lib/constants\";\r\nimport { PlayCircle, Plus, Trash2, Menu, Eye, EyeOff } from \"lucide-react\";\r\n\r\ninterface VideoGuide {\r\n  id: string;\r\n  title: string;\r\n  description?: string;\r\n  category: \"guest\" | \"customer\" | \"agent\";\r\n  url: string;\r\n  provider?: string;\r\n  isPublished: boolean;\r\n  createdAt?: string;\r\n}\r\n\r\nexport default function AdminGuides() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [newGuide, setNewGuide] = useState<Partial<VideoGuide>>({\r\n    title: \"\",\r\n    description: \"\",\r\n    category: \"guest\",\r\n    url: \"\",\r\n    provider: undefined,\r\n    isPublished: true,\r\n  });\r\n  const [deleteGuideId, setDeleteGuideId] = useState<string | null>(null);\r\n\r\n  const { data: guides } = useQuery<VideoGuide[]>({\r\n    queryKey: [\"/api/admin/guides\"],\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: Partial<VideoGuide>) => apiRequest(\"POST\", \"/api/admin/guides\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/guides\"] });\r\n      toast({ title: \"✅ Guide created successfully\" });\r\n      setNewGuide({ title: \"\", description: \"\", category: \"guest\", url: \"\", provider: undefined, isPublished: true });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to create guide\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<VideoGuide> }) => apiRequest(\"PATCH\", `/api/admin/guides/${id}`, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/guides\"] });\r\n      toast({ title: \"✅ Guide updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update guide\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/guides/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/guides\"] });\r\n      toast({ title: \"✅ Guide deleted successfully\" });\r\n      setDeleteGuideId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete guide\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const handleCreate = () => {\r\n    if (!newGuide.title?.trim() || !newGuide.url?.trim() || !newGuide.category) {\r\n      toast({ title: \"Validation Error\", description: \"Please fill in title, URL and category\", variant: \"destructive\" });\r\n      return;\r\n    }\r\n    createMutation.mutate(newGuide);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\" onClick={() => setSidebarOpen(true)}>\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Video Guides</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-6xl mx-auto space-y-6\">\r\n            {/* Create Guide */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Plus className=\"h-5 w-5\" />\r\n                  Add New Guide\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  You can use any YouTube/Vimeo URL - it will be automatically converted to embed format.\r\n                  <br />\r\n                  <span className=\"text-xs mt-1 block\">\r\n                    ✅ Supported: youtube.com/watch, youtube.com/shorts, youtu.be, vimeo.com, or direct MP4 links\r\n                  </span>\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"title\">Title</Label>\r\n                    <Input id=\"title\" value={newGuide.title || \"\"} onChange={(e) => setNewGuide({ ...newGuide, title: e.target.value })} placeholder=\"Guide title\" />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"category\">Category</Label>\r\n                    <Select value={newGuide.category} onValueChange={(v) => setNewGuide({ ...newGuide, category: v as VideoGuide[\"category\"] })}>\r\n                      <SelectTrigger id=\"category\"><SelectValue placeholder=\"Select category\" /></SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"guest\">Guest</SelectItem>\r\n                        <SelectItem value=\"customer\">Customer</SelectItem>\r\n                        <SelectItem value=\"agent\">Agent</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  <div className=\"space-y-2 md:col-span-2\">\r\n                    <Label htmlFor=\"url\">Video URL</Label>\r\n                    <Input \r\n                      id=\"url\" \r\n                      value={newGuide.url || \"\"} \r\n                      onChange={(e) => setNewGuide({ ...newGuide, url: e.target.value })} \r\n                      placeholder=\"Paste any YouTube or Vimeo link (e.g., youtube.com/watch?v=xxx or youtube.com/shorts/xxx)\"\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      The URL will be automatically converted to the correct embed format\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"space-y-2 md:col-span-2\">\r\n                    <Label htmlFor=\"description\">Description</Label>\r\n                    <Textarea id=\"description\" value={newGuide.description || \"\"} onChange={(e) => setNewGuide({ ...newGuide, description: e.target.value })} placeholder=\"Optional description\" rows={3} />\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Switch id=\"published\" checked={newGuide.isPublished ?? true} onCheckedChange={(checked) => setNewGuide({ ...newGuide, isPublished: checked })} />\r\n                    <Label htmlFor=\"published\">Published</Label>\r\n                  </div>\r\n                </div>\r\n\r\n                <Button onClick={handleCreate} disabled={createMutation.isPending} className=\"w-full\">\r\n                  {createMutation.isPending ? \"Creating...\" : \"Create Guide\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Guides List */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <PlayCircle className=\"h-5 w-5\" />\r\n                  All Guides ({guides?.length || 0})\r\n                </CardTitle>\r\n                <CardDescription>Manage visibility and update details.</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-3\">\r\n                  {(guides || []).map((guide) => (\r\n                    <div key={guide.id} className=\"border rounded-lg p-3 md:p-4\">\r\n                      <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Badge variant=\"secondary\" className=\"capitalize\">{guide.category}</Badge>\r\n                            {guide.isPublished ? (\r\n                              <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800 text-xs\">Published</Badge>\r\n                            ) : (\r\n                              <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800 text-xs\">Draft</Badge>\r\n                            )}\r\n                          </div>\r\n                          <h3 className=\"font-semibold text-sm md:text-base leading-tight mt-1\">{guide.title}</h3>\r\n                          {guide.description && (\r\n                            <div className=\"text-muted-foreground mt-1 text-xs md:text-sm leading-relaxed\">{guide.description}</div>\r\n                          )}\r\n                          {guide.createdAt && (\r\n                            <div className=\"text-xs text-muted-foreground mt-2\">Created: {formatDate(guide.createdAt)}</div>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex gap-2 flex-shrink-0 items-center\">\r\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => updateMutation.mutate({ id: guide.id, data: { isPublished: !guide.isPublished } })} disabled={updateMutation.isPending}>\r\n                            {guide.isPublished ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                            <span className=\"ml-1 hidden sm:inline\">{guide.isPublished ? \"Unpublish\" : \"Publish\"}</span>\r\n                          </Button>\r\n                          <Button size=\"sm\" variant=\"outline\" className=\"text-destructive hover:text-destructive\" onClick={() => setDeleteGuideId(guide.id)}>\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                            <span className=\"ml-1 hidden sm:inline\">Delete</span>\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete confirmation */}\r\n      <AlertDialog open={!!deleteGuideId} onOpenChange={(open) => !open && setDeleteGuideId(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Guide</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              This action cannot be undone. This will permanently delete the guide.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction onClick={() => deleteGuideId && deleteMutation.mutate(deleteGuideId)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Trophy, Award, Medal, Menu } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface TopCustomer {\r\n  rank: number;\r\n  displayName: string;\r\n  displayPhone: string;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n  lastPurchase: string;\r\n}\r\n\r\nexport default function PublicRankings() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  const { data: topCustomers, isLoading: rankingsLoading } = useQuery<TopCustomer[]>({\r\n    queryKey: [\"/api/rankings/customers\"],\r\n    refetchInterval: 60000, // Refresh every minute\r\n  });\r\n\r\n  const getRankIcon = (index: number) => {\r\n    if (index === 0) return <Trophy className=\"h-5 w-5 text-yellow-500\" />;\r\n    if (index === 1) return <Medal className=\"h-5 w-5 text-gray-400\" />;\r\n    if (index === 2) return <Award className=\"h-5 w-5 text-amber-600\" />;\r\n    return <span className=\"text-sm font-semibold text-muted-foreground\">#{index + 1}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-background to-background\">\r\n      <header className=\"border-b\">\r\n        <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Users Ranking</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <Card>\r\n            <CardHeader>\r\n              <div>\r\n                <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                  <Trophy className=\"h-5 w-5 text-yellow-500\" />\r\n                  Top Customers\r\n                </CardTitle>\r\n                <p className=\"text-sm text-muted-foreground mt-1\">Highest spending customers</p>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {rankingsLoading ? (\r\n                <TableSkeleton rows={10} />\r\n              ) : topCustomers && topCustomers.length > 0 ? (\r\n                <div className=\"overflow-x-auto\">\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead className=\"w-16\">Rank</TableHead>\r\n                        <TableHead>Customer</TableHead>\r\n                        <TableHead className=\"text-right\">Purchases</TableHead>\r\n                        <TableHead className=\"text-right\">Total Spent</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {topCustomers.map((customer, index) => (\r\n                        <TableRow key={customer.rank}>\r\n                          <TableCell className=\"text-center\">\r\n                            {getRankIcon(index)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex flex-col space-y-1\">\r\n                              <span className=\"font-medium\">{customer.displayName}</span>\r\n                              {customer.displayPhone && (\r\n                                <span className=\"text-xs text-muted-foreground\">\r\n                                  {customer.displayPhone}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right font-medium\">\r\n                            {customer.totalPurchases}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right font-medium\">\r\n                            ₵{customer.totalSpent.toFixed(2)}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-12 text-muted-foreground\">\r\n                  <Trophy className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\r\n                  <p className=\"text-lg font-medium mb-2\">No customer rankings yet</p>\r\n                  <p className=\"text-sm\">Customer rankings will appear here once transactions are completed</p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}","import { useState, useMemo, useEffect, useRef } from \"react\";\r\nimport { useParams, Link, useLocation } from \"wouter\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { \r\n  Phone, Mail, Loader2, Clock, CreditCard, AlertTriangle, \r\n  ArrowLeft, Package, ShoppingCart, Smartphone\r\n} from \"lucide-react\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\n\r\ntype AgentDataBundle = DataBundle & { price: string };\r\n\r\nconst networkInfo: Record<string, { name: string; logo: string }> = {\r\n  mtn: { name: \"MTN\", logo: mtnLogo },\r\n  telecel: { name: \"Telecel\", logo: telecelLogo },\r\n  airteltigo: { name: \"AirtelTigo\", logo: airteltigoLogo },\r\n  at_bigtime: { name: \"AT BIG TIME\", logo: airteltigoLogo },\r\n  at_ishare: { name: \"AT iShare\", logo: airteltigoLogo },\r\n};\r\n\r\nconst singleOrderSchema = z.object({\r\n  customerPhone: z.string()\r\n    .min(10, \"Phone number must be exactly 10 digits\")\r\n    .max(10, \"Phone number must be exactly 10 digits\")\r\n    .regex(/^0[0-9]{9}$/, \"Phone number must start with 0 and be 10 digits (e.g., 0241234567)\"),\r\n  customerEmail: z.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst bulkOrderSchema = z.object({\r\n  phoneNumbers: z.string()\r\n    .min(10, \"Enter at least one phone number with GB amount\")\r\n    .refine((val) => {\r\n      const lines = val.split(/\\n/).map(n => n.trim()).filter(n => n);\r\n      return lines.every(line => {\r\n        const parts = line.split(/\\s+/);\r\n        if (parts.length !== 2) return false;\r\n        \r\n        // Check if phone number is valid (10 digits or 233 format)\r\n        let phoneStr = parts[0].replace(/^\\+/, '');\r\n        if (phoneStr.startsWith('233')) {\r\n          phoneStr = '0' + phoneStr.substring(3);\r\n        }\r\n        const phoneValid = /^0[0-9]{9}$/.test(phoneStr);\r\n        \r\n        // Check if GB amount is a valid number\r\n        const gbAmount = parseFloat(parts[1]);\r\n        const gbValid = !isNaN(gbAmount) && gbAmount > 0;\r\n        \r\n        return phoneValid && gbValid;\r\n      });\r\n    }, \"Each line must have format: phone_number GB_amount (e.g., '0241234567 2' or '233241234567 2')\"),\r\n  customerEmail: z.string().email(\"Invalid email\"),\r\n});\r\n\r\ntype SingleOrderFormData = z.infer<typeof singleOrderSchema>;\r\ntype BulkOrderFormData = z.infer<typeof bulkOrderSchema>;\r\n\r\nexport default function AgentNetworkPurchasePage() {\r\n  const { role, slug, network } = useParams<{ role: string; slug: string; network: string }>();\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const [selectedBundleId, setSelectedBundleId] = useState<string>(\"\");\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [orderType, setOrderType] = useState<\"single\" | \"bulk\">(\"single\");\r\n\r\n  const isSubmittingRef = useRef(false);\r\n  // Force Paystack for single purchases on agent storefronts\r\n\r\n  // Disable bulk orders for AT Ishare network\r\n  useEffect(() => {\r\n    if (network === \"at_ishare\" && orderType === \"bulk\") {\r\n      setOrderType(\"single\");\r\n    }\r\n  }, [network, orderType]);\r\n\r\n  // Handle back button to redirect to storefront homepage\r\n  useEffect(() => {\r\n    const handlePopState = () => {\r\n      // When back button is pressed on product page, redirect to homepage\r\n      setLocation(`/store/${role}/${slug}`);\r\n    };\r\n\r\n    window.addEventListener('popstate', handlePopState);\r\n    return () => window.removeEventListener('popstate', handlePopState);\r\n  }, [role, slug, setLocation]);\r\n\r\n  const info = networkInfo[network || \"\"] || { name: \"Unknown\", logo: \"\" };\r\n\r\n  // Fetch agent data\r\n  const { data: storeData, isLoading: agentLoading } = useQuery<{ store: { businessName: string; businessDescription: string; slug: string; whatsappSupportLink?: string; whatsappChannelLink?: string; role: string }; dataBundles: AgentDataBundle[] }>({\r\n    queryKey: [`/api/store/${role}/${slug}`],\r\n    enabled: !!role && !!slug,\r\n  });\r\n\r\n  const dataBundles = storeData?.dataBundles || [];\r\n\r\n  const filteredBundles = dataBundles?.filter(\r\n    (bundle) => bundle.network === network && bundle.isActive\r\n  );\r\n\r\n  const sortedBundles = filteredBundles?.sort(\r\n    (a, b) => parseFloat(a.price) - parseFloat(b.price)\r\n  );\r\n\r\n  const selectedBundle = sortedBundles?.find(bundle => bundle.id === selectedBundleId);\r\n  const price = selectedBundle ? parseFloat(selectedBundle.price) : 0;\r\n\r\n  const singleForm = useForm<SingleOrderFormData>({\r\n    resolver: zodResolver(singleOrderSchema),\r\n    defaultValues: {\r\n      customerPhone: \"\",\r\n      customerEmail: \"\",\r\n    },\r\n  });\r\n\r\n  const bulkForm = useForm<BulkOrderFormData>({\r\n    resolver: zodResolver(bulkOrderSchema),\r\n    defaultValues: {\r\n      phoneNumbers: \"\",\r\n      customerEmail: \"\",\r\n    },\r\n  });\r\n\r\n  // Calculate bulk purchase total with agent markup\r\n  const bulkTotal = useMemo(() => {\r\n    const phoneNumbers = bulkForm.watch(\"phoneNumbers\");\r\n    if (!phoneNumbers?.trim() || !sortedBundles || !storeData?.store) return { total: 0, count: 0 };\r\n    \r\n    const lines = phoneNumbers.split('\\n').filter(line => line.trim());\r\n    // Pricing is already resolved on the server side, no additional markup needed\r\n    let total = 0;\r\n    let count = 0;\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gbAmount = parseFloat(parts[1]);\r\n        if (!isNaN(gbAmount) && gbAmount > 0) {\r\n          const matchingBundle = sortedBundles.find(b => {\r\n            const gbMatch = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n            if (gbMatch) {\r\n              const bundleGB = parseFloat(gbMatch[1]);\r\n              return bundleGB === gbAmount;\r\n            }\r\n            return false;\r\n          });\r\n          \r\n          if (matchingBundle) {\r\n            const agentPrice = parseFloat(matchingBundle.price);\r\n            total += agentPrice;\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return { total, count };\r\n  }, [bulkForm.watch(\"phoneNumbers\"), sortedBundles, storeData?.store]);\r\n\r\n  const initializePaymentMutation = useMutation({\r\n    mutationFn: async (data: SingleOrderFormData | BulkOrderFormData | {\r\n      orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }>;\r\n      totalAmount: number;\r\n      customerEmail?: string;\r\n    }) => {\r\n      console.log(\"[Agent Frontend] Payment mutation called with:\", data);\r\n      \r\n      const isBulk = 'phoneNumbers' in data;\r\n      \r\n      // Handle new orderItems format (GB-based bulk orders)\r\n      if ('orderItems' in data && data.orderItems) {\r\n        const phoneNumbers = data.orderItems.map(item => item.phone);\r\n        const totalAmount = data.totalAmount;\r\n\r\n        console.log(\"[Agent Frontend] ========== NEW BULK FORMAT PAYMENT ==========\");\r\n        console.log(\"[Agent Frontend] Order items:\", data.orderItems);\r\n        console.log(\"[Agent Frontend] Total amount:\", totalAmount);\r\n        console.log(\"[Agent Frontend] ================================================\");\r\n        \r\n        const payload = {\r\n          productType: \"data_bundle\",\r\n          network: network,\r\n          customerPhone: phoneNumbers[0],\r\n          isBulkOrder: true,\r\n          orderItems: data.orderItems,\r\n          totalAmount: totalAmount,\r\n          customerEmail: data.customerEmail || undefined,\r\n          agentSlug: slug || undefined,\r\n        };\r\n        \r\n        console.log(\"[Agent Frontend] Paystack payload:\", JSON.stringify(payload, null, 2));\r\n        \r\n        const result = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n        \r\n        console.log(\"[Agent Frontend] ===== SERVER RESPONSE =====\");\r\n        console.log(\"[Agent Frontend] Result:\", result);\r\n        console.log(\"[Agent Frontend] ================================\");\r\n        \r\n        return result;\r\n      }\r\n      \r\n      // Handle single purchase or legacy bulk format\r\n      if (!selectedBundle) throw new Error(\"No bundle selected\");\r\n\r\n      console.log(\"[Agent Frontend] Is bulk:\", isBulk);\r\n      console.log(\"[Agent Frontend] Data:\", data);\r\n\r\n      const phoneNumbers = isBulk \r\n        ? (data as BulkOrderFormData).phoneNumbers.split(/[\\n,]/).map(n => n.trim()).filter(n => n)\r\n        : [(data as SingleOrderFormData).customerPhone];\r\n\r\n      console.log(\"[Agent Frontend] Phone numbers array:\", phoneNumbers);\r\n      console.log(\"[Agent Frontend] First phone:\", phoneNumbers[0]);\r\n\r\n      const payload = {\r\n        productType: \"data_bundle\",\r\n        productId: selectedBundle.id,\r\n        customerPhone: phoneNumbers[0],\r\n        phoneNumbers: isBulk ? phoneNumbers : undefined,\r\n        isBulkOrder: isBulk,\r\n        customerEmail: data.customerEmail || undefined,\r\n        agentSlug: slug || undefined,\r\n      };\r\n\r\n      console.log(\"[Agent Frontend] Single/Legacy payload:\", JSON.stringify(payload, null, 2));\r\n\r\n      return await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n    },\r\n    onSuccess: (data: any) => {\r\n      isSubmittingRef.current = false; // Reset submission guard\r\n      // Store agent storefront info for checkout-success redirect\r\n      localStorage.setItem(\"agentStorefront\", JSON.stringify({ role, slug, network }));\r\n      window.location.href = data.paymentUrl;\r\n    },\r\n    onError: (error: any) => {\r\n      isSubmittingRef.current = false; // Reset submission guard\r\n      toast({\r\n        title: \"❌ Payment Failed\",\r\n        description: error.message || \"Unable to process payment\",\r\n        variant: \"destructive\",\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: SingleOrderFormData | BulkOrderFormData) => {\r\n    if (isSubmittingRef.current) return; // Prevent double submission\r\n    isSubmittingRef.current = true;\r\n    setIsProcessing(true);\r\n\r\n    const isBulk = 'phoneNumbers' in data;\r\n    \r\n    // For single purchases, wallet balance check is not needed (always Paystack)\r\n    // For bulk purchases, they always use Paystack\r\n    \r\n    // Handle single purchase\r\n    if (!isBulk) {\r\n      if (!selectedBundle) {\r\n        toast({\r\n          title: \"No Bundle Selected\",\r\n          description: \"Please select a data bundle to continue\",\r\n          variant: \"destructive\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      let phoneStr = (data as SingleOrderFormData).customerPhone.trim();\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n      const validation = validatePhoneNetwork(normalizedPhone, selectedBundle.network);\r\n      \r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(selectedBundle.network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: validation.error || `Valid prefixes: ${prefixes.join(\", \")}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      setIsProcessing(true);\r\n      \r\n      // Single purchases on agent storefronts always use Paystack\r\n      initializePaymentMutation.mutate({\r\n        customerPhone: normalizedPhone,\r\n        customerEmail: (data as SingleOrderFormData).customerEmail,\r\n      } as SingleOrderFormData);\r\n      return;\r\n    }\r\n\r\n    // Handle bulk purchase with GB-based format\r\n    const bulkData = data as BulkOrderFormData;\r\n    if (!bulkData.phoneNumbers.trim()) {\r\n      toast({\r\n        title: \"Missing Information\",\r\n        description: \"Please enter phone numbers with GB amounts\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Parse phone numbers with GB amounts (Format: \"0546591622 1\" or \"233546591622 2\")\r\n    const lines = bulkData.phoneNumbers.split('\\n').filter(line => line.trim());\r\n    const parsedData: Array<{ phone: string; gb: number }> = [];\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) {\r\n        toast({\r\n          title: \"❌ Invalid Format\",\r\n          description: `Line \"${line}\" must have format: phone_number GB_amount (e.g., \"0241234567 2\")`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      let phoneStr = parts[0];\r\n      const gbAmount = parseFloat(parts[1]);\r\n\r\n      if (isNaN(gbAmount) || gbAmount <= 0) {\r\n        toast({\r\n          title: \"❌ Invalid GB Amount\",\r\n          description: `GB amount \"${parts[1]}\" must be a positive number`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      // Normalize the phone number\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n\r\n      // Validate phone number for the selected network\r\n      const validation = validatePhoneNetwork(normalizedPhone, network || \"\");\r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(network || \"\");\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: `${phoneStr}: ${validation.error || `Valid prefixes: ${prefixes.join(\", \")}`}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      parsedData.push({ phone: normalizedPhone, gb: gbAmount });\r\n    }\r\n\r\n    if (parsedData.length === 0) {\r\n      toast({\r\n        title: \"No Data\",\r\n        description: \"Please enter at least one phone number with GB amount\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check for duplicate phone numbers\r\n    const phoneSet = new Set(parsedData.map(p => p.phone));\r\n    if (phoneSet.size !== parsedData.length) {\r\n      toast({\r\n        title: 'Duplicate Numbers',\r\n        description: 'Phone numbers must be unique',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Find matching bundles for each GB amount\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let bulkTotalAmount = 0;\r\n\r\n    for (const item of parsedData) {\r\n      // Find a bundle that matches the GB amount\r\n      const matchingBundle = sortedBundles?.find(b => {\r\n        const gbMatch = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n        if (gbMatch) {\r\n          const bundleGB = parseFloat(gbMatch[1]);\r\n          return bundleGB === item.gb;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (!matchingBundle) {\r\n        toast({\r\n          title: \"❌ Bundle Not Found\",\r\n          description: `No ${item.gb}GB bundle available for ${info.name}. Please check available bundles.`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      const agentPrice = parseFloat(matchingBundle.price);\r\n\r\n      orderItems.push({\r\n        phone: item.phone,\r\n        bundleId: matchingBundle.id,\r\n        bundleName: matchingBundle.name,\r\n        price: agentPrice,\r\n      });\r\n\r\n      bulkTotalAmount += agentPrice;\r\n    }\r\n\r\n    console.log(\"[Agent Frontend] Prepared order items:\", orderItems);\r\n    console.log(\"[Agent Frontend] Total amount:\", bulkTotalAmount);\r\n\r\n    setIsProcessing(true);\r\n    \r\n    // Bulk orders always use Paystack for security and reliability\r\n    initializePaymentMutation.mutate({\r\n      orderItems,\r\n      totalAmount: bulkTotalAmount,\r\n      customerEmail: bulkData.customerEmail,\r\n    });\r\n  };\r\n\r\n  if (agentLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!storeData?.store) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Card className=\"p-6 max-w-md\">\r\n          <p className=\"text-center text-muted-foreground\">Agent store not found</p>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex flex-col bg-background\">\r\n      <header className=\"flex-none sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n        <div className=\"container flex h-16 items-center justify-between px-4\">\r\n          <Link href={`/store/${role}/${slug}`}>\r\n            <Button variant=\"ghost\" className=\"gap-2\">\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              Back\r\n            </Button>\r\n          </Link>\r\n           <h1 className=\"text-xl font-bold truncate mx-4\">{storeData?.store.businessName}</h1>\r\n          <div className=\"w-20\" /> {/* Spacer for centering */}\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"flex-1 overflow-y-auto\">\r\n        <div className=\"py-8 px-4\">\r\n          <div className=\"container mx-auto max-w-4xl pb-12\">\r\n          {/* Network Header */}\r\n          <div className=\"flex items-center gap-4 mb-8\">\r\n            {info.logo && (\r\n              <img\r\n                src={info.logo}\r\n                alt={info.name}\r\n                className=\"w-16 h-16 object-contain rounded-lg\"\r\n              />\r\n            )}\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold\">{info.name} Data Bundles</h2>\r\n              <p className=\"text-muted-foreground\">Complete your purchase below</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Order Details */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Smartphone className=\"h-5 w-5\" />\r\n                Complete Your Purchase\r\n              </CardTitle>\r\n              <CardDescription>Enter order details and checkout</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              {/* Order Type Selection */}\r\n              <Tabs value={orderType} onValueChange={(v) => {\r\n                  setOrderType(v as \"single\" | \"bulk\");\r\n                }} className=\"w-full\">\r\n                  <TabsList className=\"grid w-full grid-cols-2\">\r\n                    <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                      <ShoppingCart className=\"h-4 w-4 mr-2\" />\r\n                      Single Purchase\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"bulk\" disabled={network === \"at_ishare\"} className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                      <Package className=\"h-4 w-4 mr-2\" />\r\n                      Bulk Purchase\r\n                      {network === \"at_ishare\" && (\r\n                        <span className=\"text-xs text-muted-foreground ml-1\">(Disabled)</span>\r\n                      )}\r\n                    </TabsTrigger>\r\n                  </TabsList>\r\n                  {network === \"at_ishare\" && (\r\n                    <p className=\"text-sm text-muted-foreground mt-2\">\r\n                      Bulk purchases are not available for AT iShare network.\r\n                    </p>\r\n                  )}\r\n\r\n                  {/* Single Order Form */}\r\n                  <TabsContent value=\"single\" className=\"space-y-4 mt-4\">\r\n                    <Form {...singleForm}>\r\n                      <form onSubmit={singleForm.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                      {/* Bundle Selection */}\r\n                      <div className=\"space-y-2\">\r\n                        <Label>Select Data Bundle</Label>\r\n                        <Select value={selectedBundleId} onValueChange={(value) => {\r\n                          setSelectedBundleId(value);\r\n                        }}>\r\n                          <SelectTrigger className=\"w-full\">\r\n                            <SelectValue placeholder=\"Choose a data bundle...\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {sortedBundles?.map((bundle) => (\r\n                              <SelectItem key={bundle.id} value={bundle.id}>\r\n                                  {bundle.name} - {bundle.validity} - {formatCurrency(parseFloat(bundle.price))}\r\n                                </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                      </div>\r\n\r\n                      <FormField\r\n                        control={singleForm.control}\r\n                        name=\"customerPhone\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Beneficiary Number *</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Phone className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                <Input placeholder=\"0241234567\" className=\"pl-10\" {...field} />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>\r\n                              Network prefixes: {getNetworkPrefixes(network || \"\").join(\", \")}\r\n                            </FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      <FormField\r\n                        control={singleForm.control}\r\n                        name=\"customerEmail\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Email *</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                <Input type=\"email\" placeholder=\"your@email.com\" className=\"pl-10\" {...field} />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>Required for receipt and order updates</FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      <div className=\"pt-4\">\r\n                        <div className=\"flex items-center justify-between mb-4 p-4 bg-muted rounded-lg\">\r\n                          <span className=\"text-lg font-semibold\">Total Amount:</span>\r\n                          <span className=\"text-2xl font-bold text-primary\">\r\n                            {formatCurrency(price)}\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* Payment Method - Only Paystack for single purchases */}\r\n                        <div className=\"space-y-3 mb-4\">\r\n                          <Label className=\"text-base font-semibold\">Payment Method</Label>\r\n                          <div className=\"grid grid-cols-1 gap-3\">\r\n                            <div className=\"p-4 border-2 border-blue-500 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center\">\r\n                              <CreditCard className=\"h-6 w-6 mx-auto mb-2 text-blue-600\" />\r\n                              <div className=\"font-semibold\">Paystack</div>\r\n                              <div className=\"text-sm text-muted-foreground\">\r\n                                Pay with card/mobile money\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <Button\r\n                          type=\"submit\"\r\n                          className=\"w-full gap-2\"\r\n                          size=\"lg\"\r\n                          disabled={isProcessing || !selectedBundleId}\r\n                        >\r\n                          {isProcessing ? (\r\n                            <>\r\n                              <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                              Processing...\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <CreditCard className=\"h-5 w-5\" />\r\n                              Proceed to Payment\r\n                            </>\r\n                          )}\r\n                        </Button>\r\n                      </div>\r\n                    </form>\r\n                  </Form>\r\n                  </TabsContent>\r\n\r\n                  {/* Bulk Order Form */}\r\n                  <TabsContent value=\"bulk\" className=\"space-y-4 mt-4\">\r\n                    <Form {...bulkForm}>\r\n                      <form onSubmit={bulkForm.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <Label htmlFor=\"bulk-phones\">Beneficiary Numbers and GB Amounts</Label>\r\n                            {bulkForm.watch(\"phoneNumbers\") && bulkForm.watch(\"phoneNumbers\").trim() && (\r\n                              <Badge variant=\"outline\" className=\"text-xs\">\r\n                                {bulkForm.watch(\"phoneNumbers\").split('\\n').filter(line => line.trim()).length} entries\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n                          <FormField\r\n                            control={bulkForm.control}\r\n                            name=\"phoneNumbers\"\r\n                            render={({ field }) => (\r\n                              <FormItem>\r\n                                <FormControl>\r\n                                  <Textarea\r\n                                    id=\"bulk-phones\"\r\n                                    placeholder=\"0546591622 1&#10;0247064874 3&#10;0245696072 2&#10;233547897522 10&#10;...add as many as you need (no limit)\"\r\n                                    rows={20}\r\n                                    className=\"font-mono text-sm\"\r\n                                    {...field}\r\n                                  />\r\n                                </FormControl>\r\n                                <FormDescription className=\"text-xs\">\r\n                                  Enter one number per line with GB amount (e.g., \"0241234567 2\" for 2GB). \r\n                                  Supports formats: 0241234567 or 233241234567 (no + sign). \r\n                                  <strong className=\"text-green-600\">✓ No limit - add 100+ numbers!</strong>\r\n                                  <br />\r\n                                  All numbers must be for <strong>{info.name}</strong> network. \r\n                                  Valid prefixes: <strong>{getNetworkPrefixes(network || \"\").join(\", \")}</strong>\r\n                                </FormDescription>\r\n                                <FormMessage />\r\n                              </FormItem>\r\n                            )}\r\n                          />\r\n                        </div>\r\n\r\n                        <FormField\r\n                          control={bulkForm.control}\r\n                          name=\"customerEmail\"\r\n                          render={({ field }) => (\r\n                            <FormItem>\r\n                              <FormLabel>Email *</FormLabel>\r\n                              <FormControl>\r\n                                <div className=\"relative\">\r\n                                  <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                  <Input type=\"email\" placeholder=\"your@email.com\" className=\"pl-10\" {...field} />\r\n                                </div>\r\n                              </FormControl>\r\n                              <FormDescription>Required for receipt and order updates</FormDescription>\r\n                              <FormMessage />\r\n                            </FormItem>\r\n                          )}\r\n                        />\r\n\r\n                        {bulkTotal && bulkTotal.count > 0 && (\r\n                          <div className=\"pt-4\">\r\n                            <div className=\"flex items-center justify-between mb-4 p-4 bg-muted rounded-lg\">\r\n                              <span className=\"text-lg font-semibold\">Total Amount:</span>\r\n                              <span className=\"text-2xl font-bold text-primary\">\r\n                                {formatCurrency(bulkTotal.total)}\r\n                              </span>\r\n                            </div>\r\n\r\n                          </div>\r\n                        )}\r\n\r\n                        <Button\r\n                          type=\"submit\"\r\n                          className=\"w-full gap-2\"\r\n                          size=\"lg\"\r\n                          disabled={isProcessing || !bulkForm.watch(\"phoneNumbers\")?.trim()}\r\n                        >\r\n                          {isProcessing ? (\r\n                            <>\r\n                              <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                              Processing...\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <CreditCard className=\"h-5 w-5\" />\r\n                              {bulkTotal ? (\r\n                                <>\r\n                                  Pay {formatCurrency(bulkTotal.total)} with Paystack\r\n                                </>\r\n                              ) : (\r\n                                'Purchase Data Bundles'\r\n                              )}\r\n                            </>\r\n                          )}\r\n                        </Button>\r\n                      </form>\r\n                    </Form>\r\n                  </TabsContent>\r\n                </Tabs>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Important Notices */}\r\n          <div className=\"mt-8 space-y-4\">\r\n            <Card className=\"p-6\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <Clock className=\"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0\" />\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg mb-2\">Data Delivery Time</h3>\r\n                    <p className=\"text-muted-foreground\">\r\n                      All data orders are delivered within 5–45 minutes.\r\n                      Please note that delivery times may vary during network downtime\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              <Card className=\"p-6 border-red-200 bg-white text-black dark:bg-black dark:text-white dark:border-red-600\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <AlertTriangle className=\"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0\" />\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg mb-2 text-red-900 dark:text-red-100\">\r\n                      Our DATA REQUEST DOES NOT support:\r\n                    </h3>\r\n                    <ul className=\"text-red-800 dark:text-red-200 space-y-1 ml-4 opacity-90\">\r\n                      <li>• Turbonet SIM</li>\r\n                      <li>• Merchant SIM</li>\r\n                      <li>• EVD SIM</li>\r\n                      <li>• Broadband SIM</li>\r\n                      <li>• Blacklisted SIM</li>\r\n                      <li>• Roaming SIM</li>\r\n                      <li>• Different Network</li>\r\n                      <li>• Wrong Number</li>\r\n                      <li>• Inactive Number</li>\r\n                    </ul>\r\n                    <p className=\"text-red-800 dark:text-red-200 font-medium mt-3 opacity-95\">\r\n                      Important Notice: Any data transferred to the above SIM types is burnt and irreversible.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              <Card className=\"p-6 border-amber-200 bg-white text-black dark:bg-black dark:text-white dark:border-amber-600\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <AlertTriangle className=\"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0\" />\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg mb-2 text-amber-900 dark:text-amber-100\">\r\n                      Complaint Resolution Policy\r\n                    </h3>\r\n                    <div className=\"text-amber-800 dark:text-amber-200 space-y-2\">\r\n                      <p>Complaints can only be resolved within 24 hours.</p>\r\n                      <p>If you purchase data and do not receive it, kindly report the issue within 24 hours.</p>\r\n                      <p className=\"font-medium\">Reports made after 24 hours will not be attended to.</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import { useParams, Link } from \"wouter\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useState, useMemo, useEffect, useRef } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { ShoppingCart, Package, ArrowLeft, Clock, AlertTriangle, Wallet, CreditCard, Loader2 } from \"lucide-react\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\n\r\nconst networkInfo: Record<string, { name: string; logo: string }> = {\r\n  mtn: { name: \"MTN\", logo: mtnLogo },\r\n  telecel: { name: \"Telecel\", logo: telecelLogo },\r\n  at_bigtime: { name: \"AT BIG TIME\", logo: airteltigoLogo },\r\n  at_ishare: { name: \"AT iShare\", logo: airteltigoLogo },\r\n};\r\n\r\nexport default function NetworkProductsPage() {\r\n  const { network } = useParams<{ network: string }>();\r\n  // Handle legacy URLs where \"bigtime\" should be \"at_bigtime\" and \"ishare\" should be \"at_ishare\"\r\n  const normalizedNetwork = network === 'bigtime' ? 'at_bigtime' : network === 'ishare' ? 'at_ishare' : network;\r\n  const transformedNetwork = normalizedNetwork?.replace(/-/g, '_');\r\n  const info = networkInfo[transformedNetwork || \"\"] || { name: \"Unknown\", logo: \"\" };\r\n  \r\n  // Get agent slug from URL query param or localStorage\r\n  const agentSlugFromQuery = new URLSearchParams(window.location.search).get(\"agent\");\r\n  const agentSlug = agentSlugFromQuery || getAgentId();\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-8 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-4xl\">\r\n          <Link href={agentStore ? `/store/${agentStore}` : \"/\"}>\r\n            <Button variant=\"ghost\" className=\"gap-2 mb-6\" data-testid=\"button-back\">\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              Back to Products\r\n            </Button>\r\n          </Link>\r\n\r\n          <div className=\"flex items-center gap-4 mb-8\">\r\n            {info.logo && (\r\n              <img\r\n                src={info.logo}\r\n                alt={info.name}\r\n                className=\"w-16 h-16 object-contain rounded-lg\"\r\n                data-testid=\"img-network-logo\"\r\n              />\r\n            )}\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\" data-testid=\"text-network-name\">\r\n                {info.name} Data Bundles\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Complete your purchase in one easy flow\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Public Purchase Flow (Single / Bulk) - guest users */}\r\n          <PublicPurchaseFlow network={transformedNetwork || \"\"} agentSlug={agentSlug} />\r\n\r\n          {/* Data Delivery Information */}\r\n          <div className=\"mt-12 space-y-6\">\r\n            <Card className=\"p-6\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <Clock className=\"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <h3 className=\"font-semibold text-lg mb-2\">Data Delivery Time</h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    All data orders are delivered within 5–45 minutes.\r\n                    Please note that delivery times may vary during network downtime\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            <Card className=\"p-6 border-red-200 bg-white text-black dark:bg-black dark:text-white dark:border-red-600\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <AlertTriangle className=\"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <h3 className=\"font-semibold text-lg mb-2 text-red-900 dark:text-red-100\">\r\n                    Our DATA REQUEST DOES NOT support:\r\n                  </h3>\r\n                  <ul className=\"text-red-800 dark:text-red-200 space-y-1 ml-4 opacity-90\">\r\n                    <li>• Turbonet SIM</li>\r\n                    <li>• Merchant SIM</li>\r\n                    <li>• EVD SIM</li>\r\n                    <li>• Broadband SIM</li>\r\n                    <li>• Blacklisted SIM</li>\r\n                    <li>• Roaming SIM</li>\r\n                    <li>• Different Network</li>\r\n                    <li>• Wrong Number</li>\r\n                    <li>• Inactive Number</li>\r\n                  </ul>\r\n                  <p className=\"text-red-800 dark:text-red-200 font-medium mt-3 opacity-95\">\r\n                    Important Notice: Any data transferred to the above SIM types is burnt and irreversible.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            <Card className=\"p-6 border-amber-200 bg-white text-black dark:bg-black dark:text-white dark:border-amber-600\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <AlertTriangle className=\"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <h3 className=\"font-semibold text-lg mb-2 text-amber-900 dark:text-amber-100\">\r\n                    Complaint Resolution Policy\r\n                  </h3>\r\n                  <div className=\"text-amber-800 dark:text-amber-200 space-y-2\">\r\n                    <p>Complaints can only be resolved within 24 hours.</p>\r\n                    <p>If you purchase data and do not receive it, kindly report the issue within 24 hours.</p>\r\n                    <p className=\"font-medium\">Reports made after 24 hours will not be attended to.</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PublicPurchaseFlow({ network, agentSlug }: { network: string; agentSlug?: string | null }) {\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [selectedBundleId, setSelectedBundleId] = useState<string>(\"\");\r\n  const [orderType, setOrderType] = useState<'single' | 'bulk'>('single');\r\n  const [phone, setPhone] = useState('');\r\n  const [bulkPhones, setBulkPhones] = useState('');\r\n  const [paymentMethod, setPaymentMethod] = useState<'paystack' | 'wallet'>('paystack');\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const isSubmittingRef = useRef(false);\r\n\r\n  const scrollToTopQuick = () => {\r\n    const opts: ScrollToOptions = { top: 0, behavior: \"smooth\" };\r\n    window.requestAnimationFrame(() => {\r\n      window.scrollTo(opts);\r\n      document.documentElement?.scrollTo?.(opts);\r\n      document.body?.scrollTo?.(opts);\r\n    });\r\n  };\r\n\r\n  // Disable bulk orders for AT Ishare network\r\n  useEffect(() => {\r\n    if (network === \"at_ishare\" && orderType === \"bulk\") {\r\n      setOrderType(\"single\");\r\n    }\r\n  }, [network, orderType]);\r\n\r\n  // Ensure view starts at the top when the flow loads\r\n  useEffect(() => {\r\n    scrollToTopQuick();\r\n  }, []);\r\n\r\n  // Fetch user stats for wallet balance\r\n  const { data: userStats } = useQuery<{ walletBalance?: string }>({\r\n    queryKey: [\"/api/user/stats\"],\r\n    enabled: !!user,\r\n  });\r\n\r\n  const walletBalance = userStats?.walletBalance ? parseFloat(userStats.walletBalance) : 0;\r\n\r\n  const { data: bundles, isLoading } = useQuery<any[]>({\r\n    queryKey: ['/api/products/data-bundles', network, agentSlug],\r\n    queryFn: async () => {\r\n      const apiNetwork = network;\r\n      const url = `/api/products/data-bundles?network=${apiNetwork}`;\r\n      return await apiRequest('GET', url);\r\n    },\r\n    refetchOnMount: true,\r\n    staleTime: 0, // Always consider data stale for agent storefronts\r\n  });\r\n\r\n  useQuery({\r\n    queryKey: ['/api/store/agent', agentSlug],\r\n    queryFn: async () => {\r\n      if (!agentSlug) return null;\r\n      const res = await apiRequest('GET', `/api/store/agent/${agentSlug}`);\r\n      return (res as Response).json();\r\n    },\r\n    enabled: !!agentSlug\r\n  });\r\n\r\n  const sortedBundles = bundles?.filter((b: any) => b.network === network && b.isActive)\r\n    .sort((a: any, b: any) => {\r\n      const priceA = parseFloat(a.effective_price);\r\n      const priceB = parseFloat(b.effective_price);\r\n      return priceA - priceB;\r\n    });\r\n\r\n  const selectedBundle = sortedBundles?.find((b: any) => b.id === selectedBundleId) || null;\r\n\r\n  const bulkTotal = useMemo(() => {\r\n    if (!bulkPhones?.trim() || !sortedBundles) return { total: 0, count: 0, invalidCount: 0 };\r\n    const lines = bulkPhones.split('\\n').filter(l => l.trim());\r\n    let total = 0; let count = 0; let invalidCount = 0;\r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gb = parseFloat(parts[1]);\r\n        if (!isNaN(gb) && gb > 0) {\r\n          const match = sortedBundles.find((b: any) => {\r\n            const m = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n            return m ? parseFloat(m[1]) === gb : false;\r\n          });\r\n          if (match) { \r\n            const price = parseFloat(match.effective_price);\r\n            total += price; \r\n            count++; \r\n          } else {\r\n            invalidCount++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { total, count, invalidCount };\r\n  }, [bulkPhones, sortedBundles]);\r\n\r\n  const checkoutMutation = useMutation<any, Error, any>({\r\n    mutationFn: async (payload: any) => {\r\n      if (payload.paymentMethod === \"wallet\") {\r\n        return await apiRequest('POST', '/api/wallet/pay', payload);\r\n      } else {\r\n        return await apiRequest('POST', '/api/checkout/initialize', payload);\r\n      }\r\n    }\r\n  });\r\n\r\n  const handleSingle = async () => {\r\n    if (isSubmittingRef.current) return; // Prevent double submission\r\n    isSubmittingRef.current = true;\r\n    setIsProcessing(true);\r\n\r\n    if (!selectedBundle) { toast({ title: 'No bundle selected', variant: 'destructive' }); return; }\r\n    const normalized = normalizePhoneNumber(phone.trim());\r\n    if (!normalized) { toast({ title: 'Invalid phone', variant: 'destructive' }); return; }\r\n    const validation = validatePhoneNetwork(normalized, selectedBundle.network);\r\n    if (!validation.isValid) { toast({ title: 'Phone mismatch', description: validation.error || 'Network mismatch', variant: 'destructive' }); return; }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    if (paymentMethod === \"wallet\") {\r\n      if (!user) {\r\n        toast({ title: 'Login required', description: 'Please log in to pay with wallet', variant: 'destructive' });\r\n        return;\r\n      }\r\n      const price = parseFloat(selectedBundle.effective_price);\r\n      if (walletBalance < price) {\r\n        toast({ title: 'Insufficient balance', description: 'Your wallet balance is not enough', variant: 'destructive' });\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const amount = parseFloat(selectedBundle.effective_price);\r\n      \r\n      const payload = {\r\n        productType: 'data_bundle',\r\n        productId: selectedBundle.id,\r\n        customerPhone: normalized,\r\n        amount: amount.toFixed(2),\r\n        isBulkOrder: false,\r\n        agentSlug,\r\n        paymentMethod,\r\n        productName: selectedBundle.name,\r\n        network: selectedBundle.network,\r\n      };\r\n\r\n      checkoutMutation.mutate(payload, {\r\n        onSuccess: (data) => {\r\n          isSubmittingRef.current = false; // Reset submission guard\r\n          setIsProcessing(false);\r\n          if (paymentMethod === \"wallet\") {\r\n            toast({\r\n              title: \"✅ Payment Successful!\",\r\n              description: `Your purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. Processing your order...`,\r\n              duration: 5000,\r\n            });\r\n          } else {\r\n            if (data.paymentUrl) window.location.href = data.paymentUrl; else toast({ title: 'Payment init failed', variant: 'destructive' });\r\n          }\r\n        },\r\n        onError: (err: any) => {\r\n          isSubmittingRef.current = false; // Reset submission guard\r\n          setIsProcessing(false);\r\n          const errorMessage = err.message || 'Checkout failed';\r\n          // Check if it's a cooldown error (429) - message will contain \"wait\" and \"minute\"\r\n          if (errorMessage.includes('wait') && errorMessage.includes('minute')) {\r\n            console.log('[Checkout Error] Cooldown triggered:', errorMessage);\r\n            toast({ \r\n              title: '⏳ Purchase Limit', \r\n              description: errorMessage,\r\n              variant: 'destructive',\r\n              duration: 8000,\r\n            });\r\n          } else {\r\n            toast({ title: 'Error', description: errorMessage, variant: 'destructive' });\r\n          }\r\n        }\r\n      });\r\n    } catch (error) {\r\n      setIsProcessing(false);\r\n      toast({ title: 'Error', description: 'Failed to process payment', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const handleBulk = () => {\r\n    if (isSubmittingRef.current) return; // Prevent double submission\r\n    isSubmittingRef.current = true;\r\n    setIsProcessing(true);\r\n\r\n    if (!bulkPhones.trim()) { toast({ title: 'Missing Information', description: 'Enter phone numbers with GB amounts', variant: 'destructive' }); return; }\r\n    if (!sortedBundles) { toast({ title: 'No bundles', variant: 'destructive' }); return; }\r\n\r\n    const lines = bulkPhones.split('\\n').filter(l => l.trim());\r\n    const parsed: Array<{ phone: string; gb: number }> = [];\r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) { toast({ title: 'Invalid Format', description: `Line \"${line}\" must be \"phone GB\"`, variant: 'destructive' }); return; }\r\n      let p = parts[0].replace(/^\\+/, '');\r\n      if (p.startsWith('233')) p = '0' + p.substring(3);\r\n      const gb = parseFloat(parts[1]);\r\n      if (isNaN(gb) || gb <= 0) { toast({ title: 'Invalid GB', variant: 'destructive' }); return; }\r\n      const normalized = normalizePhoneNumber(p);\r\n      if (!normalized) { toast({ title: 'Invalid phone', description: p, variant: 'destructive' }); return; }\r\n      // validate network\r\n      const validation = validatePhoneNetwork(normalized, network);\r\n      if (!validation.isValid) { toast({ title: 'Phone mismatch', description: `${p}: ${validation.error}`, variant: 'destructive' }); return; }\r\n      parsed.push({ phone: normalized, gb });\r\n    }\r\n\r\n    // Check for duplicate phone numbers\r\n    const phoneSet = new Set(parsed.map(p => p.phone));\r\n    if (phoneSet.size !== parsed.length) {\r\n      toast({ title: 'Duplicate Numbers', description: 'Phone numbers must be unique', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    // build orderItems\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let total = 0;\r\n    for (const it of parsed) {\r\n      const match = sortedBundles.find((b: any) => { const m = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i); return m ? parseFloat(m[1]) === it.gb : false; });\r\n      if (!match) { toast({ title: 'Bundle Not Found', description: `No ${it.gb}GB bundle for ${network}`, variant: 'destructive' }); return; }\r\n      \r\n      // Use effective_price for all bundles\r\n      const price = parseFloat(match.effective_price);\r\n      orderItems.push({ phone: it.phone, bundleId: match.id, bundleName: match.name, price });\r\n      total += price;\r\n    }\r\n\r\n    // Bulk orders always use Paystack for security and reliability\r\n    const payload = {\r\n      productType: 'data_bundle',\r\n      network: network,\r\n      customerPhone: orderItems[0]?.phone,\r\n      isBulkOrder: true,\r\n      orderItems,\r\n      totalAmount: total,\r\n      agentSlug,\r\n      paymentMethod: 'paystack',\r\n    };\r\n\r\n    checkoutMutation.mutate(payload, {\r\n      onSuccess: (data) => {\r\n        isSubmittingRef.current = false; // Reset submission guard\r\n        setIsProcessing(false); // Reset processing state\r\n        if (data.paymentUrl) window.location.href = data.paymentUrl; else toast({ title: 'Payment init failed', variant: 'destructive' });\r\n      },\r\n      onError: (err: any) => {\r\n        isSubmittingRef.current = false; // Reset submission guard\r\n        setIsProcessing(false); // Reset processing state\r\n        toast({ title: 'Error', description: err.message || 'Checkout failed', variant: 'destructive' })\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Card>\r\n        <CardContent className=\"flex items-center gap-4 p-4\">\r\n          <img src={(networkInfo[network] || { logo: '' }).logo} alt={network} className=\"h-12 w-12 rounded-lg object-contain\" />\r\n          <div>\r\n            <h2 className=\"font-semibold text-lg\">{(networkInfo[network] || { name: network }).name}</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Choose from our available data bundles</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Tabs defaultValue=\"single\" className=\"w-full\" onValueChange={(v) => setOrderType(v as 'single' | 'bulk')}>\r\n        <TabsList className=\"grid w-full grid-cols-2\">\r\n          <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\"><ShoppingCart className=\"h-4 w-4 mr-2\"/>Single Purchase</TabsTrigger>\r\n          <TabsTrigger value=\"bulk\" disabled={network === \"at_ishare\"} className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n            <Package className=\"h-4 w-4 mr-2\"/>Bulk Purchase\r\n            {network === \"at_ishare\" && (\r\n              <span className=\"text-xs text-muted-foreground ml-1\">(Disabled)</span>\r\n            )}\r\n          </TabsTrigger>\r\n        </TabsList>\r\n        {network === \"at_ishare\" && (\r\n          <p className=\"text-sm text-muted-foreground mt-2\">\r\n            Bulk purchases are not available for AT iShare network.\r\n          </p>\r\n        )}\r\n\r\n        <TabsContent value=\"single\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <Label>Select Bundle</Label>\r\n                {isLoading ? <div>Loading...</div> : (\r\n                  <Select value={selectedBundleId} onValueChange={(v) => setSelectedBundleId(v)}>\r\n                    <SelectTrigger className=\"w-full\"><SelectValue placeholder=\"Choose a data bundle\" /></SelectTrigger>\r\n                    <SelectContent>\r\n                      {sortedBundles?.map((b: any) => {\r\n                        const price = parseFloat(b.effective_price);\r\n                        return (\r\n                          <SelectItem key={b.id} value={b.id}>{b.network.toUpperCase()} {b.dataAmount} - {b.validity} - GH₵{price.toFixed(2)}</SelectItem>\r\n                        );\r\n                      })}\r\n                    </SelectContent>\r\n                  </Select>\r\n                )}\r\n              </div>\r\n\r\n              {selectedBundle && (\r\n                <div className=\"p-2 bg-yellow-500 text-white rounded-lg border border-yellow-600\">\r\n                  <p className=\"text-sm text-white\">Selected Bundle</p>\r\n                  <p className=\"font-medium text-lg text-white\">{selectedBundle.network.toUpperCase()} {selectedBundle.dataAmount} - {selectedBundle.validity} - GH₵{parseFloat(selectedBundle.effective_price).toFixed(2)}</p>\r\n                  <p className=\"text-2xl font-bold text-white mt-2\">GH₵{parseFloat(selectedBundle.effective_price).toFixed(2)}</p>\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <Label htmlFor=\"beneficiary-phone\">Beneficiary Number</Label>\r\n                <Input id=\"beneficiary-phone\" autoComplete=\"tel\" placeholder=\"0241234567\" value={phone} onChange={(e) => setPhone(e.target.value)} />\r\n                <p className=\"text-xs text-muted-foreground\">Enter one number. Supports 0241234567 or 233241234567 (no +). Valid prefixes: {getNetworkPrefixes(network).join(', ')}</p>\r\n              </div>\r\n\r\n              <div>\r\n                <Label>Payment Method</Label>\r\n                <RadioGroup value={paymentMethod} onValueChange={(v) => setPaymentMethod(v as 'paystack' | 'wallet')}>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"paystack\" id=\"paystack\" />\r\n                    <Label htmlFor=\"paystack\" className=\"flex items-center gap-2\">\r\n                      <CreditCard className=\"h-4 w-4\" />\r\n                      Paystack\r\n                    </Label>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"wallet\" id=\"wallet\" disabled={!user} />\r\n                    <Label htmlFor=\"wallet\" className=\"flex items-center gap-2\">\r\n                      <Wallet className=\"h-4 w-4\" />\r\n                      Wallet {user ? `(Balance: GH₵${walletBalance.toFixed(2)})` : '(Login required)'}\r\n                    </Label>\r\n                  </div>\r\n                </RadioGroup>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end\">\r\n                <Button \r\n                  onClick={handleSingle} \r\n                  disabled={\r\n                    isProcessing ||\r\n                    !selectedBundle || \r\n                    isProcessing ||\r\n                    (paymentMethod === 'wallet' && (!user || walletBalance < parseFloat(selectedBundle?.effective_price || '0')))\r\n                  }\r\n                >\r\n                  {isProcessing ? (\r\n                    <>\r\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                      Processing...\r\n                    </>\r\n                  ) : (\r\n                    paymentMethod === 'wallet' ? 'Pay with Wallet' : 'Pay with Paystack'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"bulk\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Bulk Purchase</CardTitle>\r\n              <CardDescription>Enter phone numbers with GB amounts for {network.toUpperCase()}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <Textarea placeholder={`0546591622 1\\n0247064874 3\\n233547897522 10`} value={bulkPhones} onChange={(e) => setBulkPhones(e.target.value)} rows={8} />\r\n              <p className=\"text-sm text-muted-foreground\">Enter one number per line with GB amount (e.g., \"0241234567 2\"). Supports 0241234567 or 233241234567 (no +). No limit - add 100+ numbers! All numbers must be for {network.toUpperCase()}. Valid prefixes: {getNetworkPrefixes(network).join(', ')}</p>\r\n              {bulkTotal && (\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"font-medium\">{bulkTotal.count} items • GH₵{bulkTotal.total.toFixed(2)}</p>\r\n                  {bulkTotal.invalidCount > 0 && (\r\n                    <p className=\"text-sm text-red-600 dark:text-red-400\">\r\n                      ⚠️ {bulkTotal.invalidCount} bundle(s) not found for this network. Please check the GB amounts.\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex justify-end\">\r\n                <Button \r\n                  onClick={handleBulk}\r\n                  disabled={isProcessing || bulkTotal.count === 0 || bulkTotal.invalidCount > 0}\r\n                >\r\n                  {isProcessing ? 'Processing...' : `Pay with Paystack ${bulkTotal.count > 0 ? ` ${bulkTotal.count} Bundles - GH₵${bulkTotal.total.toFixed(2)}` : ''}`}\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"wouter\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { Phone, Loader2, ShieldCheck, FileCheck, Wallet, CreditCard, CheckCircle, AlertCircle, ShoppingCart, Plus, Minus, Download } from \"lucide-react\";\r\nimport jsPDF from \"jspdf\";\r\n\r\nconst checkoutSchema = z.object({\r\n  customerPhone: z.string().min(10, \"Invalid phone number\").regex(/^[0-9+\\-\\s()]*$/, \"Phone number must contain only numbers and valid characters\"),\r\n  paymentMethod: z.enum([\"paystack\", \"wallet\"], {\r\n    required_error: \"Please select a payment method\",\r\n  }),\r\n});\r\n\r\ntype CheckoutFormData = z.infer<typeof checkoutSchema>;\r\n\r\ninterface ResultCheckerStock {\r\n  type: string;\r\n  year: number;\r\n  price: number;\r\n  stock: number;\r\n}\r\n\r\ninterface UserStats {\r\n  totalOrders: number;\r\n  totalSpent: string;\r\n  walletBalance: string;\r\n}\r\n\r\ninterface UnifiedResultCheckerFlowProps {\r\n  agentSlug?: string | null;\r\n}\r\n\r\nexport function UnifiedResultCheckerFlow({ agentSlug }: UnifiedResultCheckerFlowProps) {\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [selectedChecker, setSelectedChecker] = useState<string>(\"\");\r\n  const [quantity, setQuantity] = useState<number>(1);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [paymentSuccess, setPaymentSuccess] = useState<boolean>(false);\r\n  const [successData, setSuccessData] = useState<any>(null);\r\n\r\n  const scrollToTopQuick = () => {\r\n    const opts: ScrollToOptions = { top: 0, behavior: \"smooth\" };\r\n    // Try scrolling both the window and document roots to ensure full jump to top\r\n    window.requestAnimationFrame(() => {\r\n      window.scrollTo(opts);\r\n      document.documentElement?.scrollTo?.(opts);\r\n      document.body?.scrollTo?.(opts);\r\n    });\r\n  };\r\n\r\n  // Fetch result checkers stock\r\n  const { data: resultCheckerStock, isLoading: stockLoading } = useQuery<ResultCheckerStock[]>({\r\n    queryKey: [\"/api/products/result-checkers/stock\"],\r\n    queryFn: () => apiRequest(\"/api/products/result-checkers/stock\"),\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  // Ensure the view starts at the top when the flow loads\r\n  useEffect(() => {\r\n    scrollToTopQuick();\r\n  }, []);\r\n\r\n  // Fetch user stats to get wallet balance\r\n  const { data: userStats, isLoading: statsLoading } = useQuery<UserStats>({\r\n    queryKey: [\"/api/user/stats\"],\r\n    queryFn: () => apiRequest(\"/api/user/stats\"),\r\n    enabled: !!user,\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  const selectedCheckerData = resultCheckerStock?.find(\r\n    item => `${item.type}-${item.year}` === selectedChecker\r\n  );\r\n\r\n  const walletBalance = userStats?.walletBalance ? parseFloat(userStats.walletBalance) : 0;\r\n  const unitPrice = selectedCheckerData ? selectedCheckerData.price : 0;\r\n  const totalPrice = unitPrice * quantity;\r\n  const hasInsufficientBalance = Boolean(\r\n    !statsLoading && userStats && totalPrice > 0 && walletBalance < totalPrice\r\n  );\r\n\r\n  // Reset quantity and success state when checker changes\r\n  const handleCheckerChange = (value: string) => {\r\n    setSelectedChecker(value);\r\n    setQuantity(1);\r\n    setPaymentSuccess(false);\r\n    setSuccessData(null);\r\n    // Bring the user back to the top when a product is chosen to start the flow at the beginning\r\n    scrollToTopQuick();\r\n  };\r\n\r\n  const handleQuantityChange = (newQuantity: number) => {\r\n    if (selectedCheckerData) {\r\n      const maxQuantity = selectedCheckerData.stock;\r\n      if (newQuantity >= 1 && newQuantity <= maxQuantity) {\r\n        setQuantity(newQuantity);\r\n      } else if (newQuantity > maxQuantity) {\r\n        toast({\r\n          title: \"Quantity Exceeded\",\r\n          description: `Only ${maxQuantity} PINs available for ${selectedCheckerData.type.toUpperCase()} ${selectedCheckerData.year}`,\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const generatePDF = () => {\r\n    if (!selectedCheckerData || !successData) return;\r\n\r\n    const [type, year] = selectedChecker.split(\"-\");\r\n    const doc = new jsPDF();\r\n    \r\n    let yPosition = 20;\r\n    const pageHeight = doc.internal.pageSize.getHeight();\r\n    const margin = 15;\r\n    const lineHeight = 7;\r\n\r\n    // Title\r\n    doc.setFontSize(18);\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(\"RESULT CHECKER PURCHASE RECEIPT\", margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Receipt Info\r\n    doc.setFontSize(10);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.text(`Receipt Date: ${new Date().toLocaleString()}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Transaction ID: ${successData.transactionId || \"RCP\" + Date.now()}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Purchase Details Section\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"PURCHASE DETAILS\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n    doc.text(`Product: ${type.toUpperCase()} Result Checker ${year}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Quantity: ${quantity}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Unit Price: GH₵${selectedCheckerData.price.toFixed(2)}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(`Total Amount: GH₵${totalPrice.toFixed(2)}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Result Checker Details Section\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"RESULT CHECKER DETAILS\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n\r\n    // Generate sample PIN and serial numbers for display\r\n    const pinsArray = successData.pinsData || [];\r\n    if (pinsArray.length > 0) {\r\n      pinsArray.forEach((item: any, index: number) => {\r\n        if (yPosition > pageHeight - 30) {\r\n          doc.addPage();\r\n          yPosition = margin;\r\n        }\r\n        doc.text(`PIN ${index + 1}:`, margin, yPosition);\r\n        yPosition += lineHeight;\r\n        doc.text(`Serial number: ${item.serialNumber || item.serial || \"XXXXX-XXXXX-XXXXX\"}`, margin + 5, yPosition);\r\n        yPosition += lineHeight;\r\n        doc.text(`Pin: ${item.pin || \"XXXX-XXXX-XXXX-XXXX\"}`, margin + 5, yPosition);\r\n        yPosition += 10;\r\n      });\r\n    } else if (successData.deliveredPin) {\r\n      doc.text(`Serial number: ${successData.serialNumber || successData.deliveredPin.split(\"-\")[0] || \"XXXXX-XXXXX-XXXXX\"}`, margin + 5, yPosition);\r\n      yPosition += lineHeight;\r\n      doc.text(`Pin: ${successData.deliveredPin}`, margin + 5, yPosition);\r\n      yPosition += 12;\r\n    }\r\n\r\n    // Customer Information\r\n    if (yPosition > pageHeight - 40) {\r\n      doc.addPage();\r\n      yPosition = margin;\r\n    }\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"CUSTOMER INFORMATION\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n    doc.text(`Phone: ${user?.phone || \"N/A\"}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Email: ${user?.email || \"N/A\"}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Delivery Status\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"DELIVERY STATUS\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n    doc.text(\"Status: Completed\", margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`PINs Delivered: ${quantity}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Footer\r\n    doc.setFontSize(9);\r\n    doc.setFont(\"helvetica\", \"italic\");\r\n    doc.text(\"Keep this receipt safe for your records. Use the provided PINs to check WAEC results.\", margin, pageHeight - 20);\r\n    doc.text(`Generated: ${new Date().toISOString()}`, margin, pageHeight - 10);\r\n\r\n    // Save PDF\r\n    doc.save(`result-checker-receipt-${Date.now()}.pdf`);\r\n\r\n    toast({\r\n      title: \"✅ Downloaded\",\r\n      description: \"Your receipt has been downloaded successfully\",\r\n    });\r\n  };\r\n\r\n  const form = useForm<CheckoutFormData>({\r\n    resolver: zodResolver(checkoutSchema),\r\n    defaultValues: {\r\n      customerPhone: \"\",\r\n    },\r\n  });\r\n\r\n  const initializePaymentMutation = useMutation({\r\n    mutationFn: async (data: CheckoutFormData) => {\r\n      if (!selectedCheckerData) throw new Error(\"No checker selected\");\r\n\r\n      const [type, year] = selectedChecker.split(\"-\");\r\n\r\n      if (data.paymentMethod === \"wallet\") {\r\n        const payload = {\r\n          productType: \"result_checker\",\r\n          productId: `${type}-${year}`,\r\n          productName: `${quantity} x ${type.toUpperCase()} Result Checker ${year}`,\r\n          amount: totalPrice.toFixed(2),\r\n          agentSlug: agentSlug || undefined,\r\n          quantity: quantity,\r\n        };\r\n\r\n        return await apiRequest(\"/api/wallet/pay\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(payload),\r\n        });\r\n      } else {\r\n        const payload = {\r\n          productType: \"result_checker\",\r\n          productId: `${type}-${year}`,\r\n          productName: `${quantity} x ${type.toUpperCase()} Result Checker ${year}`,\r\n          amount: totalPrice.toFixed(2),\r\n          customerPhone: data.customerPhone,\r\n          customerEmail: user?.email || undefined,\r\n          agentSlug: agentSlug || undefined,\r\n          quantity: quantity,\r\n        };\r\n\r\n        console.log(\"[Result Checker] Paystack payment payload:\", {\r\n          amount: payload.amount,\r\n          quantity: payload.quantity,\r\n          unitPrice: unitPrice,\r\n          totalPrice: totalPrice\r\n        });\r\n\r\n        return await apiRequest(\"/api/checkout/initialize\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(payload),\r\n        });\r\n      }\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      setIsProcessing(false);\r\n      \r\n      if (variables.paymentMethod === \"wallet\") {\r\n        setSuccessData(data);\r\n        setPaymentSuccess(true);\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: \"Your result checker purchase is complete\",\r\n          duration: 3000,\r\n        });\r\n      } else {\r\n        // Paystack payment - redirect to authorization URL\r\n        const authUrl = data.paymentUrl || data.authorizationUrl || data.authorization_url || data.data?.authorization_url;\r\n        \r\n        if (authUrl) {\r\n          window.location.href = authUrl;\r\n        } else {\r\n          console.error(\"Payment response:\", data);\r\n          toast({\r\n            title: \"❌ Payment Initialization Failed\",\r\n            description: data.message || \"Unable to redirect to payment page. Please try again.\",\r\n            variant: \"destructive\",\r\n          });\r\n        }\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      \r\n      toast({\r\n        title: isInsufficientBalance ? \"⚠️ Insufficient Wallet Balance\" : \"❌ Payment Failed\",\r\n        description: isInsufficientBalance \r\n          ? \"Your wallet balance is too low for this purchase. Please top up your wallet or use Paystack.\"\r\n          : `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: CheckoutFormData) => {\r\n    if (!selectedCheckerData) {\r\n      toast({\r\n        title: \"No Checker Selected\",\r\n        description: \"Please select a result checker to continue\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (selectedCheckerData.stock < quantity) {\r\n      toast({\r\n        title: \"Insufficient Stock\",\r\n        description: `Only ${selectedCheckerData.stock} PINs available. Please reduce quantity or select another checker.`,\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (data.paymentMethod === \"wallet\" && hasInsufficientBalance) {\r\n      const shortfall = totalPrice - walletBalance;\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${shortfall.toFixed(2)} more to complete this purchase. Current balance: GH₵${walletBalance.toFixed(2)}, Required: GH₵${totalPrice.toFixed(2)}. Please top up or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 7000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    initializePaymentMutation.mutate(data);\r\n  };\r\n\r\n  if (stockLoading) {\r\n    return (\r\n      <div className=\"flex justify-center py-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!resultCheckerStock || resultCheckerStock.length === 0) {\r\n    return (\r\n      <Card className=\"p-6\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-muted-foreground\">No result checkers available at the moment.</p>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // Success state\r\n  if (paymentSuccess && selectedCheckerData) {\r\n    const [type, year] = selectedChecker.split(\"-\");\r\n    return (\r\n      <Card className=\"border-green-500 bg-white dark:bg-black\">\r\n        <CardHeader className=\"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-green-600\">\r\n              <CheckCircle className=\"h-6 w-6 text-white\" />\r\n            </div>\r\n            <div>\r\n              <CardTitle className=\"text-green-700 dark:text-green-300 text-2xl\">Payment Successful! 🎉</CardTitle>\r\n              <CardDescription className=\"text-green-600 dark:text-green-400 mt-1\">\r\n                Your result checkers have been delivered\r\n              </CardDescription>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-6 space-y-6\">\r\n          {/* Purchase Summary */}\r\n          <div className=\"bg-muted dark:bg-black/20 rounded-lg p-4 space-y-3\">\r\n            <h3 className=\"font-semibold text-lg\">Purchase Summary</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Product:</span>\r\n                <span className=\"font-medium\">{type.toUpperCase()} Result Checker {year}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Quantity:</span>\r\n                <span className=\"font-medium\">{quantity} PIN(s)</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Unit Price:</span>\r\n                <span className=\"font-medium\">{formatCurrency(selectedCheckerData.price)}</span>\r\n              </div>\r\n              <div className=\"border-t pt-2 flex justify-between\">\r\n                <span className=\"font-semibold\">Total Amount Paid:</span>\r\n                <span className=\"font-bold text-primary text-lg\">{formatCurrency(totalPrice)}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Delivery Details */}\r\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800\">\r\n            <h3 className=\"font-semibold text-blue-900 dark:text-blue-300 mb-2\">📧 Delivery Details</h3>\r\n            <p className=\"text-sm text-blue-800 dark:text-blue-400\">\r\n              Your result checker PINs have been sent to your email. Check your inbox (and spam folder) for the delivery details.\r\n            </p>\r\n            {successData?.deliveredPin && (\r\n              <p className=\"text-sm font-mono bg-white dark:bg-black rounded p-2 mt-2 text-muted-foreground\">\r\n                Reference: {successData.deliveredPin}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col sm:flex-row gap-3 pt-4\">\r\n            <Button\r\n              onClick={generatePDF}\r\n              className=\"flex-1 gap-2 bg-green-600 hover:bg-green-700\"\r\n              size=\"lg\"\r\n            >\r\n              <Download className=\"h-4 w-4\" />\r\n              Download Receipt\r\n            </Button>\r\n            <Button\r\n              onClick={() => setLocation(\"/user/dashboard\")}\r\n              variant=\"outline\"\r\n              className=\"flex-1 gap-2\"\r\n              size=\"lg\"\r\n            >\r\n              Go to Dashboard\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Next Steps */}\r\n          <div className=\"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800\">\r\n            <h3 className=\"font-semibold text-amber-900 dark:text-amber-300 mb-2\">📝 Next Steps</h3>\r\n            <ol className=\"text-sm text-amber-800 dark:text-amber-400 list-decimal list-inside space-y-1\">\r\n              <li>Use the PINs to check WAEC result on the official website</li>\r\n              <li>Keep your receipt safe for your records</li>\r\n              <li>Contact support if you encounter any issues</li>\r\n            </ol>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader className=\"space-y-2\">\r\n        <CardTitle>Result Checker Purchase</CardTitle>\r\n        <CardDescription>Select, review, and pay in one card.</CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Selector */}\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-sm font-medium\">Result Checker</Label>\r\n          <Select value={selectedChecker} onValueChange={handleCheckerChange}>\r\n            <SelectTrigger className=\"w-full\">\r\n              <SelectValue placeholder=\"Choose a result checker...\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {resultCheckerStock.map((item) => (\r\n                <SelectItem\r\n                  key={`${item.type}-${item.year}`}\r\n                  value={`${item.type}-${item.year}`}\r\n                  disabled={item.stock <= 0}\r\n                >\r\n                  <div className=\"flex items-center justify-between w-full gap-4\">\r\n                    <span className=\"font-medium uppercase\">\r\n                      {item.type} {item.year}\r\n                    </span>\r\n                    <span className=\"text-muted-foreground text-sm\">\r\n                      {item.stock > 0 ? `${item.stock} in stock` : \"Out of stock\"}\r\n                    </span>\r\n                    <span className=\"font-bold text-primary\">\r\n                      {formatCurrency(item.price)}\r\n                    </span>\r\n                  </div>\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        {/* Summary & quantity */}\r\n        {selectedCheckerData && (\r\n          <div className=\"bg-muted rounded-lg p-4 space-y-4\">\r\n            <div className=\"flex items-start justify-between\">\r\n              <div>\r\n                <h3 className=\"font-semibold text-lg uppercase\">\r\n                  {selectedCheckerData.type} Result Checker {selectedCheckerData.year}\r\n                </h3>\r\n                <div className=\"flex items-center gap-2 mt-2\">\r\n                  <FileCheck className=\"h-4 w-4 text-primary\" />\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                    {selectedCheckerData.stock} PINs available\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-sm text-muted-foreground mb-1\">Unit Price</p>\r\n                <p className=\"text-xl font-bold text-primary\">\r\n                  {formatCurrency(unitPrice)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium\">Quantity</label>\r\n                <div className=\"flex items-center gap-3 bg-background rounded-lg p-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleQuantityChange(quantity - 1)}\r\n                    className=\"p-1 hover:bg-muted rounded transition-colors disabled:opacity-50\"\r\n                    disabled={quantity <= 1}\r\n                    aria-label=\"Decrease quantity\"\r\n                    title=\"Decrease quantity\"\r\n                  >\r\n                    <Minus className=\"h-4 w-4\" />\r\n                  </button>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max={selectedCheckerData.stock}\r\n                    value={quantity}\r\n                    onChange={(e) => handleQuantityChange(parseInt(e.target.value) || 1)}\r\n                    className=\"w-12 text-center font-semibold border rounded px-2 py-1 text-black\"\r\n                    placeholder=\"1\"\r\n                    aria-label=\"Quantity of result checkers\"\r\n                    title=\"Enter quantity\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleQuantityChange(quantity + 1)}\r\n                    className=\"p-1 hover:bg-muted rounded transition-colors disabled:opacity-50\"\r\n                    disabled={quantity >= selectedCheckerData.stock}\r\n                    aria-label=\"Increase quantity\"\r\n                    title=\"Increase quantity\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"pt-3 bg-white dark:bg-black/20 p-3 rounded-lg border border-border\">\r\n                <div className=\"flex items-center justify-between mb-2 text-sm\">\r\n                  <span className=\"text-muted-foreground\">Subtotal ({quantity}x @ {formatCurrency(unitPrice)})</span>\r\n                  <span className=\"font-medium\">{formatCurrency(unitPrice * quantity)}</span>\r\n                </div>\r\n                <div className=\"flex items-center justify-between text-lg font-bold\">\r\n                  <span>Total Amount</span>\r\n                  <span className=\"text-primary text-2xl\">{formatCurrency(totalPrice)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Payment */}\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"paymentMethod\"\r\n              render={({ field }) => (\r\n                <FormItem className=\"space-y-3\">\r\n                  <FormLabelWithoutFor className=\"text-green-700\">Payment Method</FormLabelWithoutFor>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"grid gap-3\"\r\n                    >\r\n                      {user && (\r\n                        <div className=\"relative\">\r\n                          <div className={`flex items-center space-x-2 p-4 rounded-lg border-2 border-muted !bg-white hover:border-green-500 cursor-pointer transition-all ${\r\n                            hasInsufficientBalance ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n                          }`}>\r\n                            <RadioGroupItem value=\"wallet\" id=\"wallet\" disabled={hasInsufficientBalance} />\r\n                            <Label htmlFor=\"wallet\" className=\"flex items-center justify-between flex-1 cursor-pointer\">\r\n                              <div className=\"flex items-center gap-3\">\r\n                                <Wallet className=\"h-5 w-5 text-green-600\" />\r\n                                <div>\r\n                                  <div className=\"font-medium text-green-700\">Wallet Balance</div>\r\n                                  <div className=\"text-sm text-green-600\">\r\n                                    Available: GH₵{walletBalance.toFixed(2)}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              {field.value === \"wallet\" && (\r\n                                <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                              )}\r\n                            </Label>\r\n                          </div>\r\n                          {hasInsufficientBalance && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"flex items-center space-x-2 p-4 rounded-lg border-2 border-muted !bg-white hover:border-green-500 cursor-pointer transition-all\">\r\n                        <RadioGroupItem\r\n                          value=\"paystack\"\r\n                          id=\"paystack\"\r\n                        />\r\n                        <Label htmlFor=\"paystack\" className=\"flex items-center justify-between flex-1 cursor-pointer\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                            <div>\r\n                              <div className=\"font-medium text-green-700\">Paystack</div>\r\n                              <div className=\"text-sm text-green-600\">\r\n                                Pay with card, bank transfer\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          {field.value === \"paystack\" && (\r\n                            <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                          )}\r\n                        </Label>\r\n                      </div>\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {hasInsufficientBalance && form.watch(\"paymentMethod\") === \"wallet\" && (\r\n              <Alert variant=\"default\" className=\"border-destructive/50 bg-white text-destructive\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertDescription className=\"text-sm\">\r\n                  <strong>Insufficient Balance:</strong> You need GH₵{(totalPrice - walletBalance).toFixed(2)} more. \r\n                  <a href=\"/user/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"customerPhone\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Phone Number *</FormLabel>\r\n                  <FormControl>\r\n                    <div className=\"relative\">\r\n                      <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <Input\r\n                        placeholder=\"+233 XX XXX XXXX\"\r\n                        type=\"tel\"\r\n                        className=\"pl-10\"\r\n                        {...field}\r\n                      />\r\n                    </div>\r\n                  </FormControl>\r\n                  <FormDescription>\r\n                    We'll use this number to deliver your result checker PINs\r\n                  </FormDescription>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <div className=\"bg-green-600 dark:bg-green-700 rounded-lg p-4 flex items-start gap-3\">\r\n              <ShieldCheck className=\"h-5 w-5 text-white dark:text-white mt-0.5\" />\r\n              <div className=\"text-sm\">\r\n                <p className=\"font-medium text-white dark:text-white\">\r\n                  {form.watch(\"paymentMethod\") === \"wallet\" ? \"Instant Purchase\" : \"Secure Payment\"}\r\n                </p>\r\n                <p className=\"text-white dark:text-white\">\r\n                  {form.watch(\"paymentMethod\") === \"wallet\"\r\n                    ? \"Your result checker PIN and serial number will be generated instantly and available for download.\"\r\n                    : \"Your payment is processed securely through Paystack. Your result checker will be available for download after payment.\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              size=\"lg\"\r\n              className=\"w-full gap-2\"\r\n              disabled={isProcessing || !form.watch(\"paymentMethod\") || (form.watch(\"paymentMethod\") === \"wallet\" && hasInsufficientBalance) || !selectedCheckerData}\r\n            >\r\n              {isProcessing ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                  Processing...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  {form.watch(\"paymentMethod\") === \"wallet\" ? (\r\n                    <>\r\n                      <Wallet className=\"h-4 w-4\" />\r\n                      Pay from Wallet - {formatCurrency(totalPrice)}\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <ShoppingCart className=\"h-4 w-4\" />\r\n                      Complete Purchase - {formatCurrency(totalPrice)}\r\n                    </>\r\n                  )}\r\n                </>\r\n              )}\r\n            </Button>\r\n          </form>\r\n        </Form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","import { Link } from \"wouter\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { UnifiedResultCheckerFlow } from \"@/components/products/unified-result-checker-flow\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ArrowLeft } from \"lucide-react\";\r\nimport resultLogo from \"@assets/result_1765780772205.jpg\";\r\n\r\nexport default function ResultCheckersPage() {\r\n  // Get agent slug from URL\r\n  const agentSlug = new URLSearchParams(window.location.search).get(\"agent\");\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-8 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-4xl\">\r\n          <Link href={agentStore ? `/store/${agentStore}` : \"/\"}>\r\n            <Button variant=\"ghost\" className=\"gap-2 mb-6\" data-testid=\"button-back\">\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              Back to Products\r\n            </Button>\r\n          </Link>\r\n\r\n          <div className=\"flex items-center gap-4 mb-8\">\r\n            <img\r\n              src={resultLogo}\r\n              alt=\"Result Checkers\"\r\n              className=\"w-16 h-16 object-contain rounded-lg\"\r\n              data-testid=\"img-result-logo\"\r\n            />\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\" data-testid=\"text-page-title\">\r\n                WAEC Result Checkers\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Complete your purchase in one easy flow\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Unified Purchase Flow - All in one place */}\r\n          <UnifiedResultCheckerFlow agentSlug={agentSlug} />\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import { Link } from \"wouter\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport banner1 from \"@assets/banner1_1765774201032.jpeg\";\r\nimport banner2 from \"@assets/banner2_1765774201033.jpeg\";\r\nimport banner3 from \"@assets/banner3_1765774201030.jpeg\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\n\r\nconst products = [\r\n  {\r\n    id: \"mtn\",\r\n    name: \"MTN Data\",\r\n    logo: mtnLogo,\r\n    href: \"/products/mtn\",\r\n    description: \"MTN Data Bundles\",\r\n  },\r\n  {\r\n    id: \"telecel\",\r\n    name: \"Telecel Data\",\r\n    logo: telecelLogo,\r\n    href: \"/products/telecel\",\r\n    description: \"Telecel Data Bundles\",\r\n  },\r\n  {\r\n    id: \"at_bigtime\",\r\n    name: \"AT BIG TIME Data\",\r\n    logo: airteltigoLogo,\r\n    href: \"/products/at_bigtime\",\r\n    description: \"AT BIG TIME Data Bundles\",\r\n  },\r\n  {\r\n    id: \"at_ishare\",\r\n    name: \"AT iShare Data\",\r\n    logo: airteltigoLogo,\r\n    href: \"/products/at_ishare\",\r\n    description: \"AT iShare Data Bundles\",\r\n  },\r\n];\r\n\r\nexport default function DataBundlesPage() {\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n\r\n      <main className=\"flex-1 pt-16\">\r\n        {/* Products Section - Logo Grid */}\r\n        <section id=\"products\" className=\"py-12 px-4\">\r\n          <div className=\"container mx-auto max-w-4xl space-y-8\">\r\n            <h2 className=\"text-2xl font-bold text-center\">Select a Data Bundle</h2>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto\">\r\n              {products.map((product) => (\r\n                <Link key={product.id} href={product.href}>\r\n                  <Card\r\n                    className=\"p-0.5 md:p-1 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                    data-testid={`card-product-${product.id}`}\r\n                  >\r\n                    <img\r\n                      src={product.logo}\r\n                      alt={product.name}\r\n                      className=\"w-20 h-20 md:w-24 md:h-24 object-contain rounded-lg\"\r\n                      data-testid={`img-product-${product.id}`}\r\n                    />\r\n                    <p className=\"text-sm font-medium text-center text-muted-foreground\">\r\n                      {product.description}\r\n                    </p>\r\n                  </Card>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code } from \"lucide-react\";\r\nimport { Link } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n// Using plain inputs for the small upgrade dialog (avoid react-hook-form Controller requirements)\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\n\r\nexport default function UserDashboard() {\r\n  const { user } = useAuth();\r\n  useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [, setShowApiModal] = useState(false);\r\n\r\n  // (upgrade UI removed)\r\n\r\n  // Fetch user stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/user/stats\"],\r\n    queryFn: () => apiRequest(\"/api/user/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-sm sm:text-xl font-bold\">Welcome back, {user.name}!</h1>\r\n              <p className=\"text-xs sm:text-sm text-muted-foreground\">Here's your account overview</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6 mt-4\">\r\n            {/* Upgrade to Agent removed */}\r\n            {/* Welcome Message */}\r\n            <Card className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 border-yellow-600 shadow-xl overflow-hidden relative\">\r\n              <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12\"></div>\r\n              <CardContent className=\"p-6 relative\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex items-center justify-center w-14 h-14 bg-white/20 rounded-full shadow-lg backdrop-blur-sm\">\r\n                      <span className=\"text-3xl animate-bounce\">👋</span>\r\n                    </div>\r\n                    <div>\r\n                      <h2 className=\"text-2xl lg:text-3xl font-bold text-white mb-1 drop-shadow-sm\">\r\n                        Welcome back, {user?.name?.toUpperCase() || 'USER'}! \r\n                      </h2>\r\n                      <p className=\"text-yellow-100 text-sm lg:text-base font-medium\">\r\n                        Here's what's happening with your account today ✨\r\n                      </p>\r\n                      <div className=\"flex items-center gap-2 mt-2\">\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\r\n                          <span className=\"text-xs font-medium\">Live Dashboard</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-pulse\" style={{animationDelay: '0.5s'}}></div>\r\n                          <span className=\"text-xs font-medium\">Real-time Updates</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"hidden lg:flex flex-col items-end gap-2\">\r\n                    <div className=\"flex items-center gap-2 bg-white/10 rounded-full px-3 py-1 backdrop-blur-sm\">\r\n                      <span className=\"text-xs text-white font-medium\">\r\n                        {new Date().toLocaleDateString('en-US', { \r\n                          weekday: 'long', \r\n                          year: 'numeric', \r\n                          month: 'long', \r\n                          day: 'numeric' \r\n                        })}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1 text-white/80\">\r\n                      <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full\"></div>\r\n                      <span className=\"text-xs\">All systems operational</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                  <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold text-primary\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.walletBalance || '0.00'}`\r\n                    )}\r\n                  </div>\r\n                  <Link href=\"/user/wallet\">\r\n                    <Button variant=\"outline\" size=\"sm\" className=\"text-xs mt-3\">\r\n                      Top Up Wallet\r\n                    </Button>\r\n                  </Link>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium\">Total Orders</CardTitle>\r\n                  <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      stats?.totalOrders || 0\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">All time purchases</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium\">Total Spent</CardTitle>\r\n                  <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.totalSpent || 0}`\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">All time spending</p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Quick Actions</CardTitle>\r\n                <CardDescription>Start purchasing data bundles</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\r\n                  <Link href=\"/user/bundles/mtn\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">MTN Bundles</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/bundles/at-ishare\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">AT iShare</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/bundles/at-bigtime\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">AT BIG TIME</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/bundles/telecel\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">Telecel</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/vouchers\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">Vouchers</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"w-full h-auto py-4 flex-col gap-2\"\r\n                    onClick={() => setShowApiModal(true)}\r\n                  >\r\n                    <Code className=\"h-5 w-5\" />\r\n                    <span className=\"text-xs\">API & Integrations</span>\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Recent Transactions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle>Recent Transactions</CardTitle>\r\n                    <CardDescription>Your latest 5 orders</CardDescription>\r\n                  </div>\r\n                  <Link href=\"/user/history\">\r\n                    <Button variant=\"outline\" size=\"sm\">\r\n                      View All\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                  </div>\r\n                ) : transactions && transactions.length > 0 ? (\r\n                  <div className=\"space-y-3\">\r\n                    {transactions.map((transaction: any) => (\r\n                      <div key={transaction.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                        <div>\r\n                          <p className=\"font-medium text-sm\">{transaction.productName}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">{transaction.customerPhone}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {new Date(transaction.createdAt).toLocaleDateString()}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <p className=\"font-medium\">GH₵{transaction.amount}</p>\r\n                          <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'} className=\"text-xs\">\r\n                            {transaction.status}\r\n                          </Badge>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <p className=\"text-muted-foreground\">No transactions yet</p>\r\n                    <Link href=\"/user/bundles/mtn\">\r\n                      <Button variant=\"ghost\" className=\"mt-2\">\r\n                        Start Shopping\r\n                      </Button>\r\n                    </Link>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Order Tracker */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Track Your Orders</CardTitle>\r\n                <CardDescription>Check the status of your data bundle purchases</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <OrderTracker />\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Wallet, TrendingUp, Clock, CheckCircle, XCircle, ArrowUpRight, ArrowDownRight, Calendar, DollarSign, CreditCard, Menu, Layers } from \"lucide-react\";\r\nimport { Link } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { WalletTopup } from \"@/components/user/wallet-topup\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n\r\ninterface Transaction {\r\n  id: string;\r\n  reference: string;\r\n  type: string;\r\n  productName: string;\r\n  amount: string;\r\n  status: string;\r\n  paymentMethod: string;\r\n  createdAt: string;\r\n  completedAt: string | null;\r\n}\r\n\r\ninterface WalletStats {\r\n  walletBalance: string;\r\n  totalTopups: number;\r\n  totalTopupAmount: string;\r\n  totalSpent: string;\r\n  lastTopupDate: string | null;\r\n  lastTopupAmount: string | null;\r\n}\r\n\r\nconst getStatusConfig = (status: string) => {\r\n  // Normalize status to match SkyTech conventions\r\n  const normalizedStatus = status.toLowerCase();\r\n  \r\n  switch (normalizedStatus) {\r\n    case 'completed':\r\n    case 'delivered':\r\n      return {\r\n        variant: 'default' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-emerald-600',\r\n        borderColor: 'border-emerald-500',\r\n        label: 'Completed'\r\n      };\r\n    case 'processing':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Layers,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-500',\r\n        borderColor: 'border-blue-400',\r\n        label: 'Processing'\r\n      };\r\n    case 'confirmed':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-600',\r\n        borderColor: 'border-blue-500',\r\n        label: 'Confirmed'\r\n      };\r\n    case 'pending':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-amber-500',\r\n        borderColor: 'border-amber-400',\r\n        label: 'Pending'\r\n      };\r\n    case 'cancelled':\r\n    case 'failed':\r\n      return {\r\n        variant: 'destructive' as const,\r\n        icon: XCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-red-600',\r\n        borderColor: 'border-red-500',\r\n        label: status === 'cancelled' ? 'Cancelled' : 'Failed'\r\n      };\r\n    default:\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-slate-600',\r\n        borderColor: 'border-slate-500',\r\n        label: status.charAt(0).toUpperCase() + status.slice(1)\r\n      };\r\n  }\r\n};\r\n\r\nexport default function WalletDashboard() {\r\n  const { user } = useAuth();\r\n  const [selectedTab, setSelectedTab] = useState(\"overview\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Fetch wallet stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery<WalletStats>({\r\n    queryKey: [\"/api/wallet/stats\"],\r\n    queryFn: () => apiRequest(\"/api/wallet/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000, // Refresh every 10 seconds\r\n  });\r\n\r\n  // Fetch all transactions\r\n  const { data: allTransactions, isLoading: transactionsLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Filter wallet topups\r\n  const walletTopups = allTransactions?.filter(t => t.type === 'wallet_topup') || [];\r\n  \r\n  // Filter wallet payments\r\n  const walletPayments = allTransactions?.filter(t => t.paymentMethod === 'wallet') || [];\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your wallet</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">My Wallet</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Manage your wallet balance</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6 mt-4\">\r\n        {/* Page Header */}\r\n        <div>\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n                <Wallet className=\"h-6 w-6\" />\r\n                Wallet Overview\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                Manage your wallet balance and view transaction history\r\n              </p>\r\n            </div>\r\n            <WalletTopup />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n          <Card className=\"bg-gradient-to-br from-green-500 to-green-600 text-white border-0\">\r\n            <CardHeader className=\"pb-2\">\r\n              <CardTitle className=\"text-sm font-medium text-green-100\">Current Balance</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-3xl font-bold\">GH₵{stats?.walletBalance || '0.00'}</div>\r\n                  <p className=\"text-xs text-green-100 mt-1\">Available to spend</p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Total Topups</CardTitle>\r\n              <ArrowUpRight className=\"h-4 w-4 text-green-600\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-2xl font-bold\">{stats?.totalTopups || 0}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">GH₵{stats?.totalTopupAmount || '0.00'} total</p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Total Spent</CardTitle>\r\n              <ArrowDownRight className=\"h-4 w-4 text-red-600\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-2xl font-bold\">GH₵{stats?.totalSpent || '0.00'}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Via wallet payments</p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Last Topup</CardTitle>\r\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-2xl font-bold\">\r\n                    GH₵{stats?.lastTopupAmount || '0.00'}\r\n                  </div>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    {stats?.lastTopupDate \r\n                      ? new Date(stats.lastTopupDate).toLocaleDateString()\r\n                      : 'No topups yet'\r\n                    }\r\n                  </p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Transaction History Tabs */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Transaction History</CardTitle>\r\n            <CardDescription>View your wallet topups and payment history</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Tabs value={selectedTab} onValueChange={setSelectedTab}>\r\n              <TabsList className=\"grid w-full grid-cols-3 mb-4\">\r\n                <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n                <TabsTrigger value=\"topups\">\r\n                  Topups ({walletTopups.length})\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"payments\">\r\n                  Payments ({walletPayments.length})\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"overview\" className=\"space-y-4\">\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : allTransactions && allTransactions.length > 0 ? (\r\n                  <div className=\"space-y-3\">\r\n                    {allTransactions.slice(0, 10).map((transaction) => {\r\n                      const statusConfig = getStatusConfig(transaction.status);\r\n                      const StatusIcon = statusConfig.icon;\r\n                      const isTopup = transaction.type === 'wallet_topup';\r\n                      const isWalletPayment = transaction.paymentMethod === 'wallet';\r\n\r\n                      return (\r\n                        <div\r\n                          key={transaction.id}\r\n                          className={`p-4 border rounded-lg ${statusConfig.bgColor} ${statusConfig.borderColor} text-white`}\r\n                        >\r\n                          <div className=\"flex items-start justify-between gap-4\">\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <div className=\"flex items-center gap-2 mb-2\">\r\n                                {isTopup ? (\r\n                                  <ArrowUpRight className=\"h-4 w-4 text-white shrink-0\" />\r\n                                ) : (\r\n                                  <ArrowDownRight className=\"h-4 w-4 text-white shrink-0\" />\r\n                                )}\r\n                                <p className=\"font-medium text-sm break-words text-white\">\r\n                                  {transaction.productName}\r\n                                </p>\r\n                                <Badge variant={statusConfig.variant} className=\"ml-auto shrink-0 bg-white text-gray-800\">\r\n                                  <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                              </div>\r\n                              <div className=\"text-xs text-gray-200 space-y-1\">\r\n                                <p>\r\n                                  {isTopup ? 'Topup' : isWalletPayment ? 'Paid with wallet' : 'Paystack'}\r\n                                  {' • '}\r\n                                  {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                </p>\r\n                                <p className=\"text-xs font-mono break-all text-gray-300\">Ref: {transaction.reference}</p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-right shrink-0\">\r\n                              <p className=\"text-lg font-bold text-white\">\r\n                                {isTopup ? '+' : '-'}GH₵{transaction.amount}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <Wallet className=\"h-12 w-12 mx-auto text-gray-400 mb-3\" />\r\n                    <p className=\"text-gray-500\">No transactions yet</p>\r\n                    <p className=\"text-sm text-gray-400 mt-1\">Top up your wallet to get started</p>\r\n                  </div>\r\n                )}\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"topups\">\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : walletTopups.length > 0 ? (\r\n                  <div className=\"rounded-md border\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Date</TableHead>\r\n                          <TableHead>Reference</TableHead>\r\n                          <TableHead>Amount</TableHead>\r\n                          <TableHead>Status</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {walletTopups.map((transaction) => {\r\n                          const statusConfig = getStatusConfig(transaction.status);\r\n                          const StatusIcon = statusConfig.icon;\r\n\r\n                          return (\r\n                            <TableRow key={transaction.id}>\r\n                              <TableCell className=\"font-medium\">\r\n                                {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                <br />\r\n                                <span className=\"text-xs text-gray-500\">\r\n                                  {new Date(transaction.createdAt).toLocaleTimeString()}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell className=\"font-mono text-xs\">\r\n                                {transaction.reference}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <span className=\"text-green-600 font-bold\">\r\n                                  +GH₵{transaction.amount}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <Badge variant={statusConfig.variant}>\r\n                                  <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <ArrowUpRight className=\"h-12 w-12 mx-auto text-gray-400 mb-3\" />\r\n                    <p className=\"text-gray-500\">No topups yet</p>\r\n                    <p className=\"text-sm text-gray-400 mt-1\">Click the \"Top Up Wallet\" button to add funds</p>\r\n                  </div>\r\n                )}\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"payments\">\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : walletPayments.length > 0 ? (\r\n                  <div className=\"rounded-md border\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Date</TableHead>\r\n                          <TableHead>Product</TableHead>\r\n                          <TableHead>Amount</TableHead>\r\n                          <TableHead>Status</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {walletPayments.map((transaction) => {\r\n                          const statusConfig = getStatusConfig(transaction.status);\r\n                          const StatusIcon = statusConfig.icon;\r\n\r\n                          return (\r\n                            <TableRow key={transaction.id}>\r\n                              <TableCell className=\"font-medium\">\r\n                                {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                <br />\r\n                                <span className=\"text-xs text-gray-500\">\r\n                                  {new Date(transaction.createdAt).toLocaleTimeString()}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <div>\r\n                                  <p className=\"font-medium\">{transaction.productName}</p>\r\n                                  <p className=\"text-xs text-gray-500 font-mono\">\r\n                                    {transaction.reference}\r\n                                  </p>\r\n                                </div>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <span className=\"text-blue-600 font-bold\">\r\n                                  -GH₵{transaction.amount}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <Badge variant={statusConfig.variant}>\r\n                                  <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <CreditCard className=\"h-12 w-12 mx-auto text-gray-400 mb-3\" />\r\n                    <p className=\"text-gray-500\">No wallet payments yet</p>\r\n                    <p className=\"text-sm text-gray-400 mt-1\">Use your wallet to pay for products and see your history here</p>\r\n                  </div>\r\n                )}\r\n              </TabsContent>\r\n            </Tabs>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo } from \"react\";\r\nimport { useParams } from \"wouter\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Smartphone, Upload, Menu, ShoppingCart, Package, AlertCircle, Wallet, CreditCard, CheckCircle } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\n\r\ntype BundleWithPrice = DataBundle & {\r\n  effective_price: string;\r\n  description?: string;\r\n};\r\n\r\ninterface UserStats {\r\n  walletBalance: string;\r\n}\r\n\r\ninterface MutationResponse {\r\n  newBalance: string;\r\n  paymentUrl: string;\r\n}\r\n\r\nconst NetworkInfo = {\r\n  mtn: {\r\n    name: \"MTN\",\r\n    color: \"bg-yellow-400\",\r\n    logo: mtnLogo,\r\n  },\r\n  at_ishare: {\r\n    name: \"AirtelTigo iShare\",\r\n    color: \"bg-red-500\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  at_bigtime: {\r\n    name: \"AirtelTigo BIG TIME\",\r\n    color: \"bg-red-600\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  telecel: {\r\n    name: \"Telecel\",\r\n    color: \"bg-blue-500\",\r\n    logo: telecelLogo,\r\n  },\r\n};\r\n\r\nexport default function UserBundlesPage() {\r\n  const { network } = useParams<{ network: string }>();\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  \r\n  // Single purchase state\r\n  const [selectedBundle, setSelectedBundle] = useState<BundleWithPrice | null>(null);\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [paymentMethod, setPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>(undefined);\r\n\r\n  // Bulk purchase state\r\n  const [bulkPhoneNumbers, setBulkPhoneNumbers] = useState(\"\");\r\n  const [bulkPaymentMethod, setBulkPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>(undefined);\r\n\r\n  const networkKey = network?.replace(/-/g, '_') as keyof typeof NetworkInfo;\r\n  const networkInfo = NetworkInfo[networkKey];\r\n\r\n  // Fetch bundles\r\n  const { data: bundles, isLoading } = useQuery<BundleWithPrice[]>({\r\n    queryKey: [\"/api/products/data-bundles\", network],\r\n    queryFn: async () => {\r\n      const apiNetwork = network?.replace(/-/g, '_');\r\n      const response = await apiRequest<BundleWithPrice[]>(\"GET\", `/api/products/data-bundles?network=${apiNetwork}`);\r\n      return response;\r\n    },\r\n  });\r\n\r\n  // Fetch wallet balance\r\n  const { data: stats } = useQuery<UserStats>({\r\n    queryKey: [\"/api/user/stats\"],\r\n    queryFn: async () => apiRequest(\"GET\", \"/api/user/stats\") as Promise<UserStats>,\r\n  });\r\n\r\n  // Calculate bulk purchase total\r\n  const bulkTotal = useMemo(() => {\r\n    if (!bulkPhoneNumbers.trim() || !bundles) return null;\r\n    \r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    let total = 0;\r\n    let count = 0;\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gbAmount = parseFloat(parts[1]);\r\n        if (!isNaN(gbAmount) && gbAmount > 0) {\r\n          const matchingBundle = bundles.find(b => {\r\n            const bundleName = b.name.toLowerCase();\r\n            const gbMatch = bundleName.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n            if (gbMatch) {\r\n              const bundleGB = parseFloat(gbMatch[1]);\r\n              return bundleGB === gbAmount;\r\n            }\r\n            return false;\r\n          });\r\n          \r\n          if (matchingBundle) {\r\n            total += parseFloat(matchingBundle.effective_price);\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return count > 0 ? { total, count } : null;\r\n  }, [bulkPhoneNumbers, bundles]);\r\n\r\n  // Single purchase mutation\r\n  const purchaseMutation = useMutation({\r\n    mutationFn: async (payload: any) => {\r\n      if (payload.paymentMethod === \"wallet\") {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/wallet/pay\", payload);\r\n      } else {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/checkout/initialize\", payload);\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setSelectedBundle(null);\r\n        setPhoneNumber(\"\");\r\n        setPaymentMethod(undefined);\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/user/stats\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      \r\n      toast({\r\n        title: isInsufficientBalance ? \"⚠️ Insufficient Wallet Balance\" : \"❌ Payment Failed\",\r\n        description: isInsufficientBalance \r\n          ? \"Your wallet balance is too low for this purchase. Please top up your wallet or use Paystack.\"\r\n          : `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Bulk purchase mutation\r\n  const bulkPurchaseMutation = useMutation({\r\n    mutationFn: async (payload: any) => {\r\n      if (payload.paymentMethod === \"wallet\") {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/wallet/pay\", payload);\r\n      } else {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/checkout/initialize\", payload);\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your bulk purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setBulkPhoneNumbers(\"\");\r\n        setBulkPaymentMethod(undefined);\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/user/stats\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      toast({\r\n        title: \"Payment Error\",\r\n        description: errorMessage,\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n\r\n  const handleSinglePurchase = async () => {\r\n    if (!selectedBundle || !phoneNumber) {\r\n      toast({\r\n        title: \"Missing Information\",\r\n        description: \"Please select a bundle and enter a phone number\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Normalize and validate phone number\r\n    const normalizedPhone = normalizePhoneNumber(phoneNumber.trim());\r\n    const validation = validatePhoneNetwork(normalizedPhone, selectedBundle.network);\r\n    \r\n    if (!validation.isValid) {\r\n      const prefixes = getNetworkPrefixes(selectedBundle.network);\r\n      toast({\r\n        title: \"❌ Phone Number Mismatch\",\r\n        description: validation.error || `This bundle is for ${selectedBundle.network.toUpperCase()} network. Valid prefixes: ${prefixes.join(\", \")}`,\r\n        variant: \"destructive\",\r\n        duration: 8000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    const price = parseFloat(selectedBundle.effective_price);\r\n    const walletBalance = stats?.walletBalance ? parseFloat(stats.walletBalance) : 0;\r\n    \r\n    if (paymentMethod === \"wallet\" && walletBalance < price) {\r\n      const shortfall = price - walletBalance;\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${shortfall.toFixed(2)} more. Current balance: GH₵${walletBalance.toFixed(2)}, Required: GH₵${price.toFixed(2)}. Please top up or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 7000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!paymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Fetch bundle to get current price\r\n    try {\r\n      const currentBundleData = await apiRequest('GET', `/api/products/data-bundles/${selectedBundle.id}`) as any;\r\n      \r\n      const amount = parseFloat(currentBundleData.effective_price);\r\n      \r\n      const payload = {\r\n        productType: 'data_bundle',\r\n        productId: selectedBundle.id,\r\n        customerPhone: normalizedPhone,\r\n        amount: amount.toFixed(2),\r\n        isBulkOrder: false,\r\n        agentSlug: undefined,\r\n        paymentMethod,\r\n        productName: selectedBundle.name,\r\n        network: selectedBundle.network,\r\n      };\r\n\r\n      purchaseMutation.mutate(payload);\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to fetch bundle details\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleBulkPurchase = () => {\r\n    console.log(\"[DEBUG] handleBulkPurchase called\");\r\n    console.log(\"[DEBUG] bulkPhoneNumbers:\", bulkPhoneNumbers);\r\n    console.log(\"[DEBUG] bulkPaymentMethod:\", bulkPaymentMethod);\r\n    console.log(\"[DEBUG] bundles:\", bundles);\r\n    \r\n    if (!bulkPhoneNumbers.trim()) {\r\n      console.log(\"[DEBUG] No phone numbers entered\");\r\n      toast({\r\n        title: \"Missing Information\",\r\n        description: \"Please enter phone numbers with GB amounts\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!bulkPaymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    if (bulkPaymentMethod === \"wallet\" && bulkTotal && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)) {\r\n      const shortfall = bulkTotal.total - (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0);\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${shortfall.toFixed(2)} more. Current balance: GH₵${stats?.walletBalance || '0.00'}, Required: GH₵${bulkTotal.total.toFixed(2)}. Please top up or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 7000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Parse phone numbers with GB amounts\r\n    // Format: \"0546591622 1\" or \"233546591622 2\"\r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    console.log(\"[DEBUG] Parsed lines:\", lines);\r\n    \r\n    const parsedData: Array<{ phone: string; gb: number }> = [];\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) {\r\n        console.log(\"[DEBUG] Invalid format for line:\", line);\r\n        toast({\r\n          title: \"❌ Invalid Format\",\r\n          description: `Line \"${line}\" must have format: phone_number GB_amount (e.g., \"0241234567 2\")`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      let phoneStr = parts[0];\r\n      const gbAmount = parseFloat(parts[1]);\r\n\r\n      if (isNaN(gbAmount) || gbAmount <= 0) {\r\n        console.log(\"[DEBUG] Invalid GB amount:\", parts[1]);\r\n        toast({\r\n          title: \"❌ Invalid GB Amount\",\r\n          description: `GB amount \"${parts[1]}\" must be a positive number`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      // Normalize the phone number\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n      console.log(\"[DEBUG] Normalized phone:\", normalizedPhone, \"from:\", phoneStr);\r\n\r\n      // Validate phone number for the selected network\r\n      const validation = validatePhoneNetwork(normalizedPhone, network);\r\n      if (!validation.isValid) {\r\n        console.log(\"[DEBUG] Phone validation failed:\", validation);\r\n        const prefixes = getNetworkPrefixes(network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: `${phoneStr}: ${validation.error || `Must be for ${networkInfo?.name} network. Valid prefixes: ${prefixes.join(\", \")}`}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      parsedData.push({ phone: normalizedPhone, gb: gbAmount });\r\n    }\r\n\r\n    console.log(\"[DEBUG] Parsed data:\", parsedData);\r\n\r\n    if (parsedData.length === 0) {\r\n      console.log(\"[DEBUG] No valid data parsed\");\r\n      toast({\r\n        title: \"No Data\",\r\n        description: \"Please enter at least one phone number with GB amount\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Find matching bundles for each GB amount from our bundles list\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let totalAmount = 0;\r\n\r\n    for (const item of parsedData) {\r\n      console.log(\"[DEBUG] Finding bundle for GB:\", item.gb);\r\n      // Find a bundle that matches the GB amount (looking for bundles with the GB in dataAmount)\r\n      const matchingBundle = bundles?.find(b => {\r\n        const dataAmount = b.dataAmount || b.name; // Fall back to name if dataAmount doesn't exist\r\n        // Try to extract GB from dataAmount (e.g., \"5GB\" -> 5)\r\n        const gbMatch = dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n        if (gbMatch) {\r\n          const bundleGB = parseFloat(gbMatch[1]);\r\n          console.log(\"[DEBUG] Bundle\", b.name, \"has GB:\", bundleGB);\r\n          return bundleGB === item.gb;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (!matchingBundle) {\r\n        console.log(\"[DEBUG] No matching bundle found for GB:\", item.gb);\r\n        toast({\r\n          title: \"❌ Bundle Not Found\",\r\n          description: `No ${item.gb}GB bundle available for ${networkInfo?.name}. Please check available bundles.`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      console.log(\"[DEBUG] Found matching bundle:\", matchingBundle.name);\r\n      orderItems.push({\r\n        phone: item.phone,\r\n        bundleId: matchingBundle.id,\r\n        bundleName: matchingBundle.name,\r\n        price: parseFloat(matchingBundle.effective_price),\r\n      });\r\n\r\n      totalAmount += parseFloat(matchingBundle.effective_price);\r\n    }\r\n\r\n    console.log(\"[DEBUG] Order items:\", orderItems);\r\n    console.log(\"[DEBUG] Total amount:\", totalAmount);\r\n\r\n    // Bulk orders can use wallet or Paystack\r\n    const payload = {\r\n      productType: 'data_bundle',\r\n      network: network,\r\n      customerPhone: orderItems[0]?.phone,\r\n      isBulkOrder: true,\r\n      orderItems,\r\n      totalAmount: totalAmount,\r\n      agentSlug: undefined,\r\n      paymentMethod: bulkPaymentMethod,\r\n    };\r\n\r\n    bulkPurchaseMutation.mutate(payload);\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for bundles</SheetDescription>\r\n          </VisuallyHidden>\r\n          <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for bundles</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">{networkInfo?.name || \"Data Bundles\"}</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Purchase data bundles</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"text-right hidden sm:block\">\r\n              <p className=\"text-sm text-muted-foreground\">Wallet Balance</p>\r\n              <p className=\"text-lg font-bold text-primary\">GH₵{stats?.walletBalance || '0.00'}</p>\r\n            </div>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Network Header */}\r\n            <Card>\r\n              <CardContent className=\"flex items-center gap-4 p-4\">\r\n                <img src={networkInfo?.logo} alt={networkInfo?.name} className=\"h-12 w-12 rounded-lg object-contain\" />\r\n                <div>\r\n                  <h2 className=\"font-semibold text-lg\">{networkInfo?.name}</h2>\r\n                  <p className=\"text-sm text-muted-foreground\">Choose from our available data bundles</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Tabs defaultValue=\"single\" className=\"w-full\">\r\n              <TabsList className=\"grid w-full grid-cols-2\">\r\n                <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                  <ShoppingCart className=\"h-4 w-4 mr-2\" />\r\n                  Single Purchase\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"bulk\" disabled={network === \"at_ishare\"} className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                  <Package className=\"h-4 w-4 mr-2\" />\r\n                  Bulk Purchase\r\n                  {network === \"at_ishare\" && (\r\n                    <span className=\"text-xs text-muted-foreground ml-1\">(Disabled)</span>\r\n                  )}\r\n                </TabsTrigger>\r\n              </TabsList>\r\n              {network === \"at_ishare\" && (\r\n                <p className=\"text-sm text-muted-foreground mt-2\">\r\n                  Bulk purchases are not available for AT iShare network.\r\n                </p>\r\n              )}\r\n\r\n              {/* Single Purchase Tab */}\r\n              <TabsContent value=\"single\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Purchase Data Bundle</CardTitle>\r\n                    <CardDescription>Select a bundle and enter recipient details</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Bundle Dropdown */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label>Select Bundle</Label>\r\n                      {isLoading ? (\r\n                        <div className=\"flex justify-center py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </div>\r\n                      ) : (\r\n                        <Select\r\n                          value={selectedBundle?.id || \"\"}\r\n                          onValueChange={(value) => {\r\n                            const bundle = bundles?.find(b => b.id === value);\r\n                            setSelectedBundle(bundle || null);\r\n                          }}\r\n                        >\r\n                          <SelectTrigger>\r\n                            <SelectValue placeholder=\"Choose a data bundle\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {bundles && bundles.length > 0 ? (\r\n                              bundles.map((bundle) => (\r\n                                <SelectItem key={bundle.id} value={bundle.id}>\r\n                                  {bundle.name} - {bundle.validity} - GH₵{bundle.basePrice}\r\n                                </SelectItem>\r\n                              ))\r\n                            ) : (\r\n                              <SelectItem value=\"no-bundles\" disabled>\r\n                                No bundles available\r\n                              </SelectItem>\r\n                            )}\r\n                          </SelectContent>\r\n                        </Select>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Selected Bundle Display */}\r\n                    {selectedBundle && (\r\n                      <div className=\"p-2 bg-yellow-500 text-white rounded-lg border border-yellow-600\">\r\n                        <p className=\"text-sm text-white\">Selected Bundle</p>\r\n                        <p className=\"font-medium text-lg text-white\">{selectedBundle.name}</p>\r\n                        <p className=\"text-sm text-white\">{selectedBundle.validity}</p>\r\n                        {selectedBundle.description && (\r\n                          <p className=\"text-xs text-white mt-1\">{selectedBundle.description}</p>\r\n                        )}\r\n                        <p className=\"text-2xl font-bold text-white mt-2\">GH₵{selectedBundle.basePrice}</p>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"phone\">Beneficiary Number</Label>\r\n                      <Input\r\n                        id=\"phone\"\r\n                        placeholder=\"0241234567\"\r\n                        value={phoneNumber}\r\n                        onChange={(e) => setPhoneNumber(e.target.value)}\r\n                      />\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        For <strong>{networkInfo?.name}</strong> network only. \r\n                        Valid prefixes: <strong>{selectedBundle ? getNetworkPrefixes(selectedBundle.network).join(\", \") : \"\"}</strong>\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label className=\"text-black font-semibold\">Payment Method</Label>\r\n                      <div className=\"grid gap-3\">\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setPaymentMethod(paymentMethod === \"wallet\" ? undefined : \"wallet\")}\r\n                            disabled={selectedBundle ? parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) : false}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              paymentMethod === \"wallet\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            } ${\r\n                              selectedBundle && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)\r\n                                ? \"opacity-50 cursor-not-allowed\"\r\n                                : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className={`h-5 w-5 ${paymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${paymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>Wallet Balance</div>\r\n                                <div className={`text-sm ${paymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Available: GH₵{stats?.walletBalance || '0.00'}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                          {selectedBundle && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-black text-white px-2 py-1 rounded font-semibold\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setPaymentMethod(paymentMethod === \"paystack\" ? undefined : \"paystack\")}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              paymentMethod === \"paystack\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className={`h-5 w-5 ${paymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${paymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>Pay with MoMo</div>\r\n                                <div className={`text-sm ${paymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Insufficient Balance Alert */}\r\n                    {selectedBundle && paymentMethod === \"wallet\" && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) && (\r\n                      <Alert variant=\"default\" className=\"border-destructive bg-white text-destructive\">\r\n                        <AlertCircle className=\"h-4 w-4\" />\r\n                        <AlertDescription className=\"text-sm\">\r\n                          <strong>Insufficient Balance:</strong> You need GH₵{(parseFloat(selectedBundle.basePrice) - (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)).toFixed(2)} more.\r\n                          <a href=\"/user/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                        </AlertDescription>\r\n                      </Alert>\r\n                    )}\r\n\r\n                    <Button\r\n                      className=\"w-full\"\r\n                      size=\"lg\"\r\n                      onClick={handleSinglePurchase}\r\n                      disabled={!selectedBundle || !phoneNumber || !paymentMethod || purchaseMutation.isPending || (paymentMethod === \"wallet\" && selectedBundle && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0))}\r\n                    >\r\n                      {purchaseMutation.isPending ? (\r\n                        <>\r\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                          Processing...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Smartphone className=\"mr-2 h-4 w-4\" />\r\n                          Purchase Bundle\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              {/* Bulk Purchase Tab */}\r\n              <TabsContent value=\"bulk\" className=\"space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                      <CardTitle>Bulk Purchase</CardTitle>\r\n                      <CardDescription>Enter phone numbers with GB amounts for {networkInfo?.name}</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <Label htmlFor=\"bulk-phones\">Beneficiary Numbers and GB Amounts</Label>\r\n                          {bulkPhoneNumbers.trim() && (\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              {bulkPhoneNumbers.split('\\n').filter(line => line.trim()).length} entries\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        <Textarea\r\n                          id=\"bulk-phones\"\r\n                          placeholder=\"0546591622 1&#10;0247064874 3&#10;0245696072 2&#10;233547897522 10&#10;...add as many as you need (no limit)\"\r\n                          rows={20}\r\n                          value={bulkPhoneNumbers}\r\n                          onChange={(e) => setBulkPhoneNumbers(e.target.value)}\r\n                          className=\"font-mono text-sm\"\r\n                        />\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          Enter one number per line with GB amount (e.g., \"0241234567 2\" for 2GB). \r\n                          Supports formats: 0241234567 or 233241234567 (no + sign). \r\n                          <strong className=\"text-green-600\">✓ No limit - add 100+ numbers!</strong>\r\n                          <br />\r\n                          All numbers must be for <strong>{networkInfo?.name}</strong> network.\r\n                          Valid prefixes: <strong>{networkKey ? getNetworkPrefixes(networkKey).join(\", \") : \"\"}</strong>\r\n                        </p>\r\n                      </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label className=\"text-black font-semibold\">Payment Method</Label>\r\n                      <div className=\"grid gap-3\">\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setBulkPaymentMethod(bulkPaymentMethod === \"wallet\" ? undefined : \"wallet\")}\r\n                            disabled={bulkTotal ? bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) : false}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              bulkPaymentMethod === \"wallet\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            } ${\r\n                              bulkTotal && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)\r\n                                ? \"opacity-50 cursor-not-allowed\"\r\n                                : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className={`h-5 w-5 ${bulkPaymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${bulkPaymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>Wallet Balance</div>\r\n                                <div className={`text-sm ${bulkPaymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Available: GH₵{stats?.walletBalance || '0.00'}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                          {bulkTotal && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-black text-white px-2 py-1 rounded font-semibold\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setBulkPaymentMethod(bulkPaymentMethod === \"paystack\" ? undefined : \"paystack\")}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              bulkPaymentMethod === \"paystack\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className={`h-5 w-5 ${bulkPaymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${bulkPaymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>Pay with MoMo</div>\r\n                                <div className={`text-sm ${bulkPaymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                      <Button\r\n                        className=\"w-full\"\r\n                        size=\"lg\"\r\n                        onClick={handleBulkPurchase}\r\n                        disabled={\r\n                          !bulkPhoneNumbers.trim() ||\r\n                          !bulkPaymentMethod ||\r\n                          bulkPurchaseMutation.isPending ||\r\n                          (bulkPaymentMethod === \"wallet\" && bulkTotal !== null && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0))\r\n                        }\r\n                      >\r\n                        {bulkPurchaseMutation.isPending ? (\r\n                          <>\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Upload className=\"mr-2 h-4 w-4\" />\r\n                            {bulkTotal\r\n                              ? `Purchase for GH₵${bulkTotal.total.toFixed(2)} (${bulkTotal.count} items)`\r\n                              : \"Purchase Data Bundles\"\r\n                            }\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    </CardContent>\r\n                  </Card>\r\n              </TabsContent>\r\n            </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Menu, Search, CheckCircle, XCircle, Clock, Layers, Filter, Download } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\nconst getStatusConfig = (status: string) => {\r\n  // Normalize status to match SkyTech conventions\r\n  const normalizedStatus = status.toLowerCase();\r\n  \r\n  switch (normalizedStatus) {\r\n    case 'completed':\r\n    case 'delivered':\r\n      return {\r\n        variant: 'default' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-emerald-600',\r\n        borderColor: 'border-emerald-500',\r\n        label: 'Completed'\r\n      };\r\n    case 'processing':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Layers,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-500',\r\n        borderColor: 'border-blue-400',\r\n        label: 'Processing'\r\n      };\r\n    case 'pending':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-amber-500',\r\n        borderColor: 'border-amber-400',\r\n        label: 'Pending'\r\n      };\r\n    case 'cancelled':\r\n    case 'failed':\r\n      return {\r\n        variant: 'destructive' as const,\r\n        icon: XCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-red-600',\r\n        borderColor: 'border-red-500',\r\n        label: status === 'failed' ? 'Failed' : 'Cancelled'\r\n      };\r\n    default:\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-slate-600',\r\n        borderColor: 'border-slate-500',\r\n        label: status.charAt(0).toUpperCase() + status.slice(1)\r\n      };\r\n  }\r\n};\r\n\r\nexport default function UserHistoryPage() {\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n\r\n  // Fetch transactions\r\n  const { data: transactions, isLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Filter transactions\r\n  const filteredTransactions = transactions?.filter((transaction: any) => {\r\n    const matchesSearch = searchQuery === \"\" || \r\n      transaction.productName.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      transaction.customerPhone.includes(searchQuery) ||\r\n      transaction.reference.toLowerCase().includes(searchQuery.toLowerCase());\r\n    \r\n    const matchesStatus = statusFilter === \"all\" || transaction.status === statusFilter;\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for order history</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Order History</h1>\r\n              <p className=\"text-sm text-muted-foreground\">View all your transactions</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Filters */}\r\n            <Card>\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                  <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search by product, phone, or reference...\"\r\n                      value={searchQuery}\r\n                      onChange={(e) => setSearchQuery(e.target.value)}\r\n                      className=\"pl-10\"\r\n                    />\r\n                  </div>\r\n                  <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                    <SelectTrigger className=\"w-full sm:w-[180px]\">\r\n                      <Filter className=\"h-4 w-4 mr-2\" />\r\n                      <SelectValue placeholder=\"Filter by status\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Status</SelectItem>\r\n                      <SelectItem value=\"completed\">Completed</SelectItem>\r\n                      <SelectItem value=\"processing\">Processing</SelectItem>\r\n                      <SelectItem value=\"pending\">Pending</SelectItem>\r\n                      <SelectItem value=\"failed\">Failed</SelectItem>\r\n                      <SelectItem value=\"cancelled\">Cancelled</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Transactions List */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Transaction History</CardTitle>\r\n                <CardDescription>\r\n                  {filteredTransactions?.length || 0} transaction(s) found\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <div className=\"flex justify-center py-12\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : filteredTransactions && filteredTransactions.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {filteredTransactions.map((transaction: any) => {\r\n                      const statusConfig = getStatusConfig(transaction.status);\r\n                      const StatusIcon = statusConfig.icon;\r\n                      const isBulkOrder = transaction.isBulkOrder;\r\n                      const phoneNumbers = transaction.phoneNumbers \r\n                        ? (typeof transaction.phoneNumbers === 'string' \r\n                            ? JSON.parse(transaction.phoneNumbers) \r\n                            : transaction.phoneNumbers) as Array<{phone: string, bundleName: string, dataAmount: string}>\r\n                        : undefined;\r\n\r\n                      return (\r\n                        <div\r\n                          key={transaction.id}\r\n                          className={`p-4 border rounded-lg ${statusConfig.bgColor} ${statusConfig.borderColor} text-white`}\r\n                        >\r\n                          <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <div className=\"flex flex-wrap items-center gap-2 mb-2\">\r\n                                <p className=\"font-medium text-sm md:text-base text-white\">{transaction.productName}</p>\r\n                                <Badge variant={statusConfig.variant} className=\"flex items-center gap-1 bg-white text-gray-800\">\r\n                                  <StatusIcon className=\"h-3 w-3\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                                {isBulkOrder && (\r\n                                  <Badge variant=\"secondary\" className=\"flex items-center gap-1 bg-gray-200 text-gray-800\">\r\n                                    <Layers className=\"h-3 w-3\" />\r\n                                    Bulk ({phoneNumbers?.length || 0})\r\n                                  </Badge>\r\n                                )}\r\n                              </div>\r\n\r\n                              <div className=\"text-xs md:text-sm text-gray-200 space-y-1\">\r\n                                {isBulkOrder && phoneNumbers ? (\r\n                                  <>\r\n                                    <p className=\"font-semibold text-white\">Recipients: {phoneNumbers.length} numbers</p>\r\n                                    <details className=\"cursor-pointer\">\r\n                                      <summary className=\"text-blue-300 hover:underline\">View all numbers</summary>\r\n                                      <div className=\"mt-2 ml-2 space-y-1 max-h-32 overflow-y-auto\">\r\n                                        {phoneNumbers.map((phoneObj, idx) => (\r\n                                          <p key={idx} className=\"font-mono text-xs text-gray-300\">{idx + 1}. {phoneObj.phone} - {phoneObj.bundleName} ({phoneObj.dataAmount})</p>\r\n                                        ))}\r\n                                      </div>\r\n                                    </details>\r\n                                  </>\r\n                                ) : (\r\n                                  <p className=\"text-gray-200\">Phone: {transaction.customerPhone}</p>\r\n                                )}\r\n                                {transaction.network && <p className=\"text-gray-200\">Network: {transaction.network.toUpperCase()}</p>}\r\n                                <p className=\"text-xs text-gray-300\">Ref: {transaction.reference}</p>\r\n                                <p className=\"text-xs text-gray-300\">\r\n                                  {new Date(transaction.createdAt).toLocaleDateString()} at {new Date(transaction.createdAt).toLocaleTimeString()}\r\n                                </p>\r\n                                {transaction.completedAt && (\r\n                                  <p className=\"text-green-300 text-xs\">\r\n                                    Completed: {new Date(transaction.completedAt).toLocaleDateString()} at {new Date(transaction.completedAt).toLocaleTimeString()}\r\n                                  </p>\r\n                                )}\r\n                                {transaction.failureReason && (\r\n                                  <p className=\"text-red-300 text-xs\">Reason: {transaction.failureReason}</p>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"text-left sm:text-right shrink-0\">\r\n                              <p className=\"font-medium text-lg text-white\">GH₵{transaction.amount}</p>\r\n                              {isBulkOrder && phoneNumbers && (\r\n                                <p className=\"text-xs text-gray-300\">\r\n                                  GH₵{(parseFloat(transaction.amount) / phoneNumbers.length).toFixed(2)} each\r\n                                </p>\r\n                              )}\r\n                              <Badge variant=\"outline\" className=\"mt-1 bg-white text-gray-800 border-white\">\r\n                                {transaction.paymentMethod === 'wallet' ? 'Wallet' : 'MoMo'}\r\n                              </Badge>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12\">\r\n                    <p className=\"text-muted-foreground\">No transactions found</p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { SupportChat } from \"@/components/user/support-chat\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Menu } from \"lucide-react\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n\r\nexport default function UserSupportPage() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for support</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Support Chat</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Get help from our support team</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            <SupportChat />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Menu, FileCheck, ShoppingCart, Plus } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport resultLogo from \"@assets/result_1765780772205.jpg\";\r\n\r\ninterface ResultCheckerStock {\r\n  type: string;\r\n  year: number;\r\n  price: number;\r\n  stock: number;\r\n}\r\n\r\nexport default function UserVouchersPage() {\r\n  const { user } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Fetch result checker stock\r\n  const { data: stockData, isLoading: stockLoading } = useQuery({\r\n    queryKey: [\"result-checker-stock\"],\r\n    queryFn: () => apiRequest(\"/api/result-checkers/stock\"),\r\n  });\r\n\r\n  // Fetch user stats for wallet balance\r\n  const { data: userStats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"user-stats\"],\r\n    queryFn: () => apiRequest(\"/api/user/stats\"),\r\n  });\r\n\r\n  const resultCheckers = stockData || [];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Vouchers</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Purchase result checkers and vouchers</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Wallet Balance */}\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold\">\r\n                  {statsLoading ? (\r\n                    <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    `GH₵${userStats?.walletBalance || 0}`\r\n                  )}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">Available for purchases</p>\r\n                <Link href=\"/user/wallet\">\r\n                  <Button variant=\"outline\" size=\"sm\" className=\"text-xs mt-3\">\r\n                    Top Up Wallet\r\n                  </Button>\r\n                </Link>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Result Checkers Section */}\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <img\r\n                    src={resultLogo}\r\n                    alt=\"Result Checkers\"\r\n                    className=\"w-12 h-12 object-contain rounded-lg\"\r\n                  />\r\n                  <div>\r\n                    <CardTitle>WAEC Result Checkers</CardTitle>\r\n                    <CardDescription>\r\n                      Purchase WAEC result checking vouchers for different years\r\n                    </CardDescription>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {stockLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                  </div>\r\n                ) : resultCheckers.length > 0 ? (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {resultCheckers.map((checker: ResultCheckerStock) => (\r\n                      <Card key={`${checker.type}-${checker.year}`} className=\"relative\">\r\n                        <CardHeader className=\"pb-3\">\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <CardTitle className=\"text-lg\">\r\n                              {checker.type.toUpperCase()} {checker.year}\r\n                            </CardTitle>\r\n                            <Badge variant={checker.stock > 0 ? \"default\" : \"destructive\"}>\r\n                              {checker.stock > 0 ? `${checker.stock} in stock` : \"Out of stock\"}\r\n                            </Badge>\r\n                          </div>\r\n                          <CardDescription>\r\n                            WAEC Result Checker Voucher\r\n                          </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                          <div className=\"space-y-3\">\r\n                            <div className=\"text-2xl font-bold text-primary\">\r\n                              GH₵{checker.price}\r\n                            </div>\r\n                            <Link href={`/checkout/result_checker/${checker.type}-${checker.year}`}>\r\n                              <Button\r\n                                className=\"w-full\"\r\n                                disabled={checker.stock === 0}\r\n                              >\r\n                                <FileCheck className=\"h-4 w-4 mr-2\" />\r\n                                {checker.stock > 0 ? \"Purchase Now\" : \"Out of Stock\"}\r\n                              </Button>\r\n                            </Link>\r\n                          </div>\r\n                        </CardContent>\r\n                      </Card>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    No result checkers available at the moment.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Other Vouchers Section - Placeholder for future vouchers */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Other Vouchers</CardTitle>\r\n                <CardDescription>\r\n                  More voucher types coming soon\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  <Plus className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\r\n                  <p>More voucher types will be available soon.</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Menu, User, Lock } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\n\r\nexport default function UserSettingsPage() {\r\n  const { user, refreshUser } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Profile update state\r\n  const [profileData, setProfileData] = useState({\r\n    name: user?.name || '',\r\n    email: user?.email || '',\r\n  });\r\n  const [profileLoading, setProfileLoading] = useState(false);\r\n\r\n  // Password update state\r\n  const [passwordData, setPasswordData] = useState({\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [passwordLoading, setPasswordLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setProfileData({\r\n        name: user.name || '',\r\n        email: user.email || '',\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  const handleProfileUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!profileData.name.trim()) {\r\n      toast({ title: 'Name is required', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    setProfileLoading(true);\r\n    try {\r\n      const response = await apiRequest('PUT', '/api/user/profile', {\r\n        name: profileData.name.trim(),\r\n        email: profileData.email.trim(),\r\n      });\r\n\r\n      await refreshUser();\r\n      toast({ title: 'Profile updated successfully' });\r\n    } catch (error: any) {\r\n      toast({ title: 'Failed to update profile', description: error.message, variant: 'destructive' });\r\n    } finally {\r\n      setProfileLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePasswordUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\r\n      toast({ title: 'Passwords do not match', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    if (passwordData.newPassword.length < 6) {\r\n      toast({ title: 'Password must be at least 6 characters', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    setPasswordLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.updateUser({\r\n        password: passwordData.newPassword\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      setPasswordData({ currentPassword: '', newPassword: '', confirmPassword: '' });\r\n      toast({ title: 'Password updated successfully' });\r\n    } catch (error: any) {\r\n      toast({ title: 'Failed to update password', description: error.message, variant: 'destructive' });\r\n    } finally {\r\n      setPasswordLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your account</SheetDescription>\r\n                  </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Settings</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Manage your account settings</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-2xl mx-auto space-y-6\">\r\n            <Tabs defaultValue=\"profile\" className=\"w-full\">\r\n              <TabsList className=\"grid w-full grid-cols-2\">\r\n                <TabsTrigger value=\"profile\" className=\"flex items-center gap-2\">\r\n                  <User className=\"h-4 w-4\" />\r\n                  Profile\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"security\" className=\"flex items-center gap-2\">\r\n                  <Lock className=\"h-4 w-4\" />\r\n                  Security\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"profile\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Profile Information</CardTitle>\r\n                    <CardDescription>Update your personal information</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <form onSubmit={handleProfileUpdate} className=\"space-y-4\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"name\">Full Name</Label>\r\n                        <Input\r\n                          id=\"name\"\r\n                          value={profileData.name}\r\n                          onChange={(e) => setProfileData(prev => ({ ...prev, name: e.target.value }))}\r\n                          placeholder=\"Enter your full name\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"email\">Email Address</Label>\r\n                        <Input\r\n                          id=\"email\"\r\n                          type=\"email\"\r\n                          value={profileData.email}\r\n                          onChange={(e) => setProfileData(prev => ({ ...prev, email: e.target.value }))}\r\n                          placeholder=\"Enter your email\"\r\n                        />\r\n                      </div>\r\n                      <Button type=\"submit\" disabled={profileLoading}>\r\n                        {profileLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        Update Profile\r\n                      </Button>\r\n                    </form>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"security\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Change Password</CardTitle>\r\n                    <CardDescription>Update your account password</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <form onSubmit={handlePasswordUpdate} className=\"space-y-4\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"newPassword\">New Password</Label>\r\n                        <Input\r\n                          id=\"newPassword\"\r\n                          type=\"password\"\r\n                          value={passwordData.newPassword}\r\n                          onChange={(e) => setPasswordData(prev => ({ ...prev, newPassword: e.target.value }))}\r\n                          placeholder=\"Enter new password\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"confirmPassword\">Confirm New Password</Label>\r\n                        <Input\r\n                          id=\"confirmPassword\"\r\n                          type=\"password\"\r\n                          value={passwordData.confirmPassword}\r\n                          onChange={(e) => setPasswordData(prev => ({ ...prev, confirmPassword: e.target.value }))}\r\n                          placeholder=\"Confirm new password\"\r\n                        />\r\n                      </div>\r\n                      <Button type=\"submit\" disabled={passwordLoading}>\r\n                        {passwordLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        Update Password\r\n                      </Button>\r\n                    </form>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n            </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { Card, CardContent } from \"@/components/ui/card\";\r\nimport { AlertCircle } from \"lucide-react\";\r\n\r\nexport default function NotFound() {\r\n  return (\r\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\r\n      <Card className=\"w-full max-w-md mx-4\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex mb-4 gap-2\">\r\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\r\n          </div>\r\n\r\n          <p className=\"mt-4 text-sm text-gray-600\">\r\n            Did you forget to add the page to the router?\r\n          </p>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useParams, useLocation } from \"wouter\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { PageLoader } from \"@/components/ui/loading-spinner\";\r\nimport { Store, Shield, MessageCircle } from \"lucide-react\";\r\nimport type { Agent } from \"@shared/schema\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport banner1 from \"@assets/banner1_1765774201032.jpeg\";\r\nimport banner2 from \"@assets/banner2_1765774201033.jpeg\";\r\nimport banner3 from \"@assets/banner3_1765774201030.jpeg\";\r\nimport { ROLE_LABELS } from \"@/lib/constants\";\r\n\r\nconst bannerImages = [banner1, banner2, banner3];\r\n\r\ninterface StorefrontData {\r\n  store: {\r\n    businessName: string;\r\n    businessDescription: string;\r\n    slug: string;\r\n    whatsappSupportLink?: string;\r\n    whatsappChannelLink?: string;\r\n    role: string;\r\n  };\r\n  dataBundles: Array<{\r\n    id: string;\r\n    name: string;\r\n    network: string;\r\n    dataAmount: string;\r\n    validity: string;\r\n    apiCode?: string;\r\n    isActive: boolean;\r\n    price: string;\r\n  }>;\r\n}\r\n\r\nexport default function StorefrontPage() {\r\n  const { role, slug } = useParams<{ role: string; slug: string }>();\r\n  const [, setLocation] = useLocation();\r\n  const [currentBanner, setCurrentBanner] = useState(0);\r\n\r\n  // Auto-rotate banner every 5 seconds\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrentBanner((prev) => (prev + 1) % bannerImages.length);\r\n    }, 5000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Store the agent slug in localStorage when visiting\r\n  useEffect(() => {\r\n    if (slug) {\r\n      localStorage.setItem(\"agentStore\", slug);\r\n    }\r\n  }, [slug]);\r\n\r\n  // Handle product navigation\r\n  const navigateToProduct = (network: string) => {\r\n    console.log(`Navigating to: /store/${role}/${slug}/${network}`);\r\n    setLocation(`/store/${role}/${slug}/${network}`);\r\n  };\r\n\r\n  const { data, isLoading, error } = useQuery<StorefrontData>({\r\n    queryKey: [`/api/store/${role}/${slug}`],\r\n    enabled: !!role && !!slug,\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <header className=\"border-b bg-white\">\r\n          <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Store className=\"h-6 w-6\" />\r\n              <span className=\"font-semibold\">Loading...</span>\r\n            </div>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n        <main className=\"flex-1\">\r\n          <PageLoader text=\"Loading store...\" />\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !data) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <header className=\"border-b bg-background\">\r\n          <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Store className=\"h-6 w-6\" />\r\n              <span className=\"font-semibold text-foreground\">Store Not Found</span>\r\n            </div>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <Store className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">Store Not Found</h2>\r\n              <p className=\"text-muted-foreground mb-4\">This store doesn't exist or is not available.</p>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { store } = data;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      {/* Storefront Header - Simple, no navigation to main app */}\r\n      <header className=\"border-b sticky top-0 z-50 bg-background\">\r\n        <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <h1 className=\"font-semibold text-lg text-foreground\">{store.businessName}</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <ThemeToggle />\r\n          </div>\r\n        </div>\r\n      </header>\r\n      \r\n      <main className=\"flex-1\">\r\n        {/* Hero Section with Banner */}\r\n        <section className=\"relative\" data-testid=\"banner-carousel\">\r\n          <div className=\"relative h-[300px] md:h-[400px]\">\r\n            {bannerImages.map((img, index) => (\r\n              <img\r\n                key={index}\r\n                src={img}\r\n                alt={`Banner ${index + 1}`}\r\n                className={`absolute inset-0 w-full h-full object-cover transition-opacity duration-500 ${\r\n                  index === currentBanner ? \"opacity-100\" : \"opacity-0\"\r\n                }`}\r\n                data-testid={`img-banner-${index + 1}`}\r\n              />\r\n            ))}\r\n            <div className=\"absolute inset-0 bg-black/50\" />\r\n            \r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"container mx-auto max-w-6xl text-center px-4\">\r\n                <p className=\"text-lg md:text-xl text-white/90 max-w-2xl mx-auto leading-relaxed\">\r\n                  {store.businessDescription || `Welcome to our store. Browse our selection of data bundles and result checkers.`}\r\n                </p>\r\n                <div className=\"flex items-center justify-center gap-2 mt-6 text-sm\">\r\n                  <Shield className=\"h-5 w-5 text-green-400\" />\r\n                  <span className=\"font-medium text-white/90\">Secure payments powered by Paystack</span>\r\n                </div>\r\n\r\n                {/* WhatsApp Support Links */}\r\n                {(store.whatsappSupportLink || store.whatsappChannelLink) && (\r\n                  <div className=\"flex items-center justify-center gap-4 mt-6\">\r\n                    {store.whatsappSupportLink && (\r\n                      <a\r\n                        href={store.whatsappSupportLink}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                      >\r\n                        <MessageCircle className=\"h-4 w-4\" />\r\n                        <span className=\"text-sm font-medium\">WhatsApp Support</span>\r\n                      </a>\r\n                    )}\r\n                    {store.whatsappChannelLink && (\r\n                      <a\r\n                        href={store.whatsappChannelLink}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                      >\r\n                        <MessageCircle className=\"h-4 w-4\" />\r\n                        <span className=\"text-sm font-medium\">WhatsApp Channel</span>\r\n                      </a>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2\">\r\n              {bannerImages.map((_, index) => (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => setCurrentBanner(index)}\r\n                  className={`w-3 h-3 rounded-full transition-colors ${\r\n                    index === currentBanner ? \"bg-white\" : \"bg-white/50\"\r\n                  }`}\r\n                  aria-label={`Go to banner ${index + 1}`}\r\n                  data-testid={`button-banner-dot-${index + 1}`}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Product Logos Section */}\r\n        <section className=\"py-12 px-4 bg-background\">\r\n          <div className=\"container mx-auto max-w-4xl\">\r\n            <h2 className=\"text-2xl font-bold text-center mb-8\">Browse Our Products</h2>\r\n            \r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n              {/* MTN Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('mtn')}\r\n              >\r\n                <img\r\n                  src={mtnLogo}\r\n                  alt=\"MTN Data Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">MTN Data Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy MTN data bundles.</p>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* Telecel Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('telecel')}\r\n              >\r\n                <img\r\n                  src={telecelLogo}\r\n                  alt=\"Telecel Data Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">Telecel Data Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy Telecel data bundles.</p>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* AT BIG TIME Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('at_bigtime')}\r\n              >\r\n                <img\r\n                  src={airteltigoLogo}\r\n                  alt=\"AT BIG TIME Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">AT BIG TIME Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy AT BIG TIME data bundles.</p>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* AT iShare Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('at_ishare')}\r\n              >\r\n                <img\r\n                  src={airteltigoLogo}\r\n                  alt=\"AT iShare Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">AT iShare Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy AT iShare data bundles.</p>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      {/* Simple Footer */}\r\n      <footer className=\"border-t py-8 px-4 bg-muted\">\r\n        <div className=\"container mx-auto max-w-6xl\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              © {new Date().getFullYear()} {store.businessName}. All rights reserved.\r\n            </p>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Developed by <a href=\"https://bm-portfolio-up2x.onrender.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline\">BlusMotif</a>\r\n            </p>\r\n            <div className=\"flex items-center justify-center gap-2 mt-2 text-xs text-muted-foreground\">\r\n              <Shield className=\"h-3 w-3\" />\r\n              <span>Secure payments • Fast delivery • 24/7 support</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n","import { Router, Switch, Route, useLocation } from \"wouter\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { queryClient } from \"./lib/queryClient\";\r\nimport { QueryClientProvider } from \"@tanstack/react-query\";\r\nimport { Toaster } from \"@/components/ui/toaster\";\r\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\r\nimport { ThemeProvider } from \"@/components/theme-provider\";\r\nimport { PWAInstallPrompt } from \"@/components/pwa-install-prompt\";\r\nimport { ProtectedRoute } from \"@/components/ProtectedRoute\";\r\nimport { ErrorBoundary } from \"@/components/error-boundary\";\r\nimport { ConnectionStatus } from \"@/components/connection-status\";\r\nimport { useSessionTimeout } from \"@/hooks/use-session-timeout\";\r\nimport { BreakModeGuard } from \"@/components/BreakModeGuard\";\r\nimport { AnnouncementPopup } from \"@/components/announcement-popup\";\r\nimport HomePage from \"@/pages/home\";\r\nimport LoginPage from \"@/pages/login\";\r\nimport RegisterPage from \"@/pages/register\";\r\nimport CheckoutPage from \"@/pages/checkout\";\r\nimport CheckoutSuccessPage from \"@/pages/checkout-success\";\r\nimport WalletTopupSuccessPage from \"@/pages/wallet-topup-success\";\r\nimport AgentRegisterPage from \"@/pages/agent/register\";\r\nimport AgentActivationCompletePage from \"@/pages/agent/activation-complete\";\r\nimport AgentUpgradePage from \"@/pages/agent/upgrade\";\r\nimport AgentDashboard from \"@/pages/agent/dashboard\";\r\nimport DealerDashboard from \"@/pages/dealer/dashboard\";\r\nimport SuperDealerDashboard from \"@/pages/super-dealer/dashboard\";\r\nimport MasterDashboard from \"@/pages/master/dashboard\";\r\nimport AgentTransactions from \"@/pages/agent/transactions\";\r\nimport AgentWithdrawals from \"@/pages/agent/withdrawals\";\r\nimport AgentStorefront from \"@/pages/agent/storefront\";\r\nimport AgentSettings from \"@/pages/agent/settings\";\r\nimport AgentSupportPage from \"@/pages/agent/support\";\r\nimport AgentBundlesPage from \"@/pages/agent/bundles\";\r\nimport AgentWalletPage from \"@/pages/agent/wallet\";\r\nimport AgentPricingPage from \"@/pages/agent/pricing\";\r\nimport DealerPricingPage from \"@/pages/dealer/pricing\";\r\nimport SuperDealerPricingPage from \"@/pages/super-dealer/pricing\";\r\nimport MasterPricingPage from \"@/pages/master/pricing\";\r\nimport ApiIntegrationsPage from \"@/pages/api-integrations\";\r\nimport AdminDashboard from \"@/pages/admin/dashboard\";\r\nimport AdminDataBundles from \"@/pages/admin/data-bundles\";\r\nimport AdminRoleBasePrices from \"@/pages/admin/role-base-prices\";\r\nimport AdminResultCheckers from \"@/pages/admin/result-checkers\";\r\nimport AdminTransactions from \"@/pages/admin/transactions\";\r\nimport AdminUsers from \"@/pages/admin/users\";\r\nimport AdminAgents from \"@/pages/admin/agents\";\r\nimport AdminWithdrawals from \"@/pages/admin/withdrawals\";\r\nimport AdminChatSupport from \"@/pages/admin/chat-support\";\r\nimport AdminSettings from \"@/pages/admin/settings\";\r\nimport AdminRankings from \"@/pages/admin/rankings\";\r\nimport AdminBreakSettings from \"@/pages/admin/break-settings\";\r\nimport AdminExternalApiProviders from \"@/pages/admin/external-api-providers\";\r\nimport AdminAnnouncements from \"@/pages/admin/announcements\";\r\nimport AdminGuides from \"@/pages/admin/guides\";\r\nimport PublicRankings from \"@/pages/public-rankings\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport AgentNetworkPurchasePage from \"@/pages/agent/network-purchase\";\r\nimport NetworkProductsPage from \"@/pages/products/network\";\r\nimport ResultCheckersPage from \"@/pages/products/result-checkers\";\r\nimport DataBundlesPage from \"@/pages/data-bundles\";\r\nimport UserDashboard from \"@/pages/user/dashboard\";\r\nimport WalletDashboard from \"@/pages/user/wallet\";\r\nimport UserBundlesPage from \"@/pages/user/bundles\";\r\nimport UserHistoryPage from \"@/pages/user/history\";\r\nimport UserSupportPage from \"@/pages/user/support\";\r\nimport UserVouchersPage from \"@/pages/user/vouchers\";\r\nimport UserSettingsPage from \"@/pages/user/settings\";\r\nimport NotFound from \"@/pages/not-found\";\r\n\r\n// Storefront\r\nimport StorefrontPage from \"@/pages/storefront\";\r\n\r\n// Component to restrict agent store users to storefront only\r\nfunction StorefrontGuard({ children }: { children: React.ReactNode }) {\r\n  const [location, navigate] = useLocation();\r\n  const hasChecked = useRef(false);\r\n  \r\n  useEffect(() => {\r\n    // Only run once on mount, not on every location change\r\n    if (hasChecked.current) return;\r\n    hasChecked.current = true;\r\n    \r\n    const agentStore = getAgentId();\r\n\r\n    // Allowed paths for storefront users: store, products, checkout, success pages, auth pages, agent pages\r\n    const allowedPaths = [\r\n      \"/store/\",\r\n      \"/products/\",\r\n      \"/checkout\",\r\n      \"/wallet/topup/success\",\r\n      \"/login\",\r\n      \"/register\",\r\n      \"/agent/register\",\r\n      \"/agent/activation-complete\",\r\n      \"/agent/upgrade\"\r\n    ];\r\n\r\n    const isAllowedPath = allowedPaths.some(path => location.startsWith(path));\r\n\r\n    // If user is in agent storefront context\r\n    if (agentStore) {\r\n      // If on root, immediately redirect to the agent store (fail-safe)\r\n      if (location === \"/\") {\r\n        console.log('Redirecting from root to agent store:', agentStore);\r\n        navigate(`/store/agent/${agentStore}`, { replace: true });\r\n        return;\r\n      }\r\n\r\n      // If trying to access non-allowed app routes, redirect back to the agent store\r\n      if (!isAllowedPath && !location.startsWith(`/store/agent/${agentStore}`)) {\r\n        console.log('Redirecting non-allowed path to agent store:', location, agentStore);\r\n        navigate(`/store/agent/${agentStore}`, { replace: true });\r\n      }\r\n    }\r\n  }, []); // Empty deps - only run once on mount\r\n  \r\n  return <>{children}</>;\r\n}\r\n\r\nfunction AppRouter() {\r\n  return (\r\n    <Router>\r\n      <SessionTimeoutManager />\r\n      <StorefrontGuard>\r\n        <Switch>\r\n      <Route path=\"/\" component={HomePage} />\r\n      <Route path=\"/data-bundles\" component={DataBundlesPage} />\r\n      <Route path=\"/products\" component={DataBundlesPage} />\r\n      <Route path=\"/products/result-checkers\" component={ResultCheckersPage} />\r\n      <Route path=\"/products/waec-result-checker\" component={ResultCheckersPage} />\r\n      <Route path=\"/products/:network\" component={NetworkProductsPage} />\r\n      <Route path=\"/login\" component={LoginPage} />\r\n      <Route path=\"/register\" component={RegisterPage} />\r\n      <Route path=\"/rankings\" component={PublicRankings} />\r\n      <Route path=\"/checkout/:productType/:productId/:year?\" component={CheckoutPage} />\r\n      <Route path=\"/checkout/success\" component={CheckoutSuccessPage} />\r\n      <Route path=\"/wallet/topup/success\" component={WalletTopupSuccessPage} />\r\n      <Route path=\"/agent/register\" component={AgentRegisterPage} />\r\n      <Route path=\"/agent/upgrade\" component={AgentUpgradePage} />\r\n      <Route path=\"/agent/activation-complete\" component={AgentActivationCompletePage} />\r\n      <ProtectedRoute path=\"/user/dashboard\" component={UserDashboard} />\r\n      <ProtectedRoute path=\"/user/wallet\" component={WalletDashboard} />\r\n      <ProtectedRoute path=\"/user/bundles/:network\" component={UserBundlesPage} />\r\n      <ProtectedRoute path=\"/user/settings\" component={UserSettingsPage} />\r\n      <ProtectedRoute path=\"/user/vouchers\" component={UserVouchersPage} />\r\n      <ProtectedRoute path=\"/user/history\" component={UserHistoryPage} />\r\n      <ProtectedRoute path=\"/user/support\" component={UserSupportPage} />\r\n      <ProtectedRoute path=\"/dealer/dashboard\" component={DealerDashboard} requiredRole=\"dealer\" />\r\n      <ProtectedRoute path=\"/super-dealer/dashboard\" component={SuperDealerDashboard} requiredRole=\"super_dealer\" />\r\n      <ProtectedRoute path=\"/master/dashboard\" component={MasterDashboard} requiredRole=\"master\" />\r\n      <ProtectedRoute path=\"/agent/dashboard\" component={AgentDashboard} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/transactions\" component={AgentTransactions} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/withdrawals\" component={AgentWithdrawals} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/storefront\" component={AgentStorefront} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/settings\" component={AgentSettings} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/support\" component={AgentSupportPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/bundles/:network\" component={AgentBundlesPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/wallet\" component={AgentWalletPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/pricing\" component={AgentPricingPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/dashboard/api-integrations\" component={ApiIntegrationsPage} requiredRoles={[\"user\", \"agent\", \"dealer\", \"super_dealer\", \"master\", \"admin\"]} />\r\n      <ProtectedRoute path=\"/dealer/pricing\" component={DealerPricingPage} requiredRole=\"dealer\" />\r\n      <ProtectedRoute path=\"/super-dealer/pricing\" component={SuperDealerPricingPage} requiredRole=\"super_dealer\" />\r\n      <ProtectedRoute path=\"/master/pricing\" component={MasterPricingPage} requiredRole=\"master\" />\r\n      <ProtectedRoute path=\"/admin\" component={AdminDashboard} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/rankings\" component={AdminRankings} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/data-bundles\" component={AdminDataBundles} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/role-base-prices\" component={AdminRoleBasePrices} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/result-checkers\" component={AdminResultCheckers} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/transactions\" component={AdminTransactions} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/users\" component={AdminUsers} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/agents\" component={AdminAgents} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/withdrawals\" component={AdminWithdrawals} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/chat-support\" component={AdminChatSupport} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/announcements\" component={AdminAnnouncements} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/guides\" component={AdminGuides} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/break-settings\" component={AdminBreakSettings} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/external-api-providers\" component={AdminExternalApiProviders} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/settings\" component={AdminSettings} requiredRole=\"admin\" />\r\n      <Route path=\"/store/:role/:slug\" component={StorefrontPage} />\r\n      <Route path=\"/store/:role/:slug/:network\" component={AgentNetworkPurchasePage} />\r\n      <Route component={NotFound} />\r\n    </Switch>\r\n    </StorefrontGuard>\r\n    </Router>\r\n  );\r\n}\r\n\r\nfunction SessionTimeoutManager() {\r\n  const [] = useLocation();\r\n\r\n  // Always call useSessionTimeout, but it will handle its own logic internally\r\n  useSessionTimeout();\r\n\r\n  return null;\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <ErrorBoundary>\r\n      <QueryClientProvider client={queryClient}>\r\n        <ThemeProvider>\r\n          <TooltipProvider>\r\n            <ConnectionStatus />\r\n            <PWAInstallPrompt />\r\n            <BreakModeGuard>\r\n              <AppRouter />\r\n            </BreakModeGuard>\r\n            <AnnouncementPopup />\r\n            <Toaster />\r\n          </TooltipProvider>\r\n        </ThemeProvider>\r\n      </QueryClientProvider>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { createRoot } from \"react-dom/client\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\n// Register service worker for PWA functionality\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', () => {\r\n    navigator.serviceWorker.register('/sw.js')\r\n      .then((registration) => {\r\n        console.log('Service Worker registered successfully:', registration.scope);\r\n      })\r\n      .catch((error) => {\r\n        console.log('Service Worker registration failed:', error);\r\n      });\r\n  });\r\n}\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nif (rootElement) {\r\n  createRoot(rootElement).render(\r\n    <App />\r\n  );\r\n}\r\n"],"names":["supabaseUrl","supabaseAnonKey","supabaseInstance","createClient","storageKey","storedSession","sessionData","event","session","supabase","cachedToken","tokenExpiry","parseError","res","text","json","getAuthHeaders","now","data","error","token","_a","err","clearAuthCache","apiRequest","method","url","body","authHeaders","fullUrl","message","getQueryFn","on401","queryKey","baseUrl","queryClient","QueryClient","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","state","action","toast","t","listeners","memoryState","listener","props","id","update","dismiss","open","useToast","setState","React.useState","React.useEffect","index","cn","inputs","twMerge","clsx","ToastProvider","ToastPrimitives.Provider","ToastViewport","React.forwardRef","className","ref","jsx","ToastPrimitives.Viewport","toastVariants","cva","Toast","variant","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","X","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","title","description","jsxs","TooltipProvider","TooltipPrimitive.Provider","TooltipContent","sideOffset","TooltipPrimitive.Content","initialState","ThemeProviderContext","createContext","ThemeProvider","children","defaultTheme","theme","setTheme","useState","storedTheme","useEffect","root","value","useTheme","context","useContext","logoLight","buttonVariants","Button","size","asChild","Comp","Slot","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showInstallButton","setShowInstallButton","isInstalled","setIsInstalled","dismissed","setDismissed","dismissedTime","handler","e","devTimer","handleInstallClick","outcome","handleDismiss","useAuth","useQueryClient","setSession","authLoading","setAuthLoading","loginError","setLoginError","registerError","setRegisterError","isLoginLoading","setIsLoginLoading","isRegisterLoading","setIsRegisterLoading","isLoggingOut","setIsLoggingOut","logoutInProgressRef","useRef","mounted","subscription","queryLoading","useQuery","user","agent","isAuthenticated","isLoading","email","password","name","watchdogTimer","LoadingSpinner","sizeClasses","Loader2","PageLoader","TableSkeleton","rows","_","i","ProtectedRoute","path","Component","requiredRole","requiredRoles","fallbackPath","Route","params","Redirect","alertVariants","Alert","AlertTitle","AlertDescription","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","ErrorBoundary","__publicField","errorInfo","AlertCircle","RefreshCw","ConnectionStatus","isOnline","setIsOnline","showOffline","setShowOffline","handleOnline","handleOffline","checkConnection","WifiOff","INACTIVITY_TIMEOUT","useSessionTimeout","logout","timeoutRef","warningRef","lastActivityRef","lastResetRef","resetTimer","useCallback","handleActivity","events","elapsed","BreakModeGuard","location","useLocation","authData","breakSettings","breakLoading","isAuthRoute","Lock","badgeVariants","Badge","parseMessageWithLinks","urlRegex","part","ExternalLink","AnnouncementPopup","isOpen","setIsOpen","dismissedAnnouncements","setDismissedAnnouncements","announcements","hasUndismissed","announcement","announcementId","newDismissed","handleClose","a","undismissedAnnouncements","Megaphone","Bell","ThemeToggle","handleToggle","newTheme","Sun","Moon","DropdownMenu","DropdownMenuPrimitive.Root","DropdownMenuTrigger","DropdownMenuPrimitive.Trigger","DropdownMenuSubTrigger","inset","DropdownMenuPrimitive.SubTrigger","ChevronRight","DropdownMenuSubContent","DropdownMenuPrimitive.SubContent","DropdownMenuContent","DropdownMenuPrimitive.Portal","DropdownMenuPrimitive.Content","DropdownMenuItem","DropdownMenuPrimitive.Item","DropdownMenuCheckboxItem","checked","DropdownMenuPrimitive.CheckboxItem","DropdownMenuPrimitive.ItemIndicator","Check","DropdownMenuRadioItem","DropdownMenuPrimitive.RadioItem","Circle","DropdownMenuLabel","DropdownMenuPrimitive.Label","DropdownMenuSeparator","DropdownMenuPrimitive.Separator","Avatar","AvatarPrimitive.Root","AvatarImage","AvatarPrimitive.Image","AvatarFallback","AvatarPrimitive.Fallback","Sheet","SheetPrimitive.Root","SheetTrigger","SheetPrimitive.Trigger","SheetPortal","SheetPrimitive.Portal","SheetOverlay","SheetPrimitive.Overlay","sheetVariants","SheetContent","side","SheetPrimitive.Content","SheetPrimitive.Close","SheetTitle","SheetPrimitive.Title","SheetDescription","SheetPrimitive.Description","APP_NAME","NETWORKS","RESULT_CHECKER_TYPES","WITHDRAWAL_STATUSES","formatCurrency","amount","num","formatDate","date","d","logoDark","AGENT_STORE_KEY","clearAgentStore","getAgentId","Dialog","DialogPrimitive.Root","DialogTrigger","DialogPrimitive.Trigger","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","DialogHeader","DialogFooter","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","Tabs","TabsPrimitive.Root","TabsList","TabsPrimitive.List","TabsTrigger","TabsPrimitive.Trigger","TabsContent","TabsPrimitive.Content","DEFAULT_GUIDES","WatchHowToPurchase","label","triggerVariant","triggerSize","setOpen","activeCategory","setActiveCategory","selectedGuide","setSelectedGuide","fetchedGuides","guidesByCategory","useMemo","apiGuides","fallback","guide","currentGuide","renderPlayer","embedUrl","videoId","_b","_c","Fragment","PlayCircle","Video","category","guides","g","CheckCircle2","Info","Header","mobileMenuOpen","setMobileMenuOpen","agentStore","getInitials","n","getDashboardLink","navigationItems","Home","Package","FileCheck","Link","item","Icon","isActive","Menu","LayoutDashboard","Store","LogOut","Footer","Shield","SiVisa","SiMastercard","Hero","subtitle","aboveButtons","badge","primaryButton","secondaryButton","images","showNavigation","background","overlay","height","align","currentImage","setCurrentImage","timer","prev","heightClasses","nextImage","prevImage","backgroundClasses","img","ChevronLeft","CountdownValue","displayValue","setDisplayValue","isVisible","setIsVisible","numericMatch","numeric","suffix","React.createRef","observer","entry","tempDiv","duration","startTime","animate","progress","easedProgress","currentValue","Stats","stats","columns","gridCols","stat","Features","features","feature","isLarge","CTA","titleSizeClasses","API_BASE_URL","api","endpoint","productId","year","reference","role","slug","autoLogoutInProgress","options","disableAutoLogout","fetchOptions","response","errorData","errorMessage","mtnLogo","telecelLogo","airteltigoLogo","resultLogo","banner1","banner2","banner3","Input","type","OrderTracker","searchQuery","setSearchQuery","setIsLoading","order","setOrder","handleSearch","getStatusIcon","status","deliveryStatus","CheckCircle","XCircle","Clock","getStatusBadge","Search","bannerImages","HomePage","resultCheckerStock","productCategories","sum","Zap","Headphones","DollarSign","Users","Smartphone","Award","getAgentCtaLink","getAgentCtaText","ArrowRight","cat","labelVariants","Label","LabelPrimitive.Root","Form","FormProvider","FormFieldContext","React.createContext","FormField","Controller","useFormField","fieldContext","React.useContext","itemContext","FormItemContext","getFieldState","formState","useFormContext","fieldState","FormItem","React.useId","FormLabel","formItemId","FormLabelWithoutFor","FormControl","formDescriptionId","formMessageId","FormDescription","FormMessage","loginSchema","z","LoginPage","setLocation","showPassword","setShowPassword","login","hasRedirected","setHasRedirected","form","useForm","zodResolver","onSubmit","ArrowLeft","field","Mail","EyeOff","Eye","registerSchema","RegisterPage","register","result","User","Phone","Separator","orientation","decorative","SeparatorPrimitive.Root","networkStyles","networkLabels","NetworkBadge","network","styles","RadioGroup","RadioGroupPrimitive.Root","RadioGroupItem","RadioGroupPrimitive.Item","RadioGroupPrimitive.Indicator","Select","SelectPrimitive.Root","SelectValue","SelectPrimitive.Value","SelectTrigger","SelectPrimitive.Trigger","SelectPrimitive.Icon","ChevronDown","SelectScrollUpButton","SelectPrimitive.ScrollUpButton","ChevronUp","SelectScrollDownButton","SelectPrimitive.ScrollDownButton","SelectContent","position","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectLabel","SelectPrimitive.Label","SelectItem","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","SelectPrimitive.ItemText","SelectSeparator","SelectPrimitive.Separator","NETWORK_PREFIXES","normalizePhoneNumber","phone","normalized","isValidPhoneLength","getNetworkPrefixes","validatePhoneNetwork","expectedNetwork","checkoutSchema","CheckoutPage","productType","useParams","isProcessing","setIsProcessing","agentSlug","isDataBundle","isResultChecker","bundle","bundleLoading","checkerInfo","checkerLoading","price","initializePaymentMutation","useMutation","payload","normalizedPhone","validation","prefixes","product","Wifi","CreditCard","provider","ShieldCheck","CheckoutSuccessPage","search","useSearch","paystackReference","paystackStatus","getReturnUrl","agentStorefront","getDashboardUrl","isAgentStorefrontPurchase","verificationComplete","setVerificationComplete","paymentFailed","setPaymentFailed","autoDownloadTriggered","setAutoDownloadTriggered","verifyResult","transaction","blob","link","copyToClipboard","statusConfig","effectiveStatus","config","StatusIcon","Copy","PhoneIcon","idx","WalletTopupSuccessView","attempts","query","verificationResult","isError","Wallet","WalletTopupSuccessContainer","setAttempts","WalletTopupSuccessPage","Textarea","Checkbox","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","agentRegisterSchema","val","AgentRegisterPage","showInfoDialog","setShowInfoDialog","registerMutation","handleInfoDialogChange","siteOrigin","Link2","AgentActivationCompletePage","setStatus","setErrorMessage","agentEmail","setAgentEmail","redirectCountdown","setRedirectCountdown","isMock","interval","c","verifyPayment","AgentUpgradePage","ScrollArea","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","ApiIntegrationsModal","onOpenChange","newKeyName","setNewKeyName","showCreateDialog","setShowCreateDialog","createdKey","setCreatedKey","copiedKey","setCopiedKey","apiKeys","createKeyMutation","newKey","deleteKeyMutation","keyId","handleCreateKey","handleDeleteKey","Code","Key","Plus","key","Trash2","sidebarNavItems","BarChart3","Settings","MessageCircle","AgentSidebarV2","onClose","_theme","showApiModal","setShowApiModal","rankData","profileData","unreadCount","isSupport","Trophy","StatCard","trend","trendLabel","PerformanceChart","performanceData","chartData","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","AgentDashboard","sidebarOpen","setSidebarOpen","statsLoading","statsError","displayProfit","setDisplayProfit","AgentSidebar","TrendingUp","ShoppingCart","DealerDashboard","transactions","transactionsLoading","VisuallyHidden","SuperDealerDashboard","Crown","MasterDashboard","Table","TableHeader","TableBody","TableFooter","TableRow","TableHead","TableCell","TableCaption","defaultStatusConfig","Layers","StatusBadge","AgentTransactions","statusFilter","setStatusFilter","typeFilter","setTypeFilter","searchTerm","setSearchTerm","filteredTransactions","tx","term","isBulkOrder","phoneNumbersRaw","phoneNumbers","isWalletTopup","Popover","PopoverTrigger","PopoverContent","withdrawalSchema","AgentWithdrawals","isRequestOpen","setIsRequestOpen","withdrawals","paymentMethods","requestMutation","balance","w","withdrawal","Building2","storefrontSchema","AgentStorefront","profileLoading","updateStoreMutation","copyStoreLink","Save","profileSchema","passwordSchema","AgentSettings","profile","profileForm","passwordForm","updateProfileMutation","updatePasswordMutation","onProfileSubmit","onPasswordSubmit","SupportChat","setMessage","chatId","setChatId","activeSupport","setActiveSupport","scrollAreaRef","chats","createChatMutation","chatData","openChat","sendMessageMutation","handleSendMessage","handleWhatsAppSupport","phoneNumber","messageText","handleLiveChatSupport","unreadAdminMessages","msg","messages","Send","AgentSupportPage","NetworkInfo","AgentBundlesPage","selectedBundle","setSelectedBundle","setPhoneNumber","paymentMethod","setPaymentMethod","bulkPhoneNumbers","setBulkPhoneNumbers","bulkPaymentMethod","setBulkPaymentMethod","bundles","bundlesLoading","apiNetwork","agentData","walletData","walletBalance","bulkTotal","lines","line","total","parts","gbAmount","matchingBundle","b","gbMatch","agentPrice","purchaseMutation","isBulk","variables","isInsufficientBalance","bulkPurchaseMutation","totalAmount","basePrice","markup","handleSinglePurchase","handleBulkPurchase","parsedData","phoneStr","networkInfo","orderItems","effectivePrice","Upload","topupSchema","WalletTopup","userStats","topupMutation","quickAmounts","getStatusConfig","AgentWalletPage","ArrowDownRight","AgentPricingPage","priceChanges","setPriceChanges","pricing","updateMutation","prices","getBundleName","bundleId","getCurrentPrice","existing","p","changes","handlePriceChange","current","numValue","profit","sellingPrice","handleSave","hasUnsavedChanges","hasChanges","DealerPricingPage","selectedPlan","setSelectedPlan","plan","SuperDealerPricingPage","MasterPricingPage","UserCircle","AlertTriangle","AdminSidebar","isChatSupport","History","UserSidebar","Switch","SwitchPrimitives.Root","SwitchPrimitives.Thumb","AlertDialog","AlertDialogPrimitive.Root","AlertDialogTrigger","AlertDialogPrimitive.Trigger","AlertDialogPortal","AlertDialogPrimitive.Portal","AlertDialogOverlay","AlertDialogPrimitive.Overlay","AlertDialogContent","AlertDialogPrimitive.Content","AlertDialogHeader","AlertDialogFooter","AlertDialogTitle","AlertDialogPrimitive.Title","AlertDialogDescription","AlertDialogPrimitive.Description","AlertDialogAction","AlertDialogPrimitive.Action","AlertDialogCancel","AlertDialogPrimitive.Cancel","ApiKeysPage","setApiKeys","loading","setLoading","creating","setCreating","showCreatedKey","setShowCreatedKey","visibleKeys","setVisibleKeys","fetchApiKeys","createApiKey","toggleApiKey","keys","deleteApiKey","updatePermissions","permissions","maskApiKey","toggleKeyVisibility","newSet","getPermissions","renderSidebar","apiKey","PermissionsEditor","Webhook","onSave","localPermissions","setLocalPermissions","permissionOptions","option","AdminDashboard","recentTransactions","topCustomers","rankingsLoading","analyticsData","analyticsLoading","getRankIcon","Medal","customer","AdminDataBundles","isCreateOpen","setIsCreateOpen","editingBundle","setEditingBundle","roleBasePrices","createMutation","deleteMutation","getRoleBasePrice","BundleForm","Pencil","formData","setFormData","handleSubmit","processedData","AdminRoleBasePrices","editingPrice","setEditingPrice","getRoleLabel","PriceForm","priceNum","AdminResultCheckers","isBulkAddOpen","setIsBulkAddOpen","isEditOpen","setIsEditOpen","editingChecker","setEditingChecker","selectedType","setSelectedType","selectedYear","setSelectedYear","checkers","stockSummary","bulkAddMutation","headers","filteredCheckers","checker","currentYear","years","totalStock","acc","s","availableStock","soldStock","handleEdit","handleDelete","BulkAddForm","EditForm","updates","y","uploadedFile","setUploadedFile","handleFileChange","file","SortableTableHead","sortField","sortDirection","onSort","AdminTransactions","editingDeliveryStatus","setEditingDeliveryStatus","deliveryStatusValue","setDeliveryStatusValue","exportPaymentStatus","setExportPaymentStatus","setSortField","setSortDirection","expandedResultCheckers","setExpandedResultCheckers","resultCheckersData","setResultCheckersData","updateDeliveryStatusMutation","transactionId","toggleResultCheckerExpand","newExpanded","exportTransactionsMutation","csvContent","convertToCSV","downloadCSV","handleSort","sortedTransactions","aValue","bValue","csvRows","row","values","header","stringValue","filename","handleEditDeliveryStatus","currentStatus","handleSaveDeliveryStatus","handleCancelEdit","Download","bundleName","lower","isExpanded","checkerData","quantity","Edit","AdminUsers","roleFilter","setRoleFilter","deleteUserId","setDeleteUserId","deleteInactiveDays","setDeleteInactiveDays","showDeleteInactiveDialog","setShowDeleteInactiveDialog","editedRoles","setEditedRoles","users","deleteInactiveMutation","days","updateRoleMutation","filteredUsers","roleMatch","searchMatch","u","newRole","newEdited","ShoppingBag","whatsappSchema","AdminAgents","deleteAgentId","setDeleteAgentId","editAgentId","setEditAgentId","whatsappForm","agents","updateWhatsappMutation","filteredAgents","AdminWithdrawals","filteredWithdrawals","actionMutation","handleApprove","handleReject","handleMarkPaid","Banknote","AdminChatSupport","selectedChatId","setSelectedChatId","filter","setFilter","scrollRef","assignChatMutation","closeChatMutation","unreadUserMessages","handleKeyPress","chat","AdminSettings","settings","setSettings","setUsers","selectedUser","setSelectedUser","credentialForm","setCredentialForm","announcementForm","setAnnouncementForm","setAnnouncements","settingsData","usersData","announcementsData","updateSettingMutation","previousSettings","old","setting","previousMap","updateCredentialsMutation","userId","createAnnouncementMutation","updateAnnouncementMutation","deleteAnnouncementMutation","settingsMap","handleSettingChange","handleSaveSetting","handleUserSelect","handleUpdateCredentials","handleCreateAnnouncement","handleToggleAnnouncement","handleDeleteAnnouncement","AdminRankings","AdminBreakSettings","isEnabled","setIsEnabled","AdminExternalApiProviders","providers","setProviders","dialogOpen","setDialogOpen","editingProvider","setEditingProvider","isSaving","setIsSaving","testingProvider","setTestingProvider","setForm","showSecrets","setShowSecrets","loadProviders","resetForm","openEditDialog","handleSetDefault","testProvider","toggleSecretVisibility","providerId","Star","TestTube","StarOff","AdminAnnouncements","newAnnouncement","setNewAnnouncement","deleteAnnouncementId","setDeleteAnnouncementId","toggleMutation","handleCreate","activeAnnouncements","inactiveAnnouncements","AdminGuides","newGuide","setNewGuide","deleteGuideId","setDeleteGuideId","v","PublicRankings","singleOrderSchema","bulkOrderSchema","phoneValid","gbValid","AgentNetworkPurchasePage","selectedBundleId","setSelectedBundleId","orderType","setOrderType","isSubmittingRef","handlePopState","info","storeData","agentLoading","dataBundles","filteredBundles","sortedBundles","singleForm","bulkForm","bulkData","bulkTotalAmount","NetworkProductsPage","normalizedNetwork","transformedNetwork","PublicPurchaseFlow","setPhone","bulkPhones","setBulkPhones","scrollToTopQuick","opts","_d","priceA","priceB","l","invalidCount","gb","match","m","checkoutMutation","handleSingle","handleBulk","parsed","it","UnifiedResultCheckerFlow","selectedChecker","setSelectedChecker","setQuantity","paymentSuccess","setPaymentSuccess","successData","setSuccessData","stockLoading","selectedCheckerData","unitPrice","totalPrice","hasInsufficientBalance","handleCheckerChange","handleQuantityChange","newQuantity","maxQuantity","generatePDF","doc","jsPDF","yPosition","pageHeight","margin","lineHeight","pinsArray","authUrl","shortfall","Minus","ResultCheckersPage","products","DataBundlesPage","UserDashboard","WalletDashboard","selectedTab","setSelectedTab","allTransactions","walletTopups","walletPayments","ArrowUpRight","Calendar","isTopup","isWalletPayment","UserBundlesPage","networkKey","currentBundleData","bundleGB","UserHistoryPage","matchesSearch","matchesStatus","Filter","phoneObj","UserSupportPage","UserVouchersPage","stockData","resultCheckers","UserSettingsPage","refreshUser","setProfileData","setProfileLoading","passwordData","setPasswordData","passwordLoading","setPasswordLoading","handleProfileUpdate","handlePasswordUpdate","NotFound","StorefrontPage","currentBanner","setCurrentBanner","navigateToProduct","store","StorefrontGuard","navigate","hasChecked","isAllowedPath","AppRouter","Router","SessionTimeoutManager","ApiIntegrationsPage","App","QueryClientProvider","registration","rootElement","createRoot"],"mappings":"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"}