{"version":3,"file":"index.C_4QSTkv.js","sources":["../../../client/src/lib/supabaseClient.ts","../../../client/src/lib/queryClient.ts","../../../client/src/hooks/use-toast.ts","../../../client/src/lib/utils.ts","../../../client/src/components/ui/toast.tsx","../../../client/src/components/ui/toaster.tsx","../../../client/src/components/ui/tooltip.tsx","../../../client/src/components/theme-provider.tsx","../../../client/assets/logo_1765774201026.png","../../../client/src/components/ui/button.tsx","../../../client/src/components/pwa-install-prompt.tsx","../../../client/src/hooks/use-auth.ts","../../../client/src/components/ui/loading-spinner.tsx","../../../client/src/components/ProtectedRoute.tsx","../../../client/src/components/ui/alert.tsx","../../../client/src/components/ui/card.tsx","../../../client/src/components/error-boundary.tsx","../../../client/src/components/connection-status.tsx","../../../client/src/hooks/use-session-timeout.ts","../../../client/src/components/BreakModeGuard.tsx","../../../client/src/components/ui/badge.tsx","../../../client/src/components/announcement-popup.tsx","../../../client/src/components/theme-toggle.tsx","../../../client/src/components/ui/dropdown-menu.tsx","../../../client/src/components/ui/avatar.tsx","../../../client/src/components/ui/sheet.tsx","../../../client/src/lib/constants.ts","../../../client/assets/darkmode-icon.png","../../../client/src/lib/store-context.ts","../../../client/src/components/ui/dialog.tsx","../../../client/src/components/ui/tabs.tsx","../../../client/src/components/watch-how-to-purchase.tsx","../../../client/src/components/layout/header.tsx","../../../client/src/components/layout/footer.tsx","../../../client/src/components/ui/hero.tsx","../../../client/src/components/ui/stats.tsx","../../../client/src/components/ui/features.tsx","../../../client/src/components/ui/cta.tsx","../../../client/src/lib/api.ts","../../../client/assets/mtn_1765780772203.jpg","../../../client/assets/telecel_1765780772206.jpg","../../../client/assets/at_1765780772206.jpg","../../../client/assets/result_1765780772205.jpg","../../../client/assets/banner1_1765774201032.jpeg","../../../client/assets/banner2_1765774201033.jpeg","../../../client/assets/banner3_1765774201030.jpeg","../../../client/src/components/ui/input.tsx","../../../client/src/components/order-tracker.tsx","../../../client/src/pages/home.tsx","../../../client/src/components/ui/label.tsx","../../../client/src/components/ui/form.tsx","../../../client/src/pages/login.tsx","../../../client/src/pages/register.tsx","../../../client/src/components/ui/separator.tsx","../../../client/src/components/products/network-badge.tsx","../../../client/src/components/ui/radio-group.tsx","../../../client/src/components/ui/select.tsx","../../../client/src/lib/network-validator.ts","../../../client/src/pages/checkout.tsx","../../../client/src/pages/checkout-success.tsx","../../../client/src/pages/WalletTopupSuccessView.tsx","../../../client/src/pages/WalletTopupSuccessContainer.tsx","../../../client/src/pages/wallet-topup-success.tsx","../../../client/src/components/ui/textarea.tsx","../../../client/src/components/ui/checkbox.tsx","../../../client/src/pages/agent/register.tsx","../../../client/src/pages/agent/activation-complete.tsx","../../../client/src/pages/agent/upgrade.tsx","../../../client/src/components/ui/scroll-area.tsx","../../../client/src/components/api-integrations-modal.tsx","../../../client/src/components/layout/agent-sidebar-v2.tsx","../../../client/src/components/ui/stat-card.tsx","../../../client/src/pages/agent/dashboard.tsx","../../../client/src/pages/dealer/dashboard.tsx","../../../client/src/pages/super-dealer/dashboard.tsx","../../../client/src/pages/master/dashboard.tsx","../../../client/src/components/ui/table.tsx","../../../client/src/components/ui/status-badge.tsx","../../../client/src/pages/agent/transactions.tsx","../../../client/src/pages/agent/withdrawals.tsx","../../../client/src/pages/agent/storefront.tsx","../../../client/src/pages/agent/settings.tsx","../../../client/src/components/user/support-chat.tsx","../../../client/src/pages/agent/support.tsx","../../../client/src/pages/agent/bundles.tsx","../../../client/src/components/user/wallet-topup.tsx","../../../client/src/pages/agent/wallet.tsx","../../../client/src/pages/agent/pricing.tsx","../../../client/src/pages/dealer/pricing.tsx","../../../client/src/pages/super-dealer/pricing.tsx","../../../client/src/pages/master/pricing.tsx","../../../client/src/components/layout/admin-sidebar.tsx","../../../client/src/components/layout/user-sidebar.tsx","../../../client/src/components/ui/alert-dialog.tsx","../../../client/src/pages/api-integrations.tsx","../../../client/src/pages/api-documentation.tsx","../../../client/src/pages/admin/dashboard.tsx","../../../client/src/components/ui/switch.tsx","../../../client/src/pages/admin/data-bundles.tsx","../../../client/src/pages/admin/role-base-prices.tsx","../../../client/src/pages/admin/result-checkers.tsx","../../../client/src/pages/admin/transactions.tsx","../../../client/src/pages/admin/users.tsx","../../../client/src/pages/admin/agents.tsx","../../../client/src/pages/admin/withdrawals.tsx","../../../client/src/pages/admin/chat-support.tsx","../../../client/src/pages/admin/settings.tsx","../../../client/src/pages/admin/rankings.tsx","../../../client/src/pages/admin/break-settings.tsx","../../../client/src/pages/admin/external-api-providers.tsx","../../../client/src/pages/admin/announcements.tsx","../../../client/src/pages/admin/guides.tsx","../../../client/src/pages/admin/manual-topup.tsx","../../../client/src/pages/public-rankings.tsx","../../../client/src/pages/agent/network-purchase.tsx","../../../client/src/pages/products/network.tsx","../../../client/src/components/products/unified-result-checker-flow.tsx","../../../client/src/pages/products/result-checkers.tsx","../../../client/src/pages/data-bundles.tsx","../../../client/src/pages/user/dashboard.tsx","../../../client/src/pages/user/wallet.tsx","../../../client/src/pages/user/bundles.tsx","../../../client/src/pages/user/history.tsx","../../../client/src/pages/user/support.tsx","../../../client/src/pages/user/vouchers.tsx","../../../client/src/pages/user/settings.tsx","../../../client/src/pages/not-found.tsx","../../../client/src/pages/storefront.tsx","../../../client/src/App.tsx","../../../client/src/main.tsx"],"sourcesContent":["import { createClient, AuthChangeEvent, Session } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\r\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('Supabase environment variables are not configured. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in your .env file.');\r\n}\r\n\r\n// Singleton pattern to prevent multiple client instances\r\nlet supabaseInstance: any = null;\r\n\r\nif (!supabaseInstance) {\r\n  supabaseInstance = createClient(supabaseUrl, supabaseAnonKey, {\r\n    auth: {\r\n      persistSession: true,\r\n      autoRefreshToken: true,\r\n      detectSessionInUrl: true,\r\n      // Persist sessions across browser restarts so API requests keep the token\r\n      // Use localStorage for better persistence\r\n      storage: window.localStorage,\r\n    },\r\n  });\r\n\r\n  // Clear potentially invalid sessions on initialization\r\n  const storageKey = `sb-${supabaseUrl.split('//')[1].split('.')[0]}-auth-token`;\r\n  const storedSession = localStorage.getItem(storageKey);\r\n  if (storedSession) {\r\n    try {\r\n      const sessionData = JSON.parse(storedSession);\r\n      // Check if access token exists and hasn't expired\r\n      if (!sessionData.access_token || (sessionData.expires_at && sessionData.expires_at * 1000 < Date.now())) {\r\n        console.warn('Clearing expired session data');\r\n        localStorage.removeItem(storageKey);\r\n      }\r\n    } catch (e) {\r\n      console.warn('Clearing invalid session data');\r\n      localStorage.removeItem(storageKey);\r\n    }\r\n  }\r\n\r\n  // Add global auth state change handler for logging only\r\n  supabaseInstance.auth.onAuthStateChange(async (event: AuthChangeEvent, session: Session | null) => {\r\n    // Only clear storage if explicitly signed out, don't interfere with token refresh\r\n    if (event === 'SIGNED_OUT' && !session) {\r\n      console.log('User signed out, clearing local storage');\r\n      localStorage.removeItem(storageKey);\r\n    }\r\n  });\r\n}\r\n\r\nexport const supabase = supabaseInstance;","import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\r\nimport { supabase } from \"./supabaseClient\";\r\n\r\n/* --------------------------------------------------\r\n   Helpers\r\n-------------------------------------------------- */\r\n\r\nlet cachedToken: string | null = null;\r\nlet tokenExpiry: number | null = null;\r\n\r\nasync function parseError(res: Response) {\r\n  try {\r\n    const text = await res.text();\r\n    if (!text) return res.statusText;\r\n\r\n    try {\r\n      const json = JSON.parse(text);\r\n      return json.error || json.message || text;\r\n    } catch {\r\n      return text;\r\n    }\r\n  } catch {\r\n    return res.statusText;\r\n  }\r\n}\r\n\r\nasync function getAuthHeaders(): Promise<Record<string, string>> {\r\n  const now = Date.now();\r\n\r\n  // Use cached token if it's still valid (expires in 5 minutes)\r\n  if (cachedToken && tokenExpiry && now < tokenExpiry) {\r\n    return cachedToken ? { Authorization: `Bearer ${cachedToken}` } : {};\r\n  }\r\n\r\n  try {\r\n    const { data, error } = await supabase.auth.getSession();\r\n    if (error) {\r\n      console.warn('Session error in getAuthHeaders:', error);\r\n      // Clear cache on error\r\n      cachedToken = null;\r\n      tokenExpiry = null;\r\n      return {};\r\n    }\r\n    const token = data.session?.access_token;\r\n\r\n    // Cache the token for 5 minutes\r\n    cachedToken = token || null;\r\n    tokenExpiry = token ? now + (5 * 60 * 1000) : null;\r\n\r\n    return token\r\n      ? { Authorization: `Bearer ${token}` }\r\n      : {};\r\n  } catch (err) {\r\n    console.error('Failed to get session in getAuthHeaders:', err);\r\n    // Clear cache on error\r\n    cachedToken = null;\r\n    tokenExpiry = null;\r\n    return {};\r\n  }\r\n}\r\n\r\n// Export function to clear cached token (useful during logout)\r\nexport function clearAuthCache() {\r\n  cachedToken = null;\r\n  tokenExpiry = null;\r\n}\r\n\r\n/* --------------------------------------------------\r\n   Fetch wrapper (mutations & manual requests)\r\n-------------------------------------------------- */\r\n\r\nexport async function apiRequest<T = unknown>(\r\n  method: string,\r\n  url: string,\r\n  body?: unknown\r\n): Promise<T> {\r\n  const authHeaders = await getAuthHeaders();\r\n\r\n  // In development, use the full backend URL\r\n  const baseUrl = import.meta.env.DEV ? 'http://localhost:10000' : '';\r\n  const fullUrl = url.startsWith('http') ? url : `${baseUrl}${url}`;\r\n\r\n  const res = await fetch(fullUrl, {\r\n    method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...authHeaders,\r\n    },\r\n    body: body ? JSON.stringify(body) : undefined,\r\n    credentials: \"include\",\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const message = await parseError(res);\r\n    throw new Error(message);\r\n  }\r\n\r\n  const contentType = res.headers.get(\"content-type\") || \"\";\r\n  if (contentType.includes(\"application/json\")) {\r\n    return res.json();\r\n  }\r\n\r\n  // Fallback for unexpected HTML/text responses\r\n  const text = await res.text();\r\n  throw new Error(text || \"Unexpected non-JSON response from server\");\r\n}\r\n\r\n/* --------------------------------------------------\r\n   React Query default fetcher\r\n-------------------------------------------------- */\r\n\r\ntype UnauthorizedBehavior = \"throw\" | \"returnNull\";\r\n\r\nexport const getQueryFn =\r\n  <T>({ on401 }: { on401: UnauthorizedBehavior }): QueryFunction<T> =>\r\n  async ({ queryKey }) => {\r\n    const authHeaders = await getAuthHeaders();\r\n\r\n    // In development, use the full backend URL\r\n    const baseUrl = import.meta.env.DEV ? 'http://localhost:10000' : '';\r\n    const url = queryKey[0] as string;\r\n    const fullUrl = url.startsWith('http') ? url : `${baseUrl}${url}`;\r\n\r\n    const res = await fetch(fullUrl, {\r\n      headers: {\r\n        ...authHeaders,\r\n      },\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (res.status === 401 && on401 === \"returnNull\") {\r\n      return null as T;\r\n    }\r\n\r\n    if (!res.ok) {\r\n      const message = await parseError(res);\r\n      throw new Error(message);\r\n    }\r\n\r\n    const contentType = res.headers.get(\"content-type\") || \"\";\r\n    if (contentType.includes(\"application/json\")) {\r\n      return res.json();\r\n    }\r\n\r\n    const text = await res.text();\r\n    throw new Error(text || \"Unexpected non-JSON response from server\");\r\n  };\r\n\r\n/* --------------------------------------------------\r\n   Query Client\r\n-------------------------------------------------- */\r\n\r\nexport const queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      queryFn: getQueryFn({ on401: \"throw\" }),\r\n\r\n      // ✅ sane defaults (NO request storms)\r\n      staleTime: 60 * 1000,          // 1 minute\r\n      gcTime: 5 * 60 * 1000,         // 5 minutes\r\n      retry: false,\r\n      refetchOnWindowFocus: false,\r\n      refetchOnReconnect: false,\r\n    },\r\n    mutations: {\r\n      retry: false,\r\n    },\r\n  },\r\n});\r\n","import * as React from \"react\"\r\n\r\nimport type {\r\n  ToastActionElement,\r\n  ToastProps,\r\n} from \"@/components/ui/toast\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n","import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n","import * as React from \"react\"\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ToastProvider = ToastPrimitives.Provider\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-white text-black dark:bg-black dark:text-white\",\r\n        destructive:\r\n          \"destructive group border-destructive bg-red-500 text-white dark:bg-red-700 dark:text-white\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nToast.displayName = ToastPrimitives.Root.displayName\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastAction.displayName = ToastPrimitives.Action.displayName\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <X className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n))\r\nToastClose.displayName = ToastPrimitives.Close.displayName\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastTitle.displayName = ToastPrimitives.Title.displayName\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastDescription.displayName = ToastPrimitives.Description.displayName\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n}\r\n","import { useToast } from \"@/hooks/use-toast\"\r\nimport {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n} from \"@/components/ui/toast\"\r\n\r\nexport function Toaster() {\r\n  const { toasts } = useToast()\r\n\r\n  return (\r\n    <ToastProvider>\r\n      {toasts.map(function ({ id, title, description, action, ...props }) {\r\n        return (\r\n          <Toast key={id} {...props}>\r\n            <div className=\"grid gap-1\">\r\n              {title && <ToastTitle>{title}</ToastTitle>}\r\n              {description && (\r\n                <ToastDescription>{description}</ToastDescription>\r\n              )}\r\n            </div>\r\n            {action}\r\n            <ToastClose />\r\n          </Toast>\r\n        )\r\n      })}\r\n      <ToastViewport />\r\n    </ToastProvider>\r\n  )\r\n}\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n","import React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\ntype Theme = \"dark\" | \"light\";\r\n\r\ntype ThemeProviderProps = {\r\n  children: React.ReactNode;\r\n  defaultTheme?: Theme;\r\n  storageKey?: string;\r\n};\r\n\r\ntype ThemeProviderState = {\r\n  theme: Theme;\r\n  setTheme: (theme: Theme) => void;\r\n};\r\n\r\nconst initialState: ThemeProviderState = {\r\n  theme: \"light\",\r\n  setTheme: () => null,\r\n};\r\n\r\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState);\r\n\r\nexport function ThemeProvider({\r\n  children,\r\n  defaultTheme = \"light\",\r\n  storageKey = \"app-theme\",\r\n  ...props\r\n}: ThemeProviderProps) {\r\n  const [theme, setTheme] = useState<Theme>(() => {\r\n    try {\r\n      if (typeof window !== \"undefined\" && window.localStorage) {\r\n        const storedTheme = localStorage.getItem(storageKey) as Theme;\r\n        // Convert legacy \"system\" theme to \"light\"\r\n        if (storedTheme === \"system\") {\r\n          localStorage.setItem(storageKey, \"light\");\r\n          return \"light\";\r\n        }\r\n        return storedTheme || defaultTheme;\r\n      }\r\n      return defaultTheme;\r\n    } catch (error) {\r\n      console.error(\"Error accessing localStorage:\", error);\r\n      return defaultTheme;\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const root = window.document.documentElement;\r\n\r\n    root.classList.remove(\"light\", \"dark\");\r\n    root.classList.add(theme);\r\n    \r\n    console.log(\"Applied theme:\", theme, \"Classes on root:\", root.classList.toString());\r\n  }, [theme]);\r\n\r\n  const value = {\r\n    theme,\r\n    setTheme: (theme: Theme) => {\r\n      try {\r\n        console.log(\"Setting theme to:\", theme);\r\n        if (typeof window !== \"undefined\" && window.localStorage) {\r\n          localStorage.setItem(storageKey, theme);\r\n          console.log(\"Saved theme to localStorage:\", theme);\r\n        }\r\n        setTheme(theme);\r\n      } catch (error) {\r\n        console.error(\"Error setting theme:\", error);\r\n        setTheme(theme);\r\n      }\r\n    },\r\n  };\r\n\r\n  return (\r\n    <ThemeProviderContext.Provider {...props} value={value}>\r\n      {children}\r\n    </ThemeProviderContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeProviderContext);\r\n\r\n  if (context === undefined)\r\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\r\n\r\n  return context;\r\n};\r\n","export default \"__VITE_ASSET__DwTjlcR1__\"","import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-yellow-500 dark:text-white text-black shadow-sm hover:shadow-md hover:bg-yellow-600 active:scale-[0.98]\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground shadow-sm hover:shadow-md hover:bg-destructive/90 active:scale-[0.98]\",\r\n        outline:\r\n          \"border border-yellow-500 bg-background text-yellow-700 shadow-sm hover:bg-yellow-50 hover:text-yellow-800 active:scale-[0.98]\",\r\n        secondary:\r\n          \"bg-yellow-400 dark:text-white text-black shadow-sm hover:shadow-md hover:bg-yellow-500 active:scale-[0.98]\",\r\n        ghost:\r\n          \"hover:bg-accent hover:text-accent-foreground active:scale-[0.98]\",\r\n        link:\r\n          \"text-primary underline-offset-4 hover:underline active:scale-[0.98]\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3 text-sm\",\r\n        lg: \"h-12 rounded-lg px-8 text-base\",\r\n        xl: \"h-14 rounded-lg px-10 text-lg\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  },\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n","import { useState, useEffect } from \"react\";\r\nimport { X } from \"lucide-react\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface BeforeInstallPromptEvent extends Event {\r\n  prompt: () => Promise<void>;\r\n  userChoice: Promise<{ outcome: \"accepted\" | \"dismissed\" }>;\r\n}\r\n\r\nexport function PWAInstallPrompt() {\r\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\r\n  const [showInstallButton, setShowInstallButton] = useState(false);\r\n  const [isInstalled, setIsInstalled] = useState(false);\r\n  const [dismissed, setDismissed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkInstalled = () => {\r\n      if (window.matchMedia(\"(display-mode: standalone)\").matches) {\r\n        setIsInstalled(true);\r\n        return true;\r\n      }\r\n      if ((navigator as unknown as { standalone?: boolean }).standalone === true) {\r\n        setIsInstalled(true);\r\n        return true;\r\n      }\r\n      return false;\r\n    };\r\n\r\n    if (checkInstalled()) return;\r\n\r\n    const dismissed = localStorage.getItem(\"pwa-install-dismissed\");\r\n    if (dismissed) {\r\n      const dismissedTime = parseInt(dismissed, 10);\r\n      // Show again after 1 hour for testing (was 7 days)\r\n      if (Date.now() - dismissedTime < 1 * 60 * 60 * 1000) {\r\n        setDismissed(true);\r\n        return;\r\n      }\r\n    }\r\n\r\n    const handler = (e: Event) => {\r\n      e.preventDefault();\r\n      setDeferredPrompt(e as BeforeInstallPromptEvent);\r\n      setShowInstallButton(true);\r\n    };\r\n\r\n    window.addEventListener(\"beforeinstallprompt\", handler);\r\n\r\n    window.addEventListener(\"appinstalled\", () => {\r\n      setIsInstalled(true);\r\n      setShowInstallButton(false);\r\n      setDeferredPrompt(null);\r\n    });\r\n\r\n    // For development/testing: show install button after 3 seconds if not installed\r\n    // and no beforeinstallprompt event has fired\r\n    const devTimer = setTimeout(() => {\r\n      if (!isInstalled && !dismissed && !showInstallButton) {\r\n        console.log(\"PWA: Showing install prompt for development/testing\");\r\n        setShowInstallButton(true);\r\n      }\r\n    }, 3000);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"beforeinstallprompt\", handler);\r\n      clearTimeout(devTimer);\r\n    };\r\n  }, []);\r\n\r\n  const handleInstallClick = async () => {\r\n    if (deferredPrompt) {\r\n      // Use the native install prompt\r\n      deferredPrompt.prompt();\r\n      const { outcome } = await deferredPrompt.userChoice;\r\n\r\n      if (outcome === \"accepted\") {\r\n        setIsInstalled(true);\r\n      }\r\n\r\n      setDeferredPrompt(null);\r\n      setShowInstallButton(false);\r\n    } else {\r\n      // Fallback for development/testing - try to trigger manual install\r\n      console.log(\"PWA: No deferred prompt available, attempting manual install\");\r\n      // On some browsers, we can try to show instructions\r\n      alert(\"To install this app:\\n\\n1. Click the menu button (⋮) in your browser\\n2. Select 'Add to Home screen' or 'Install app'\\n3. Follow the prompts to install\");\r\n      setShowInstallButton(false);\r\n      setDismissed(true);\r\n      localStorage.setItem(\"pwa-install-dismissed\", Date.now().toString());\r\n    }\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setDismissed(true);\r\n    setShowInstallButton(false);\r\n    localStorage.setItem(\"pwa-install-dismissed\", Date.now().toString());\r\n  };\r\n\r\n  if (isInstalled || dismissed || !showInstallButton) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed top-0 left-0 right-0 bg-white border-b shadow-md p-3 z-[60]\"\r\n      data-testid=\"pwa-install-prompt\"\r\n    >\r\n      <div className=\"container mx-auto max-w-7xl flex items-center gap-3\">\r\n        <div className=\"flex-shrink-0 w-10 h-10 rounded-lg overflow-hidden\">\r\n          <img \r\n            src={logoLight} \r\n            alt=\"App Icon\" \r\n            className=\"w-full h-full object-contain\"\r\n          />\r\n        </div>\r\n        <div className=\"flex-1 min-w-0\">\r\n          <h3 className=\"font-semibold text-sm\" data-testid=\"text-install-title\">Install App</h3>\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            Install for quick access and offline use.\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n          <Button \r\n            size=\"sm\" \r\n            onClick={handleInstallClick}\r\n            data-testid=\"button-install-app\"\r\n          >\r\n            Install\r\n          </Button>\r\n          <Button\r\n            size=\"icon\"\r\n            variant=\"ghost\"\r\n            onClick={handleDismiss}\r\n            data-testid=\"button-close-install\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState, useRef } from \"react\";\r\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport type { User } from \"@shared/schema\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { clearAuthCache } from \"@/lib/queryClient\";\r\n\r\nexport function useAuth() {\r\n  const queryClient = useQueryClient();\r\n\r\n  const [session, setSession] = useState<any>(null);\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n\r\n  const [loginError, setLoginError] = useState<string | null>(null);\r\n  const [registerError, setRegisterError] = useState<string | null>(null);\r\n  const [isLoginLoading, setIsLoginLoading] = useState(false);\r\n  const [isRegisterLoading, setIsRegisterLoading] = useState(false);\r\n  const [isLoggingOut, setIsLoggingOut] = useState(false);\r\n  \r\n  // Ref to prevent duplicate logout calls\r\n  const logoutInProgressRef = useRef(false);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * AUTH BOOTSTRAP (single source of truth)\r\n   * ------------------------------------------------------\r\n   */\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    // Load initial session once\r\n    supabase.auth.getSession().then(({ data }) => {\r\n      if (mounted) {\r\n        setSession(data.session);\r\n        setAuthLoading(false);\r\n      }\r\n    });\r\n\r\n    // Listen for real auth transitions only\r\n    const { data: { subscription } } =\r\n      supabase.auth.onAuthStateChange((event, session) => {\r\n        if (event === \"SIGNED_IN\" || event === \"TOKEN_REFRESHED\") {\r\n          setSession(session);\r\n        }\r\n\r\n        if (event === \"SIGNED_OUT\") {\r\n          setSession(null);\r\n          queryClient.setQueryData([\"/api/auth/me\"], { user: null });\r\n          queryClient.clear();\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      mounted = false;\r\n      subscription.unsubscribe();\r\n    };\r\n  }, [queryClient]);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * EXPIRED SESSION DETECTION\r\n   * Detect and handle expired sessions to prevent stuck state\r\n   * ------------------------------------------------------\r\n   */\r\n  useEffect(() => {\r\n    // If we have no session but authLoading is complete, ensure query is reset\r\n    if (!authLoading && !session) {\r\n      queryClient.setQueryData([\"/api/auth/me\"], { user: null });\r\n    }\r\n  }, [session, authLoading, queryClient]);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * CURRENT USER\r\n   * ------------------------------------------------------\r\n   */\r\n  const { data, isLoading: queryLoading } = useQuery<{\r\n    user: User | null;\r\n    agent?: any;\r\n  }>({\r\n    queryKey: [\"/api/auth/me\"],\r\n    enabled: !!session?.access_token,\r\n    retry: false,\r\n    refetchOnWindowFocus: false,\r\n    staleTime: 5 * 60 * 1000,\r\n    queryFn: async () => {\r\n      const res = await fetch(\"/api/auth/me\", {\r\n        headers: {\r\n          Authorization: `Bearer ${session.access_token}`,\r\n        },\r\n      });\r\n\r\n      if (!res.ok) {\r\n        return { user: null };\r\n      }\r\n\r\n      return res.json();\r\n    },\r\n  });\r\n\r\n  const user = data?.user ?? null;\r\n  const agent = data?.agent;\r\n  const isAuthenticated = !!user;\r\n  \r\n  // Fix: When session is null, we're not loading\r\n  // This prevents getting stuck in loading state when session expires\r\n  const isLoading = authLoading || (!!session?.access_token && queryLoading);\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * ACTIONS\r\n   * ------------------------------------------------------\r\n   */\r\n  const login = async ({ email, password }: { email: string; password: string }) => {\r\n    setIsLoginLoading(true);\r\n    setLoginError(null);\r\n\r\n    const { error } = await supabase.auth.signInWithPassword({\r\n      email: email.trim(),\r\n      password,\r\n    });\r\n\r\n    if (error) {\r\n      setLoginError(error.message);\r\n      setIsLoginLoading(false);\r\n      return { error: error.message };\r\n    }\r\n\r\n    // Invalidate user query to immediately fetch user data and trigger navigation\r\n    queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n\r\n    setIsLoginLoading(false);\r\n    return { success: true };\r\n  };\r\n\r\n  const register = async ({\r\n    email,\r\n    password,\r\n    name,\r\n    phone,\r\n  }: {\r\n    email: string;\r\n    password: string;\r\n    name: string;\r\n    phone?: string;\r\n  }) => {\r\n    setIsRegisterLoading(true);\r\n    setRegisterError(null);\r\n\r\n    try {\r\n      console.log(\"[AUTH-REGISTER] Attempting registration:\", { email, name, phone });\r\n      \r\n      // Call backend register endpoint instead of Supabase directly\r\n      // This ensures phone is saved to local database\r\n      const response = await fetch(\"/api/auth/register\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          email: email.trim(),\r\n          password,\r\n          name: name.trim(),\r\n          phone: phone?.trim() || null,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      console.log(\"[AUTH-REGISTER] Response status:\", response.status, \"Data:\", data);\r\n\r\n      if (!response.ok) {\r\n        const errorMsg = data.error || \"Registration failed\";\r\n        console.error(\"[AUTH-REGISTER] Error:\", errorMsg);\r\n        setRegisterError(errorMsg);\r\n        setIsRegisterLoading(false);\r\n        return { error: errorMsg };\r\n      }\r\n\r\n      console.log(\"[AUTH-REGISTER] Setting Supabase session with tokens\");\r\n      // Set the session in Supabase with returned tokens\r\n      if (data.access_token && data.refresh_token) {\r\n        await supabase.auth.setSession({\r\n          access_token: data.access_token,\r\n          refresh_token: data.refresh_token,\r\n        });\r\n      }\r\n\r\n      // Invalidate user query to immediately fetch user data and trigger navigation\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n\r\n      setIsRegisterLoading(false);\r\n      console.log(\"[AUTH-REGISTER] Registration successful\");\r\n      return { success: true };\r\n    } catch (error: any) {\r\n      const errorMessage = error.message || \"Registration failed\";\r\n      console.error(\"[AUTH-REGISTER] Exception:\", errorMessage);\r\n      setRegisterError(errorMessage);\r\n      setIsRegisterLoading(false);\r\n      return { error: errorMessage };\r\n    }\r\n  };\r\n\r\n  const logout = async () => {\r\n    // Prevent duplicate logout calls\r\n    if (logoutInProgressRef.current) {\r\n      console.log('Logout already in progress, skipping duplicate call');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      logoutInProgressRef.current = true;\r\n      setIsLoggingOut(true);\r\n      \r\n      // Watchdog timer: Force redirect after 3 seconds if logout hangs\r\n      const watchdogTimer = setTimeout(() => {\r\n        console.warn('Logout taking too long, forcing redirect...');\r\n        window.location.href = \"/\";\r\n      }, 3000);\r\n      \r\n      // Clear all queries first\r\n      queryClient.clear();\r\n      \r\n      // Clear cached auth tokens\r\n      clearAuthCache();\r\n      \r\n      // Sign out from Supabase\r\n      await supabase.auth.signOut();\r\n      \r\n      // Clear session state\r\n      setSession(null);\r\n      \r\n      // Cancel watchdog since logout succeeded\r\n      clearTimeout(watchdogTimer);\r\n      \r\n      // Force redirect to home page\r\n      window.location.href = \"/\";\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n      // Even if logout fails, clear local state and redirect\r\n      queryClient.clear();\r\n      setSession(null);\r\n      window.location.href = \"/\";\r\n    } finally {\r\n      setIsLoggingOut(false);\r\n      logoutInProgressRef.current = false;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ------------------------------------------------------\r\n   * PUBLIC API\r\n   * ------------------------------------------------------\r\n   */\r\n  return {\r\n    user,\r\n    agent,\r\n    isAuthenticated,\r\n    isLoading,\r\n    login,\r\n    register,\r\n    logout,\r\n    loginError,\r\n    registerError,\r\n    isLoginLoading,\r\n    isRegisterLoading,\r\n    isLoggingOut,\r\n  };\r\n}\r\n","import { cn } from \"@/lib/utils\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  className?: string;\r\n  text?: string;\r\n}\r\n\r\nexport function LoadingSpinner({ size = \"md\", className, text }: LoadingSpinnerProps) {\r\n  const sizeClasses = {\r\n    sm: \"h-4 w-4\",\r\n    md: \"h-6 w-6\",\r\n    lg: \"h-8 w-8\",\r\n  };\r\n\r\n  return (\r\n    <div className={cn(\"flex flex-col items-center justify-center gap-2\", className)}>\r\n      <Loader2 className={cn(\"animate-spin text-primary\", sizeClasses[size])} />\r\n      {text && <p className=\"text-sm text-muted-foreground\">{text}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function PageLoader({ text = \"Loading...\" }: { text?: string }) {\r\n  return (\r\n    <div className=\"flex h-[50vh] items-center justify-center\">\r\n      <LoadingSpinner size=\"lg\" text={text} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function CardSkeleton() {\r\n  return (\r\n    <div className=\"rounded-lg border bg-white dark:bg-black p-6 animate-pulse\">\r\n      <div className=\"h-4 bg-muted rounded w-1/3 mb-4\" />\r\n      <div className=\"h-8 bg-muted rounded w-2/3 mb-2\" />\r\n      <div className=\"h-3 bg-muted rounded w-1/2\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function TableSkeleton({ rows = 5 }: { rows?: number }) {\r\n  return (\r\n    <div className=\"animate-pulse space-y-3\">\r\n      <div className=\"h-10 bg-muted rounded\" />\r\n      {Array.from({ length: rows }).map((_, i) => (\r\n        <div key={i} className=\"h-14 bg-muted/50 rounded\" />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import { useAuth } from \"@/hooks/use-auth\";\r\nimport { Route, Redirect } from \"wouter\";\r\nimport { LoadingSpinner } from \"@/components/ui/loading-spinner\";\r\n\r\ninterface ProtectedRouteProps {\r\n  path: string;\r\n  component: React.ComponentType<any>;\r\n  requiredRole?: string;\r\n  requiredRoles?: string[];\r\n  fallbackPath?: string;\r\n}\r\n\r\nexport function ProtectedRoute({\r\n  path,\r\n  component: Component,\r\n  requiredRole,\r\n  requiredRoles,\r\n  fallbackPath = \"/login\"\r\n}: ProtectedRouteProps) {\r\n  const { user, isLoading, isAuthenticated } = useAuth();\r\n\r\n  return (\r\n    <Route path={path}>\r\n      {(params) => {\r\n        // Not authenticated - redirect immediately (even if loading)\r\n        // This prevents getting stuck when session expires\r\n        if (!isLoading && !user) {\r\n          return <Redirect to={fallbackPath} />;\r\n        }\r\n        \r\n        // Still loading initial auth check\r\n        if (isLoading) {\r\n          return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n              <LoadingSpinner size=\"lg\" />\r\n            </div>\r\n          );\r\n        }\r\n\r\n        // Check role if required\r\n        if (requiredRole && user.role !== requiredRole) {\r\n          return <Redirect to=\"/\" />;\r\n        }\r\n\r\n        // Check roles if required\r\n        if (requiredRoles && !requiredRoles.includes(user.role)) {\r\n          return <Redirect to=\"/\" />;\r\n        }\r\n\r\n        // Render component\r\n        return <Component {...params} />;\r\n      }}\r\n    </Route>\r\n  );\r\n}","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-background text-foreground\",\r\n        destructive:\r\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n","import * as React from \"react\";\r\n\r\nimport { cn } from \"../../lib/utils\";\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-xl border border-border bg-card text-card-foreground shadow-md hover:shadow-lg transition-all duration-200\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-2 p-6 pb-4\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-xl font-semibold leading-tight tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n","import { Component, ErrorInfo, ReactNode } from 'react';\r\nimport { AlertCircle, RefreshCw } from 'lucide-react';\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  errorInfo: ErrorInfo | null;\r\n}\r\n\r\nexport class ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    return {\r\n      hasError: true,\r\n      error,\r\n      errorInfo: null,\r\n    };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n    this.setState({\r\n      error,\r\n      errorInfo,\r\n    });\r\n  }\r\n\r\n  handleReload = () => {\r\n    window.location.reload();\r\n  };\r\n\r\n  handleReset = () => {\r\n    this.setState({\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4\">\r\n          <Card className=\"max-w-2xl w-full\">\r\n            <CardHeader>\r\n              <div className=\"flex items-center gap-3 mb-2\">\r\n                <div className=\"rounded-full bg-red-100 dark:bg-red-900/30 p-3\">\r\n                  <AlertCircle className=\"h-6 w-6 text-red-600 dark:text-red-400\" />\r\n                </div>\r\n                <div>\r\n                  <CardTitle className=\"text-2xl\">Something went wrong</CardTitle>\r\n                  <CardDescription className=\"mt-1\">\r\n                    The application encountered an unexpected error\r\n                  </CardDescription>\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <Alert variant=\"destructive\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertTitle>Error Details</AlertTitle>\r\n                <AlertDescription className=\"mt-2\">\r\n                  {this.state.error?.message || 'An unknown error occurred'}\r\n                </AlertDescription>\r\n              </Alert>\r\n\r\n              {import.meta.env.DEV && this.state.errorInfo && (\r\n                <div className=\"bg-gray-100 dark:bg-black p-4 rounded-lg overflow-auto max-h-64\">\r\n                  <p className=\"text-xs font-mono text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\r\n                    {this.state.errorInfo.componentStack}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-3 pt-4\">\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Please try one of the following options:\r\n                </p>\r\n                <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                  <Button onClick={this.handleReload} className=\"flex items-center gap-2 flex-1\">\r\n                    <RefreshCw className=\"h-4 w-4\" />\r\n                    Reload Page\r\n                  </Button>\r\n                  <Button onClick={this.handleReset} variant=\"outline\" className=\"flex-1\">\r\n                    Try Again\r\n                  </Button>\r\n                </div>\r\n                <div className=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800\">\r\n                  <p className=\"text-sm text-blue-800 dark:text-blue-200\">\r\n                    <strong>💡 Tip:</strong> If this error persists, try clearing your browser cache or contact support.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { WifiOff, AlertCircle } from 'lucide-react';\r\n\r\nexport function ConnectionStatus() {\r\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\r\n  const [showOffline, setShowOffline] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const handleOnline = () => {\r\n      setIsOnline(true);\r\n      setShowOffline(false);\r\n    };\r\n\r\n    const handleOffline = () => {\r\n      setIsOnline(false);\r\n      setShowOffline(true);\r\n    };\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    // Check connection periodically (less frequent)\r\n    const checkConnection = setInterval(() => {\r\n      if (!navigator.onLine && isOnline) {\r\n        setIsOnline(false);\r\n        setShowOffline(true);\r\n      }\r\n    }, 30000); // Check every 30 seconds instead of 5\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n      clearInterval(checkConnection);\r\n    };\r\n  }, [isOnline]);\r\n\r\n  // Auto-hide after coming back online\r\n  useEffect(() => {\r\n    if (isOnline && showOffline) {\r\n      const timeout = setTimeout(() => {\r\n        setShowOffline(false);\r\n      }, 3000);\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isOnline, showOffline]);\r\n\r\n  if (!showOffline && isOnline) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] max-w-md w-full px-4\">\r\n      {!isOnline ? (\r\n        <Alert variant=\"destructive\" className=\"shadow-lg\">\r\n          <WifiOff className=\"h-4 w-4\" />\r\n          <AlertDescription className=\"ml-2\">\r\n            <strong>No Internet Connection</strong>\r\n            <p className=\"text-xs mt-1\">\r\n              You're offline. Some features may not work properly.\r\n            </p>\r\n          </AlertDescription>\r\n        </Alert>\r\n      ) : (\r\n        <Alert className=\"shadow-lg bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800\">\r\n          <AlertCircle className=\"h-4 w-4 text-green-600 dark:text-green-400\" />\r\n          <AlertDescription className=\"ml-2 text-green-800 dark:text-green-200\">\r\n            <strong>Back Online</strong>\r\n            <p className=\"text-xs mt-1\">Connection restored successfully.</p>\r\n          </AlertDescription>\r\n        </Alert>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useCallback } from 'react';\r\nimport { useAuth } from './use-auth';\r\nimport { useToast } from '@/hooks/use-toast';\r\n\r\nconst INACTIVITY_TIMEOUT = 5 * 60 * 1000; // 5 minutes in milliseconds\r\nconst WARNING_TIME = 0; // No warning - silent logout after inactivity\r\n\r\nexport function useSessionTimeout() {\r\n  const { logout, user } = useAuth();\r\n  // Keep hook order stable; do not show prompts\r\n  const { toast } = useToast();\r\n\r\n  const timeoutRef = useRef<number>();\r\n  const warningRef = useRef<number>();\r\n  const lastActivityRef = useRef<number>(Date.now());\r\n  const lastResetRef = useRef<number>(0);\r\n\r\n  const resetTimer = useCallback(() => {\r\n    // Throttle resets to prevent excessive timer updates\r\n    const now = Date.now();\r\n    if (now - lastResetRef.current < 1000) {\r\n      return;\r\n    }\r\n    lastResetRef.current = now;\r\n    lastActivityRef.current = now;\r\n\r\n    // Clear existing timers\r\n    if (timeoutRef.current) {\r\n      clearTimeout(timeoutRef.current);\r\n    }\r\n    if (warningRef.current) {\r\n      clearTimeout(warningRef.current);\r\n    }\r\n\r\n    // Only set timers if user is logged in\r\n    if (!user) return;\r\n\r\n    // No warning prompts; silent logout only\r\n\r\n    // Set logout timer\r\n    timeoutRef.current = window.setTimeout(async () => {\r\n      try {\r\n        console.log('Session timeout: Logging out user due to inactivity');\r\n        // Silent logout after inactivity\r\n        await logout();\r\n      } catch (error) {\r\n        console.error('Session timeout logout error:', error);\r\n        // Force redirect even if logout fails\r\n        window.location.href = '/login';\r\n      }\r\n    }, INACTIVITY_TIMEOUT);\r\n  }, [user, logout, toast]);\r\n\r\n  const handleActivity = useCallback(() => {\r\n    resetTimer();\r\n  }, [resetTimer]);\r\n\r\n  useEffect(() => {\r\n    // Only enable session timeout if user is logged in\r\n    if (!user) {\r\n      // Clear timers if user logs out\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      if (warningRef.current) {\r\n        clearTimeout(warningRef.current);\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Start the timer initially\r\n    resetTimer();\r\n\r\n    // Activity event listeners\r\n    const events = [\r\n      'mousedown',\r\n      'mousemove',\r\n      'keypress',\r\n      'scroll',\r\n      'touchstart',\r\n      'touchmove',\r\n      'click'\r\n    ];\r\n\r\n    // Add event listeners\r\n    events.forEach(event => {\r\n      document.addEventListener(event, handleActivity, true);\r\n    });\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      events.forEach(event => {\r\n        document.removeEventListener(event, handleActivity, true);\r\n      });\r\n\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      if (warningRef.current) {\r\n        clearTimeout(warningRef.current);\r\n      }\r\n    };\r\n  }, [user, handleActivity, resetTimer]);\r\n\r\n  // Return current inactivity time for debugging (optional)\r\n  const getTimeUntilLogout = useCallback(() => {\r\n    if (!user) return null;\r\n    const elapsed = Date.now() - lastActivityRef.current;\r\n    return Math.max(0, INACTIVITY_TIMEOUT - elapsed);\r\n  }, [user]);\r\n\r\n  return {\r\n    getTimeUntilLogout,\r\n    resetTimer: handleActivity\r\n  };\r\n}","import React from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Lock, X } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useLocation } from \"wouter\";\r\n\r\ninterface BreakSettings {\r\n  isEnabled: boolean;\r\n  message: string;\r\n}\r\n\r\nexport function BreakModeGuard({ children }: { children: React.ReactNode }) {\r\n  const [location] = useLocation();\r\n  const { user: authData, isLoading: authLoading } = useAuth();\r\n  const { data: breakSettings, isLoading: breakLoading } = useQuery<BreakSettings>({\r\n    queryKey: [\"/api/break-settings\"],\r\n    refetchInterval: 5 * 60 * 1000, // Check every 5 minutes instead of 30 seconds\r\n    staleTime: 4 * 60 * 1000, // Consider data fresh for 4 minutes\r\n  });\r\n\r\n  // Show loading state ONLY on initial load, not on refetches\r\n  if ((authLoading || breakLoading) && !breakSettings && !authData) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Allow admin routes to bypass break mode\r\n  if (location.startsWith(\"/admin\")) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // Allow access to authentication routes even during break mode\r\n  const authRoutes = [\"/login\", \"/register\"];\r\n  const isAuthRoute = authRoutes.includes(location);\r\n\r\n  // Allow admins to bypass break mode\r\n  const isAdmin = authData?.role === \"admin\";\r\n  if (isAdmin || isAuthRoute) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  // If break mode is enabled and user is not admin, show the break message\r\n  if (breakSettings?.isEnabled) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background p-4\">\r\n        <div className=\"max-w-md w-full text-center space-y-6\">\r\n          <div className=\"flex justify-center\">\r\n            <div className=\"relative\">\r\n              <div className=\"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center\">\r\n                <Lock className=\"h-10 w-10 text-red-600 dark:text-red-400\" />\r\n              </div>\r\n              <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center\">\r\n                <X className=\"h-3 w-3 text-white\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <h1 className=\"text-2xl font-bold text-red-600 dark:text-red-400\">\r\n              Site Closed\r\n            </h1>\r\n            <div className=\"text-muted-foreground whitespace-pre-wrap text-left bg-muted p-4 rounded-lg\">\r\n              {breakSettings.message || \"The site is currently closed. Please check back later.\"}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-sm text-muted-foreground\">\r\n            We apologize for any inconvenience.\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // If break mode is not enabled, render the normal app\r\n  return <>{children}</>;\r\n}","import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  // Whitespace-nowrap: Badges should never wrap.\r\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\r\n  \" hover-elevate \" ,\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\r\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\r\n\r\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  },\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  );\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useLocation } from \"wouter\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { X, Bell, Megaphone, ExternalLink } from \"lucide-react\";\r\nimport { Button } from \"./ui/button.js\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card.js\";\r\nimport { Badge } from \"./ui/badge.js\";\r\nimport { apiRequest } from \"../lib/queryClient.js\";\r\n\r\ninterface Announcement {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  isActive: boolean;\r\n  audiences?: string[] | string; // Support both old string format and new array format\r\n  audience?: string; // Legacy field for backwards compatibility\r\n  createdAt: string;\r\n}\r\n\r\n// Helper function to safely parse audiences\r\nfunction getAudiencesArray(announcement: Announcement): string[] {\r\n  // If audiences exists and is already an array, return it\r\n  if (Array.isArray(announcement.audiences)) {\r\n    return announcement.audiences;\r\n  }\r\n  \r\n  // If audiences is a JSON string, parse it\r\n  if (typeof announcement.audiences === 'string') {\r\n    try {\r\n      const parsed = JSON.parse(announcement.audiences);\r\n      return Array.isArray(parsed) ? parsed : [parsed];\r\n    } catch {\r\n      return [announcement.audiences];\r\n    }\r\n  }\r\n  \r\n  // Fallback to legacy audience field\r\n  if (announcement.audience) {\r\n    return [announcement.audience];\r\n  }\r\n  \r\n  // Default to \"all\"\r\n  return [\"all\"];\r\n}\r\n\r\n// Function to parse URLs from text and create clickable links\r\nfunction parseMessageWithLinks(text: string) {\r\n  // URL regex pattern\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  \r\n  // Split text by URLs and create elements\r\n  const parts = text.split(urlRegex);\r\n  \r\n  return parts.map((part, index) => {\r\n    if (urlRegex.test(part)) {\r\n      return (\r\n        <a\r\n          key={index}\r\n          href={part}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-blue-600 hover:text-blue-800 underline inline-flex items-start gap-1 break-all sm:items-center sm:gap-1\"\r\n        >\r\n          <span className=\"break-all\">{part}</span>\r\n          <ExternalLink className=\"h-3 w-3 flex-shrink-0 mt-0.5 sm:mt-0\" />\r\n        </a>\r\n      );\r\n    }\r\n    return part;\r\n  });\r\n}\r\n\r\nexport function AnnouncementPopup() {\r\n  const { user } = useAuth();\r\n  const [pathname] = useLocation();\r\n  const isStorefrontView = pathname?.startsWith(\"/store/\") ?? false;\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [dismissedAnnouncements, setDismissedAnnouncements] = useState<string[]>([]);\r\n\r\n  // Load dismissed announcements from localStorage\r\n  useEffect(() => {\r\n    const dismissed = localStorage.getItem('dismissedAnnouncements');\r\n    if (dismissed) {\r\n      setDismissedAnnouncements(JSON.parse(dismissed));\r\n    }\r\n  }, []);\r\n\r\n  const { data: announcements = [] } = useQuery<Announcement[]>({\r\n    queryKey: ['announcements'],\r\n    queryFn: () => apiRequest('GET', '/api/announcements/active'),\r\n    enabled: !isStorefrontView,\r\n    staleTime: 5 * 60 * 1000, // Consider fresh for 5 minutes\r\n    refetchOnWindowFocus: false, // Don't refetch on tab focus\r\n  });\r\n\r\n  // Filter announcements based on user audience\r\n  const getFilteredAnnouncements = (announcements: Announcement[]) => {\r\n    const userRole = user?.role?.toLowerCase();\r\n    const isLoggedIn = !!user;\r\n\r\n    console.log(\"Filtering announcements:\", {\r\n      isStorefrontView,\r\n      userRole,\r\n      isLoggedIn,\r\n      pathname,\r\n      totalAnnouncements: announcements.length\r\n    });\r\n\r\n    return announcements.filter((announcement) => {\r\n      const audiences = getAudiencesArray(announcement).map((a) => a.toLowerCase());\r\n      \r\n      console.log(\"Announcement:\", announcement.title, \"audiences:\", audiences);\r\n\r\n      // If \"all\" is in the audiences, show to everyone\r\n      if (audiences.includes(\"all\")) {\r\n        console.log(\"  -> Showing (has 'all')\");\r\n        return true;\r\n      }\r\n\r\n      // \"guest\" is only shown to non-logged-in users\r\n      if (audiences.includes(\"guest\") && !isLoggedIn) {\r\n        console.log(\"  -> Showing (guest match)\");\r\n        return true;\r\n      }\r\n\r\n      // \"loggedIn\" is only shown to logged-in users\r\n      if (audiences.includes(\"loggedin\") && isLoggedIn) {\r\n        console.log(\"  -> Showing (loggedIn match)\");\r\n        return true;\r\n      }\r\n\r\n      // \"agent\" is only shown to agents\r\n      if (audiences.includes(\"agent\") && userRole === \"agent\") {\r\n        console.log(\"  -> Showing (agent match)\");\r\n        return true;\r\n      }\r\n\r\n      // \"storefront\" is only shown on storefront pages (guests or agents viewing the store)\r\n      if (audiences.includes(\"storefront\") && isStorefrontView) {\r\n        console.log(\"  -> Showing (storefront match)\");\r\n        return true;\r\n      }\r\n\r\n      console.log(\"  -> Hiding (no match)\");\r\n      return false;\r\n    });\r\n  };\r\n\r\n  const filteredAnnouncements = getFilteredAnnouncements(announcements);\r\n\r\n  // Check if there are any active announcements that haven't been dismissed\r\n  useEffect(() => {\r\n    if (filteredAnnouncements.length > 0) {\r\n      const hasUndismissed = filteredAnnouncements.some((announcement) =>\r\n        !dismissedAnnouncements.includes(announcement.id)\r\n      );\r\n      setIsOpen(hasUndismissed);\r\n    }\r\n  }, [filteredAnnouncements, dismissedAnnouncements]);\r\n\r\n  const handleDismiss = (announcementId: string) => {\r\n    const newDismissed = [...dismissedAnnouncements, announcementId];\r\n    setDismissedAnnouncements(newDismissed);\r\n    localStorage.setItem('dismissedAnnouncements', JSON.stringify(newDismissed));\r\n  };\r\n\r\n  const handleClose = () => {\r\n    // Dismiss all current announcements\r\n    const newDismissed = [...dismissedAnnouncements, ...filteredAnnouncements.map((a) => a.id)];\r\n    setDismissedAnnouncements(newDismissed);\r\n    localStorage.setItem('dismissedAnnouncements', JSON.stringify(newDismissed));\r\n    setIsOpen(false);\r\n  };\r\n\r\n  if (isStorefrontView) return null;\r\n  if (!isOpen || filteredAnnouncements.length === 0) return null;\r\n\r\n  // Show only undismissed announcements\r\n  const undismissedAnnouncements = filteredAnnouncements.filter((announcement) =>\r\n    !dismissedAnnouncements.includes(announcement.id)\r\n  );\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-3 md:p-4 bg-black/50 backdrop-blur-sm\">\r\n      <div className=\"w-full max-w-2xl max-h-[85vh] md:max-h-[80vh] overflow-y-auto\">\r\n        <Card className=\"relative shadow-2xl border-0 bg-white text-black\">\r\n          <CardHeader className=\"pb-3 md:pb-4\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2 md:gap-3\">\r\n                <div className=\"p-1.5 md:p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full\">\r\n                  <Megaphone className=\"h-4 w-4 md:h-5 md:w-5 text-white\" />\r\n                </div>\r\n                <div>\r\n                  <CardTitle className=\"text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\r\n                    Important Announcements\r\n                  </CardTitle>\r\n                  <p className=\"text-sm md:text-base text-gray-600\">\r\n                    Stay updated with the latest news\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={handleClose}\r\n                className=\"h-7 w-7 md:h-8 md:w-8 p-0 hover:bg-gray-100 hover:text-gray-800 text-gray-600 flex-shrink-0\"\r\n              >\r\n                <X className=\"h-3 w-3 md:h-4 md:w-4\" />\r\n              </Button>\r\n            </div>\r\n          </CardHeader>\r\n\r\n          <CardContent className=\"space-y-3 md:space-y-4\">\r\n            {undismissedAnnouncements.map((announcement) => (\r\n              <div\r\n                key={announcement.id}\r\n                className=\"relative group p-3 md:p-4 rounded-xl border border-gray-200 bg-gradient-to-r from-white to-blue-50/30 hover:shadow-lg transition-all duration-300\"\r\n              >\r\n                <div className=\"flex items-start gap-2 md:gap-3\">\r\n                  <div className=\"flex-shrink-0 mt-1\">\r\n                    <div className=\"p-1 md:p-1.5 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full\">\r\n                      <Bell className=\"h-3 w-3 md:h-3 md:w-3 text-white\" />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between gap-2 mb-1 md:mb-2\">\r\n                      <div className=\"flex items-center gap-2 min-w-0 flex-1\">\r\n                        <h3 className=\"font-semibold text-gray-900 text-sm md:text-base break-words\">\r\n                          {announcement.title}\r\n                        </h3>\r\n                        <Badge variant=\"secondary\" className=\"text-xs md:text-sm bg-blue-100 text-blue-700 border-blue-200 px-1.5 py-0.5 flex-shrink-0\">\r\n                          New\r\n                        </Badge>\r\n                      </div>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => handleDismiss(announcement.id)}\r\n                        className=\"flex-shrink-0 h-6 w-6 md:h-6 md:w-6 p-0 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity hover:bg-gray-200 text-gray-500 hover:text-gray-800\"\r\n                        title=\"Dismiss this announcement\"\r\n                      >\r\n                        <X className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </div>\r\n                    <div className=\"text-sm md:text-base text-gray-700 leading-relaxed break-words overflow-wrap-anywhere\">\r\n                      {parseMessageWithLinks(announcement.message)}\r\n                    </div>\r\n                    <div className=\"mt-2 md:mt-3 text-xs md:text-sm text-gray-500\">\r\n                      {new Date(announcement.createdAt).toLocaleDateString('en-US', {\r\n                        year: 'numeric',\r\n                        month: 'short',\r\n                        day: 'numeric'\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center pt-3 md:pt-4 border-t border-gray-200 gap-3 sm:gap-0\">\r\n              <p className=\"text-xs md:text-sm text-gray-500\">\r\n                {undismissedAnnouncements.length} announcement{undismissedAnnouncements.length !== 1 ? 's' : ''} remaining\r\n              </p>\r\n              <div className=\"flex gap-2 w-full sm:w-auto\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={handleClose}\r\n                  className=\"hover:bg-gray-100 text-gray-700 border-gray-300 text-xs md:text-sm h-8 md:h-9 px-3 md:px-4 flex-1 sm:flex-initial\"\r\n                >\r\n                  Dismiss All\r\n                </Button>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  size=\"sm\"\r\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white border-0 text-xs md:text-sm h-8 md:h-9 px-3 md:px-4 flex-1 sm:flex-initial\"\r\n                >\r\n                  Got it!\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { Moon, Sun } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport function ThemeToggle({ className }: { className?: string }) {\r\n  const { theme, setTheme } = useTheme();\r\n\r\n  const handleToggle = () => {\r\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\r\n    console.log(\"Theme toggle clicked. Current theme:\", theme, \"New theme:\", newTheme);\r\n    setTheme(newTheme);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"sm\"\r\n      onClick={handleToggle}\r\n      data-testid=\"button-theme-toggle\"\r\n      className={cn(\"h-8 w-8\", className)}\r\n    >\r\n      {theme === \"light\" ? (\r\n        <Sun className=\"h-4 w-4 transition-all\" />\r\n      ) : (\r\n        <Moon className=\"h-4 w-4 transition-all\" />\r\n      )}\r\n      <span className=\"sr-only\">Toggle theme</span>\r\n    </Button>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(`\r\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\r\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Sheet = SheetPrimitive.Root\r\n\r\nconst SheetTrigger = SheetPrimitive.Trigger\r\n\r\nconst SheetClose = SheetPrimitive.Close\r\n\r\nconst SheetPortal = SheetPrimitive.Portal\r\n\r\nconst SheetOverlay = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-40 bg-black/50 dark:bg-white/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\r\n\r\nconst sheetVariants = cva(\r\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\r\n  {\r\n    variants: {\r\n      side: {\r\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\r\n        bottom:\r\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\r\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\r\n        right:\r\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      side: \"right\",\r\n    },\r\n  }\r\n)\r\n\r\ninterface SheetContentProps\r\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\r\n    VariantProps<typeof sheetVariants> {}\r\n\r\nconst SheetContent = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Content>,\r\n  SheetContentProps\r\n>(({ side = \"right\", className, children, ...props }, ref) => (\r\n  <SheetPortal>\r\n    <SheetOverlay />\r\n    <SheetPrimitive.Content\r\n      ref={ref}\r\n      className={cn(sheetVariants({ side }), className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </SheetPrimitive.Close>\r\n    </SheetPrimitive.Content>\r\n  </SheetPortal>\r\n))\r\nSheetContent.displayName = SheetPrimitive.Content.displayName\r\n\r\nconst SheetHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetHeader.displayName = \"SheetHeader\"\r\n\r\nconst SheetFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nSheetFooter.displayName = \"SheetFooter\"\r\n\r\nconst SheetTitle = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetTitle.displayName = SheetPrimitive.Title.displayName\r\n\r\nconst SheetDescription = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <SheetPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSheetDescription.displayName = SheetPrimitive.Description.displayName\r\n\r\nexport {\r\n  Sheet,\r\n  SheetPortal,\r\n  SheetOverlay,\r\n  SheetTrigger,\r\n  SheetClose,\r\n  SheetContent,\r\n  SheetHeader,\r\n  SheetFooter,\r\n  SheetTitle,\r\n  SheetDescription,\r\n}\r\n","// resellershubprogh Constants\r\n\r\nexport const APP_NAME = \"resellershubprogh\";\r\nexport const APP_DESCRIPTION = \"Data Bundles & Result Checkers. RESELLERS HUB PRO GH\";\r\n\r\nexport const ROLE_LABELS = {\r\n  admin: \"Admin\",\r\n  agent: \"Agent\",\r\n  dealer: \"Dealer\",\r\n  super_dealer: \"Super Dealer\",\r\n  master: \"Master\",\r\n  user: \"User\",\r\n  guest: \"Guest\",\r\n} as const;\r\n\r\nexport const ROLE_ROUTES = {\r\n  admin: \"/admin\",\r\n  agent: \"/agent/dashboard\",\r\n  dealer: \"/dealer/dashboard\",\r\n  super_dealer: \"/super-dealer/dashboard\",\r\n  master: \"/master/dashboard\",\r\n  user: \"/user/dashboard\",\r\n} as const;\r\n\r\nexport const STOREFRONT_ROUTES = {\r\n  agent: \"/store/agent\",\r\n  dealer: \"/store/dealer\",\r\n  super_dealer: \"/store/super-dealer\",\r\n  master: \"/store/master\",\r\n} as const;\r\n\r\nexport const NETWORKS = [\r\n  { id: \"mtn\", name: \"MTN\", color: \"#FFCC00\", textColor: \"#000000\" },\r\n  { id: \"telecel\", name: \"TELECEL\", color: \"#E60000\", textColor: \"#FFFFFF\" },\r\n  { id: \"at_bigtime\", name: \"AT Bigtime\", color: \"#FF0000\", textColor: \"#FFFFFF\" },\r\n  { id: \"at_ishare\", name: \"AT ishare\", color: \"#FF0000\", textColor: \"#FFFFFF\" },\r\n] as const;\r\n\r\nexport const RESULT_CHECKER_TYPES = [\r\n  { id: \"bece\", name: \"BECE\", description: \"Basic Education Certificate Examination\" },\r\n  { id: \"wassce\", name: \"WASSCE\", description: \"West African Senior School Certificate Examination\" },\r\n] as const;\r\n\r\nexport const TRANSACTION_STATUSES = {\r\n  pending: { label: \"Pending\", color: \"bg-orange-500 text-white\" },\r\n  completed: { label: \"Completed\", color: \"bg-green-500 text-white\" },\r\n  failed: { label: \"Failed\", color: \"bg-red-500 text-white\" },\r\n  refunded: { label: \"Refunded\", color: \"bg-blue-500 text-white\" },\r\n} as const;\r\n\r\nexport const WITHDRAWAL_STATUSES = {\r\n  pending: { label: \"Pending\", color: \"bg-orange-500 text-white\" },\r\n  approved: { label: \"Approved\", color: \"bg-blue-500 text-white\" },\r\n  rejected: { label: \"Rejected\", color: \"bg-red-500 text-white\" },\r\n  paid: { label: \"Paid\", color: \"bg-green-500 text-white\" },\r\n} as const;\r\n\r\nexport const PAYMENT_METHODS = [\r\n  {\r\n    id: \"bank\",\r\n    name: \"Bank Transfer\",\r\n    description: \"Transfer to bank account\",\r\n    icon: \"Building2\",\r\n    requiresBankDetails: true,\r\n    placeholder: {\r\n      accountNumber: \"Enter account number\",\r\n      accountName: \"Name on account\",\r\n      bankName: \"e.g., Access Bank, GTBank\",\r\n      bankCode: \"e.g., 030100 (Access Bank)\"\r\n    }\r\n  },\r\n  {\r\n    id: \"mtn_momo\",\r\n    name: \"MTN Mobile Money\",\r\n    description: \"Send to MTN MoMo number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter MTN phone number (e.g., 0241234567)\",\r\n      accountName: \"Name on MTN account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"telecel_cash\",\r\n    name: \"Telecel Cash\",\r\n    description: \"Send to Telecel Cash number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter Telecel phone number (e.g., 0271234567)\",\r\n      accountName: \"Name on Telecel account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"airtel_tigo_cash\",\r\n    name: \"AirtelTigo Cash\",\r\n    description: \"Send to AirtelTigo Cash number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter AirtelTigo phone number (e.g., 0261234567)\",\r\n      accountName: \"Name on AirtelTigo account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"at_bigtime\",\r\n    name: \"AT Bigtime\",\r\n    description: \"Send to AT Bigtime number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter AT Bigtime phone number (e.g., 0261234567)\",\r\n      accountName: \"Name on AT Bigtime account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n  {\r\n    id: \"at_ishare\",\r\n    name: \"AT ishare\",\r\n    description: \"Send to AT ishare number\",\r\n    icon: \"Smartphone\",\r\n    requiresBankDetails: false,\r\n    placeholder: {\r\n      accountNumber: \"Enter AT ishare phone number (e.g., 0261234567)\",\r\n      accountName: \"Name on AT ishare account\",\r\n      bankName: \"\",\r\n      bankCode: \"\"\r\n    }\r\n  },\r\n] as const;\r\n\r\nexport const GHANA_BANKS = [\r\n  \"Access Bank Ghana\",\r\n  \"Absa Bank Ghana\",\r\n  \"Agricultural Development Bank\",\r\n  \"Bank of Africa Ghana\",\r\n  \"CalBank\",\r\n  \"Consolidated Bank Ghana\",\r\n  \"Ecobank Ghana\",\r\n  \"FBN Bank Ghana\",\r\n  \"Fidelity Bank Ghana\",\r\n  \"First Atlantic Bank\",\r\n  \"First National Bank Ghana\",\r\n  \"GCB Bank\",\r\n  \"Guaranty Trust Bank Ghana\",\r\n  \"National Investment Bank\",\r\n  \"OmniBSIC Bank Ghana\",\r\n  \"Prudential Bank\",\r\n  \"Republic Bank Ghana\",\r\n  \"Société Générale Ghana\",\r\n  \"Stanbic Bank Ghana\",\r\n  \"Standard Chartered Bank Ghana\",\r\n  \"United Bank for Africa Ghana\",\r\n  \"Zenith Bank Ghana\",\r\n] as const;\r\n\r\nexport const formatCurrency = (amount: number | string): string => {\r\n  const num = typeof amount === \"string\" ? parseFloat(amount) : amount;\r\n  return new Intl.NumberFormat(\"en-GH\", {\r\n    style: \"currency\",\r\n    currency: \"GHS\",\r\n    minimumFractionDigits: 2,\r\n  }).format(num);\r\n};\r\n\r\nexport const formatDate = (date: Date | string): string => {\r\n  const d = typeof date === \"string\" ? new Date(date) : date;\r\n  return new Intl.DateTimeFormat(\"en-GH\", {\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  }).format(d);\r\n};\r\n\r\nexport const formatPhone = (phone: string): string => {\r\n  const cleaned = phone.replace(/\\D/g, \"\");\r\n  if (cleaned.startsWith(\"233\")) {\r\n    return `+${cleaned.slice(0, 3)} ${cleaned.slice(3, 5)} ${cleaned.slice(5, 8)} ${cleaned.slice(8)}`;\r\n  }\r\n  if (cleaned.startsWith(\"0\")) {\r\n    return `${cleaned.slice(0, 3)} ${cleaned.slice(3, 6)} ${cleaned.slice(6)}`;\r\n  }\r\n  return phone;\r\n};\r\n\r\nexport const generateReference = (prefix: string = \"CLK\"): string => {\r\n  const timestamp = Date.now().toString(36).toUpperCase();\r\n  const random = Math.random().toString(36).substring(2, 8).toUpperCase();\r\n  return `${prefix}${timestamp}${random}`;\r\n};\r\n","export default \"__VITE_ASSET__lEDlIlUX__\"","export interface StoreContext {\r\n  type: \"agent\" | \"main\" | string;\r\n  agentId?: string | null;\r\n}\r\n\r\nconst AGENT_STORE_KEY = \"agentStore\";\r\n\r\nexport function getStoreContext(): StoreContext {\r\n  const agent = localStorage.getItem(AGENT_STORE_KEY);\r\n  if (agent) {\r\n    return { type: \"agent\", agentId: agent };\r\n  }\r\n  return { type: \"main\" };\r\n}\r\n\r\nexport function setAgentStore(agentId: string) {\r\n  localStorage.setItem(AGENT_STORE_KEY, agentId);\r\n}\r\n\r\nexport function clearAgentStore() {\r\n  localStorage.removeItem(AGENT_STORE_KEY);\r\n}\r\n\r\nexport function getAgentId(): string | null {\r\n  return localStorage.getItem(AGENT_STORE_KEY);\r\n}\r\n\r\nexport function isAgentContext(): boolean {\r\n  return !!localStorage.getItem(AGENT_STORE_KEY);\r\n}\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n","import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n","import { useMemo, useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { PlayCircle, Video, Info, CheckCircle2 } from \"lucide-react\";\r\nimport { Button, type ButtonProps } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nexport type VideoCategory = \"guest\" | \"customer\" | \"agent\";\r\n\r\nexport type VideoGuide = {\r\n  id: string;\r\n  category: VideoCategory;\r\n  title: string;\r\n  description: string;\r\n  url?: string;\r\n};\r\n\r\nconst DEFAULT_GUIDES: VideoGuide[] = [\r\n  {\r\n    id: \"guest\",\r\n    category: \"guest\",\r\n    title: \"How to Use Resellers Data Hub Pro Gh\",\r\n    description: \"Choose your options and see how to get started with Resellers Data Hub Pro Gh services.\",\r\n    url: \"https://cdn.example.com/videos/how-to-use-dahtahome.mp4\",\r\n  },\r\n  {\r\n    id: \"customer\",\r\n    category: \"customer\",\r\n    title: \"How to Purchase as Customer\",\r\n    description: \"Learn how to buy data bundles, track orders, and manage your purchases.\",\r\n    url: \"https://cdn.example.com/videos/how-to-purchase-as-customer.mp4\",\r\n  },\r\n  {\r\n    id: \"agent\",\r\n    category: \"agent\",\r\n    title: \"How to Become an Agent\",\r\n    description: \"Discover how to join our agent program, earn commissions, and grow your business.\",\r\n    url: \"https://cdn.example.com/videos/how-to-become-agent.mp4\",\r\n  },\r\n];\r\n\r\ntype WatchHowToPurchaseProps = {\r\n  label?: string;\r\n  description?: string;\r\n  triggerVariant?: ButtonProps[\"variant\"];\r\n  triggerSize?: ButtonProps[\"size\"];\r\n  className?: string;\r\n};\r\n\r\nexport function WatchHowToPurchase({\r\n  label = \"Watch How to Purchase\",\r\n  description = \"Learn the quickest way to purchase bundles or become an agent.\",\r\n  triggerVariant = \"outline\",\r\n  triggerSize = \"default\",\r\n  className,\r\n}: WatchHowToPurchaseProps) {\r\n  const [open, setOpen] = useState(false);\r\n  const [activeCategory, setActiveCategory] = useState<VideoCategory>(\"guest\");\r\n  const [selectedGuide, setSelectedGuide] = useState<VideoGuide | null>(null);\r\n\r\n  // Fetch guides from API for the active category\r\n  const { data: fetchedGuides } = useQuery<VideoGuide[]>({\r\n    queryKey: [\"/api/guides\", activeCategory],\r\n    queryFn: async () => await apiRequest(\"GET\", `/api/guides?category=${activeCategory}`),\r\n  });\r\n\r\n  const guidesByCategory = useMemo(() => {\r\n    const apiGuides = Array.isArray(fetchedGuides) ? fetchedGuides : [];\r\n    const fallback = DEFAULT_GUIDES.filter((guide) => guide.category === activeCategory);\r\n    return apiGuides.length > 0 ? apiGuides : fallback;\r\n  }, [activeCategory, fetchedGuides]);\r\n\r\n  const currentGuide = selectedGuide && selectedGuide.category === activeCategory\r\n    ? selectedGuide\r\n    : guidesByCategory[0] || null;\r\n\r\n  const renderPlayer = () => {\r\n    if (!currentGuide?.url) {\r\n      return (\r\n        <div className=\"rounded-lg border p-6 bg-muted/50 text-sm text-muted-foreground\">\r\n          Video will appear here once an admin uploads it.\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const isEmbed = currentGuide.url.includes(\"youtube.com\") || currentGuide.url.includes(\"youtu.be\") || currentGuide.url.includes(\"vimeo.com\");\r\n\r\n    if (isEmbed) {\r\n      // Convert YouTube URLs to embed format\r\n      let embedUrl = currentGuide.url;\r\n      \r\n      // Handle youtube.com/watch?v=VIDEO_ID\r\n      if (embedUrl.includes(\"youtube.com/watch\")) {\r\n        const videoId = new URL(embedUrl).searchParams.get(\"v\");\r\n        if (videoId) embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n      // Handle youtube.com/shorts/VIDEO_ID\r\n      else if (embedUrl.includes(\"youtube.com/shorts/\")) {\r\n        const videoId = embedUrl.split(\"/shorts/\")[1]?.split(\"?\")[0];\r\n        if (videoId) embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n      // Handle youtu.be/VIDEO_ID\r\n      else if (embedUrl.includes(\"youtu.be/\")) {\r\n        const videoId = embedUrl.split(\"youtu.be/\")[1]?.split(\"?\")[0];\r\n        if (videoId) embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      }\r\n      // Handle vimeo.com/VIDEO_ID\r\n      else if (embedUrl.includes(\"vimeo.com/\") && !embedUrl.includes(\"player.vimeo.com\")) {\r\n        const videoId = embedUrl.split(\"vimeo.com/\")[1]?.split(\"?\")[0];\r\n        if (videoId) embedUrl = `https://player.vimeo.com/video/${videoId}`;\r\n      }\r\n\r\n      return (\r\n        <div className=\"rounded-lg md:rounded-none overflow-hidden border bg-black aspect-video md:aspect-auto md:h-64\">\r\n          <iframe\r\n            src={embedUrl}\r\n            title={currentGuide.title}\r\n            className=\"w-full h-full md:h-64\"\r\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n            allowFullScreen\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"rounded-lg md:rounded-none overflow-hidden border bg-black aspect-video md:aspect-auto md:h-64\">\r\n        <video className=\"w-full h-full md:h-64\" controls poster={undefined}>\r\n          <source src={currentGuide.url} />\r\n          Your browser does not support the video tag.\r\n        </video>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        variant={triggerVariant}\r\n        size={triggerSize}\r\n        className={cn(\"bg-transparent border-2 border-yellow-500 text-yellow-500 hover:bg-transparent\", className)}\r\n        onClick={() => setOpen(true)}\r\n      >\r\n        <PlayCircle className=\"h-4 w-4 mr-2 text-yellow-500\" />\r\n        {label}\r\n      </Button>\r\n\r\n      <Dialog open={open} onOpenChange={setOpen}>\r\n        <DialogContent className=\"max-w-4xl bg-black text-white md:rounded-none\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-white\">\r\n              <Video className=\"h-5 w-5\" />\r\n              How to Use Resellers Data Hub Pro Gh\r\n            </DialogTitle>\r\n            <DialogDescription className=\"text-white/80\">\r\n              {description}\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n\r\n          <Tabs value={activeCategory} onValueChange={(value) => setActiveCategory(value as VideoCategory)}>\r\n            <TabsList className=\"grid grid-cols-3 w-full text-white gap-2\">\r\n              <TabsTrigger\r\n                value=\"guest\"\r\n                className=\"text-white border-2 border-yellow-500 rounded-md md:rounded-none px-3 py-2 transition-colors hover:bg-yellow-500/10 data-[state=active]:bg-yellow-500 data-[state=active]:text-black data-[state=active]:border-yellow-600\"\r\n              >\r\n                Guest\r\n              </TabsTrigger>\r\n              <TabsTrigger\r\n                value=\"customer\"\r\n                className=\"text-white border-2 border-yellow-500 rounded-md md:rounded-none px-3 py-2 transition-colors hover:bg-yellow-500/10 data-[state=active]:bg-yellow-500 data-[state=active]:text-black data-[state=active]:border-yellow-600\"\r\n              >\r\n                Customer\r\n              </TabsTrigger>\r\n              <TabsTrigger\r\n                value=\"agent\"\r\n                className=\"text-white border-2 border-yellow-500 rounded-md md:rounded-none px-3 py-2 transition-colors hover:bg-yellow-500/10 data-[state=active]:bg-yellow-500 data-[state=active]:text-black data-[state=active]:border-yellow-600\"\r\n              >\r\n                Agent\r\n              </TabsTrigger>\r\n            </TabsList>\r\n\r\n            {([\"guest\", \"customer\", \"agent\"] as VideoCategory[]).map((category) => {\r\n              const guides = category === activeCategory\r\n                ? guidesByCategory\r\n                : DEFAULT_GUIDES.filter((g) => g.category === category);\r\n              return (\r\n                <TabsContent key={category} value={category} className=\"space-y-4 pt-4\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                    {guides.map((guide) => (\r\n                      <Card key={guide.id} className={`h-full md:rounded-none ${currentGuide?.id === guide.id ? \"border-primary\" : \"\"}`}>\r\n                        <CardHeader className=\"space-y-1\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Badge variant=\"secondary\" className=\"capitalize\">{guide.category}</Badge>\r\n                            {currentGuide?.id === guide.id && <CheckCircle2 className=\"h-4 w-4 text-primary\" />}\r\n                          </div>\r\n                          <CardTitle className=\"text-base leading-tight text-white\">{guide.title}</CardTitle>\r\n                          <CardDescription className=\"text-xs leading-snug text-white/80\">{guide.description}</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-3\">\r\n                          <Button\r\n                            variant={currentGuide?.id === guide.id ? \"default\" : \"outline\"}\r\n                            size=\"sm\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setSelectedGuide(guide)}\r\n                          >\r\n                            <PlayCircle className=\"h-4 w-4 mr-2\" />\r\n                            {currentGuide?.id === guide.id ? \"Playing\" : \"Play\"}\r\n                          </Button>\r\n                        </CardContent>\r\n                      </Card>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center gap-2 text-sm font-medium text-white\">\r\n                      <Info className=\"h-4 w-4 text-primary\" />\r\n                      {currentGuide?.title || \"Select a video\"}\r\n                    </div>\r\n                    {renderPlayer()}\r\n                  </div>\r\n                </TabsContent>\r\n              );\r\n            })}\r\n          </Tabs>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import { Link, useLocation } from \"wouter\";\r\nimport { Menu, LogOut, LayoutDashboard, Store, Home, Package, FileCheck } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { useState } from \"react\";\r\nimport { WatchHowToPurchase } from \"@/components/watch-how-to-purchase\";\r\n\r\nexport function Header() {\r\n  const { user, isAuthenticated, logout, isLoggingOut, isLoading } = useAuth();\r\n  const { theme } = useTheme();\r\n  const [location] = useLocation();\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  const getInitials = (name: string | undefined | null) => {\r\n    if (!name) return \"U\";\r\n    return name\r\n      .split(\" \")\r\n      .map((n) => n[0])\r\n      .join(\"\")\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  const getDashboardLink = () => {\r\n    if (!user) return \"/login\";\r\n    if (user.role === \"admin\") return \"/admin\";\r\n    if (user.role === \"agent\") return \"/agent/dashboard\";\r\n    if (user.role === \"dealer\") return \"/dealer/dashboard\";\r\n    if (user.role === \"super_dealer\") return \"/super-dealer/dashboard\";\r\n    if (user.role === \"master\") return \"/master/dashboard\";\r\n    if (user.role === \"user\") return \"/user/dashboard\";\r\n    return \"/\";\r\n  };\r\n\r\n  const navigationItems = [\r\n    { href: \"/\", label: \"Home\", icon: Home },\r\n    { href: \"/data-bundles\", label: \"Data Bundles\", icon: Package },\r\n    { href: \"/products/result-checkers\", label: \"Result Checkers\", icon: FileCheck },\r\n  ];\r\n\r\n  return (\r\n    <header className={`sticky top-0 z-50 w-full border-b shadow-sm ${theme === 'dark' ? 'bg-black' : 'bg-white'}`}>\r\n      {/* Logo positioned absolutely in left corner */}\r\n      <Link\r\n        href={agentStore ? `/store/${agentStore}` : \"/\"}\r\n        className=\"absolute top-4 left-0 z-10 flex items-center hover:opacity-80 transition-opacity pl-4\"\r\n      >\r\n        <img\r\n          src={theme === \"dark\" ? logoDark : logoLight}\r\n          alt={APP_NAME}\r\n          className=\"h-6 md:h-10 w-auto\"\r\n        />\r\n      </Link>\r\n\r\n      <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex h-16 items-center justify-between\">\r\n          {/* Spacer for logo */}\r\n          <div className=\"w-32\"></div>\r\n\r\n          {/* Desktop Navigation */}\r\n          {!agentStore && (\r\n            <nav className=\"hidden md:flex items-center gap-8\">\r\n              {navigationItems.map((item) => {\r\n                const Icon = item.icon;\r\n                const isActive = location === item.href;\r\n                return (\r\n                  <Link\r\n                    key={item.href}\r\n                    href={item.href}\r\n                    className={`flex items-center gap-2 text-sm font-medium transition-colors hover:text-primary px-3 py-2 rounded-md ${\r\n                      isActive\r\n                        ? \"bg-yellow-500 text-white\"\r\n                        : \"text-muted-foreground hover:text-primary\"\r\n                    }`}\r\n                  >\r\n                    <Icon className=\"w-4 h-4\" />\r\n                    {item.label}\r\n                  </Link>\r\n                );\r\n              })}\r\n            </nav>\r\n          )}\r\n\r\n          {/* Right side actions */}\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* Desktop-only watch button on homepage */}\r\n            {location === \"/\" && (\r\n              <div className=\"hidden md:flex\">\r\n                <WatchHowToPurchase triggerVariant=\"outline\" triggerSize=\"sm\" />\r\n              </div>\r\n            )}\r\n            <ThemeToggle />\r\n\r\n            {/* Mobile menu */}\r\n            {!location.startsWith(\"/products\") && location !== \"/\" && location !== \"/data-bundles\" && (\r\n              <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\r\n                <SheetTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    className=\"md:hidden\"\r\n                    aria-label=\"Open menu\"\r\n                  >\r\n                    <Menu className=\"h-5 w-5\" />\r\n                  </Button>\r\n                </SheetTrigger>\r\n                <SheetContent \r\n                  side=\"right\" \r\n                  className={`w-80 ${theme === 'dark' ? 'bg-black' : 'bg-white'}`}\r\n                  style={{ backgroundColor: theme === 'dark' ? '#000000' : '#ffffff' }}\r\n                >\r\n                  <div className=\"flex flex-col gap-6 mt-6\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-lg font-bold text-primary\">{APP_NAME}</span>\r\n                    </div>\r\n\r\n                    <nav className=\"flex flex-col gap-2\">\r\n                      {navigationItems.map((item) => {\r\n                        const Icon = item.icon;\r\n                        const isActive = location === item.href;\r\n                        return (\r\n                          <Link\r\n                            key={item.href}\r\n                            href={item.href}\r\n                            onClick={() => setMobileMenuOpen(false)}\r\n                            className={`flex items-center gap-3 text-base font-medium transition-colors hover:text-primary px-4 py-3 rounded-lg ${\r\n                              isActive\r\n                                ? \"bg-yellow-500 text-white\"\r\n                                : \"text-muted-foreground hover:text-primary\"\r\n                            }`}\r\n                          >\r\n                            <Icon className=\"w-5 h-5\" />\r\n                            {item.label}\r\n                          </Link>\r\n                        );\r\n                      })}\r\n                    </nav>\r\n                  </div>\r\n                </SheetContent>\r\n              </Sheet>\r\n            )}\r\n\r\n            {/* User menu */}\r\n            {isLoading ? (\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary\"></div>\r\n                <span className=\"text-sm text-muted-foreground hidden sm:inline\">Loading...</span>\r\n              </div>\r\n            ) : isAuthenticated && user && user.email ? (\r\n              <DropdownMenu>\r\n                <DropdownMenuTrigger asChild>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    className=\"relative h-9 w-9 rounded-full bg-yellow-500 hover:bg-yellow-600 transition-colors\"\r\n                    aria-label=\"User menu\"\r\n                  >\r\n                    <Avatar className=\"h-8 w-8\">\r\n                      <AvatarFallback className=\"bg-yellow-500 text-white text-sm font-medium\">\r\n                        {getInitials(user.name)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                  </Button>\r\n                </DropdownMenuTrigger>\r\n                <DropdownMenuContent align=\"end\" className=\"w-64 bg-yellow-500\">\r\n                  <div className=\"flex items-center gap-3 p-3 border-b border-yellow-600\">\r\n                    <Avatar className=\"h-10 w-10 flex-shrink-0\">\r\n                      <AvatarFallback className=\"bg-yellow-600 text-white\">\r\n                        {getInitials(user.name)}\r\n                      </AvatarFallback>\r\n                    </Avatar>\r\n                    <div className=\"flex flex-col flex-1 min-w-0\">\r\n                      <div className=\"flex flex-col gap-1\">\r\n                        <span className=\"font-semibold text-sm text-black truncate\">{user.name || \"User\"}</span>\r\n                        <span className=\"text-xs text-black/70 truncate\">{user.email}</span>\r\n                      </div>\r\n                      <span className=\"text-xs text-black/80 capitalize font-medium mt-1\">{user.role}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <DropdownMenuItem asChild>\r\n                    <Link href={getDashboardLink()} className=\"flex items-center gap-2 cursor-pointer text-black hover:bg-yellow-600 focus:bg-yellow-600 focus:text-black\">\r\n                      <LayoutDashboard className=\"w-4 h-4 flex-shrink-0\" />\r\n                      <span>Dashboard</span>\r\n                    </Link>\r\n                  </DropdownMenuItem>\r\n\r\n                  {user.role === \"agent\" && (\r\n                    <DropdownMenuItem asChild>\r\n                      <Link href=\"/agent/storefront\" className=\"flex items-center gap-2 cursor-pointer text-black hover:bg-yellow-600 focus:bg-yellow-600 focus:text-black\">\r\n                        <Store className=\"w-4 h-4 flex-shrink-0\" />\r\n                        <span>My Store</span>\r\n                      </Link>\r\n                    </DropdownMenuItem>\r\n                  )}\r\n\r\n                  <DropdownMenuSeparator className=\"bg-yellow-600\" />\r\n\r\n                  <DropdownMenuItem\r\n                    onClick={logout}\r\n                    disabled={isLoggingOut}\r\n                    className=\"flex items-center gap-2 cursor-pointer text-black hover:bg-yellow-600 focus:bg-yellow-600 focus:text-black\"\r\n                  >\r\n                    <LogOut className=\"w-4 h-4 flex-shrink-0\" />\r\n                    <span>{isLoggingOut ? \"Signing out...\" : \"Sign out\"}</span>\r\n                  </DropdownMenuItem>\r\n                </DropdownMenuContent>\r\n              </DropdownMenu>\r\n            ) : (\r\n              <div className=\"flex items-center gap-0.5 md:gap-1\">\r\n                <Button asChild variant=\"ghost\" size=\"sm\" className=\"h-6 px-1.5 text-xs md:h-7 md:px-2\">\r\n                  <Link href=\"/login\">Sign In</Link>\r\n                </Button>\r\n                <Button asChild size=\"sm\" className=\"h-6 px-1.5 text-xs md:h-7 md:px-2\">\r\n                  <Link href=\"/register\">Get Started</Link>\r\n                </Button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import { APP_NAME } from \"@/lib/constants\";\r\nimport { SiVisa, SiMastercard } from \"react-icons/si\";\r\nimport { Shield, Lock } from \"lucide-react\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nexport function Footer() {\r\n  const { theme } = useTheme();\r\n\r\n  return (\r\n    <footer className=\"border-t bg-muted/30\">\r\n      <div className=\"container mx-auto max-w-7xl px-4 py-8\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-8 w-auto\" />\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Your trusted platform for data bundles and result checker purchases in Ghana.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold text-sm\">Products</h4>\r\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n              <li>MTN Data Bundles</li>\r\n              <li>Telecel Data Bundles</li>\r\n              <li>AirtelTigo Data Bundles</li>\r\n              <li>BECE Result Checkers</li>\r\n              <li>WASSCE Result Checkers</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold text-sm\">For Agents</h4>\r\n            <ul className=\"space-y-2 text-sm text-muted-foreground\">\r\n              <li>Become an Agent</li>\r\n              <li>Agent Dashboard</li>\r\n              <li>Custom Storefronts</li>\r\n              <li>Profit Withdrawals</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            <h4 className=\"font-semibold text-sm\">Security & Payments</h4>\r\n            <div className=\"flex flex-wrap items-center gap-3\">\r\n              <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                <Shield className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Secure</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-1 text-muted-foreground\">\r\n                <Lock className=\"h-4 w-4\" />\r\n                <span className=\"text-xs\">Encrypted</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3 pt-2\">\r\n              <div className=\"rounded bg-white dark:bg-black p-2\">\r\n                <SiVisa className=\"h-6 w-10 text-[#1A1F71]\" />\r\n              </div>\r\n              <div className=\"rounded bg-white dark:bg-black p-2\">\r\n                <SiMastercard className=\"h-6 w-10 text-[#EB001B]\" />\r\n              </div>\r\n              <div className=\"rounded bg-[#00C3F7] px-2 py-1\">\r\n                <span className=\"text-white font-bold text-xs\">Paystack</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mt-8 pt-8 border-t text-center text-sm text-muted-foreground\">\r\n          <p>&copy; {new Date().getFullYear()} {APP_NAME}. All rights reserved.</p>\r\n          <p className=\"mt-2\">\r\n            Developed by{' '}\r\n            <a\r\n              href=\"https://bm-portfolio-up2x.onrender.com\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-primary hover:text-primary/80 font-medium\"\r\n            >\r\n              BlusMotif\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"./button\";\r\nimport { Badge } from \"./badge\";\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\ninterface HeroProps extends React.HTMLAttributes<HTMLElement> {\r\n  title: React.ReactNode;\r\n  subtitle?: string;\r\n  description?: string;\r\n  aboveButtons?: React.ReactNode;\r\n  badge?: string;\r\n  primaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: React.ComponentType<{ className?: string }>;\r\n    className?: string;\r\n    size?: \"sm\" | \"md\" | \"lg\";\r\n  };\r\n  secondaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: React.ComponentType<{ className?: string }>;\r\n    size?: \"sm\" | \"md\" | \"lg\";\r\n  };\r\n  images?: string[];\r\n  showNavigation?: boolean;\r\n  background?: \"default\" | \"gradient\" | \"image\";\r\n  overlay?: boolean;\r\n  height?: \"sm\" | \"md\" | \"lg\" | \"xl\" | \"full\";\r\n  align?: \"left\" | \"center\" | \"right\";\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n}\r\n\r\nconst Hero = React.forwardRef<HTMLElement, HeroProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    subtitle,\r\n    description,\r\n    aboveButtons,\r\n    badge,\r\n    primaryButton,\r\n    secondaryButton,\r\n    images = [],\r\n    showNavigation = false,\r\n    background = \"gradient\",\r\n    overlay = true,\r\n    height = \"lg\",\r\n    align = \"center\",\r\n    size = \"lg\",\r\n    children,\r\n    ...props\r\n  }, ref) => {\r\n    const [currentImage, setCurrentImage] = React.useState(0);\r\n\r\n    // Auto-rotate images\r\n    React.useEffect(() => {\r\n      if (images.length > 1) {\r\n        const timer = setInterval(() => {\r\n          setCurrentImage((prev) => (prev + 1) % images.length);\r\n        }, 5000);\r\n        return () => clearInterval(timer);\r\n      }\r\n    }, [images.length]);\r\n\r\n    const heightClasses = {\r\n      sm: \"h-[50vh]\",\r\n      md: \"h-[60vh]\",\r\n      lg: \"h-[70vh]\",\r\n      xl: \"h-[80vh]\",\r\n      full: \"h-screen\",\r\n    };\r\n\r\n    const sizeClasses = {\r\n      sm: \"text-3xl sm:text-4xl\",\r\n      md: \"text-4xl sm:text-5xl lg:text-6xl\",\r\n      lg: \"text-4xl sm:text-5xl lg:text-7xl\",\r\n    };\r\n\r\n    const nextImage = () => {\r\n      setCurrentImage((prev) => (prev + 1) % images.length);\r\n    };\r\n\r\n    const prevImage = () => {\r\n      setCurrentImage((prev) => (prev - 1 + images.length) % images.length);\r\n    };\r\n\r\n    const backgroundClasses = {\r\n      default: \"\",\r\n      gradient: \"bg-gradient-to-br from-primary/5 via-background to-secondary/5\",\r\n      image: \"\",\r\n    };\r\n\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\r\n          \"relative flex items-center justify-center overflow-hidden\",\r\n          heightClasses[height],\r\n          backgroundClasses[background],\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {/* Background Images */}\r\n        {images.length > 0 && (\r\n          <>\r\n            {images.map((img, index) => (\r\n              <div\r\n                key={index}\r\n                className={`absolute inset-0 transition-opacity duration-1000 ${\r\n                  index === currentImage ? \"opacity-100\" : \"opacity-0\"\r\n                }`}\r\n              >\r\n                <img\r\n                  src={img}\r\n                  alt={`Hero image ${index + 1}`}\r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n                {overlay && (\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-black/60 via-black/40 to-transparent\" />\r\n                )}\r\n              </div>\r\n            ))}\r\n\r\n            {/* Navigation Arrows */}\r\n            {showNavigation && images.length > 1 && (\r\n              <>\r\n                <button\r\n                  onClick={prevImage}\r\n                  className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 p-2 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-colors\"\r\n                  aria-label=\"Previous image\"\r\n                >\r\n                  <ChevronLeft className=\"w-6 h-6 text-white\" />\r\n                </button>\r\n                <button\r\n                  onClick={nextImage}\r\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 p-2 rounded-full bg-white/20 backdrop-blur-sm hover:bg-white/30 transition-colors\"\r\n                  aria-label=\"Next image\"\r\n                >\r\n                  <ChevronRight className=\"w-6 h-6 text-white\" />\r\n                </button>\r\n\r\n                {/* Image Indicators */}\r\n                <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-10\">\r\n                  {images.map((_, index) => (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => setCurrentImage(index)}\r\n                      className={`w-3 h-3 rounded-full transition-all ${\r\n                        index === currentImage\r\n                          ? \"bg-white scale-125\"\r\n                          : \"bg-white/50 hover:bg-white/75\"\r\n                      }`}\r\n                      aria-label={`Go to image ${index + 1}`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {/* Content */}\r\n        <div className=\"relative z-10 flex items-center justify-center h-full\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 text-center\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n              {badge && (\r\n                <Badge variant=\"secondary\" className=\"mb-6 px-4 py-2 text-sm font-medium\">\r\n                  {badge}\r\n                </Badge>\r\n              )}\r\n\r\n              {subtitle && (\r\n                <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                  {subtitle}\r\n                </div>\r\n              )}\r\n\r\n              <h1 className={cn(\"font-bold mb-6 tracking-tight\", sizeClasses[size])}>\r\n                <span className=\"text-white\">{title}</span>\r\n              </h1>\r\n\r\n              {description && (\r\n                <p className=\"text-base sm:text-lg text-white/90 mb-8 max-w-2xl mx-auto leading-relaxed\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n\r\n              {aboveButtons && (\r\n                <div className=\"mb-4 flex justify-center\">\r\n                  {aboveButtons}\r\n                </div>\r\n              )}\r\n\r\n              {(primaryButton || secondaryButton) && (\r\n                <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\r\n                  {primaryButton && (\r\n                    <Button\r\n                      size={primaryButton.size || \"lg\"}\r\n                      className={cn(\"px-8 py-4 text-lg font-semibold shadow-lg hover:shadow-xl transition-shadow\", primaryButton.className)}\r\n                      asChild={!!primaryButton.href}\r\n                      onClick={primaryButton.onClick}\r\n                    >\r\n                      {primaryButton.href ? (\r\n                        <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                          {primaryButton.text}\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {primaryButton.text}\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n\r\n                  {secondaryButton && (\r\n                    <Button\r\n                      size={secondaryButton.size || \"lg\"}\r\n                      variant=\"outline\"\r\n                      className=\"px-8 py-4 text-lg font-semibold bg-yellow-500 border-yellow-500 text-black hover:bg-yellow-600\"\r\n                      asChild={!!secondaryButton.href}\r\n                      onClick={secondaryButton.onClick}\r\n                    >\r\n                      {secondaryButton.href ? (\r\n                        <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                          {secondaryButton.text}\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {secondaryButton.text}\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nHero.displayName = \"Hero\";\r\n\r\nexport { Hero };","import * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { LucideIcon } from \"lucide-react\";\r\n\r\ninterface StatItem {\r\n  label: string;\r\n  value: string;\r\n  icon?: LucideIcon;\r\n  description?: string;\r\n}\r\n\r\n// Component for animated countdown numbers\r\nfunction CountdownValue({ value }: { value: string }) {\r\n  const [displayValue, setDisplayValue] = useState(0);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // Extract numeric part and suffix (e.g., \"50K+\" -> 50, \"K+\")\r\n  const numericMatch = value.match(/(\\d+)/);\r\n  const numeric = numericMatch ? parseInt(numericMatch[1]) : 0;\r\n  const suffix = value.replace(/^\\d+/, \"\");\r\n\r\n  useEffect(() => {\r\n    const ref = React.createRef<HTMLDivElement>();\r\n    \r\n    // Intersection observer to trigger animation when visible\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting && !isVisible) {\r\n          setIsVisible(true);\r\n        }\r\n      },\r\n      { threshold: 0.5 }\r\n    );\r\n\r\n    const tempDiv = document.querySelector(`[data-stat-value=\"${value}\"]`);\r\n    if (tempDiv) observer.observe(tempDiv);\r\n\r\n    return () => {\r\n      if (tempDiv) observer.unobserve(tempDiv);\r\n    };\r\n  }, [value, isVisible]);\r\n\r\n  useEffect(() => {\r\n    if (!isVisible) return;\r\n\r\n    let start = 0;\r\n    const duration = 2000; // 2 seconds animation\r\n    const startTime = Date.now();\r\n\r\n    const animate = () => {\r\n      const elapsed = Date.now() - startTime;\r\n      const progress = Math.min(elapsed / duration, 1);\r\n      \r\n      // Easing function for smooth animation\r\n      const easeOutQuad = progress => 1 - Math.pow(1 - progress, 2);\r\n      const easedProgress = easeOutQuad(progress);\r\n      \r\n      const currentValue = Math.floor(numeric * easedProgress);\r\n      setDisplayValue(currentValue);\r\n\r\n      if (progress < 1) {\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        setDisplayValue(numeric);\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(animate);\r\n  }, [isVisible, numeric]);\r\n\r\n  return (\r\n    <div data-stat-value={value}>\r\n      {displayValue}{suffix}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface StatsProps extends React.HTMLAttributes<HTMLElement> {\r\n  title?: string;\r\n  description?: string;\r\n  stats: StatItem[];\r\n  columns?: 2 | 3 | 4;\r\n  variant?: \"default\" | \"minimal\" | \"cards\";\r\n}\r\n\r\nconst Stats = React.forwardRef<HTMLElement, StatsProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    description,\r\n    stats,\r\n    columns = 4,\r\n    variant = \"default\",\r\n    ...props\r\n  }, ref) => {\r\n    const gridCols = {\r\n      2: \"grid-cols-1 sm:grid-cols-2\",\r\n      3: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3\",\r\n      4: \"grid-cols-2 lg:grid-cols-4\",\r\n    };\r\n\r\n    if (variant === \"cards\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-8 bg-muted/30\", className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {(title || description) && (\r\n              <div className=\"text-center mb-8\">\r\n                {title && (\r\n                  <h2 className=\"text-xl sm:text-2xl font-bold mb-2\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-base text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className={cn(\"grid gap-4\", \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\")}>\r\n              {stats.map((stat, index) => {\r\n                const Icon = stat.icon;\r\n                return (\r\n                  <div\r\n                    key={index}\r\n                    className=\"bg-white dark:bg-black rounded-lg p-4 text-center shadow-sm border hover:shadow-md transition-shadow\"\r\n                  >\r\n                    {Icon && (\r\n                      <div className=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2\">\r\n                        <Icon className=\"w-5 h-5 text-primary\" />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"text-2xl font-bold text-primary mb-1\">\r\n                      <CountdownValue value={stat.value} />\r\n                    </div>\r\n                    <div className=\"text-xs font-medium text-muted-foreground\">\r\n                      {stat.label}\r\n                    </div>\r\n                    {stat.description && (\r\n                      <div className=\"text-xs text-muted-foreground mt-1 line-clamp-2\">\r\n                        {stat.description}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"minimal\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-12\", className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n              {stats.map((stat, index) => {\r\n                const Icon = stat.icon;\r\n                return (\r\n                  <div key={index} className=\"text-center\">\r\n                    {Icon && (\r\n                      <Icon className=\"w-8 h-8 text-primary mx-auto mb-3\" />\r\n                    )}\r\n                    <div className=\"text-2xl sm:text-3xl font-bold text-primary mb-1\">\r\n                      <CountdownValue value={stat.value} />\r\n                    </div>\r\n                    <div className=\"text-sm text-muted-foreground font-medium\">\r\n                      {stat.label}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    // Default variant\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\"py-16 bg-muted/20\", className)}\r\n        {...props}\r\n      >\r\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n          {(title || description) && (\r\n            <div className=\"text-center mb-12\">\r\n              {title && (\r\n                <h2 className=\"text-2xl sm:text-3xl font-bold mb-4\">{title}</h2>\r\n              )}\r\n              {description && (\r\n                <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n            {stats.map((stat, index) => {\r\n              const Icon = stat.icon;\r\n              return (\r\n                <div key={index} className=\"text-center\">\r\n                  {Icon && (\r\n                    <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      <Icon className=\"w-8 h-8 text-primary\" />\r\n                    </div>\r\n                  )}\r\n                  <div className=\"text-3xl font-bold text-primary mb-2\">\r\n                    <CountdownValue value={stat.value} />\r\n                  </div>\r\n                  <div className=\"text-sm text-muted-foreground font-medium\">\r\n                    {stat.label}\r\n                  </div>\r\n                  {stat.description && (\r\n                    <div className=\"text-xs text-muted-foreground mt-1\">\r\n                      {stat.description}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nStats.displayName = \"Stats\";\r\n\r\nexport { Stats };\r\nexport type { StatItem };","import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Card, CardContent } from \"./card\";\r\nimport { LucideIcon } from \"lucide-react\";\r\n\r\ninterface FeatureItem {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  icon?: LucideIcon;\r\n  color?: string;\r\n  image?: string;\r\n}\r\n\r\ninterface FeaturesProps extends React.HTMLAttributes<HTMLElement> {\r\n  title?: string;\r\n  subtitle?: string;\r\n  description?: string;\r\n  features: FeatureItem[];\r\n  columns?: 2 | 3 | 4;\r\n  variant?: \"default\" | \"minimal\" | \"cards\" | \"bento\";\r\n  background?: \"default\" | \"muted\" | \"gradient\";\r\n}\r\n\r\nconst Features = React.forwardRef<HTMLElement, FeaturesProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    subtitle,\r\n    description,\r\n    features,\r\n    columns = 3,\r\n    variant = \"default\",\r\n    background = \"default\",\r\n    ...props\r\n  }, ref) => {\r\n    const backgroundClasses = {\r\n      default: \"\",\r\n      muted: \"bg-muted/20\",\r\n      gradient: \"bg-gradient-to-br from-primary/5 via-background to-secondary/5\",\r\n    };\r\n\r\n    const gridCols = {\r\n      2: \"grid-cols-2\",\r\n      3: \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3\",\r\n      4: \"grid-cols-1 sm:grid-cols-2 lg:grid-cols-4\",\r\n    };\r\n\r\n    if (variant === \"bento\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-20\", backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {(title || subtitle || description) && (\r\n              <div className=\"text-center mb-16\">\r\n                {subtitle && (\r\n                  <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                {title && (\r\n                  <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto\">\r\n              {features.map((feature, index) => {\r\n                const Icon = feature.icon;\r\n                const isLarge = index === 0 || index === 3; // Make first and fourth items larger\r\n\r\n                return (\r\n                  <div\r\n                    key={feature.id}\r\n                    className={cn(\r\n                      \"group relative overflow-hidden rounded-2xl bg-white dark:bg-black border hover:shadow-xl transition-all duration-300 hover:-translate-y-1\",\r\n                      isLarge ? \"md:col-span-2 md:row-span-1\" : \"md:col-span-1\"\r\n                    )}\r\n                  >\r\n                    <div className=\"p-8\">\r\n                      <div className=\"flex items-start gap-4\">\r\n                        {Icon && (\r\n                          <div className={cn(\r\n                            \"flex-shrink-0 rounded-xl p-3\",\r\n                            feature.color || \"bg-primary/10 text-primary\"\r\n                          )}>\r\n                            <Icon className=\"w-6 h-6\" />\r\n                          </div>\r\n                        )}\r\n                        <div className=\"flex-1\">\r\n                          <h3 className=\"text-xl font-semibold mb-2 group-hover:text-primary transition-colors\">\r\n                            {feature.title}\r\n                          </h3>\r\n                          <p className=\"text-muted-foreground leading-relaxed\">\r\n                            {feature.description}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"minimal\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"py-16\", backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {(title || subtitle || description) && (\r\n              <div className=\"text-center mb-12\">\r\n                {subtitle && (\r\n                  <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                {title && (\r\n                  <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n              {features.map((feature) => {\r\n                const Icon = feature.icon;\r\n                return (\r\n                  <div key={feature.id} className=\"text-center\">\r\n                    {Icon && (\r\n                      <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                        <Icon className=\"w-6 h-6 text-primary\" />\r\n                      </div>\r\n                    )}\r\n                    <h3 className=\"text-lg font-semibold mb-2\">{feature.title}</h3>\r\n                    <p className=\"text-muted-foreground\">{feature.description}</p>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"cards\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"pt-0 sm:pt-2 pb-12 sm:pb-20\", backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-3 sm:px-6 lg:px-8\">\r\n            {(title || subtitle || description) && (\r\n              <div className=\"text-center mb-8 sm:mb-16\">\r\n                {subtitle && (\r\n                  <div className=\"text-xs sm:text-sm font-medium text-primary mb-1 sm:mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                {title && (\r\n                  <h2 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-4\">{title}</h2>\r\n                )}\r\n                {description && (\r\n                  <p className=\"text-sm sm:text-base lg:text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className={cn(\"grid gap-3 sm:gap-6 lg:gap-8\", \"grid-cols-2 lg:grid-cols-4\")}>\r\n              {features.map((feature) => {\r\n                const Icon = feature.icon;\r\n                return (\r\n                  <Card key={feature.id} className=\"hover:shadow-lg transition-shadow dark:border-2 dark:border-white bg-card backdrop-blur-sm aspect-square flex flex-col\">\r\n                    <CardContent className=\"p-3 sm:p-6 lg:p-8 flex flex-col items-center justify-center h-full text-center\">\r\n                      {Icon && (\r\n                        <div className={cn(\r\n                          \"w-10 sm:w-14 lg:w-16 h-10 sm:h-14 lg:h-16 mx-auto mb-2 sm:mb-4 lg:mb-6 rounded-lg sm:rounded-xl lg:rounded-2xl p-2 sm:p-3 lg:p-4 flex items-center justify-center\",\r\n                          feature.color || \"bg-gradient-to-br from-primary/10 to-primary/5 text-primary\"\r\n                        )}>\r\n                          <Icon className=\"w-5 sm:w-6 lg:w-8 h-5 sm:h-6 lg:h-8\" />\r\n                        </div>\r\n                      )}\r\n                      <h3 className=\"text-sm sm:text-base lg:text-lg font-semibold mb-1 sm:mb-2 lg:mb-3\">{feature.title}</h3>\r\n                      <p className=\"text-xs sm:text-sm text-muted-foreground leading-relaxed\">{feature.description}</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    // Default variant\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\"py-20\", backgroundClasses[background], className)}\r\n        {...props}\r\n      >\r\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n          {(title || subtitle || description) && (\r\n            <div className=\"text-center mb-16\">\r\n              {subtitle && (\r\n                <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                  {subtitle}\r\n                </div>\r\n              )}\r\n              {title && (\r\n                <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">{title}</h2>\r\n              )}\r\n              {description && (\r\n                <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className={cn(\"grid gap-8\", gridCols[columns])}>\r\n            {features.map((feature) => {\r\n              const Icon = feature.icon;\r\n              return (\r\n                <div key={feature.id} className=\"flex gap-6\">\r\n                  {Icon && (\r\n                    <div className={cn(\r\n                      \"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center\",\r\n                      feature.color || \"bg-primary/10 text-primary\"\r\n                    )}>\r\n                      <Icon className=\"w-6 h-6\" />\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold mb-2\">{feature.title}</h3>\r\n                    <p className=\"text-muted-foreground leading-relaxed\">{feature.description}</p>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nFeatures.displayName = \"Features\";\r\n\r\nexport { Features };\r\nexport type { FeatureItem };","import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"./button\";\r\nimport { LucideIcon } from \"lucide-react\";\r\n\r\ninterface CTAProps extends React.HTMLAttributes<HTMLElement> {\r\n  title: string;\r\n  subtitle?: string;\r\n  description?: string;\r\n  primaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: LucideIcon;\r\n    variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\r\n  };\r\n  secondaryButton?: {\r\n    text: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n    icon?: LucideIcon;\r\n    variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\";\r\n  };\r\n  variant?: \"default\" | \"minimal\" | \"centered\" | \"split\" | \"gradient\";\r\n  background?: \"default\" | \"muted\" | \"gradient\" | \"primary\";\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n}\r\n\r\nconst CTA = React.forwardRef<HTMLElement, CTAProps>(\r\n  ({\r\n    className,\r\n    title,\r\n    subtitle,\r\n    description,\r\n    primaryButton,\r\n    secondaryButton,\r\n    variant = \"default\",\r\n    background = \"default\",\r\n    size = \"md\",\r\n    ...props\r\n  }, ref) => {\r\n    const backgroundClasses = {\r\n      default: \"\",\r\n      muted: \"bg-muted/20\",\r\n      gradient: \"bg-gradient-to-r from-primary/10 via-primary/5 to-secondary/10\",\r\n      primary: \"bg-primary text-primary-foreground\",\r\n    };\r\n\r\n    const sizeClasses = {\r\n      sm: \"py-12\",\r\n      md: \"py-16\",\r\n      lg: \"py-24\",\r\n    };\r\n\r\n    const titleSizeClasses = {\r\n      sm: \"text-2xl sm:text-3xl\",\r\n      md: \"text-3xl sm:text-4xl\",\r\n      lg: \"text-4xl sm:text-5xl\",\r\n    };\r\n\r\n    if (variant === \"minimal\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"text-center\", sizeClasses[size], backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            {subtitle && (\r\n              <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                {subtitle}\r\n              </div>\r\n            )}\r\n            <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n            {description && (\r\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto mb-8\">\r\n                {description}\r\n              </p>\r\n            )}\r\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n              {primaryButton && (\r\n                <Button\r\n                  asChild={!!primaryButton.href}\r\n                  variant={primaryButton.variant || \"default\"}\r\n                  size=\"lg\"\r\n                  onClick={primaryButton.onClick}\r\n                  className=\"min-w-[160px]\"\r\n                >\r\n                  {primaryButton.href ? (\r\n                    <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n              {secondaryButton && (\r\n                <Button\r\n                  asChild={!!secondaryButton.href}\r\n                  variant={secondaryButton.variant || \"outline\"}\r\n                  size=\"lg\"\r\n                  onClick={secondaryButton.onClick}\r\n                  className=\"min-w-[160px]\"\r\n                >\r\n                  {secondaryButton.href ? (\r\n                    <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"centered\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"text-center\", sizeClasses[size], backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl\">\r\n            <div className=\"bg-white/50 dark:bg-black/50 backdrop-blur-sm rounded-3xl p-8 md:p-12 border\">\r\n              {subtitle && (\r\n                <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                  {subtitle}\r\n                </div>\r\n              )}\r\n              <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n              {description && (\r\n                <p className=\"text-lg text-muted-foreground mb-8\">\r\n                  {description}\r\n                </p>\r\n              )}\r\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n                {primaryButton && (\r\n                  <Button\r\n                    asChild={!!primaryButton.href}\r\n                    variant={primaryButton.variant || \"default\"}\r\n                    size=\"lg\"\r\n                    onClick={primaryButton.onClick}\r\n                    className=\"min-w-[160px]\"\r\n                  >\r\n                    {primaryButton.href ? (\r\n                      <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                        {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        {primaryButton.text}\r\n                      </a>\r\n                    ) : (\r\n                      <>\r\n                        {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                        {primaryButton.text}\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n                {secondaryButton && (\r\n                  <Button\r\n                    asChild={!!secondaryButton.href}\r\n                    variant={secondaryButton.variant || \"outline\"}\r\n                    size=\"lg\"\r\n                    onClick={secondaryButton.onClick}\r\n                    className=\"min-w-[160px]\"\r\n                  >\r\n                    {secondaryButton.href ? (\r\n                      <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                        {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        {secondaryButton.text}\r\n                      </a>\r\n                    ) : (\r\n                      <>\r\n                        {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                        {secondaryButton.text}\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"split\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(sizeClasses[size], backgroundClasses[background], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\r\n              <div>\r\n                {subtitle && (\r\n                  <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n                    {subtitle}\r\n                  </div>\r\n                )}\r\n                <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n                {description && (\r\n                  <p className=\"text-lg text-muted-foreground mb-8\">\r\n                    {description}\r\n                  </p>\r\n                )}\r\n                <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                  {primaryButton && (\r\n                    <Button\r\n                      asChild={!!primaryButton.href}\r\n                      variant={primaryButton.variant || \"default\"}\r\n                      size=\"lg\"\r\n                      onClick={primaryButton.onClick}\r\n                      className=\"min-w-[160px]\"\r\n                    >\r\n                      {primaryButton.href ? (\r\n                        <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                          {primaryButton.text}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                          {primaryButton.text}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                  {secondaryButton && (\r\n                    <Button\r\n                      asChild={!!secondaryButton.href}\r\n                      variant={secondaryButton.variant || \"outline\"}\r\n                      size=\"lg\"\r\n                      onClick={secondaryButton.onClick}\r\n                      className=\"min-w-[160px]\"\r\n                    >\r\n                      {secondaryButton.href ? (\r\n                        <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                          {secondaryButton.text}\r\n                        </a>\r\n                      ) : (\r\n                        <>\r\n                          {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                          {secondaryButton.text}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className=\"lg:text-right\">\r\n                {/* Placeholder for image or additional content */}\r\n                <div className=\"bg-gradient-to-br from-primary/20 to-secondary/20 rounded-2xl p-8 h-64 flex items-center justify-center\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      {primaryButton?.icon && <primaryButton.icon className=\"w-8 h-8 text-primary\" />}\r\n                    </div>\r\n                    <p className=\"text-muted-foreground\">Visual content goes here</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    if (variant === \"gradient\") {\r\n      return (\r\n        <section\r\n          ref={ref}\r\n          className={cn(\"relative overflow-hidden\", sizeClasses[size], className)}\r\n          {...props}\r\n        >\r\n          <div className=\"absolute inset-0 bg-gradient-to-r from-primary via-primary/80 to-secondary\"></div>\r\n          <div className=\"absolute inset-0 bg-black/20\"></div>\r\n          <div className=\"relative container mx-auto px-4 sm:px-6 lg:px-8 text-center text-white\">\r\n            {subtitle && (\r\n              <div className=\"text-sm font-medium text-white/80 mb-2 uppercase tracking-wide\">\r\n                {subtitle}\r\n              </div>\r\n            )}\r\n            <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n            {description && (\r\n              <p className=\"text-lg text-white/90 max-w-2xl mx-auto mb-8\">\r\n                {description}\r\n              </p>\r\n            )}\r\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n              {primaryButton && (\r\n                <Button\r\n                  asChild={!!primaryButton.href}\r\n                  variant=\"secondary\"\r\n                  size=\"lg\"\r\n                  onClick={primaryButton.onClick}\r\n                  className=\"min-w-[160px] bg-white text-primary hover:bg-white/90\"\r\n                >\r\n                  {primaryButton.href ? (\r\n                    <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                      {primaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n              {secondaryButton && (\r\n                <Button\r\n                  asChild={!!secondaryButton.href}\r\n                  variant=\"outline\"\r\n                  size=\"lg\"\r\n                  onClick={secondaryButton.onClick}\r\n                  className=\"min-w-[160px] border-white/30 text-white hover:bg-white/10\"\r\n                >\r\n                  {secondaryButton.href ? (\r\n                    <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </a>\r\n                  ) : (\r\n                    <>\r\n                      {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                      {secondaryButton.text}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      );\r\n    }\r\n\r\n    // Default variant\r\n    return (\r\n      <section\r\n        ref={ref}\r\n        className={cn(\"text-center\", sizeClasses[size], backgroundClasses[background], className)}\r\n        {...props}\r\n      >\r\n        <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n          {subtitle && (\r\n            <div className=\"text-sm font-medium text-primary mb-2 uppercase tracking-wide\">\r\n              {subtitle}\r\n            </div>\r\n          )}\r\n          <h2 className={cn(\"font-bold mb-4\", titleSizeClasses[size])}>{title}</h2>\r\n          {description && (\r\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto mb-8\">\r\n              {description}\r\n            </p>\r\n          )}\r\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n            {primaryButton && (\r\n              <Button\r\n                asChild={!!primaryButton.href}\r\n                variant={primaryButton.variant || \"default\"}\r\n                size=\"lg\"\r\n                onClick={primaryButton.onClick}\r\n                className=\"min-w-[160px]\"\r\n              >\r\n                {primaryButton.href ? (\r\n                  <a href={primaryButton.href} className=\"flex items-center gap-2\">\r\n                    {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                    {primaryButton.text}\r\n                  </a>\r\n                ) : (\r\n                  <>\r\n                    {primaryButton.icon && <primaryButton.icon className=\"w-5 h-5\" />}\r\n                    {primaryButton.text}\r\n                  </>\r\n                )}\r\n              </Button>\r\n            )}\r\n            {secondaryButton && (\r\n              <Button\r\n                asChild={!!secondaryButton.href}\r\n                variant={secondaryButton.variant || \"outline\"}\r\n                size=\"lg\"\r\n                onClick={secondaryButton.onClick}\r\n                className=\"min-w-[160px]\"\r\n              >\r\n                {secondaryButton.href ? (\r\n                  <a href={secondaryButton.href} className=\"flex items-center gap-2\">\r\n                    {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                    {secondaryButton.text}\r\n                  </a>\r\n                ) : (\r\n                  <>\r\n                    {secondaryButton.icon && <secondaryButton.icon className=\"w-5 h-5\" />}\r\n                    {secondaryButton.text}\r\n                  </>\r\n                )}\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n);\r\nCTA.displayName = \"CTA\";\r\n\r\nexport { CTA };","// API configuration for different environments\r\n// In production (Render), frontend and backend are on the same domain\r\n// In development, they might be on different ports\r\nimport { supabase } from \"./supabaseClient\";\r\n\r\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || '';\r\n\r\nexport const api = {\r\n  // Use VITE_API_BASE_URL for full URLs in both dev and prod\r\n  baseURL: API_BASE_URL,\r\n\r\n  // Helper to build full API URLs\r\n  buildUrl: (endpoint: string) => {\r\n    if (API_BASE_URL) {\r\n      // Use full URL from environment\r\n      return `${API_BASE_URL}${endpoint}`;\r\n    } else {\r\n      // Fallback to relative URLs\r\n      return endpoint;\r\n    }\r\n  },\r\n\r\n  // Common API endpoints\r\n  auth: {\r\n    me: () => api.buildUrl('/api/auth/me'),\r\n    login: () => api.buildUrl('/api/auth/login'),\r\n    register: () => api.buildUrl('/api/auth/register'),\r\n    logout: () => api.buildUrl('/api/auth/logout'),\r\n  },\r\n\r\n  products: {\r\n    dataBundles: () => api.buildUrl('/api/products/data-bundles'),\r\n    dataBundle: (id: string) => api.buildUrl(`/api/products/data-bundles/${id}`),\r\n    resultCheckers: () => api.buildUrl('/api/products/result-checkers/stock'),\r\n    resultCheckerInfo: (productId: string, year: number) => api.buildUrl(`/api/products/result-checkers/info/${productId}/${year}`),\r\n  },\r\n\r\n  agent: {\r\n    register: () => api.buildUrl('/api/agent/register'),\r\n    profile: () => api.buildUrl('/api/profile'),\r\n    transactions: () => api.buildUrl('/api/agent/transactions'),\r\n    transactionsStats: () => api.buildUrl('/api/agent/transactions/stats'),\r\n    withdrawals: () => api.buildUrl('/api/agent/withdrawals'),\r\n    storefront: () => api.buildUrl('/api/agent/storefront'),\r\n    pricing: () => api.buildUrl('/api/agent/pricing'),\r\n  },\r\n\r\n  checkout: {\r\n    initialize: () => api.buildUrl('/api/checkout/initialize'),\r\n  },\r\n\r\n  wallet: {\r\n    topup: {\r\n      initialize: () => api.buildUrl('/api/wallet/topup/initialize'),\r\n      verify: (reference: string) => api.buildUrl(`/api/wallet/topup/verify/${reference}`),\r\n    },\r\n    pay: () => api.buildUrl('/api/wallet/pay'),\r\n  },\r\n\r\n  transactions: {\r\n    verify: (reference: string) => api.buildUrl(`/api/transactions/verify/${reference}`),\r\n  },\r\n\r\n  store: (role: string, slug: string) => api.buildUrl(`/api/store/${role}/${slug}`),\r\n};\r\n\r\n// Lock to prevent duplicate 401 auto-logout attempts\r\nlet autoLogoutInProgress = false;\r\n\r\n// API request utility\r\nexport async function apiRequest(endpoint: string, options: RequestInit & { disableAutoLogout?: boolean } = {}): Promise<any> {\r\n  const { disableAutoLogout, ...fetchOptions } = options;\r\n  const url = api.buildUrl(endpoint);\r\n\r\n  // Get access token from Supabase session\r\n  const { data } = await supabase.auth.getSession();\r\n  const token = data.session?.access_token;\r\n\r\n  const response = await fetch(url, {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Cache-Control': 'no-cache, no-store, must-revalidate',\r\n      'Pragma': 'no-cache',\r\n      'Expires': '0',\r\n      ...(token && { 'Authorization': `Bearer ${token}` }),\r\n      ...fetchOptions.headers,\r\n    },\r\n    cache: 'no-store',\r\n    ...fetchOptions,\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n    const errorMessage = errorData.error || errorData.message || `API request failed: ${response.status} ${response.statusText}`;\r\n    console.error('API Error:', { endpoint, status: response.status, error: errorData });\r\n    \r\n    // If unauthorized, sign out the user (unless disabled)\r\n    if (response.status === 401 && !disableAutoLogout && !autoLogoutInProgress) {\r\n      autoLogoutInProgress = true;\r\n      try {\r\n        await supabase.auth.signOut();\r\n        window.location.href = '/login';\r\n      } catch (error) {\r\n        console.error('Auto-logout failed:', error);\r\n        // Force redirect even if signOut fails\r\n        window.location.href = '/login';\r\n      }\r\n      throw new Error('Session expired. Please log in again.');\r\n    }\r\n    \r\n    throw new Error(errorMessage);\r\n  }\r\n\r\n  return response.json();\r\n}","export default \"__VITE_ASSET__eV9nYV87__\"","export default \"__VITE_ASSET__Bzy3mv3X__\"","export default \"__VITE_ASSET__DVop5xmj__\"","export default \"__VITE_ASSET__DrGIsdTt__\"","export default \"__VITE_ASSET__DfpZFhKm__\"","export default \"__VITE_ASSET__Cf$AfwSy__\"","export default \"__VITE_ASSET__DYro9c4C__\"","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    // h-9 to match icon buttons and default buttons.\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-9 w-full rounded-md border border-input bg-white px-3 py-2 text-base text-black ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n","import { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Search, Package, Clock, CheckCircle, XCircle, AlertCircle, RotateCw, Layers } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface TrackedOrder {\r\n  id: string;\r\n  reference: string;\r\n  productName: string;\r\n  customerPhone: string;\r\n  amount: string;\r\n  status: string;\r\n  deliveryStatus: string;\r\n  createdAt: string;\r\n  completedAt?: string;\r\n  phoneNumbers?: any[];\r\n  isBulkOrder: boolean;\r\n  apiResponse?: string;\r\n  skytechStatus?: string;\r\n  skytechData?: any;\r\n}\r\n\r\nexport function OrderTracker() {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [order, setOrder] = useState<TrackedOrder | null>(null);\r\n  const [refreshedAt, setRefreshedAt] = useState<Date | null>(null);\r\n  const { toast } = useToast();\r\n\r\n  const handleSearch = async () => {\r\n    if (!searchQuery.trim()) {\r\n      toast({\r\n        title: \"Search Required\",\r\n        description: \"Please enter a transaction ID or beneficiary phone number\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setRefreshedAt(null);\r\n    try {\r\n      const response = await fetch(`/api/track-order?q=${encodeURIComponent(searchQuery.trim())}`);\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setOrder(data);\r\n        setRefreshedAt(new Date());\r\n      } else {\r\n        setOrder(null);\r\n        toast({\r\n          title: \"Order Not Found\",\r\n          description: data.error || \"No order found with the provided information\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setOrder(null);\r\n      toast({\r\n        title: \"Search Failed\",\r\n        description: \"Failed to search for order. Please try again.\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const refreshOrderStatus = async (orderId: string) => {\r\n    setIsRefreshing(true);\r\n    try {\r\n      const response = await fetch(`/api/order-status/${orderId}`);\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setOrder(data);\r\n        setRefreshedAt(new Date());\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to refresh order status:\", error);\r\n    } finally {\r\n      setIsRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const extractSkytechStatus = (order: TrackedOrder): string | null => {\r\n    try {\r\n      if (!order.apiResponse) return null;\r\n      const apiResponse = JSON.parse(order.apiResponse as string);\r\n      \r\n      // Check for latest status check\r\n      if (apiResponse.skytechStatus?.status) {\r\n        return apiResponse.skytechStatus.status;\r\n      }\r\n      \r\n      // Check for initial response\r\n      if (apiResponse.results && apiResponse.results[0]?.status) {\r\n        return apiResponse.results[0].status;\r\n      }\r\n      \r\n      return null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (statusToCheck: string) => {\r\n    const status = statusToCheck.toLowerCase();\r\n    \r\n    if (status === 'completed' || status === 'delivered' || status === 'success') {\r\n      return <CheckCircle className=\"h-5 w-5 text-green-500\" />;\r\n    } else if (status === 'failed' || status === 'error') {\r\n      return <XCircle className=\"h-5 w-5 text-red-500\" />;\r\n    } else if (status === 'processing' || status === 'pending' || status === 'queued') {\r\n      return <Layers className=\"h-5 w-5 text-blue-500\" />;\r\n    } else {\r\n      return <Package className=\"h-5 w-5 text-blue-500\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (statusToDisplay: string) => {\r\n    const statusLower = statusToDisplay.toLowerCase();\r\n    \r\n    if (statusLower === 'completed' || statusLower === 'delivered' || statusLower === 'success') {\r\n      return <Badge variant=\"default\" className=\"bg-green-500 text-white\">✅ {statusToDisplay}</Badge>;\r\n    } else if (statusLower === 'failed' || statusLower === 'error') {\r\n      return <Badge variant=\"destructive\" className=\"bg-red-500 text-white\">❌ {statusToDisplay}</Badge>;\r\n    } else if (statusLower === 'processing' || statusLower === 'pending') {\r\n      return <Badge variant=\"secondary\" className=\"bg-blue-500 text-white animate-pulse\">🔄 Processing</Badge>;\r\n    } else if (statusLower === 'queued') {\r\n      return <Badge variant=\"secondary\" className=\"bg-blue-500 text-white\">⏳ {statusToDisplay}</Badge>;\r\n    } else {\r\n      return <Badge variant=\"outline\" className=\"bg-gray-500 text-white\">⏳ {statusToDisplay}</Badge>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className=\"w-full max-w-2xl mx-auto bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700\">\r\n      <CardHeader>\r\n        <CardTitle className=\"flex items-center gap-2 text-gray-900 dark:text-white\">\r\n          <Package className=\"h-5 w-5\" />\r\n          Track Your Order\r\n        </CardTitle>\r\n        <CardDescription className=\"text-gray-700 dark:text-gray-300\">\r\n          Enter your transaction ID or beneficiary phone number to track your order status\r\n        </CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        <div className=\"flex gap-2\">\r\n          <Input\r\n            placeholder=\"Transaction ID or Phone Number (e.g., TXN-123456789-ABCDEF or 0241234567)\"\r\n            value={searchQuery}\r\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setSearchQuery(e.target.value)}\r\n            onKeyPress={(e: React.KeyboardEvent<HTMLInputElement>) => e.key === 'Enter' && handleSearch()}\r\n            className=\"flex-1 placeholder:text-gray-500 dark:placeholder:text-gray-400\"\r\n            style={{ color: 'black' }}\r\n          />\r\n          <Button onClick={handleSearch} disabled={isLoading}>\r\n            {isLoading ? (\r\n              <Clock className=\"h-4 w-4 animate-spin\" />\r\n            ) : (\r\n              <Search className=\"h-4 w-4\" />\r\n            )}\r\n            Search\r\n          </Button>\r\n        </div>\r\n\r\n        {order && (() => {\r\n          // Extract SkyTech status once for consistency\r\n          const skytechStatus = order.skytechStatus || extractSkytechStatus(order);\r\n          const displayStatus = skytechStatus || order.deliveryStatus;\r\n          \r\n          return (\r\n          <Card className=\"border-l-4 border-l-blue-500\">\r\n            <CardHeader className=\"pb-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  {getStatusIcon(displayStatus)}\r\n                  <CardTitle className=\"text-lg text-gray-900 dark:text-white\">{order.productName}</CardTitle>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  {getStatusBadge(displayStatus)}\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => refreshOrderStatus(order.id)}\r\n                    disabled={isRefreshing}\r\n                    className=\"ml-2\"\r\n                  >\r\n                    <RotateCw className={`h-4 w-4 ${isRefreshing ? 'animate-spin' : ''}`} />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              <CardDescription className=\"text-gray-700 dark:text-gray-300\">\r\n                Order #{order.reference}\r\n                {refreshedAt && (\r\n                  <span className=\"text-xs text-gray-500 dark:text-gray-400 ml-2\">\r\n                    (Updated: {refreshedAt.toLocaleTimeString()})\r\n                  </span>\r\n                )}\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-3\">\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600 dark:text-gray-400\">Amount:</span>\r\n                  <p className=\"font-semibold text-gray-900 dark:text-white\">GHS {order.amount}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600 dark:text-gray-400\">Date:</span>\r\n                  <p className=\"text-gray-900 dark:text-white\">{new Date(order.createdAt).toLocaleDateString()}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600 dark:text-gray-400\">Customer Phone:</span>\r\n                  <p className=\"text-gray-900 dark:text-white\">{order.customerPhone}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600 dark:text-gray-400\">Type:</span>\r\n                  <p className=\"text-gray-900 dark:text-white\">{order.isBulkOrder ? 'Bulk Order' : 'Single Order'}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {order.isBulkOrder && order.phoneNumbers && (\r\n                <div>\r\n                  <span className=\"font-medium text-gray-600 dark:text-gray-400\">Beneficiary Numbers:</span>\r\n                  <div className=\"mt-1 flex flex-wrap gap-1\">\r\n                    {order.phoneNumbers.map((item: any, index: number) => (\r\n                      <Badge key={index} variant=\"outline\" className=\"text-xs text-gray-900 dark:text-white\">\r\n                        {item.phone}\r\n                      </Badge>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {order.completedAt && (\r\n                <div className=\"pt-2 border-t dark:border-gray-700\">\r\n                  <span className=\"font-medium text-gray-600 dark:text-gray-400\">Completed:</span>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-300\">\r\n                    {new Date(order.completedAt).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"pt-2 border-t dark:border-gray-700\">\r\n                <div className=\"flex items-center gap-2 text-sm\">\r\n                  <AlertCircle className=\"h-4 w-4 text-blue-500\" />\r\n                  <span className=\"text-gray-600 dark:text-gray-400\">\r\n                    Need help? Contact our support team with your order reference.\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n          );\r\n        })()}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}","import { Link } from \"wouter\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Hero } from \"@/components/ui/hero\";\r\nimport { Stats } from \"@/components/ui/stats\";\r\nimport { Features } from \"@/components/ui/features\";\r\nimport { CTA } from \"@/components/ui/cta\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport {\r\n  ArrowRight,\r\n  Zap,\r\n  Shield,\r\n  Headphones,\r\n  DollarSign,\r\n  Users,\r\n  Smartphone,\r\n  CheckCircle,\r\n  Award,\r\n  Package\r\n} from \"lucide-react\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport resultLogo from \"@assets/result_1765780772205.jpg\";\r\nimport banner1 from \"@assets/banner1_1765774201032.jpeg\";\r\nimport banner2 from \"@assets/banner2_1765774201033.jpeg\";\r\nimport banner3 from \"@assets/banner3_1765774201030.jpeg\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { WatchHowToPurchase } from \"@/components/watch-how-to-purchase\";\r\n\r\ninterface ResultCheckerStock {\r\n  type: string;\r\n  year: number;\r\n  price: number;\r\n  stock: number;\r\n  available: number;\r\n}\r\n\r\nconst bannerImages = [banner1, banner2, banner3];\r\n\r\nexport default function HomePage() {\r\n  const { user, isAuthenticated } = useAuth();\r\n\r\n  // Fetch result checker stock\r\n  const { data: resultCheckerStock } = useQuery<ResultCheckerStock[]>({\r\n    queryKey: [\"/api/products/result-checkers/stock\"],\r\n    queryFn: () => apiRequest(\"/api/products/result-checkers/stock\"),\r\n    refetchInterval: 60000, // Refetch every minute\r\n  });\r\n\r\n  // Product categories for homepage\r\n  const productCategories = [\r\n    {\r\n      id: \"mtn\",\r\n      title: \"MTN Data Bundles\",\r\n      description: \"Fast & reliable MTN data packages\",\r\n      icon: () => (\r\n        <img\r\n          src={mtnLogo}\r\n          alt=\"MTN\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-yellow-400 to-orange-500\"\r\n    },\r\n    {\r\n      id: \"telecel\",\r\n      title: \"Telecel Data Bundles\",\r\n      description: \"Affordable Telecel data solutions\",\r\n      icon: () => (\r\n        <img\r\n          src={telecelLogo}\r\n          alt=\"Telecel\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-blue-400 to-blue-600\"\r\n    },\r\n    {\r\n      id: \"at_bigtime\",\r\n      title: \"AT BIG TIME Bundles\",\r\n      description: \"High-speed AirtelTigo bundles\",\r\n      icon: () => (\r\n        <img\r\n          src={airteltigoLogo}\r\n          alt=\"AirtelTigo\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-red-400 to-red-600\"\r\n    },\r\n    {\r\n      id: \"at_ishare\",\r\n      title: \"AT iShare Bundles\",\r\n      description: \"Flexible AirtelTigo iShare plans\",\r\n      icon: () => (\r\n        <img\r\n          src={airteltigoLogo}\r\n          alt=\"AirtelTigo\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-purple-400 to-purple-600\"\r\n    },\r\n    {\r\n      id: \"waec-result-checker\",\r\n      title: \"WAEC Result Checker\",\r\n      description: resultCheckerStock && resultCheckerStock.length > 0 \r\n        ? `${resultCheckerStock.reduce((sum, item) => sum + item.available, 0)} PINs available` \r\n        : \"Instant BECE & WASSCE results\",\r\n      icon: () => (\r\n        <img\r\n          src={resultLogo}\r\n          alt=\"WAEC\"\r\n          className=\"w-8 h-8 object-contain\"\r\n        />\r\n      ),\r\n      color: \"bg-gradient-to-br from-green-400 to-green-600\",\r\n      badge: resultCheckerStock && resultCheckerStock.length > 0 \r\n        ? `${resultCheckerStock.reduce((sum, item) => sum + item.available, 0)} In Stock`\r\n        : null\r\n    },\r\n  ];\r\n\r\n  // Features for homepage\r\n  const features = [\r\n    {\r\n      id: \"instant-delivery\",\r\n      title: \"Instant Delivery\",\r\n      description: \"Get your data bundles delivered instantly after payment\",\r\n      icon: Zap,\r\n      color: \"bg-gradient-to-br from-yellow-400/10 to-orange-500/10\"\r\n    },\r\n    {\r\n      id: \"secured-payment\",\r\n      title: \"100% Secure Payment\",\r\n      description: \"Bank-grade security with encrypted transactions\",\r\n      icon: Shield,\r\n      color: \"bg-gradient-to-br from-green-400/10 to-green-600/10\"\r\n    },\r\n    {\r\n      id: \"customer-support\",\r\n      title: \"24/7 Support\",\r\n      description: \"Round-the-clock customer support for all your needs\",\r\n      icon: Headphones,\r\n      color: \"bg-gradient-to-br from-blue-400/10 to-blue-600/10\"\r\n    },\r\n    {\r\n      id: \"best-prices\",\r\n      title: \"Best Market Prices\",\r\n      description: \"Competitive pricing with exclusive agent discounts\",\r\n      icon: DollarSign,\r\n      color: \"bg-gradient-to-br from-purple-400/10 to-purple-600/10\"\r\n    },\r\n  ];\r\n\r\n  // Stats\r\n  const stats = [\r\n    { label: \"Happy Customers\", value: \"50K+\", icon: Users },\r\n    { label: \"Data Bundles Sold\", value: \"1M+\", icon: Smartphone },\r\n    { label: \"Success Rate\", value: \"99.9%\", icon: CheckCircle },\r\n    { label: \"Years of Service\", value: \"5+\", icon: Award },\r\n  ];\r\n\r\n  const getAgentCtaLink = () => {\r\n    if (!isAuthenticated || !user) return \"/agent/register\";\r\n    if (user.role === \"agent\" || user.role === \"dealer\" || user.role === \"super_dealer\") return \"/agent/dashboard\";\r\n    return \"/agent/register\";\r\n  };\r\n\r\n  const getAgentCtaText = () => {\r\n    if (!isAuthenticated || !user) return \"Become an Agent\";\r\n    if (user.role === \"agent\" || user.role === \"dealer\" || user.role === \"super_dealer\") return \"Go to Dashboard\";\r\n    return \"Become an Agent\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header />\r\n\r\n      <main>\r\n        {/* Hero Section */}\r\n        <Hero\r\n          title={\r\n            <span className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold text-center block\" style={{ fontFamily: \"'Arial Rounded MT Bold', 'Helvetica Rounded', Arial, sans-serif\" }}>\r\n              <span className=\"font-extrabold\">Your Trusted Platform for Digital</span>{\" \"}\r\n              <span className=\"text-blue-600 font-extrabold\">Products</span>\r\n            </span>\r\n          }\r\n          description=\"Purchase data bundles and WAEC result checkers instantly with secure payments and instant delivery.\"\r\n          primaryButton={{\r\n            text: \"Browse Products\",\r\n            href: \"/data-bundles\",\r\n            icon: ArrowRight,\r\n            size: \"sm\",\r\n            className: \"bg-yellow-500 hover:bg-yellow-600 dark:text-white text-black\"\r\n          }}\r\n          secondaryButton={{\r\n            text: \"Track Order\",\r\n            href: \"#track-orders\",\r\n            icon: Package,\r\n            size: \"sm\"\r\n          }}\r\n          images={bannerImages}\r\n          showNavigation={false}\r\n          background=\"gradient\"\r\n          size=\"lg\"\r\n        />\r\n\r\n        {/* Mobile-only watch button under hero */}\r\n        <section className=\"md:hidden py-4\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-sm mx-auto w-full\">\r\n              <WatchHowToPurchase triggerVariant=\"default\" triggerSize=\"sm\" className=\"w-full\" />\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Product Categories Section */}\r\n        <section id=\"products\" className=\"py-20\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"text-center mb-16\">\r\n              <Badge variant=\"outline\" className=\"mb-4\">Our Products</Badge>\r\n              <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">\r\n                Choose Your Network\r\n              </h2>\r\n              <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\r\n                Select from our wide range of data bundles and result checkers from all major networks\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 md:gap-6\">\r\n              {productCategories.map((cat) => (\r\n                <Link key={cat.id} href={`/products/${cat.id}`}>\r\n                  <Card className=\"group h-full hover:shadow-xl transition-all duration-300 hover:-translate-y-1 dark:border-2 dark:border-white shadow-md bg-card aspect-square md:aspect-auto flex flex-col\">\r\n                    <CardContent className=\"p-2 md:p-2 text-center flex flex-col h-full\">\r\n                      {cat.badge && (\r\n                        <Badge variant=\"secondary\" className=\"mb-2 text-[10px] md:text-xs w-fit mx-auto\">\r\n                          {cat.badge}\r\n                        </Badge>\r\n                      )}\r\n                      <div className=\"w-full h-24 md:h-32 mx-auto mb-1 md:mb-1 flex items-center justify-center group-hover:scale-110 transition-transform duration-300\">\r\n                        <cat.icon />\r\n                      </div>\r\n                      <h3 className=\"font-semibold text-xs md:text-base lg:text-lg mb-0.5 md:mb-1 lg:mb-2 group-hover:text-primary transition-colors leading-tight\">\r\n                        {cat.title}\r\n                      </h3>\r\n                      <p className=\"text-[10px] md:text-xs lg:text-sm text-muted-foreground leading-tight md:leading-snug lg:leading-relaxed flex-grow\">\r\n                        {cat.description}\r\n                      </p>\r\n                      <div className=\"mt-2 md:mt-3 lg:mt-4 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                        <ArrowRight className=\"w-3 md:w-4 lg:w-5 h-3 md:h-4 lg:h-5 text-primary mx-auto\" />\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Stats Section - moved here */}\r\n            <Stats\r\n              stats={stats}\r\n            />\r\n          </div>\r\n        </section>\r\n\r\n        {/* Features Section */}\r\n        <Features\r\n          title=\"Experience Excellence\"\r\n          subtitle=\"Why Choose Us\"\r\n          description=\"We're committed to providing the best digital product experience with top-notch service\"\r\n          columns={4}\r\n          className=\"py-0\"\r\n          features={features}\r\n          variant=\"cards\"\r\n          background=\"muted\"\r\n        />\r\n\r\n        {/* Order Tracking Section */}\r\n        <section id=\"track-orders\" className=\"py-20\">\r\n          <div className=\"container mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"max-w-4xl mx-auto text-center\">\r\n              <Badge variant=\"outline\" className=\"mb-4\">Track Orders</Badge>\r\n              <h2 className=\"text-3xl sm:text-4xl font-bold mb-4\">\r\n                Never Lose Track\r\n              </h2>\r\n              <p className=\"text-lg text-muted-foreground mb-12 max-w-2xl mx-auto\">\r\n                Easily track your data bundle and result checker orders using your transaction ID or beneficiary phone number.\r\n              </p>\r\n              <OrderTracker />\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Agent CTA Section */}\r\n        <CTA\r\n          title=\"Start Your Own Business\"\r\n          subtitle=\"Become an Agent\"\r\n          description=\"Join thousands of successful agents earning commissions. Get your custom storefront and start selling digital products today.\"\r\n          primaryButton={{\r\n            text: getAgentCtaText(),\r\n            href: getAgentCtaLink(),\r\n            icon: ArrowRight\r\n          }}\r\n          background=\"gradient\"\r\n          size=\"lg\"\r\n        />\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport {\r\n  Controller,\r\n  FormProvider,\r\n  useFormContext,\r\n  type ControllerProps,\r\n  type FieldPath,\r\n  type FieldValues,\r\n} from \"react-hook-form\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Label } from \"@/components/ui/label\"\r\n\r\nconst Form = FormProvider\r\n\r\ntype FormFieldContextValue<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n> = {\r\n  name: TName\r\n}\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\r\n  {} as FormFieldContextValue\r\n)\r\n\r\nconst FormField = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\r\n>({\r\n  ...props\r\n}: ControllerProps<TFieldValues, TName>) => {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name: props.name }}>\r\n      <Controller {...props} />\r\n    </FormFieldContext.Provider>\r\n  )\r\n}\r\n\r\nconst useFormField = () => {\r\n  const fieldContext = React.useContext(FormFieldContext)\r\n  const itemContext = React.useContext(FormItemContext)\r\n  const { getFieldState, formState } = useFormContext()\r\n\r\n  const fieldState = getFieldState(fieldContext.name, formState)\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"useFormField should be used within <FormField>\")\r\n  }\r\n\r\n  const { id } = itemContext\r\n\r\n  return {\r\n    id,\r\n    name: fieldContext.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    ...fieldState,\r\n  }\r\n}\r\n\r\ntype FormItemContextValue = {\r\n  id: string\r\n}\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue\r\n)\r\n\r\nconst FormItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const id = React.useId()\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\r\n    </FormItemContext.Provider>\r\n  )\r\n})\r\nFormItem.displayName = \"FormItem\"\r\n\r\nconst FormLabel = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error, formItemId } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabel.displayName = \"FormLabel\"\r\n\r\n// FormLabel without htmlFor for components like RadioGroup that don't have a single focusable element\r\nconst FormLabelWithoutFor = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  const { error } = useFormField()\r\n\r\n  return (\r\n    <Label\r\n      ref={ref}\r\n      className={cn(error && \"text-destructive\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormLabelWithoutFor.displayName = \"FormLabelWithoutFor\"\r\n\r\nconst FormControl = React.forwardRef<\r\n  React.ElementRef<typeof Slot>,\r\n  React.ComponentPropsWithoutRef<typeof Slot>\r\n>(({ ...props }, ref) => {\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\r\n\r\n  return (\r\n    <Slot\r\n      ref={ref}\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormControl.displayName = \"FormControl\"\r\n\r\nconst FormDescription = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { formDescriptionId } = useFormField()\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      id={formDescriptionId}\r\n      className={cn(\"text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nFormDescription.displayName = \"FormDescription\"\r\n\r\nconst FormMessage = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, children, ...props }, ref) => {\r\n  const { error, formMessageId } = useFormField()\r\n  const body = error ? String(error?.message ?? \"\") : children\r\n\r\n  if (!body) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <p\r\n      ref={ref}\r\n      id={formMessageId}\r\n      className={cn(\"text-sm font-medium text-destructive\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  )\r\n})\r\nFormMessage.displayName = \"FormMessage\"\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormLabelWithoutFor,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { Loader2, Mail, Lock, Eye, EyeOff, ArrowLeft } from \"lucide-react\";\r\nimport { getAgentId, clearAgentStore } from \"@/lib/store-context\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nconst loginSchema = z.object({\r\n  email: z.string().email(\"Invalid email address\"),\r\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\r\n});\r\n\r\ntype LoginFormData = z.infer<typeof loginSchema>;\r\n\r\nexport default function LoginPage() {\r\n  const [, setLocation] = useLocation();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const { login, isLoginLoading, loginError, user, isLoading } = useAuth();\r\n  const { toast } = useToast();\r\n  const { theme } = useTheme();\r\n  const [hasRedirected, setHasRedirected] = useState(false);\r\n\r\n  const form = useForm<LoginFormData>({\r\n    resolver: zodResolver(loginSchema),\r\n    defaultValues: {\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n  });\r\n\r\n  // Navigate based on user role when user is loaded and auth is ready\r\n  useEffect(() => {\r\n    // Don't redirect while auth is still loading or if already redirected\r\n    if (isLoading || hasRedirected) {\r\n      return;\r\n    }\r\n\r\n    if (user) {\r\n      setHasRedirected(true);\r\n\r\n      if (user.role === \"admin\") {\r\n        console.log(\"Redirecting admin to /admin\");\r\n        setLocation(\"/admin\");\r\n      } else if (user.role === \"agent\") {\r\n        console.log(\"Redirecting agent to /agent/dashboard\");\r\n        setLocation(\"/agent/dashboard\");\r\n      } else if (user.role === \"dealer\") {\r\n        console.log(\"Redirecting dealer to /dealer/dashboard\");\r\n        setLocation(\"/dealer/dashboard\");\r\n      } else if (user.role === \"super_dealer\") {\r\n        console.log(\"Redirecting super dealer to /super-dealer/dashboard\");\r\n        setLocation(\"/super-dealer/dashboard\");\r\n      } else if (user.role === \"master\") {\r\n        console.log(\"Redirecting master to /master/dashboard\");\r\n        setLocation(\"/master/dashboard\");\r\n      } else if (user.role === \"user\" || user.role === \"guest\") {\r\n        console.log(\"Redirecting user to /user/dashboard\");\r\n        setLocation(\"/user/dashboard\");\r\n      } else {\r\n        console.log(\"Redirecting user to /\");\r\n        setLocation(\"/\");\r\n      }\r\n    } else {\r\n      console.log(\"No user found, staying on login page\");\r\n    }\r\n  }, [user, isLoading, setLocation]);\r\n\r\n  const onSubmit = async (data: LoginFormData) => {\r\n    try {\r\n      const result = await login({ email: data.email, password: data.password });\r\n      if (!result.error) {\r\n        // Clear agent store context after successful login\r\n        clearAgentStore();\r\n        toast({\r\n          title: \"Welcome back!\",\r\n          description: \"You have successfully logged in.\",\r\n        });\r\n        // Note: Redirection is handled by the useEffect below based on user role from database\r\n      }\r\n    } catch (error) {\r\n      // Error is handled by the mutation\r\n    }\r\n  };\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <nav className=\"mb-6 px-2\">\r\n        <Link href={agentStore ? `/store/${agentStore}` : \"/\"} data-testid=\"link-back-home\">\r\n          <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Home\r\n          </Button>\r\n        </Link>\r\n      </nav>\r\n      \r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <div className=\"w-full max-w-md shadow-xl border-2 border-yellow-400 bg-white rounded-xl p-8\">\r\n            {isLoginLoading && (\r\n              <div className=\"absolute inset-0 bg-background flex items-center justify-center z-10 rounded-lg\">\r\n                <div className=\"flex flex-col items-center gap-2\">\r\n                  <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                  <p className=\"text-sm text-black dark:text-black\">Signing you in...</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          <div className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img\r\n                src={theme === \"dark\" ? logoDark : logoLight}\r\n                alt={APP_NAME}\r\n                className=\"h-8 w-auto\"\r\n              />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-black dark:text-black\">Welcome back</h2>\r\n            <p className=\"text-black dark:text-black\">\r\n              Sign in to your {APP_NAME} account\r\n            </p>\r\n          </div>\r\n        <div>\r\n          <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"email\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"text-black dark:text-black\">Email</FormLabel>\r\n                    <div className=\"relative\">\r\n                      <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <FormControl>\r\n                        <Input\r\n                          placeholder=\"you@example.com\"\r\n                          type=\"email\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-email\"\r\n                          name={field.name}\r\n                          autoComplete=\"email\"\r\n                          {...field}\r\n                        />\r\n                      </FormControl>\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"password\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel className=\"text-black dark:text-black\">Password</FormLabel>\r\n                    <div className=\"relative\">\r\n                      <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <FormControl>\r\n                        <Input\r\n                          placeholder=\"Enter your password\"\r\n                          type={showPassword ? \"text\" : \"password\"}\r\n                          className=\"pl-10 pr-10\"\r\n                          data-testid=\"input-password\"\r\n                          name={field.name}\r\n                          autoComplete=\"current-password\"\r\n                          {...field}\r\n                        />\r\n                      </FormControl>\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        className=\"absolute right-1 top-0 h-full px-3\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <EyeOff className=\"h-4 w-4 text-muted-foreground\" />\r\n                        ) : (\r\n                          <Eye className=\"h-4 w-4 text-muted-foreground\" />\r\n                        )}\r\n                      </Button>\r\n                    </div>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                className=\"w-full\"\r\n                disabled={isLoginLoading}\r\n                data-testid=\"button-submit-login\"\r\n              >\r\n                {isLoginLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                Sign in\r\n              </Button>\r\n              {loginError && (\r\n                <div className=\"text-red-500 dark:text-red-400 text-sm mt-2\">\r\n                  {loginError}\r\n                </div>\r\n              )}\r\n            </form>\r\n          </Form>\r\n\r\n\r\n\r\n          <div className=\"mt-6 text-center text-sm\">\r\n            <span className=\"text-black dark:text-black\">Don't have an account? </span>\r\n            <Link href=\"/register\" className=\"text-primary hover:underline font-medium\" data-testid=\"link-register\">\r\n              Sign up\r\n            </Link>\r\n          </div>\r\n\r\n          <div className=\"mt-4 text-center text-sm\">\r\n            <span className=\"text-black dark:text-black\">Want to become an agent? </span>\r\n            <Link href=\"/agent/register\" className=\"text-primary hover:underline font-medium\" data-testid=\"link-agent-register\">\r\n              Register as Agent\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Loader2, Mail, Lock, User, Phone, Eye, EyeOff, ArrowLeft } from \"lucide-react\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nconst registerSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  phone: z.string().min(10, \"Phone number must be at least 10 digits\"),\r\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\r\n  confirmPassword: z.string(),\r\n}).refine((data) => data.password === data.confirmPassword, {\r\n  message: \"Passwords don't match\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype RegisterFormData = z.infer<typeof registerSchema>;\r\n\r\nexport default function RegisterPage() {\r\n  const [, setLocation] = useLocation();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const { register, isRegisterLoading, registerError, user, isLoading } = useAuth();\r\n  const { toast } = useToast();\r\n  const { theme } = useTheme();\r\n\r\n  const form = useForm<RegisterFormData>({\r\n    resolver: zodResolver(registerSchema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n    },\r\n  });\r\n\r\n  // Navigate based on user role when user is loaded and auth is ready\r\n  useEffect(() => {\r\n    // Don't redirect while auth is still loading\r\n    if (isLoading) {\r\n      return;\r\n    }\r\n\r\n    if (user) {\r\n      const role = user.role;\r\n\r\n      // Only redirect normal users to user dashboard, not admins\r\n      if (role === \"admin\") {\r\n        // Admins shouldn't be registering, but if they somehow land here, redirect to admin\r\n        setLocation(\"/admin\");\r\n      } else if (role === \"agent\") {\r\n        setLocation(\"/agent\");\r\n      } else if (role === \"user\" || role === \"guest\") {\r\n        // Regular users should go to user dashboard\r\n        setLocation(\"/user/dashboard\");\r\n      } else {\r\n        // Fallback to home\r\n        setLocation(\"/\");\r\n      }\r\n    }\r\n  }, [user, isLoading, setLocation]);\r\n\r\n  const onSubmit = async (data: RegisterFormData) => {\r\n    try {\r\n      console.log(\"[REGISTER-FORM] Submitting with data:\", { email: data.email, name: data.name, phone: data.phone });\r\n      \r\n      if (!data.phone || data.phone.length < 10) {\r\n        toast({\r\n          title: \"Phone number required\",\r\n          description: \"Please provide a valid phone number with at least 10 digits\",\r\n          variant: \"destructive\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      const result = await register({ email: data.email, password: data.password, name: data.name, phone: data.phone });\r\n      \r\n      if (result?.error) {\r\n        toast({\r\n          title: \"Registration failed\",\r\n          description: result.error,\r\n          variant: \"destructive\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (result?.error === \"Email confirmation required\") {\r\n        toast({\r\n          title: \"Check your email\",\r\n          description: \"Please click the confirmation link in your email to complete registration.\",\r\n        });\r\n        return;\r\n      }\r\n      \r\n      toast({\r\n        title: \"Account created!\",\r\n        description: \"Welcome to \" + APP_NAME,\r\n      });\r\n      // Note: Redirection is handled by the useEffect based on user role\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Registration failed\",\r\n        description: error.message || \"Something went wrong\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <nav className=\"mb-6 px-2\">\r\n        <Link href={agentStore ? `/store/${agentStore}` : \"/\"} data-testid=\"link-back-home\">\r\n          <Button variant=\"outline\" size=\"sm\" className=\"gap-2 text-black dark:text-white\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Home\r\n          </Button>\r\n        </Link>\r\n      </nav>\r\n      \r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <div className=\"w-full max-w-md shadow-xl border-2 border-yellow-400 bg-white dark:bg-black text-black dark:text-white rounded-xl p-8\">\r\n          <div className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img\r\n                src={theme === \"dark\" ? logoDark : logoLight}\r\n                alt={APP_NAME}\r\n                className=\"h-8 w-auto\"\r\n              />\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold\">Create an account</h2>\r\n            <p className=\"text-muted-foreground dark:text-gray-300\">\r\n              Join {APP_NAME} to purchase data bundles and result checkers\r\n            </p>\r\n          </div>\r\n        <div>\r\n          <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              <FormField\r\n                control={form.control}\r\n                name=\"name\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Full Name</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"John Doe\"\r\n                          className=\"pl-10\"\r\n                          autoComplete=\"name\"\r\n                          data-testid=\"input-name\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"email\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Email</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"you@example.com\"\r\n                          type=\"email\"\r\n                          autoComplete=\"email\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-email\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"phone\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Phone Number</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"0241234567\"\r\n                          autoComplete=\"tel\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-phone\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"password\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Password</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"Create a password\"\r\n                          type={showPassword ? \"text\" : \"password\"}\r\n                          autoComplete=\"new-password\"\r\n                          className=\"pl-10 pr-10\"\r\n                          data-testid=\"input-password\"\r\n                          {...field}\r\n                        />\r\n                        <Button\r\n                          type=\"button\"\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"absolute right-1 top-0 h-full px-3\"\r\n                          onClick={() => setShowPassword(!showPassword)}\r\n                        >\r\n                          {showPassword ? (\r\n                            <EyeOff className=\"h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          ) : (\r\n                            <Eye className=\"h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          )}\r\n                        </Button>\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"confirmPassword\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Confirm Password</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input\r\n                          placeholder=\"Confirm your password\"\r\n                          type={showPassword ? \"text\" : \"password\"}\r\n                          autoComplete=\"new-password\"\r\n                          className=\"pl-10\"\r\n                          data-testid=\"input-confirm-password\"\r\n                          {...field}\r\n                        />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                className=\"w-full\"\r\n                disabled={isRegisterLoading}\r\n                data-testid=\"button-submit-register\"\r\n              >\r\n                {isRegisterLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                            {registerError && (\r\n                              <div className=\"text-red-500 text-sm mt-2\">\r\n                                {registerError}\r\n                              </div>\r\n                            )}\r\n                Create account\r\n              </Button>\r\n            </form>\r\n          </Form>\r\n\r\n          <div className=\"mt-6 text-center text-sm\">\r\n            <span className=\"text-muted-foreground dark:text-gray-300\">Already have an account? </span>\r\n            <Link href=\"/login\" className=\"text-primary hover:underline font-medium\" data-testid=\"link-login\">\r\n              Sign in\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-border\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n","import { Badge } from \"@/components/ui/badge\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface NetworkBadgeProps {\r\n  network: string;\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  className?: string;\r\n}\r\n\r\nconst networkStyles: Record<string, { bg: string; text: string; border: string }> = {\r\n  mtn: {\r\n    bg: \"bg-yellow-100 dark:bg-yellow-900/30\",\r\n    text: \"text-yellow-800 dark:text-yellow-300\",\r\n    border: \"border-yellow-300 dark:border-yellow-700\",\r\n  },\r\n  telecel: {\r\n    bg: \"bg-red-100 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-300\",\r\n    border: \"border-red-300 dark:border-red-700\",\r\n  },\r\n  at_bigtime: {\r\n    bg: \"bg-red-100 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-300\",\r\n    border: \"border-red-300 dark:border-red-700\",\r\n  },\r\n  at_ishare: {\r\n    bg: \"bg-red-100 dark:bg-red-900/30\",\r\n    text: \"text-red-800 dark:text-red-300\",\r\n    border: \"border-red-300 dark:border-red-700\",\r\n  },\r\n};\r\n\r\nconst networkLabels: Record<string, string> = {\r\n  mtn: \"MTN\",\r\n  telecel: \"TELECEL\",\r\n  at_bigtime: \"AT Bigtime\",\r\n  at_ishare: \"AT ishare\",\r\n};\r\n\r\nexport function NetworkBadge({ network, size = \"sm\", className }: NetworkBadgeProps) {\r\n  const styles = networkStyles[network.toLowerCase()] || {\r\n    bg: \"bg-gray-100 dark:bg-white\",\r\n    text: \"text-gray-800 dark:text-gray-300\",\r\n    border: \"border-gray-300 dark:border-gray-700\",\r\n  };\r\n\r\n  const sizeClasses = {\r\n    sm: \"text-xs px-2 py-0.5\",\r\n    md: \"text-sm px-3 py-1\",\r\n    lg: \"text-base px-4 py-1.5\",\r\n  };\r\n\r\n  return (\r\n    <Badge\r\n      variant=\"outline\"\r\n      className={cn(\r\n        \"font-semibold uppercase tracking-wide\",\r\n        styles.bg,\r\n        styles.text,\r\n        styles.border,\r\n        sizeClasses[size],\r\n        className\r\n      )}\r\n    >\r\n      {networkLabels[network.toLowerCase()] || network.toUpperCase()}\r\n    </Badge>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\r\nimport { Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst RadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Root\r\n      className={cn(\"grid gap-2\", className)}\r\n      {...props}\r\n      ref={ref}\r\n    />\r\n  )\r\n})\r\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\r\n\r\nconst RadioGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\r\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  )\r\n})\r\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\r\n\r\nexport { RadioGroup, RadioGroupItem }\r\n","\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-white px-3 py-2 text-sm text-black ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-white text-black shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n","/**\r\n * Client-side Network Validation Utility\r\n * Validates phone numbers against Ghana mobile networks\r\n */\r\n\r\nexport enum GhanaNetwork {\r\n  MTN = \"mtn\",\r\n  TELECEL = \"telecel\",\r\n  AIRTELTIGO = \"airteltigo\",\r\n  AT_BIGTIME = \"at_bigtime\",\r\n  AT_ISHARE = \"at_ishare\",\r\n}\r\n\r\n// Network prefix mappings\r\nconst NETWORK_PREFIXES: Record<GhanaNetwork, string[]> = {\r\n  [GhanaNetwork.MTN]: [\"024\", \"025\", \"053\", \"054\", \"055\", \"059\"],\r\n  [GhanaNetwork.TELECEL]: [\"020\", \"050\"],\r\n  [GhanaNetwork.AIRTELTIGO]: [\"026\", \"027\", \"056\", \"057\"],\r\n  [GhanaNetwork.AT_BIGTIME]: [\"026\", \"027\", \"056\", \"057\"],\r\n  [GhanaNetwork.AT_ISHARE]: [\"026\", \"027\", \"056\", \"057\"],\r\n};\r\n\r\n/**\r\n * Normalizes a phone number\r\n */\r\nexport function normalizePhoneNumber(phone: string): string {\r\n  let normalized = phone.replace(/\\D/g, \"\");\r\n  \r\n  if (normalized.startsWith(\"233\")) {\r\n    normalized = \"0\" + normalized.substring(3);\r\n  }\r\n  \r\n  if (!normalized.startsWith(\"0\")) {\r\n    normalized = \"0\" + normalized;\r\n  }\r\n  \r\n  return normalized;\r\n}\r\n\r\n/**\r\n * Validates phone number length\r\n */\r\nexport function isValidPhoneLength(phone: string): boolean {\r\n  const normalized = normalizePhoneNumber(phone);\r\n  return normalized.length === 10;\r\n}\r\n\r\n/**\r\n * Detects network from phone number\r\n */\r\nexport function detectNetwork(phone: string): GhanaNetwork | null {\r\n  // Phone number prefix validation has been removed\r\n  // Always return null to indicate no network detection\r\n  return null;\r\n}\r\n\r\n/**\r\n * Gets network display name\r\n */\r\nexport function getNetworkDisplayName(network: string): string {\r\n  const names: Record<string, string> = {\r\n    mtn: \"MTN Ghana\",\r\n    telecel: \"Telecel\",\r\n    airteltigo: \"AirtelTigo\",\r\n    at_bigtime: \"AT Bigtime\",\r\n    at_ishare: \"AT ishare\",\r\n  };\r\n  \r\n  return names[network.toLowerCase()] || network.toUpperCase();\r\n}\r\n\r\n/**\r\n * Gets valid prefixes for a network\r\n */\r\nexport function getNetworkPrefixes(network: string): string[] {\r\n  return NETWORK_PREFIXES[network as GhanaNetwork] || [];\r\n}\r\n\r\n/**\r\n * Validates phone against expected network\r\n */\r\nexport function validatePhoneNetwork(\r\n  phone: string,\r\n  expectedNetwork: string\r\n): { isValid: boolean; error?: string } {\r\n  const normalized = normalizePhoneNumber(phone);\r\n  \r\n  if (!isValidPhoneLength(normalized)) {\r\n    return {\r\n      isValid: false,\r\n      error: \"Phone number must be exactly 10 digits (e.g., 0241234567)\",\r\n    };\r\n  }\r\n  \r\n  // Phone number prefix validation has been removed\r\n  // Always consider the number valid\r\n  return { isValid: true };\r\n}\r\n","import { useState } from \"react\";\r\nimport { useParams, useLocation } from \"wouter\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { PageLoader } from \"@/components/ui/loading-spinner\";\r\nimport { NetworkBadge } from \"@/components/products/network-badge\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, APP_NAME } from \"@/lib/constants\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { Phone, Mail, Loader2, ShieldCheck, Lock, CheckCircle, Wifi, Clock, FileCheck, CreditCard, AlertCircle } from \"lucide-react\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\n\r\nconst checkoutSchema = z.object({\r\n  customerPhone: z.string()\r\n    .min(10, \"Phone number must be exactly 10 digits\")\r\n    .max(10, \"Phone number must be exactly 10 digits\")\r\n    .regex(/^0[0-9]{9}$/, \"Phone number must start with 0 and be 10 digits (e.g., 0241234567)\"),\r\n  customerEmail: z.string().email(\"Invalid email\").optional().or(z.literal(\"\")),\r\n  paymentMethod: z.enum([\"paystack\"]).default(\"paystack\"),\r\n  providerId: z.string().optional(),\r\n});\r\n\r\ntype CheckoutFormData = z.infer<typeof checkoutSchema>;\r\n\r\ninterface CheckoutResult {\r\n  authorizationUrl: string;\r\n  reference: string;\r\n  accessCode: string;\r\n}\r\n\r\nexport default function CheckoutPage() {\r\n  const { productType, productId, year } = useParams<{ productType: string; productId: string; year?: string }>();\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  // Get agent slug from URL query parameters\r\n  const agentSlug = new URLSearchParams(window.location.search).get(\"agent\");\r\n\r\n  const isDataBundle = productType === \"data-bundle\";\r\n  const isResultChecker = productType === \"result-checker\";\r\n\r\n  const { data: bundle, isLoading: bundleLoading } = useQuery<DataBundle>({\r\n    queryKey: [`/api/products/data-bundles/${productId}`],\r\n    enabled: isDataBundle && !!productId,\r\n  });\r\n\r\n  const { data: checkerInfo, isLoading: checkerLoading } = useQuery<{ type: string; year: number; price: number; stock: number }>({\r\n    queryKey: [`/api/products/result-checkers/info/${productId}/${year}`],\r\n    enabled: isResultChecker && !!productId && !!year,\r\n  });\r\n\r\n  const price = isDataBundle \r\n    ? (bundle?.effective_price ? parseFloat(bundle.effective_price) : 0)\r\n    : (checkerInfo?.price ? parseFloat(String(checkerInfo.price)) : 0);\r\n\r\n  const form = useForm<CheckoutFormData>({\r\n    resolver: zodResolver(checkoutSchema),\r\n    defaultValues: {\r\n      customerPhone: user?.phone || \"\",\r\n      customerEmail: \"\",\r\n      paymentMethod: \"paystack\",\r\n    },\r\n  });\r\n\r\n  const initializePaymentMutation = useMutation({\r\n    mutationFn: async (data: CheckoutFormData) => {\r\n      // Pay with Paystack\r\n      const payload = {\r\n        productType: isDataBundle ? \"data_bundle\" : \"result_checker\",\r\n        productId: isResultChecker ? `${productId}-${year}` : productId,\r\n        customerPhone: data.customerPhone,\r\n        customerEmail: data.customerEmail || undefined,\r\n        agentSlug: agentSlug || undefined,\r\n      };\r\n\r\n      const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n      return response.json();\r\n    },\r\n    onSuccess: (data) => {\r\n      // Redirect to Paystack payment page\r\n      window.location.href = data.paymentUrl;\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      \r\n      toast({\r\n        title: \"❌ Payment Failed\",\r\n        description: `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: CheckoutFormData) => {\r\n    // Normalize phone number\r\n    const normalizedPhone = normalizePhoneNumber(data.customerPhone);\r\n    \r\n    // Validate phone against network for data bundles\r\n    if (isDataBundle && bundle) {\r\n      const validation = validatePhoneNetwork(normalizedPhone, bundle.network);\r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(bundle.network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: validation.error || `This bundle is for ${bundle.network.toUpperCase()} network. Valid prefixes: ${prefixes.join(\", \")}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    // Use normalized phone for the mutation\r\n    initializePaymentMutation.mutate({\r\n      ...data,\r\n      customerPhone: normalizedPhone,\r\n    });\r\n  };\r\n\r\n  const isLoading = bundleLoading || checkerLoading;\r\n  const product = isDataBundle ? bundle : checkerInfo;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1\">\r\n          <PageLoader text=\"Loading product...\" />\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full mx-4\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <h2 className=\"text-xl font-semibold mb-2\">Product Not Found</h2>\r\n              <p className=\"text-muted-foreground mb-4\">The product you're looking for doesn't exist or is no longer available.</p>\r\n              <Button onClick={() => setLocation(\"/\")}>Back to Products</Button>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-12 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-4xl\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-8\">\r\n            {/* Order Summary */}\r\n            <div className=\"lg:col-span-2 order-2 lg:order-1\">\r\n              <Card className=\"sticky top-24\">\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Order Summary</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  {isDataBundle && bundle && (\r\n                    <>\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <NetworkBadge network={bundle.network} size=\"md\" />\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-lg\" data-testid=\"text-product-name\">{bundle.name}</h3>\r\n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground mt-1\">\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Wifi className=\"h-4 w-4\" />\r\n                            <span>{bundle.dataAmount}</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <Clock className=\"h-4 w-4\" />\r\n                            <span>{bundle.validity}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n\r\n                  {isResultChecker && checkerInfo && (\r\n                    <>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <FileCheck className=\"h-5 w-5 text-primary\" />\r\n                        <span className=\"font-medium uppercase\">{checkerInfo.type}</span>\r\n                      </div>\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-lg\" data-testid=\"text-product-name\">\r\n                          {checkerInfo.type.toUpperCase()} Result Checker\r\n                        </h3>\r\n                        <p className=\"text-sm text-muted-foreground mt-1\">\r\n                          Year: {checkerInfo.year} &bull; {checkerInfo.stock} in stock\r\n                        </p>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n\r\n                  <Separator />\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span className=\"text-muted-foreground\">Subtotal</span>\r\n                    <span className=\"font-medium\">{formatCurrency(price!)}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between text-lg font-bold\">\r\n                    <span>Total</span>\r\n                    <span className=\"text-primary\" data-testid=\"text-total-price\">{formatCurrency(price!)}</span>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground pt-4\">\r\n                    <Lock className=\"h-3 w-3\" />\r\n                    <span>Secured by Paystack</span>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Checkout Form */}\r\n            <div className=\"lg:col-span-3 order-1 lg:order-2\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle>Checkout</CardTitle>\r\n                  <CardDescription>\r\n                    Enter your details to complete the purchase\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                      {/* Payment Method Selection */}\r\n                      <FormField\r\n                        control={form.control}\r\n                        name=\"paymentMethod\"\r\n                        render={({ field }) => (\r\n                          <FormItem className=\"space-y-3\">\r\n                            <FormLabelWithoutFor>Payment Method</FormLabelWithoutFor>\r\n                            <FormControl>\r\n                              <RadioGroup\r\n                                onValueChange={field.onChange}\r\n                                value={field.value}\r\n                                className=\"grid gap-3\"\r\n                              >\r\n                                <div>\r\n                                  <RadioGroupItem\r\n                                    value=\"paystack\"\r\n                                    id=\"paystack\"\r\n                                    className=\"peer sr-only\"\r\n                                  />\r\n                                  <Label\r\n                                    className=\"flex items-center justify-between rounded-lg border-2 border-muted !bg-white p-4 hover:border-green-500 peer-data-[state=checked]:border-green-500 peer-data-[state=checked]:bg-green-50 cursor-pointer transition-all\"\r\n                                  >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                      <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                                      <div>\r\n                                        <div className=\"font-medium text-green-700\">Paystack</div>\r\n                                        <div className=\"text-sm text-green-600\">\r\n                                          Pay with card, bank transfer\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                    {field.value === \"paystack\" && (\r\n                                      <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                                    )}\r\n                                  </Label>\r\n                                </div>\r\n                              </RadioGroup>\r\n                            </FormControl>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      {hasInsufficientBalance && form.watch(\"paymentMethod\") === \"wallet\" && (\r\n                        <Alert variant=\"default\" className=\"border-destructive/50 bg-white text-destructive\">\r\n                          <AlertCircle className=\"h-4 w-4\" />\r\n                          <AlertDescription className=\"text-sm\">\r\n                            <strong>Insufficient Balance:</strong> You need GH₵{(price - walletBalance).toFixed(2)} more. \r\n                            <a href=\"/user/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack below.\r\n                          </AlertDescription>\r\n                        </Alert>\r\n                      )}\r\n\r\n                      <FormField\r\n                        control={form.control}\r\n                        name=\"customerPhone\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Phone Number *</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                                <Input\r\n                                  placeholder=\"0241234567\"\r\n                                  autoComplete=\"tel\"\r\n                                  className=\"pl-10\"\r\n                                  data-testid=\"input-phone\"\r\n                                  {...field}\r\n                                />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>\r\n                              {isDataBundle && bundle ? (\r\n                                <span className=\"text-xs\">\r\n                                  For <strong>{bundle.network.toUpperCase()}</strong> network only. \r\n                                  Valid prefixes: <strong>{getNetworkPrefixes(bundle.network).join(\", \")}</strong>\r\n                                </span>\r\n                              ) : (\r\n                                \"We'll send the result checker PIN to this number\"\r\n                              )}\r\n                            </FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      {/* API Provider Selection - Only for admins on data bundle purchases */}\r\n                      {user?.role === \"admin\" && isDataBundle && providers && providers.length > 0 && (\r\n                        <FormField\r\n                          control={form.control}\r\n                          name=\"providerId\"\r\n                          render={({ field }) => (\r\n                            <FormItem>\r\n                              <FormLabel>API Provider</FormLabel>\r\n                              <Select onValueChange={field.onChange} value={field.value}>\r\n                                <FormControl>\r\n                                  <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Select API provider\" />\r\n                                  </SelectTrigger>\r\n                                </FormControl>\r\n                                <SelectContent>\r\n                                  {providers.map((provider: any) => (\r\n                                    <SelectItem key={provider.id} value={provider.id}>\r\n                                      {provider.name} {provider.isDefault ? \"(Default)\" : \"\"}\r\n                                    </SelectItem>\r\n                                  ))}\r\n                                </SelectContent>\r\n                              </Select>\r\n                              <FormDescription>\r\n                                Choose which external API provider to use for this transaction\r\n                              </FormDescription>\r\n                              <FormMessage />\r\n                            </FormItem>\r\n                          )}\r\n                        />\r\n                      )}\r\n\r\n                      <FormField\r\n                        control={form.control}\r\n                        name=\"customerEmail\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Email (optional)</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                                <Input\r\n                                  placeholder=\"you@example.com\"\r\n                                  type=\"email\"\r\n                                  autoComplete=\"email\"\r\n                                  className=\"pl-10\"\r\n                                  data-testid=\"input-email\"\r\n                                  {...field}\r\n                                />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>\r\n                              We'll send a receipt to this email\r\n                            </FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 flex items-start gap-3\">\r\n                        <ShieldCheck className=\"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5\" />\r\n                        <div className=\"text-sm\">\r\n                          <p className=\"font-medium text-green-800 dark:text-green-300\">\r\n                            Secure Payment\r\n                          </p>\r\n                          <p className=\"text-green-700 dark:text-green-400\">\r\n                            Your payment is processed securely through Paystack. We never store your card details.\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <Button\r\n                        type=\"submit\"\r\n                        size=\"lg\"\r\n                        className=\"w-full gap-2\"\r\n                        disabled={isProcessing}\r\n                        data-testid=\"button-pay\"\r\n                      >\r\n                        {isProcessing ? (\r\n                          <>\r\n                            <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            Pay {formatCurrency(price!)}\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    </form>\r\n                  </Form>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useLocation, useSearch } from \"wouter\";\r\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { PageLoader } from \"@/components/ui/loading-spinner\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { CheckCircle, XCircle, Clock, Copy, ArrowRight, Phone as PhoneIcon } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport type { Transaction } from \"@shared/schema\";\r\n\r\nexport default function CheckoutSuccessPage() {\r\n  const search = useSearch();\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const { user, isLoading: authLoading } = useAuth();\r\n  const queryClient = useQueryClient();\r\n  const params = new URLSearchParams(search);\r\n  const reference = params.get(\"reference\");\r\n  const paystackReference = params.get(\"trxref\"); // Paystack adds this\r\n  const paystackStatus = params.get(\"status\"); // Paystack payment status\r\n\r\n  // Function to get the return URL\r\n  const getReturnUrl = () => {\r\n    try {\r\n      const agentStorefront = localStorage.getItem(\"agentStorefront\");\r\n      if (agentStorefront) {\r\n        const { role, slug, network } = JSON.parse(agentStorefront);\r\n        localStorage.removeItem(\"agentStorefront\"); // Clear after reading\r\n        return `/store/${role}/${slug}/${network}`;\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Failed to parse agentStorefront:\", e);\r\n    }\r\n    return \"/\";\r\n  };\r\n\r\n  // Function to get dashboard URL based on user role\r\n  const getDashboardUrl = () => {\r\n    if (!user) return \"/\";\r\n    if (user.role === \"agent\" || user.role === \"dealer\" || user.role === \"super_dealer\") {\r\n      return `/${user.role}/dashboard`;\r\n    }\r\n    return \"/user/dashboard\";\r\n  };\r\n\r\n  // Determine if this was an agent storefront purchase\r\n  const isAgentStorefrontPurchase = () => {\r\n    try {\r\n      const agentStorefront = localStorage.getItem(\"agentStorefront\");\r\n      return !!agentStorefront;\r\n    } catch {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const [verificationComplete, setVerificationComplete] = useState(false);\r\n  const [paymentFailed, setPaymentFailed] = useState(paystackStatus === \"failed\" || paystackStatus === \"cancelled\");\r\n  const [autoDownloadTriggered, setAutoDownloadTriggered] = useState(false);\r\n\r\n  const [verifyError, setVerifyError] = useState<string | null>(null);\r\n\r\n  const { data: verifyResult } = useQuery<{ success: boolean; transaction: Transaction }>({\r\n    queryKey: [`/api/transactions/verify/${reference || paystackReference}`],\r\n    queryFn: async () => {\r\n      try {\r\n        const response = await fetch(`/api/transactions/verify/${reference || paystackReference}`, {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Cache-Control': 'no-cache, no-store, must-revalidate',\r\n            'Pragma': 'no-cache',\r\n            'Expires': '0',\r\n          },\r\n          cache: 'no-store',\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n          const errorMsg = errorData.error || errorData.message || `API request failed: ${response.status} ${response.statusText}`;\r\n          setVerifyError(errorMsg);\r\n          throw new Error(errorMsg);\r\n        }\r\n        \r\n        setVerifyError(null); // Clear error on success\r\n        return response.json();\r\n      } catch (error: any) {\r\n        const msg = error?.message || 'Failed to connect to server. Please check your internet connection.';\r\n        setVerifyError(msg);\r\n        throw error;\r\n      }\r\n    },\r\n    enabled: !!(reference || paystackReference) && !paymentFailed,\r\n    retry: 3,\r\n    retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 10000), // Exponential backoff: 1s, 2s, 4s, max 10s\r\n    refetchInterval: 5000, // Poll every 5 seconds for real-time status updates from SkyTech\r\n  });\r\n\r\n  // Mark verification as complete once we get data\r\n  useEffect(() => {\r\n    if (verifyResult) {\r\n      setVerificationComplete(true);\r\n      if (verifyResult.success === false) {\r\n        setPaymentFailed(true);\r\n      } else if (verifyResult.success && verifyResult.transaction) {\r\n        // Invalidate agent transactions and stats queries to refresh the data\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/agent/transactions\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/agent/transactions/stats\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/agent/stats\"] });\r\n      }\r\n    }\r\n  }, [verifyResult, queryClient]);\r\n\r\n  const transaction = verifyResult?.transaction;\r\n\r\n  // Auto-download result checker PDF when verification completes\r\n  useEffect(() => {\r\n    console.log(\"=== Auto-download effect triggered ===\");\r\n    console.log(\"hasTransaction:\", !!transaction);\r\n    console.log(\"verificationComplete:\", verificationComplete);\r\n    console.log(\"authLoading:\", authLoading);\r\n    console.log(\"hasUser:\", !!user);\r\n    console.log(\"transactionType:\", transaction?.type);\r\n    console.log(\"transactionId:\", transaction?.id);\r\n    console.log(\"autoDownloadTriggered:\", autoDownloadTriggered);\r\n\r\n    // Remove user requirement - rely on credentials in the request\r\n    if (\r\n      transaction &&\r\n      verificationComplete &&\r\n      transaction.type === \"result_checker\" &&\r\n      transaction.id &&\r\n      !autoDownloadTriggered\r\n    ) {\r\n      console.log(\"✅ All conditions met! Triggering auto-download for result checker\");\r\n      setAutoDownloadTriggered(true);\r\n      \r\n      // Auto-download after a brief delay for better UX\r\n      const timer = setTimeout(async () => {\r\n        try {\r\n          console.log(\"🔍 Fetching PDF for guest download...\");\r\n          \r\n          // Use guest-accessible endpoint with transaction reference\r\n          // No authentication required - validates via reference\r\n          const response = await fetch(`/api/result-checker/download/${transaction.reference}`, {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n            headers: {\r\n              'Content-Type': 'application/pdf',\r\n            },\r\n          });\r\n\r\n          if (!response.ok) {\r\n            console.warn(\"PDF not ready yet, status:\", response.status);\r\n            const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n            console.error(\"PDF error:\", errorData);\r\n            \r\n            toast({\r\n              title: \"PDF Not Ready\",\r\n              description: errorData.error || \"Please click the download button manually\",\r\n              variant: \"destructive\",\r\n            });\r\n            return;\r\n          }\r\n\r\n          // Get the PDF blob\r\n          const blob = await response.blob();\r\n          \r\n          // Create download link\r\n          const url = window.URL.createObjectURL(blob);\r\n          const link = document.createElement('a');\r\n          link.href = url;\r\n          link.download = `${transaction.productName.replace(/\\s+/g, '-')}-${transaction.reference}.pdf`;\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          document.body.removeChild(link);\r\n          \r\n          // Clean up\r\n          window.URL.revokeObjectURL(url);\r\n          \r\n          toast({\r\n            title: \"Download Started\",\r\n            description: \"Your result checker credentials are downloading\",\r\n          });\r\n          \r\n          console.log(\"📥 Auto-download triggered successfully\");\r\n        } catch (error) {\r\n          console.error(\"Auto-download failed:\", error);\r\n          toast({\r\n            title: \"Auto-download Failed\",\r\n            description: \"Please click the download button manually\",\r\n            variant: \"destructive\",\r\n          });\r\n        }\r\n      }, 2000); // Increased delay to allow auth to settle\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [transaction, verificationComplete, autoDownloadTriggered, toast]);\r\n\r\n  // Show loading while authentication is being restored\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <PageLoader />\r\n              <h2 className=\"text-xl font-semibold mb-2 mt-4\">Restoring Session</h2>\r\n              <p className=\"text-muted-foreground\">Please wait while we verify your authentication...</p>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast({\r\n      title: \"Copied!\",\r\n      description: \"Details copied to clipboard\",\r\n    });\r\n  };\r\n\r\n  if (!reference && !paystackReference) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <XCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">Invalid Request</h2>\r\n              <p className=\"text-muted-foreground mb-4\">No transaction reference provided.</p>\r\n              <Button onClick={() => {\r\n                const agentStore = localStorage.getItem(\"agentStore\");\r\n                setLocation(agentStore ? `/store/agent/${agentStore}` : \"/\");\r\n              }} data-testid=\"button-go-home\">\r\n                {localStorage.getItem(\"agentStore\") ? \"Back to Store\" : \"Go to Home\"}\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show payment failed state if Paystack indicates failure\r\n  if (paymentFailed) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <XCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">Payment {paystackStatus === \"cancelled\" ? \"Cancelled\" : \"Failed\"}</h2>\r\n              <p className=\"text-muted-foreground mb-4\">\r\n                {paystackStatus === \"cancelled\" \r\n                  ? \"You cancelled the payment. No charges were made to your account.\"\r\n                  : \"Your payment could not be processed. Please try again.\"}\r\n              </p>\r\n              <div className=\"flex flex-col gap-2\">\r\n                <Button onClick={() => {\r\n                  const agentStore = localStorage.getItem(\"agentStore\");\r\n                  setLocation(agentStore ? `/store/agent/${agentStore}` : \"/\");\r\n                }}>\r\n                  {localStorage.getItem(\"agentStore\") ? \"Back to Store\" : \"Go to Home\"}\r\n                </Button>\r\n                <Button variant=\"outline\" onClick={() => window.history.back()}>\r\n                  Try Again\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show connection error if verification failed after retries\r\n  if (verifyError) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <Header />\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <XCircle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">Connection Failed</h2>\r\n              <p className=\"text-muted-foreground mb-2 text-sm\">{verifyError}</p>\r\n              <p className=\"text-muted-foreground mb-4 text-xs\">\r\n                Your payment may have been processed. Please try refreshing the page or contact support if you experience any issues.\r\n              </p>\r\n              <div className=\"flex flex-col gap-2\">\r\n                <Button onClick={() => window.location.reload()}>\r\n                  Refresh Page\r\n                </Button>\r\n                <Button variant=\"outline\" onClick={() => {\r\n                  const agentStore = localStorage.getItem(\"agentStore\");\r\n                  setLocation(agentStore ? `/store/agent/${agentStore}` : \"/\");\r\n                }}>\r\n                  {localStorage.getItem(\"agentStore\") ? \"Back to Store\" : \"Go to Home\"}\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n        <Footer />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show success immediately and verify in background\r\n  const statusConfig = {\r\n    completed: {\r\n      icon: CheckCircle,\r\n      color: \"text-white\",\r\n      bgColor: \"bg-green-500 dark:bg-green-600\",\r\n      title: \"Payment Successful!\",\r\n      description: verificationComplete ? \"Your transaction has been completed successfully.\" : \"Verifying transaction...\",\r\n    },\r\n    pending: {\r\n      icon: Clock,\r\n      color: \"text-white\",\r\n      bgColor: \"bg-orange-500 dark:bg-orange-600\",\r\n      title: \"Payment Processing\",\r\n      description: \"Your payment is being processed. Please wait...\",\r\n    },\r\n    failed: {\r\n      icon: XCircle,\r\n      color: \"text-white\",\r\n      bgColor: \"bg-red-500 dark:bg-red-600\",\r\n      title: \"Payment Failed\",\r\n      description: \"Your payment could not be processed. Please try again.\",\r\n    },\r\n  };\r\n\r\n  // Determine effective status based on transaction type\r\n  let effectiveStatus: keyof typeof statusConfig;\r\n  \r\n  if (transaction?.type === \"data_bundle\" && transaction?.paymentStatus === \"paid\") {\r\n    // Data bundles: show success when payment is confirmed even if delivery is pending\r\n    effectiveStatus = \"completed\";\r\n  } else if (transaction?.type === \"result_checker\" && transaction?.paymentStatus === \"paid\") {\r\n    // Result checkers: show success when payment is confirmed and item is marked as completed\r\n    effectiveStatus = transaction.status === \"completed\" ? \"completed\" : \"pending\";\r\n  } else {\r\n    // Default: use actual transaction status\r\n    effectiveStatus = (transaction?.status as keyof typeof statusConfig) || (paystackStatus === \"success\" ? \"completed\" : \"pending\");\r\n  }\r\n  \r\n  const status = effectiveStatus;\r\n  const config = statusConfig[status];\r\n  const StatusIcon = config.icon;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-12 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-lg\">\r\n          <Card>\r\n            <CardHeader className=\"text-center\">\r\n              <div className={`flex h-16 w-16 items-center justify-center rounded-full ${config.bgColor} mx-auto mb-4`}>\r\n                <StatusIcon className={`h-8 w-8 ${config.color}`} />\r\n              </div>\r\n              <CardTitle className=\"text-2xl\" data-testid=\"text-status-title\">{config.title}</CardTitle>\r\n              <CardDescription>{config.description}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              {!verificationComplete && (\r\n                <div className=\"bg-blue-500 dark:bg-blue-600 rounded-lg p-4 flex items-center gap-3\">\r\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"></div>\r\n                  <p className=\"text-sm text-white font-medium\">Verifying transaction details...</p>\r\n                </div>\r\n              )}\r\n              {transaction && (\r\n                <>\r\n                  <div className=\"bg-slate-700 dark:bg-slate-800 rounded-lg p-4 space-y-3\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Transaction ID</span>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-xs font-mono text-white\" data-testid=\"text-transaction-id\">{transaction.id}</span>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-6 w-6 text-white hover:bg-white/20\"\r\n                          onClick={() => copyToClipboard(transaction.id)}\r\n                        >\r\n                          <Copy className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Order ID</span>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-sm font-mono text-white\" data-testid=\"text-reference\">{transaction.id.slice(0,8)}</span>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          className=\"h-6 w-6 text-white hover:bg-white/20\"\r\n                          onClick={() => copyToClipboard(transaction.id.slice(0,8))}\r\n                        >\r\n                          <Copy className=\"h-3 w-3\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Product</span>\r\n                      <span className=\"text-sm font-medium text-white\" data-testid=\"text-product\">{transaction.productName}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Amount</span>\r\n                      <span className=\"text-sm font-medium text-white\" data-testid=\"text-amount\">{formatCurrency(transaction.amount)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Phone</span>\r\n                      <span className=\"text-sm font-medium text-white\">{transaction.customerPhone}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-sm text-white/70\">Date</span>\r\n                      <span className=\"text-sm text-white\">{formatDate(transaction.createdAt)}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Bulk Order Phone Numbers */}\r\n                  {(transaction as any).isBulkOrder && (transaction as any).phoneNumbers && (() => {\r\n                    // Parse phoneNumbers - it might be a JSON string or already an array\r\n                    // Items can be strings or objects {phone, bundleName, dataAmount}\r\n                    let phoneNumbersArray: any[] = [];\r\n                    try {\r\n                      const phoneNumbers = (transaction as any).phoneNumbers;\r\n                      if (typeof phoneNumbers === 'string') {\r\n                        phoneNumbersArray = JSON.parse(phoneNumbers);\r\n                      } else if (Array.isArray(phoneNumbers)) {\r\n                        phoneNumbersArray = phoneNumbers;\r\n                      }\r\n                    } catch (e) {\r\n                      console.error('Failed to parse phoneNumbers:', e);\r\n                      phoneNumbersArray = [];\r\n                    }\r\n\r\n                    if (phoneNumbersArray.length === 0) return null;\r\n\r\n                    // Helper to extract phone number from string or object\r\n                    const getPhone = (item: any) => typeof item === 'string' ? item : item?.phone || '';\r\n                    const getAllPhones = () => phoneNumbersArray.map(getPhone).filter(Boolean).join('\\n');\r\n\r\n                    return (\r\n                      <div className=\"bg-green-500 dark:bg-green-600 rounded-lg p-4\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <h4 className=\"font-semibold text-white flex items-center gap-2\">\r\n                            <PhoneIcon className=\"h-4 w-4\" />\r\n                            Bulk Order Recipients ({phoneNumbersArray.length})\r\n                          </h4>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-7 text-xs\"\r\n                            onClick={() => copyToClipboard(getAllPhones())}\r\n                          >\r\n                            <Copy className=\"h-3 w-3 mr-1\" />\r\n                            Copy All\r\n                          </Button>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto\">\r\n                          {phoneNumbersArray.map((item: any, idx: number) => {\r\n                            const phone = getPhone(item);\r\n                            const isObject = typeof item === 'object' && item !== null;\r\n                            \r\n                            return (\r\n                              <div key={idx} className=\"flex items-center gap-2 text-sm text-green-900 dark:text-white bg-white dark:bg-green-700 rounded px-3 py-2\">\r\n                                <span className=\"text-xs text-muted-foreground\">{idx + 1}.</span>\r\n                                <div className=\"flex-1\">\r\n                                  <code className=\"font-mono font-semibold\">{phone}</code>\r\n                                  {isObject && (item.bundleName || item.dataAmount) && (\r\n                                    <div className=\"text-xs text-green-600 dark:text-green-200 mt-1\">\r\n                                      {item.bundleName && <span>{item.bundleName}</span>}\r\n                                      {item.dataAmount && <span className=\"ml-2\">({item.dataAmount})</span>}\r\n                                    </div>\r\n                                  )}\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })()}\r\n\r\n                  {transaction.status === \"completed\" && transaction.type === \"result_checker\" && (\r\n                    <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\">\r\n                      <h4 className=\"font-semibold text-green-800 dark:text-green-300 mb-3\">Download Your Result Checker</h4>\r\n                      <p className=\"text-sm text-green-700 dark:text-green-400 mb-3\">\r\n                        Your result checker has been purchased successfully. Download your PDF credentials below.\r\n                      </p>\r\n                      <Button\r\n                        onClick={async () => {\r\n                          try {\r\n                            // Use guest-accessible endpoint with transaction reference\r\n                            // No authentication required\r\n                            const response = await fetch(`/api/result-checker/download/${transaction.reference}`, {\r\n                              method: 'GET',\r\n                              credentials: 'include',\r\n                              headers: {\r\n                                'Content-Type': 'application/pdf',\r\n                              },\r\n                            });\r\n                            \r\n                            if (!response.ok) {\r\n                              const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\r\n                              throw new Error(errorData.error || `Failed to download PDF: ${response.status}`);\r\n                            }\r\n                            \r\n                            // Get the PDF blob\r\n                            const blob = await response.blob();\r\n                            \r\n                            // Create download link\r\n                            const url = window.URL.createObjectURL(blob);\r\n                            const link = document.createElement('a');\r\n                            link.href = url;\r\n                            link.download = `${transaction.productName.replace(/\\s+/g, '-')}-${transaction.reference}.pdf`;\r\n                            document.body.appendChild(link);\r\n                            link.click();\r\n                            document.body.removeChild(link);\r\n                            \r\n                            // Clean up\r\n                            window.URL.revokeObjectURL(url);\r\n                            \r\n                            toast({\r\n                              title: \"✅ Downloaded\",\r\n                              description: \"Your PDF credentials have been downloaded successfully\",\r\n                            });\r\n                          } catch (error: any) {\r\n                            console.error(\"PDF Download error:\", error);\r\n                            toast({\r\n                              title: \"❌ Download Failed\",\r\n                              description: error.message || \"Failed to download PDF. Please contact support.\",\r\n                              variant: \"destructive\",\r\n                            });\r\n                          }\r\n                        }}\r\n                        className=\"w-full gap-2 bg-green-400 hover:bg-green-300 text-black border-2 border-green-400 font-semibold\"\r\n                        data-testid=\"button-download-pdf\"\r\n                      >\r\n                        <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                        </svg>\r\n                        Download PDF Credentials\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {status === \"completed\" && transaction.type === \"data_bundle\" && (\r\n                    <div className=\"bg-green-500 text-white rounded-lg p-4 shadow-sm\">\r\n                      <h4 className=\"font-semibold text-white mb-2 flex items-center gap-2\">\r\n                        <CheckCircle className=\"h-4 w-4 text-white\" />\r\n                        Order Placed Successfully\r\n                      </h4>\r\n                      <p className=\"text-sm text-white/90\">\r\n                        Your data bundle order for <strong className=\"font-semibold text-white\">{transaction.customerPhone}</strong> has been placed with our provider.\r\n                        {transaction.deliveryStatus === \"processing\" && (\r\n                          <span className=\"block mt-1 text-white/90\">\r\n                            ⏳ Delivery in progress - you will receive an SMS confirmation shortly.\r\n                          </span>\r\n                        )}\r\n                        {transaction.deliveryStatus === \"delivered\" && (\r\n                          <span className=\"block mt-1 text-white/90\">\r\n                            ✓ Delivered! Check your phone for confirmation.\r\n                          </span>\r\n                        )}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                {isAgentStorefrontPurchase() ? (\r\n                  <Button onClick={() => setLocation(getReturnUrl())} className=\"gap-2 flex-1\" variant=\"outline\" data-testid=\"button-continue-shopping\">\r\n                    Continue Shopping\r\n                    <ArrowRight className=\"h-4 w-4\" />\r\n                  </Button>\r\n                ) : (\r\n                  <Button onClick={() => setLocation(getDashboardUrl())} className=\"gap-2 flex-1\" variant=\"outline\" data-testid=\"button-continue-dashboard\">\r\n                    Back to Dashboard\r\n                    <ArrowRight className=\"h-4 w-4\" />\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Loader2, CheckCircle, XCircle, Wallet } from \"lucide-react\";\r\n\r\ninterface WalletTopupVerifyResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  amount?: number;\r\n  newBalance?: number;\r\n}\r\n\r\ninterface WalletTopupSuccessViewProps {\r\n  reference: string | null;\r\n  agent: any;\r\n  authLoading: boolean;\r\n  attempts: number;\r\n  query: {\r\n    data?: WalletTopupVerifyResponse;\r\n    isLoading: boolean;\r\n    isError: boolean;\r\n  };\r\n  setLocation: (path: string) => void;\r\n}\r\n\r\nexport function WalletTopupSuccessView({\r\n  reference,\r\n  agent,\r\n  authLoading,\r\n  attempts,\r\n  query,\r\n  setLocation,\r\n}: WalletTopupSuccessViewProps) {\r\n  const { data: verificationResult, isLoading, isError } = query;\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">\r\n                Restoring Session\r\n              </h2>\r\n              <p className=\"text-muted-foreground\">\r\n                Please wait while we verify your authentication.\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!reference) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2 text-destructive\">\r\n                <XCircle className=\"h-6 w-6\" />\r\n                Invalid Request\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <p className=\"text-muted-foreground mb-4\">\r\n                No transaction reference was found.\r\n              </p>\r\n              <Button\r\n                onClick={() => setLocation(\"/user/wallet\")}\r\n                className=\"w-full\"\r\n              >\r\n                Go to Wallet\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading || (!verificationResult && attempts < 10)) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                Verifying Payment\r\n              </CardTitle>\r\n              <CardDescription>\r\n                Attempt {attempts + 1} of 10\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <p className=\"text-muted-foreground\">\r\n                Please wait while we confirm your payment.\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isError || !verificationResult?.success) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background\">\r\n        <Header />\r\n        <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n          <Card className=\"max-w-md w-full border-destructive/50\">\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2 text-destructive\">\r\n                <XCircle className=\"h-6 w-6\" />\r\n                Payment Verification Failed\r\n              </CardTitle>\r\n              <CardDescription>\r\n                Order ID: {reference?.slice(0,8)}\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <p className=\"text-muted-foreground\">\r\n                {verificationResult?.message ??\r\n                  \"We could not verify your payment.\"}\r\n              </p>\r\n\r\n              <Button\r\n                className=\"w-full\"\r\n                onClick={() =>\r\n                  agent\r\n                    ? setLocation(\"/agent/wallet\")\r\n                    : setLocation(\"/user/wallet\")\r\n                }\r\n              >\r\n                Check Wallet\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * SUCCESS\r\n   */\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Header />\r\n      <div className=\"container mx-auto px-4 py-16 flex items-center justify-center\">\r\n        <Card className=\"max-w-md w-full\">\r\n          <CardHeader>\r\n            <CardTitle className=\"flex items-center gap-2 text-green-600\">\r\n              <CheckCircle className=\"h-6 w-6\" />\r\n              Top-up Successful\r\n            </CardTitle>\r\n            <CardDescription>\r\n              Your wallet has been credited\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-4\">\r\n            <div className=\"bg-green-500 text-white border border-green-600 rounded-lg p-4\">\r\n              <div className=\"flex justify-between\">\r\n                <span>Amount Added</span>\r\n                <span className=\"font-bold\">\r\n                  GH₵{verificationResult.amount}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span>New Balance</span>\r\n                <span className=\"font-bold\">\r\n                  GH₵{verificationResult.newBalance}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              className=\"w-full\"\r\n              onClick={() =>\r\n                agent\r\n                  ? setLocation(\"/agent/dashboard\")\r\n                  : setLocation(\"/user/dashboard\")\r\n              }\r\n            >\r\n              <Wallet className=\"w-4 h-4 mr-2\" />\r\n              Continue\r\n            </Button>\r\n\r\n            <p className=\"text-xs text-center text-muted-foreground\">\r\n              Order ID: {reference?.slice(0,8)}\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useEffect, useState } from \"react\";\r\nimport { useLocation, useSearch } from \"wouter\";\r\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { WalletTopupSuccessView } from \"./WalletTopupSuccessView\";\r\n\r\ninterface WalletTopupVerifyResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  amount?: number;\r\n  newBalance?: number;\r\n}\r\n\r\nexport function WalletTopupSuccessContainer() {\r\n  const [, setLocation] = useLocation();\r\n  const searchParams = new URLSearchParams(useSearch());\r\n  const reference = searchParams.get(\"reference\");\r\n\r\n  const { agent, isLoading: authLoading } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  const [attempts, setAttempts] = useState(0);\r\n\r\n  const query = useQuery<WalletTopupVerifyResponse>({\r\n    queryKey: reference\r\n      ? [\"wallet-topup-verify\", reference]\r\n      : [\"wallet-topup-missing-ref\"],\r\n    queryFn: async (): Promise<WalletTopupVerifyResponse> => {\r\n      return apiRequest(`/api/wallet/topup/verify/${reference}`, {\r\n        disableAutoLogout: true,\r\n      });\r\n    },\r\n    enabled: Boolean(reference) && !authLoading && attempts < 10,\r\n    refetchInterval: (query) => (query.state.data?.success ? false : 3000),\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!query.data || query.data.success || attempts >= 10) return;\r\n    setAttempts((a) => a + 1);\r\n  }, [query.data]);\r\n\r\n  useEffect(() => {\r\n    if (query.data?.success) {\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/user/stats\"],\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/auth/me\"],\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/agent/transactions\"],\r\n      });\r\n      queryClient.invalidateQueries({\r\n        queryKey: [\"/api/agent/wallet\"],\r\n      });\r\n    }\r\n  }, [query.data, queryClient]);\r\n\r\n  return (\r\n    <WalletTopupSuccessView\r\n      reference={reference}\r\n      agent={agent}\r\n      authLoading={authLoading}\r\n      attempts={attempts}\r\n      query={query}\r\n      setLocation={setLocation}\r\n    />\r\n  );\r\n}","import { WalletTopupSuccessContainer } from \"./WalletTopupSuccessContainer\";\r\n\r\nexport default function WalletTopupSuccessPage() {\r\n  return <WalletTopupSuccessContainer />;\r\n}\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Textarea = React.forwardRef<\r\n  HTMLTextAreaElement,\r\n  React.ComponentProps<\"textarea\">\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-white px-3 py-2 text-base text-black ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n","import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n","import { useState, useMemo } from \"react\";\r\nimport { Link } from \"wouter\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { Loader2, Mail, Lock, User, Phone, Store, Link2, Eye, EyeOff, ArrowLeft, AlertCircle, CheckCircle2, Info, Copy } from \"lucide-react\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nconst agentRegisterSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  phone: z.string().min(10, \"Phone must be at least 10 digits\"),\r\n  password: z.string().min(8, \"Password must be at least 8 characters\"),\r\n  confirmPassword: z.string(),\r\n  businessName: z.string().min(2, \"Business name is required\"),\r\n  storefrontSlug: z.string()\r\n    .min(3, \"URL must be at least 3 characters\")\r\n    .regex(/^[a-z0-9-]+$/, \"Only lowercase letters, numbers, and hyphens\"),\r\n  businessDescription: z.string().min(10, \"Business description must be at least 10 characters\"),\r\n  agreedToTerms: z.boolean().refine((val) => val === true, {\r\n    message: \"You must agree to the terms and conditions\",\r\n  }),\r\n}).refine((data) => data.password === data.confirmPassword, {\r\n  message: \"Passwords don't match\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype AgentRegisterFormData = z.infer<typeof agentRegisterSchema>;\r\n\r\nexport default function AgentRegisterPage() {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showInfoDialog, setShowInfoDialog] = useState(() => {\r\n    // Only show dialog if user hasn't dismissed it before\r\n    if (typeof window !== 'undefined') {\r\n      const hasSeenDialog = localStorage.getItem('agent-info-dialog-seen');\r\n      return !hasSeenDialog;\r\n    }\r\n    return true;\r\n  });\r\n  const { toast } = useToast();\r\n  const { theme } = useTheme();\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast({\r\n      title: \"Copied!\",\r\n      description: \"URL copied to clipboard\",\r\n    });\r\n  };\r\n\r\n  const form = useForm<AgentRegisterFormData>({\r\n    resolver: zodResolver(agentRegisterSchema),\r\n    mode: 'onSubmit', // Only validate on submit to reduce re-renders\r\n    defaultValues: {\r\n      name: \"\",\r\n      email: typeof window !== 'undefined' ? new URLSearchParams(window.location.search).get('email') || '' : '',\r\n      phone: \"\",\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n      businessName: \"\",\r\n      storefrontSlug: \"\",\r\n      businessDescription: \"\",\r\n      agreedToTerms: false,\r\n    },\r\n  });\r\n\r\n  const registerMutation = useMutation({\r\n    mutationFn: async (data: AgentRegisterFormData) => {\r\n      const result = await apiRequest(\"POST\", \"/api/agent/register\", data);\r\n      return result as {\r\n        message: string;\r\n        paymentUrl: string;\r\n        paymentReference: string;\r\n        amount: number;\r\n      };\r\n    },\r\n    onSuccess: (data) => {\r\n      // Redirect to Paystack payment\r\n      if (data.paymentUrl) {\r\n        toast({\r\n          title: \"Registration successful!\",\r\n          description: \"Redirecting to payment...\",\r\n        });\r\n        // Redirect to Paystack payment page\r\n        window.location.href = data.paymentUrl;\r\n      } else {\r\n        toast({\r\n          title: \"Registration failed\",\r\n          description: \"Payment initialization failed\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      console.error(\"Mutation error:\", error);\r\n      // Check if it's a rate limit error\r\n      if (error.message && error.message.includes('rate limit')) {\r\n        toast({\r\n          title: \"Too Many Attempts\",\r\n          description: error.message || \"You've exceeded the registration attempt limit. Please wait a few minutes before trying again.\",\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n      } else {\r\n        toast({\r\n          title: \"Registration failed\",\r\n          description: error.message || \"Something went wrong\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: AgentRegisterFormData) => {\r\n    registerMutation.mutate(data);\r\n  };\r\n\r\n  const handleInfoDialogChange = (open: boolean) => {\r\n    setShowInfoDialog(open);\r\n    if (!open && typeof window !== 'undefined') {\r\n      // Remember that user has seen the dialog\r\n      localStorage.setItem('agent-info-dialog-seen', 'true');\r\n    }\r\n  };\r\n  \r\n  // Memoize the origin to prevent re-computation on every render\r\n  const siteOrigin = useMemo(() => typeof window !== 'undefined' ? window.location.origin : '', []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <nav className=\"mb-6 px-2\">\r\n        <Link href={typeof window !== \"undefined\" && getAgentId() ? `/store/${getAgentId()}` : \"/\"} data-testid=\"link-back-home\">\r\n          <Button variant=\"outline\" size=\"sm\" className=\"gap-2\">\r\n            <ArrowLeft className=\"h-4 w-4\" />\r\n            Back to Home\r\n          </Button>\r\n        </Link>\r\n      </nav>\r\n      \r\n      <Dialog open={showInfoDialog} onOpenChange={handleInfoDialogChange}>\r\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto bg-white dark:bg-black\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-xl text-white\">\r\n              <Info className=\"h-6 w-6 text-blue-600\" />\r\n              Important Information for Agents\r\n            </DialogTitle>\r\n            <DialogDescription className=\"sr-only\">\r\n              Read important information about agent registration and activation requirements\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          \r\n          <div className=\"space-y-4 py-4\">\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-start gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-blue-900\">Activation Fee</p>\r\n                  <p className=\"text-sm text-blue-800\">A one-time payment of <strong>GH₵60.00</strong> is required to activate your agent account.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-green-50 rounded-lg border border-green-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-green-900\">Instant Activation</p>\r\n                  <p className=\"text-sm text-green-800\">Your account will be automatically activated once payment is confirmed.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-purple-50 rounded-lg border border-purple-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-purple-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-purple-900\">Commission Structure</p>\r\n                  <p className=\"text-sm text-purple-800\">Earn competitive commissions on every transaction you process.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-indigo-50 rounded-lg border border-indigo-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-indigo-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-indigo-900\">Your Storefront</p>\r\n                  <p className=\"text-sm text-indigo-800\">Get a personalized storefront URL to share with your customers.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-cyan-50 rounded-lg border border-cyan-200\">\r\n                <CheckCircle2 className=\"h-5 w-5 text-cyan-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-cyan-900\">Payment Methods</p>\r\n                  <p className=\"text-sm text-cyan-800\">Accept payments via Mobile Money, Cards, and Bank transfers.</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-start gap-3 p-3 bg-orange-50 rounded-lg border border-orange-200\">\r\n                <AlertCircle className=\"h-5 w-5 text-orange-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <p className=\"font-semibold text-orange-900\">Requirements</p>\r\n                  <p className=\"text-sm text-orange-800\">Valid phone number, email address, and business information.</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <DialogFooter>\r\n            <Button \r\n              onClick={() => setShowInfoDialog(false)}\r\n              className=\"w-full sm:w-auto\"\r\n            >\r\n              I Understand, Proceed to Registration\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <div className=\"w-full max-w-4xl\">\r\n          <Card className=\"w-full shadow-xl border-2 border-yellow-400\">\r\n            <CardHeader className=\"text-center space-y-2\">\r\n              <div className=\"flex justify-center mb-4\">\r\n                <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-12 w-auto\" />\r\n              </div>\r\n              <CardTitle className=\"text-2xl font-bold\">Become an Agent</CardTitle>\r\n              <CardDescription>\r\n                Create your {APP_NAME} agent account and start earning\r\n              </CardDescription>\r\n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-4\">\r\n                <p className=\"text-sm font-semibold text-yellow-900\">Activation Fee: GH₵60.00</p>\r\n                <p className=\"text-xs text-yellow-700 mt-1\">Payment required after registration</p>\r\n              </div>\r\n            </CardHeader>\r\n        <CardContent>\r\n          <Form {...form}>\r\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"name\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Full Name</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input placeholder=\"John Doe\" autoComplete=\"name\" className=\"pl-10\" data-testid=\"input-name\" {...field} />\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"phone\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Phone Number</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input placeholder=\"0241234567\" autoComplete=\"tel\" className=\"pl-10\" data-testid=\"input-phone\" {...field} />\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </div>\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"email\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Email</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input placeholder=\"you@example.com\" type=\"email\" autoComplete=\"email\" className=\"pl-10\" data-testid=\"input-email\" {...field} />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"businessName\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Business Name</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Store className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input placeholder=\"My Data Store\" className=\"pl-10\" data-testid=\"input-business\" {...field} />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"storefrontSlug\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Storefront URL</FormLabel>\r\n                    <FormControl>\r\n                      <div className=\"relative\">\r\n                        <Link2 className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                        <Input placeholder=\"my-store\" className=\"pl-10\" data-testid=\"input-slug\" {...field} />\r\n                      </div>\r\n                    </FormControl>\r\n                    <FormDescription>\r\n                      {field.value && (\r\n                        <div className=\"flex items-center gap-2 text-xs\">\r\n                          <span>\r\n                            Your store: {siteOrigin}/store/agent/<strong>{field.value}</strong>\r\n                          </span>\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            className=\"h-6 w-6 p-0\"\r\n                            onClick={() => copyToClipboard(`${siteOrigin}/store/agent/${field.value}`)}\r\n                          >\r\n                            <Copy className=\"h-3 w-3\" />\r\n                          </Button>\r\n                        </div>\r\n                      )}\r\n                    </FormDescription>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"businessDescription\"\r\n                render={({ field }) => (\r\n                  <FormItem>\r\n                    <FormLabel>Business Description</FormLabel>\r\n                    <FormControl>\r\n                      <Textarea placeholder=\"Tell customers about your business...\" className=\"resize-none\" data-testid=\"input-description\" {...field} />\r\n                    </FormControl>\r\n                    <FormMessage />\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"password\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Password</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input type={showPassword ? \"text\" : \"password\"} autoComplete=\"new-password\" className=\"pl-10 pr-10\" data-testid=\"input-password\" {...field} />\r\n                          <Button type=\"button\" variant=\"ghost\" size=\"icon\" className=\"absolute right-0 top-0 h-full px-3\" onClick={() => setShowPassword(!showPassword)}>\r\n                            {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                          </Button>\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n                <FormField\r\n                  control={form.control}\r\n                  name=\"confirmPassword\"\r\n                  render={({ field }) => (\r\n                    <FormItem>\r\n                      <FormLabel>Confirm Password</FormLabel>\r\n                      <FormControl>\r\n                        <div className=\"relative\">\r\n                          <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground dark:text-gray-400\" />\r\n                          <Input type={showPassword ? \"text\" : \"password\"} autoComplete=\"new-password\" className=\"pl-10\" data-testid=\"input-confirm\" {...field} />\r\n                        </div>\r\n                      </FormControl>\r\n                      <FormMessage />\r\n                    </FormItem>\r\n                  )}\r\n                />\r\n              </div>\r\n\r\n              <FormField\r\n                control={form.control}\r\n                name=\"agreedToTerms\"\r\n                render={({ field }) => (\r\n                  <FormItem className=\"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4\">\r\n                    <FormControl>\r\n                      <Checkbox\r\n                        checked={field.value}\r\n                        onCheckedChange={field.onChange}\r\n                        data-testid=\"checkbox-terms\"\r\n                      />\r\n                    </FormControl>\r\n                    <div className=\"space-y-1 leading-none\">\r\n                      <FormLabel className=\"text-sm font-medium\">\r\n                        I agree to pay the GH₵60.00 activation fee and accept the terms and conditions\r\n                      </FormLabel>\r\n                      <FormDescription className=\"text-xs\">\r\n                        By checking this box, you confirm that you understand the activation fee is required and agree to our terms of service.\r\n                      </FormDescription>\r\n                      <FormMessage />\r\n                    </div>\r\n                  </FormItem>\r\n                )}\r\n              />\r\n\r\n              <Button type=\"submit\" className=\"w-full\" disabled={registerMutation.isPending} data-testid=\"button-submit\">\r\n                {registerMutation.isPending && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                Proceed to Payment (GH₵60.00)\r\n              </Button>\r\n            </form>\r\n          </Form>\r\n\r\n          <div className=\"mt-6 text-center text-sm\">\r\n            <span className=\"text-muted-foreground dark:text-gray-300\">Already have an account? </span>\r\n            <Link href=\"/login\" className=\"text-primary hover:underline font-medium\">Sign in</Link>\r\n          </div>\r\n        </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"wouter\";\r\nimport { Link } from \"wouter\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\r\nimport { CheckCircle2, Loader2, XCircle, AlertCircle } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nexport default function AgentActivationCompletePage() {\r\n  const [status, setStatus] = useState<\"processing\" | \"success\" | \"failed\" | \"cancelled\">(\"processing\");\r\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\r\n  const [agentEmail, setAgentEmail] = useState<string>(\"\");\r\n  const [, setLocation] = useLocation();\r\n  const [redirectCountdown, setRedirectCountdown] = useState<number>(6);\r\n  useAuth();\r\n  const { theme } = useTheme();\r\n\r\n  useEffect(() => {\r\n    // Get reference from URL\r\n    const params = new URLSearchParams(window.location.search);\r\n    const reference = params.get(\"reference\");\r\n    const isMock = params.get(\"mock\") === \"true\";\r\n\r\n    if (!reference) {\r\n      setStatus(\"failed\");\r\n      return;\r\n    }\r\n\r\n    // For mock payments, skip verification and show success\r\n    if (isMock) {\r\n      setStatus(\"success\");\r\n      setAgentEmail(\"test@example.com\"); // Mock email\r\n      // start auto-redirect countdown\r\n      setTimeout(() => {\r\n        const interval = setInterval(() => {\r\n          setRedirectCountdown((c) => {\r\n            if (c <= 1) {\r\n              clearInterval(interval);\r\n              setLocation(\"/login\");\r\n              return 0;\r\n            }\r\n            return c - 1;\r\n          });\r\n        }, 1000);\r\n      }, 1000);\r\n      return;\r\n    }\r\n\r\n    // Verify payment status\r\n    const verifyPayment = async () => {\r\n      try {\r\n        const response = await fetch(`/api/paystack/verify?reference=${reference}`);\r\n        const data = await response.json();\r\n\r\n        if (data.status === \"success\") {\r\n          setStatus(\"success\");\r\n          // Store agent email for display\r\n          if (data.data?.user?.email) {\r\n            setAgentEmail(data.data.user.email);\r\n          }\r\n          // start auto-redirect countdown\r\n          setTimeout(() => {\r\n            const interval = setInterval(() => {\r\n              setRedirectCountdown((c) => {\r\n                if (c <= 1) {\r\n                  clearInterval(interval);\r\n                  setLocation(\"/login\");\r\n                  return 0;\r\n                }\r\n                return c - 1;\r\n              });\r\n            }, 1000);\r\n          }, 1500);\r\n        } else if (data.status === \"cancelled\") {\r\n          setStatus(\"cancelled\");\r\n          setErrorMessage(data.message || \"Payment was cancelled\");\r\n        } else {\r\n          setStatus(\"failed\");\r\n          setErrorMessage(data.message || data.error || \"Payment verification failed\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Payment verification error:\", error);\r\n        setStatus(\"failed\");\r\n        setErrorMessage(\"Network error. Please check your connection and try again.\");\r\n      }\r\n    };\r\n\r\n    // Wait 3 seconds before verifying to allow webhook to process\r\n    setTimeout(() => {\r\n      verifyPayment();\r\n    }, 3000);\r\n  }, [setLocation]); // Added proper dependency\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <Card className=\"w-full max-w-lg shadow-xl border-2 bg-white dark:bg-black border-gray-200\">\r\n          <CardHeader className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-12 w-auto\" />\r\n            </div>\r\n            <CardTitle className=\"text-2xl font-bold\">Agent Activation</CardTitle>\r\n            <CardDescription>\r\n              Processing your payment\r\n            </CardDescription>\r\n          </CardHeader>\r\n          <CardContent className=\"space-y-6\">\r\n            {status === \"processing\" && (\r\n              <Alert className=\"bg-white dark:bg-black border border-blue-200\">\r\n                <Loader2 className=\"h-5 w-5 text-blue-600 animate-spin\" />\r\n                <AlertTitle className=\"text-blue-900\">Processing Payment...</AlertTitle>\r\n                <AlertDescription className=\"text-blue-800\">\r\n                  Please wait while we verify your payment. This may take a few moments.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            {status === \"success\" && (\r\n              <>\r\n                <Alert className=\"bg-white dark:bg-black border border-green-200\">\r\n                  <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\r\n                  <AlertTitle className=\"text-green-900 text-lg font-semibold\">🎉 Account Activated Successfully!</AlertTitle>\r\n                  <AlertDescription className=\"text-green-800 space-y-3 mt-2\">\r\n                    <p className=\"font-semibold\">\r\n                      Congratulations! Your agent account has been successfully created and activated.\r\n                    </p>\r\n                    \r\n                    <div className=\"bg-white/80 dark:bg-black/80 p-3 rounded-md border border-green-300\">\r\n                      <p className=\"font-semibold text-sm mb-2\">✉️ Account Details:</p>\r\n                      {agentEmail && (\r\n                        <p className=\"text-sm\">\r\n                          <span className=\"font-medium\">Email:</span> {agentEmail}\r\n                        </p>\r\n                      )}\r\n                      <p className=\"text-sm mt-1 text-green-900\">\r\n                        Please use your registration email and password to login.\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 space-y-2 text-sm\">\r\n                      <p className=\"font-semibold\">🚀 What's next?</p>\r\n                      <ul className=\"list-disc list-inside space-y-1 ml-2\">\r\n                        <li>Login to access your agent dashboard</li>\r\n                        <li>Set up your storefront preferences</li>\r\n                        <li>Start selling and earning commissions</li>\r\n                        <li>Share your storefront URL with customers</li>\r\n                      </ul>\r\n                    </div>\r\n                  </AlertDescription>\r\n                </Alert>\r\n\r\n                <div className=\"text-center space-y-4\">\r\n                  <Link href=\"/login\">\r\n                    <Button className=\"w-full\" size=\"lg\">\r\n                      Login to Your Dashboard\r\n                    </Button>\r\n                  </Link>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Use your email and password to access your account\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground\">Redirecting to login in {redirectCountdown}s…</p>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {status === \"cancelled\" && (\r\n              <>\r\n                <Alert className=\"bg-white dark:bg-black border border-amber-200\">\r\n                  <AlertCircle className=\"h-5 w-5 text-amber-600\" />\r\n                  <AlertTitle className=\"text-amber-900 text-lg font-semibold\">Payment Cancelled</AlertTitle>\r\n                  <AlertDescription className=\"text-amber-800\">\r\n                    <p className=\"font-semibold\">{errorMessage || \"You cancelled the payment.\"}</p>\r\n                    <p className=\"mt-2\">\r\n                      Your registration was not completed because payment was cancelled. \r\n                      No charges have been made to your account.\r\n                    </p>\r\n                    <p className=\"mt-2 text-sm\">\r\n                      You can try again whenever you're ready to complete your agent registration.\r\n                    </p>\r\n                  </AlertDescription>\r\n                </Alert>\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <Link href=\"/agent/register\" className=\"flex-1\">\r\n                    <Button className=\"w-full\">\r\n                      Try Again\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href={typeof window !== \"undefined\" && getAgentId() ? `/store/${getAgentId()}` : \"/\"} className=\"flex-1\">\r\n                    <Button variant=\"outline\" className=\"w-full\">\r\n                      Back to Home\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {status === \"failed\" && (\r\n              <>\r\n                <Alert className=\"bg-white dark:bg-black border border-red-200\">\r\n                  <XCircle className=\"h-5 w-5 text-red-600\" />\r\n                  <AlertTitle className=\"text-red-900 text-lg font-semibold\">Activation Failed</AlertTitle>\r\n                  <AlertDescription className=\"text-red-800\">\r\n                    <p className=\"font-semibold\">{errorMessage || \"We couldn't verify your payment.\"}</p>\r\n                    <p className=\"mt-2\">This could be due to:</p>\r\n                    <ul className=\"list-disc list-inside mt-2 ml-2 space-y-1 text-sm\">\r\n                      <li>Payment failed to process</li>\r\n                      <li>Network connection issues</li>\r\n                      <li>Invalid payment reference</li>\r\n                    </ul>\r\n                    <p className=\"mt-3 text-sm font-semibold\">\r\n                      Please try registering again or contact support if you were charged.\r\n                    </p>\r\n                  </AlertDescription>\r\n                </Alert>\r\n\r\n                <div className=\"flex gap-3\">\r\n                  <Link href=\"/agent/register\" className=\"flex-1\">\r\n                    <Button variant=\"outline\" className=\"w-full\">\r\n                      Try Again\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href={typeof window !== \"undefined\" && getAgentId() ? `/store/${getAgentId()}` : \"/\"} className=\"flex-1\">\r\n                    <Button className=\"w-full\">\r\n                      Back to Home\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Link } from \"wouter\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { APP_NAME } from \"@/lib/constants\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\nimport logoLight from \"@assets/logo_1765774201026.png\";\r\nimport logoDark from \"@assets/darkmode-icon.png\";\r\n\r\nexport default function AgentUpgradePage() {\r\n  const { theme } = useTheme();\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background px-4 py-6\">\r\n      <div className=\"flex-1 flex items-center justify-center\">\r\n        <Card className=\"w-full max-w-2xl shadow-xl border-2\">\r\n          <CardHeader className=\"text-center space-y-2\">\r\n            <div className=\"flex justify-center mb-4\">\r\n              <img src={theme === 'dark' ? logoDark : logoLight} alt=\"ResellersHub Pro\" className=\"h-12 w-auto\" />\r\n            </div>\r\n            <CardTitle className=\"text-2xl font-bold\">Upgrade to Agent</CardTitle>\r\n            <CardDescription>Become an agent and start earning commissions</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"flex gap-3 justify-center\">\r\n              <Link href=\"/user/dashboard?upgrade=true\">\r\n                <Button variant=\"outline\">Use Same Account</Button>\r\n              </Link>\r\n              <Link href=\"/agent/register\">\r\n                <Button variant=\"default\">Create New Agent Account</Button>\r\n              </Link>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst ScrollArea = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <ScrollAreaPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"relative overflow-hidden\", className)}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\r\n      {children}\r\n    </ScrollAreaPrimitive.Viewport>\r\n    <ScrollBar />\r\n    <ScrollAreaPrimitive.Corner />\r\n  </ScrollAreaPrimitive.Root>\r\n))\r\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\r\n\r\nconst ScrollBar = React.forwardRef<\r\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\r\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\r\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\r\n    ref={ref}\r\n    orientation={orientation}\r\n    className={cn(\r\n      \"flex touch-none select-none transition-colors\",\r\n      orientation === \"vertical\" &&\r\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\r\n      orientation === \"horizontal\" &&\r\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\r\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\r\n))\r\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\r\n\r\nexport { ScrollArea, ScrollBar }\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Loader2, Plus, Key, Trash2, Copy, Check, AlertCircle, Code } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface ApiKey {\r\n  id: string;\r\n  name: string;\r\n  key: string;\r\n  permissions: Record<string, any>;\r\n  isActive: boolean;\r\n  lastUsed: string | null;\r\n  createdAt: string;\r\n}\r\n\r\ninterface ApiIntegrationsModalProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function ApiIntegrationsModal({ open, onOpenChange }: ApiIntegrationsModalProps) {\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [newKeyName, setNewKeyName] = useState(\"\");\r\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\r\n  const [createdKey, setCreatedKey] = useState<string | null>(null);\r\n  const [copiedKey, setCopiedKey] = useState<string | null>(null);\r\n\r\n  const { data: apiKeys, isLoading } = useQuery<ApiKey[]>({\r\n    queryKey: [\"/api/user/api-keys\"],\r\n    enabled: !!user && open,\r\n  });\r\n\r\n  const createKeyMutation = useMutation({\r\n    mutationFn: async (name: string) => {\r\n      return await apiRequest<ApiKey>(\"POST\", \"/api/user/api-keys\", { name });\r\n    },\r\n    onSuccess: (newKey) => {\r\n      setCreatedKey(newKey.key);\r\n      setNewKeyName(\"\");\r\n      setShowCreateDialog(false);\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/api-keys\"] });\r\n      toast({\r\n        title: \"API Key Created\",\r\n        description: \"Your new API key has been generated. Copy it now - it won't be shown again.\",\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to create API key\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const deleteKeyMutation = useMutation({\r\n    mutationFn: async (keyId: string) => {\r\n      await apiRequest(\"DELETE\", `/api/user/api-keys/${keyId}`);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/api-keys\"] });\r\n      toast({\r\n        title: \"API Key Revoked\",\r\n        description: \"The API key has been permanently deleted.\",\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to revoke API key\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const copyToClipboard = async (text: string, keyId: string) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      setCopiedKey(keyId);\r\n      setTimeout(() => setCopiedKey(null), 2000);\r\n      toast({\r\n        title: \"Copied\",\r\n        description: \"API key copied to clipboard\",\r\n      });\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to copy to clipboard\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCreateKey = () => {\r\n    if (!newKeyName.trim()) return;\r\n    createKeyMutation.mutate(newKeyName.trim());\r\n  };\r\n\r\n  const handleDeleteKey = (keyId: string) => {\r\n    if (confirm(\"Are you sure you want to revoke this API key? This action cannot be undone.\")) {\r\n      deleteKeyMutation.mutate(keyId);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-[95vw] sm:max-w-md md:max-w-2xl lg:max-w-4xl max-h-[95vh] overflow-y-auto\">\r\n        <DialogHeader className=\"pb-3 sm:pb-4\">\r\n          <DialogTitle className=\"flex items-center gap-2 text-base sm:text-lg md:text-xl\">\r\n            <Code className=\"h-4 w-4 sm:h-5 sm:w-5\" />\r\n            <span className=\"text-sm sm:text-base\">API & Integrations</span>\r\n          </DialogTitle>\r\n          <DialogDescription className=\"text-xs sm:text-sm leading-relaxed\">\r\n            Generate secure API keys to connect your app or third-party services.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <div className=\"space-y-3 sm:space-y-4 md:space-y-6\">\r\n          {/* Created Key Alert */}\r\n          {createdKey && (\r\n            <Alert className=\"border-yellow-200 bg-yellow-50 p-3 sm:p-4\">\r\n              <AlertCircle className=\"h-3 w-3 sm:h-4 sm:w-4 text-yellow-600 flex-shrink-0\" />\r\n              <AlertDescription className=\"text-yellow-800 text-xs sm:text-sm leading-relaxed\">\r\n                <strong>New API Key Created:</strong> {createdKey}\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  className=\"ml-2 mt-2 sm:mt-0 h-6 px-2 text-xs sm:h-7 sm:px-3\"\r\n                  onClick={() => copyToClipboard(createdKey, \"created\")}\r\n                >\r\n                  {copiedKey === \"created\" ? <Check className=\"h-2.5 w-2.5\" /> : <Copy className=\"h-2.5 w-2.5\" />}\r\n                  <span className=\"ml-1 hidden sm:inline\">Copy</span>\r\n                </Button>\r\n              </AlertDescription>\r\n            </Alert>\r\n          )}\r\n\r\n          {/* API Keys Section */}\r\n          <Card className=\"p-3 sm:p-4 md:p-6\">\r\n            <CardHeader className=\"pb-2 sm:pb-3 px-0\">\r\n              <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-sm sm:text-base\">\r\n                    <Key className=\"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0\" />\r\n                    API Keys\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-xs sm:text-sm mt-1\">\r\n                    Manage your API keys for secure access to our platform\r\n                  </CardDescription>\r\n                </div>\r\n                <Dialog open={showCreateDialog} onOpenChange={setShowCreateDialog}>\r\n                  <DialogTrigger asChild>\r\n                    <Button size=\"sm\" className=\"w-full sm:w-auto h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm\">\r\n                      <Plus className=\"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2\" />\r\n                      <span>Create API Key</span>\r\n                    </Button>\r\n                  </DialogTrigger>\r\n                  <DialogContent className=\"w-[95vw] sm:w-full max-w-md mx-4 sm:mx-auto\">\r\n                    <DialogHeader className=\"pb-3 sm:pb-4\">\r\n                      <DialogTitle className=\"text-sm sm:text-base\">Create New API Key</DialogTitle>\r\n                      <DialogDescription className=\"text-xs sm:text-sm leading-relaxed\">\r\n                        Enter a name for your API key. This will help you identify it later.\r\n                      </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-3 sm:space-y-4\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"keyName\" className=\"text-xs sm:text-sm font-medium\">API Key Name</Label>\r\n                        <Input\r\n                          id=\"keyName\"\r\n                          placeholder=\"e.g., My App, Production API\"\r\n                          value={newKeyName}\r\n                          onChange={(e) => setNewKeyName(e.target.value)}\r\n                          onKeyDown={(e) => e.key === \"Enter\" && handleCreateKey()}\r\n                          className=\"h-9 sm:h-10 text-sm\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3\">\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => setShowCreateDialog(false)}\r\n                          size=\"sm\"\r\n                          className=\"w-full sm:w-auto h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm\"\r\n                        >\r\n                          Cancel\r\n                        </Button>\r\n                        <Button\r\n                          onClick={handleCreateKey}\r\n                          disabled={!newKeyName.trim() || createKeyMutation.isPending}\r\n                          size=\"sm\"\r\n                          className=\"w-full sm:w-auto h-8 px-3 text-xs sm:h-9 sm:px-4 sm:text-sm\"\r\n                        >\r\n                          {createKeyMutation.isPending && <Loader2 className=\"h-3 w-3 mr-1 animate-spin\" />}\r\n                          Create Key\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </DialogContent>\r\n                </Dialog>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent className=\"px-0 pt-0\">\r\n              {isLoading ? (\r\n                <div className=\"flex items-center justify-center py-6 sm:py-8\">\r\n                  <Loader2 className=\"h-6 w-6 sm:h-8 sm:w-8 animate-spin\" />\r\n                </div>\r\n              ) : apiKeys && apiKeys.length > 0 ? (\r\n                <div className=\"space-y-2 sm:space-y-3 md:space-y-4\">\r\n                  {apiKeys.map((key) => (\r\n                    <div\r\n                      key={key.id}\r\n                      className=\"flex flex-col gap-3 p-3 sm:p-4 border rounded-lg bg-card hover:bg-accent/50 transition-colors\"\r\n                    >\r\n                      <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                        <div className=\"space-y-2 flex-1 min-w-0\">\r\n                          <div className=\"flex flex-wrap items-center gap-2\">\r\n                            <span className=\"font-medium text-sm sm:text-base truncate\">{key.name}</span>\r\n                            <Badge \r\n                              variant={key.isActive ? \"default\" : \"secondary\"} \r\n                              className=\"text-xs px-2 py-0.5\"\r\n                            >\r\n                              {key.isActive ? \"Active\" : \"Inactive\"}\r\n                            </Badge>\r\n                          </div>\r\n                          <div className=\"text-xs sm:text-sm text-muted-foreground space-y-1\">\r\n                            <div>Created {new Date(key.createdAt).toLocaleDateString()}</div>\r\n                            {key.lastUsed && (\r\n                              <div>Last used {new Date(key.lastUsed).toLocaleDateString()}</div>\r\n                            )}\r\n                          </div>\r\n                          <div className=\"font-mono text-xs sm:text-sm bg-muted px-2 py-1.5 rounded break-all sm:break-normal\">\r\n                            sk_••••••••••••••••••••••••••••••••\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => copyToClipboard(`sk_••••••••••••••••••••••••••••••••`, key.id)}\r\n                            className=\"h-8 w-8 p-0 sm:h-9 sm:w-9 sm:p-2\"\r\n                            title=\"Copy API Key\"\r\n                          >\r\n                            {copiedKey === key.id ? <Check className=\"h-3 w-3 sm:h-4 sm:w-4\" /> : <Copy className=\"h-3 w-3 sm:h-4 sm:w-4\" />}\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => handleDeleteKey(key.id)}\r\n                            disabled={deleteKeyMutation.isPending}\r\n                            className=\"h-8 w-8 p-0 sm:h-9 sm:w-9 sm:p-2 text-destructive hover:text-destructive\"\r\n                            title=\"Delete API Key\"\r\n                          >\r\n                            <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-6 sm:py-8 text-muted-foreground\">\r\n                  <Code className=\"h-8 w-8 sm:h-12 sm:w-12 mx-auto mb-3 sm:mb-4 opacity-50\" />\r\n                  <p className=\"text-xs sm:text-sm\">No API keys yet. Create your first key to get started.</p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* API Documentation */}\r\n          <Card className=\"p-3 sm:p-4 md:p-6\">\r\n            <CardHeader className=\"pb-2 sm:pb-3 px-0\">\r\n              <CardTitle className=\"text-sm sm:text-base\">API Documentation</CardTitle>\r\n              <CardDescription className=\"text-xs sm:text-sm leading-relaxed\">\r\n                Example API calls using your API keys\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"px-0 pt-0 space-y-3 sm:space-y-4\">\r\n              <div className=\"space-y-3 sm:space-y-4\">\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2 text-sm sm:text-base\">Get Account Balance</h4>\r\n                  <div className=\"bg-muted p-3 sm:p-4 rounded-md font-mono text-xs sm:text-sm overflow-x-auto\">\r\n                    <div className=\"whitespace-nowrap sm:whitespace-normal\">GET /api/v1/user/balance</div>\r\n                    <div className=\"text-muted-foreground mt-1 whitespace-nowrap sm:whitespace-normal\">Authorization: Bearer YOUR_API_KEY</div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <h4 className=\"font-medium mb-2 text-sm sm:text-base\">Get Transaction History</h4>\r\n                  <div className=\"bg-muted p-3 sm:p-4 rounded-md font-mono text-xs sm:text-sm overflow-x-auto\">\r\n                    <div className=\"whitespace-nowrap sm:whitespace-normal\">GET /api/v1/user/transactions?limit=10&offset=0</div>\r\n                    <div className=\"text-muted-foreground mt-1 whitespace-nowrap sm:whitespace-normal\">Authorization: Bearer YOUR_API_KEY</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"text-xs sm:text-sm text-muted-foreground leading-relaxed pt-2 border-t\">\r\n                All API endpoints require Bearer token authentication with your API key.\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}","import { Link, useLocation } from \"wouter\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  LayoutDashboard,\r\n  Store,\r\n  BarChart3,\r\n  Wallet,\r\n  Settings,\r\n  MessageCircle,\r\n  LogOut,\r\n  ExternalLink,\r\n  Smartphone,\r\n  CreditCard,\r\n  Code,\r\n  DollarSign,\r\n  Trophy,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport type { Agent, User } from \"@shared/schema\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    user: User;\r\n    profitBalance: number;\r\n    walletBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n  };\r\n  stats: any;\r\n}\r\n\r\n// Function to get ranking badge based on user role\r\nconst _getRankingBadge = (role: string) => {\r\n  const rankings = {\r\n    admin: { label: \"Administrator\", variant: \"destructive\" as const, icon: \"👑\" },\r\n    master: { label: \"Master Reseller\", variant: \"default\" as const, icon: \"🏆\" },\r\n    super_dealer: { label: \"Super Dealer\", variant: \"secondary\" as const, icon: \"⭐\" },\r\n    dealer: { label: \"Dealer\", variant: \"outline\" as const, icon: \"💎\" },\r\n    agent: { label: \"Agent\", variant: \"outline\" as const, icon: \"🔹\" },\r\n    user: { label: \"User\", variant: \"outline\" as const, icon: \"👤\" },\r\n    guest: { label: \"Guest\", variant: \"outline\" as const, icon: \"👋\" },\r\n  };\r\n\r\n  return rankings[role as keyof typeof rankings] || rankings.user;\r\n};\r\n\r\nconst sidebarNavItems = [\r\n  { title: \"Dashboard\", href: \"/agent/dashboard\", icon: LayoutDashboard },\r\n  { title: \"My Storefront\", href: \"/agent/storefront\", icon: Store },\r\n  { title: \"Pricing\", href: \"/agent/pricing\", icon: DollarSign },\r\n  { title: \"Transactions\", href: \"/agent/transactions\", icon: BarChart3 },\r\n  { title: \"MTN Bundles\", href: \"/agent/bundles/mtn\", icon: Smartphone },\r\n  { title: \"AT iShare Bundles\", href: \"/agent/bundles/at_ishare\", icon: Smartphone },\r\n  { title: \"AT BIG TIME Bundles\", href: \"/agent/bundles/at_bigtime\", icon: Smartphone },\r\n  { title: \"TELECEL Bundles\", href: \"/agent/bundles/telecel\", icon: Smartphone },\r\n  { title: \"Top Up Wallet\", href: \"/agent/wallet\", icon: CreditCard },\r\n  { title: \"API Keys & Integrations\", href: \"/dashboard/api-integrations\", icon: Code },\r\n  { title: \"Withdrawals\", href: \"/agent/withdrawals\", icon: Wallet },\r\n  { title: \"Settings\", href: \"/agent/settings\", icon: Settings },\r\n  { title: \"Support Chat\", href: \"/agent/support\", icon: MessageCircle },\r\n];\r\n\r\nexport function AgentSidebarV2({ onClose }: { onClose?: () => void } = {}) {\r\n  const [location] = useLocation();\r\n  const { logout, isLoggingOut, user } = useAuth();\r\n  const { theme: _theme } = useTheme();\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Get user rank\r\n const { data: rankData } = useQuery<{ rank: number }>({\r\n    queryKey: [\"user-rank\"],\r\n    queryFn: () => apiRequest(\"GET\", \"/api/user/rank\"),\r\n    enabled: !!user,\r\n  });\r\n\r\n  const { data: profileData, error } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n  });\r\n\r\n  const { data: unreadCount = 0 } = useQuery<number>({\r\n    queryKey: [\"/api/support/admin/unread-count\"],\r\n    enabled: user?.role === 'admin',\r\n    queryFn: async () => {\r\n      try {\r\n        const res = await apiRequest(\"GET\", \"/api/support/admin/unread-count\") as Response;\r\n        const data = await res.json();\r\n        return data.count || 0;\r\n      } catch (error) {\r\n        return 0;\r\n      }\r\n    },\r\n    refetchInterval: 30000, // Refresh every 30 seconds instead of 5\r\n  });\r\n\r\n  const agent = profileData?.profile;\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={`flex h-full w-64 flex-col border-r text-sidebar-foreground relative ${\r\n        onClose ? 'bg-white' : 'bg-sidebar'\r\n      }`}>\r\n        <div className={`flex h-16 items-center justify-center border-b px-6 ${onClose ? 'pr-4' : ''}`}>\r\n          <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-primary text-primary-foreground font-bold text-xs\">\r\n            {user?.name?.charAt(0).toUpperCase() || 'A'}\r\n          </div>\r\n        </div>\r\n\r\n        <ScrollArea className=\"flex-1 px-3 py-4\">\r\n          <nav className=\"flex flex-col gap-1\">\r\n            {sidebarNavItems.map((item) => {\r\n              const isActive = location === item.href || (item.href !== \"/agent/dashboard\" && location.startsWith(item.href));\r\n              const isSupport = item.href === \"/agent/support\";\r\n\r\n              return (\r\n                <Link key={item.href} href={item.href}>\r\n                  <Button\r\n                    size=\"sm\"\r\n                    variant={isActive ? \"default\" : \"ghost\"}\r\n                    className={cn(\r\n                      \"w-full justify-start gap-2 px-2 py-1.5 text-xs font-normal relative\",\r\n                      isActive && \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                    )}\r\n                    onClick={() => onClose && onClose()}\r\n                  >\r\n                    <item.icon className=\"h-4 w-4\" />\r\n                    <span className=\"flex-1 text-left\">{item.title}</span>\r\n                    {isSupport && unreadCount > 0 && (\r\n                      <Badge variant=\"destructive\" className=\"ml-auto\">{unreadCount}</Badge>\r\n                    )}\r\n                  </Button>\r\n                </Link>\r\n              );\r\n            })}\r\n          </nav>\r\n        </ScrollArea>\r\n\r\n        <div className=\"border-t p-3\">\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"ghost\"\r\n            className=\"w-full justify-start gap-2 px-2 py-1.5 text-xs text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n            onClick={() => { onClose && onClose(); logout(); }}\r\n            disabled={isLoggingOut}\r\n          >\r\n            <LogOut className=\"h-4 w-4\" />\r\n            {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`flex h-full w-64 flex-col border-r text-sidebar-foreground relative ${\r\n      onClose ? 'bg-white dark:bg-black dark:text-white' : 'bg-sidebar dark:bg-black dark:text-white'\r\n    }`}>\r\n      <div className={`flex h-16 items-center justify-center border-b px-6 ${onClose ? 'pr-4' : ''} dark:border-gray-700`}>\r\n        <div className=\"flex flex-col items-center text-center w-full\">\r\n          <div className=\"flex items-center justify-center gap-4 mb-1 w-full\">\r\n            <div className=\"flex flex-col items-center\">\r\n              <p className=\"text-sm font-medium dark:text-white\">{user?.name || 'Agent'}</p>\r\n              <p className=\"text-xs text-muted-foreground dark:text-gray-300\">{user?.email}</p>\r\n            </div>\r\n            {rankData && (\r\n              <div className=\"flex items-center gap-1 rounded-full bg-green-500 px-2 py-0.5 text-xs font-medium text-white border border-green-600 dark:bg-green-600 dark:border-green-700\">\r\n                <Trophy className=\"h-2.5 w-2.5\" />\r\n                <span>\r\n                  {rankData.rank && rankData.rank > 0 ? `#${rankData.rank}` : 'Unranked'}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {agent && (\r\n        <div className=\"border-b p-3 dark:border-gray-700\">\r\n          <div className=\"rounded-lg bg-green-500 p-3 dark:bg-green-600\">\r\n            <p className=\"text-xs text-white mb-1\">Profit Balance</p>\r\n            <p className=\"text-xl font-bold tabular-nums text-white\" data-testid=\"text-agent-profit-balance\">{formatCurrency(agent.profitBalance)}</p>\r\n            <p className=\"text-xs text-white mt-1\">Wallet Balance: {formatCurrency(agent.walletBalance)}</p>\r\n            <p className=\"text-xs text-white mt-1\">Total Withdrawals: {formatCurrency(agent.totalWithdrawals)}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <ScrollArea className=\"flex-1 px-3 py-4\">\r\n        <nav className=\"flex flex-col gap-1\">\r\n          {sidebarNavItems.map((item) => {\r\n            const isActive = location === item.href || (item.href !== \"/agent/dashboard\" && location.startsWith(item.href));\r\n            const isSupport = item.href === \"/agent/support\";\r\n            return (\r\n              <Link key={item.href} href={item.href}>\r\n                <Button\r\n                  variant={isActive ? \"default\" : \"ghost\"}\r\n                  className={cn(\r\n                    \"w-full justify-start gap-3 font-normal relative dark:text-white dark:hover:bg-gray-700\",\r\n                    isActive && \"bg-yellow-500 text-white font-medium shadow-sm dark:bg-yellow-600\"\r\n                  )}\r\n                  data-testid={`link-agent-${item.title.toLowerCase().replace(/ /g, \"-\")}`}\r\n                  onClick={() => onClose && onClose()}\r\n                >\r\n                  <item.icon className=\"h-4 w-4 dark:text-white\" />\r\n                  <span className=\"flex-1 text-left dark:text-white\">{item.title}</span>\r\n                  {isSupport && unreadCount > 0 && user?.role === 'admin' && (\r\n                    <Badge variant=\"destructive\" className=\"ml-auto dark:bg-red-600 dark:text-white\">{unreadCount}</Badge>\r\n                  )}\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n\r\n          {agent && (\r\n            <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"mt-2\">\r\n              <Button variant=\"outline\" className=\"w-full justify-start gap-3 bg-green-600 hover:bg-green-700 text-white border-green-600 dark:border-green-600 dark:bg-green-600 dark:hover:bg-green-700\" data-testid=\"link-view-storefront\" onClick={() => onClose && onClose()}>\r\n                <ExternalLink className=\"h-4 w-4\" />\r\n                View Public Store\r\n              </Button>\r\n            </a>\r\n          )}\r\n        </nav>\r\n      </ScrollArea>\r\n\r\n      <div className=\"border-t p-3 dark:border-gray-700\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          className=\"w-full justify-start gap-3 text-destructive hover:text-destructive hover:bg-destructive/10 dark:text-red-400 dark:hover:bg-red-900/20\"\r\n          onClick={() => { onClose && onClose(); logout(); }}\r\n          disabled={isLoggingOut}\r\n        >\r\n          <LogOut className=\"h-4 w-4 dark:text-red-400\" />\r\n          {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n        </Button>\r\n        \r\n        {/* Developer Credit */}\r\n        <div className=\"mt-3 pt-3 border-t border-border/50 dark:border-gray-600\">\r\n          <p className=\"text-xs text-muted-foreground text-center dark:text-gray-400\">\r\n            Developed by{' '}\r\n            <a\r\n              href=\"https://bm-portfolio-up2x.onrender.com\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-primary hover:text-primary/80 font-medium dark:text-blue-400 dark:hover:text-blue-300\"\r\n            >\r\n              BlusMotif\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <ApiIntegrationsModal open={showApiModal} onOpenChange={setShowApiModal} />\r\n    </div>\r\n  );\r\n}\r\n","import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { LucideIcon } from \"lucide-react\";\r\n\r\ninterface StatCardProps {\r\n  title: string;\r\n  value: string | number;\r\n  description?: string;\r\n  icon?: LucideIcon;\r\n  trend?: string;\r\n  trendLabel?: string;\r\n  className?: string;\r\n}\r\n\r\nexport function StatCard({\r\n  title,\r\n  value,\r\n  description,\r\n  icon: Icon,\r\n  trend,\r\n  trendLabel,\r\n  className,\r\n}: StatCardProps) {\r\n  return (\r\n    <Card className={cn(\"bg-green-500 border border-yellow-500 text-white\", className)}>\r\n      <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\r\n        <CardTitle className=\"text-sm font-medium text-white\">\r\n          {title}\r\n        </CardTitle>\r\n        {Icon && (\r\n          <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-white/20\">\r\n            <Icon className=\"h-4 w-4 text-white\" />\r\n          </div>\r\n        )}\r\n      </CardHeader>\r\n      <CardContent>\r\n        <div className=\"text-lg font-bold tabular-nums\">{value}</div>\r\n        {(description || trend) && (\r\n          <div className=\"flex items-center gap-2 mt-1\">\r\n            {trend && (\r\n              <span className=\"text-xs font-medium text-white\">\r\n                {trend}\r\n              </span>\r\n            )}\r\n            {trendLabel && (\r\n              <span className=\"text-xs text-white\">\r\n                {trendLabel}\r\n              </span>\r\n            )}\r\n            {description && !trend && !trendLabel && (\r\n              <p className=\"text-xs text-white\">{description}</p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Link } from \"wouter\";\r\nimport { useLocation } from \"wouter\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport {\r\n  DollarSign,\r\n  ShoppingCart,\r\n  TrendingUp,\r\n  Wallet,\r\n  ExternalLink,\r\n  Menu,\r\n  Package,\r\n  Code,\r\n  BarChart3,\r\n  Users,\r\n  Zap,\r\n  Award} from \"lucide-react\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\nimport { Agent, Transaction } from \"@shared/schema\";\r\nimport { XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar } from 'recharts';\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ninterface AgentStats {\r\n  balance: number;\r\n  totalProfit: number;\r\n  totalSales: number;\r\n  totalTransactions: number;\r\n  todayProfit: number;\r\n  todayTransactions: number;\r\n}\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    user: {\r\n      name: string;\r\n      email: string;\r\n      phone: string | null;\r\n    };\r\n    profitBalance: number;\r\n    walletBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n  };\r\n  stats: any;\r\n}\r\n\r\n// Performance Chart Component\r\nconst PerformanceChart = ({ stats }: { stats?: AgentStats }) => {\r\n  const { data: performanceData, isLoading } = useQuery({\r\n    queryKey: [\"/api/agent/performance-history\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"w-full h-64 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Use real data if available, otherwise fallback to sample data\r\n  const chartData = Array.isArray(performanceData) ? performanceData : [\r\n    { day: 'Mon', profit: 25.50, transactions: 3 },\r\n    { day: 'Tue', profit: 45.20, transactions: 5 },\r\n    { day: 'Wed', profit: 32.80, transactions: 4 },\r\n    { day: 'Thu', profit: 67.90, transactions: 8 },\r\n    { day: 'Fri', profit: 89.30, transactions: 12 },\r\n    { day: 'Sat', profit: 54.60, transactions: 7 },\r\n    { day: 'Sun', profit: stats?.todayProfit || 42.10, transactions: stats?.todayTransactions || 5 },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <h4 className=\"text-sm font-medium mb-4 text-muted-foreground\">Weekly Performance</h4>\r\n      <ResponsiveContainer width=\"100%\" height={200}>\r\n        <BarChart data={chartData}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" className=\"opacity-30\" />\r\n          <XAxis\r\n            dataKey=\"day\"\r\n            axisLine={false}\r\n            tickLine={false}\r\n            tick={{ fontSize: 12, fill: 'hsl(var(--muted-foreground))' }}\r\n          />\r\n          <YAxis\r\n            axisLine={false}\r\n            tickLine={false}\r\n            tick={{ fontSize: 12, fill: 'hsl(var(--muted-foreground))' }}\r\n            tickFormatter={(value) => `GH₵${value}`}\r\n          />\r\n          <Tooltip\r\n            contentStyle={{\r\n              backgroundColor: 'hsl(var(--background))',\r\n              border: '1px solid hsl(var(--border))',\r\n              borderRadius: '6px',\r\n              fontSize: '12px'\r\n            }}\r\n            formatter={(value: number, name: string) => [\r\n              name === 'profit' ? `GH₵${value.toFixed(2)}` : value,\r\n              name === 'profit' ? 'Profit' : 'Transactions'\r\n            ]}\r\n            labelStyle={{ color: 'hsl(var(--foreground))' }}\r\n          />\r\n          <Bar\r\n            dataKey=\"profit\"\r\n            fill=\"hsl(var(--primary))\"\r\n            radius={[4, 4, 0, 0]}\r\n            name=\"profit\"\r\n          />\r\n        </BarChart>\r\n      </ResponsiveContainer>\r\n      <div className=\"flex justify-between items-center mt-4 text-xs text-muted-foreground\">\r\n        <span>Daily profit over the last 7 days</span>\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-1\">\r\n            <div className=\"w-3 h-3 bg-primary rounded\"></div>\r\n            <span>Profit</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default function AgentDashboard() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n  const [, setLocation] = useLocation();\r\n  const hasRedirected = useRef(false);\r\n  const { user } = useAuth();\r\n\r\n  const { data: profileData } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n  });\r\n\r\n  const agent = profileData?.profile;\r\n  const [location] = useLocation();\r\n\r\n  // Redirect to activation if agent is not approved (run only once)\r\n  useEffect(() => {\r\n    if (agent && !agent.isApproved && location !== \"/agent/activation-complete\" && !hasRedirected.current) {\r\n      hasRedirected.current = true;\r\n      console.log('Redirecting to activation page - agent not approved');\r\n      setLocation(\"/agent/activation-complete\");\r\n    }\r\n  }, [agent, location, setLocation]);\r\n\r\n  const { data: stats, isLoading: statsLoading, error: statsError } = useQuery<AgentStats>({\r\n    queryKey: [\"/api/agent/stats\"],\r\n    refetchInterval: 5000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0,\r\n  });\r\n\r\n  // Force re-render when stats change\r\n  const [displayProfit, setDisplayProfit] = useState(0);\r\n  useEffect(() => {\r\n    if (stats?.totalProfit !== undefined) {\r\n      setDisplayProfit(stats.totalProfit);\r\n    }\r\n  }, [stats?.totalProfit]);\r\n\r\n  // Debug logging\r\n  console.log(\"[Dashboard] Stats data:\", stats);\r\n  console.log(\"[Dashboard] Stats error:\", statsError);\r\n  console.log(\"[Dashboard] totalProfit:\", stats?.totalProfit);\r\n  console.log(\"[Dashboard] displayProfit:\", displayProfit);\r\n\r\n  useQuery<Transaction[]>({\r\n    queryKey: [\"/api/agent/transactions/recent\"],\r\n    refetchInterval: 5000,\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0,\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b bg-background px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <div>\r\n              <h1 className=\"text-lg lg:text-xl font-semibold\">Agent Dashboard</h1>\r\n              <p className=\"text-sm text-muted-foreground hidden sm:block\">\r\n                Welcome back, {agent?.user?.name || 'Agent'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            {agent && (\r\n              <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                <Button variant=\"outline\" size=\"sm\" className=\"gap-2 hidden sm:flex\">\r\n                  <ExternalLink className=\"h-4 w-4\" />\r\n                  View Store\r\n                </Button>\r\n              </a>\r\n            )}\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Welcome Message */}\r\n            <Card className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 border-yellow-600 shadow-xl overflow-hidden relative\">\r\n              <div className=\"absolute top-0 right-0 w-20 h-20 sm:w-24 sm:h-24 lg:w-32 lg:h-32 bg-white/10 rounded-full -translate-y-10 sm:-translate-y-12 lg:-translate-y-16 translate-x-10 sm:translate-x-12 lg:translate-x-16\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-16 h-16 sm:w-20 sm:h-20 lg:w-24 lg:h-24 bg-white/5 rounded-full translate-y-8 sm:translate-y-10 lg:translate-y-12 -translate-x-8 sm:-translate-x-10 lg:-translate-x-12\"></div>\r\n              <CardContent className=\"p-3 sm:p-4 md:p-6 relative\">\r\n                <div className=\"flex flex-col gap-3 sm:gap-4\">\r\n                  <div className=\"flex items-start gap-3 sm:gap-4\">\r\n                    <div className=\"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-white/20 rounded-full shadow-lg backdrop-blur-sm flex-shrink-0\">\r\n                      <span className=\"text-lg sm:text-xl md:text-2xl animate-bounce\">👋</span>\r\n                    </div>\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <h2 className=\"text-lg sm:text-xl md:text-2xl font-bold text-white mb-1 drop-shadow-sm leading-tight\">\r\n                        Welcome back, {user?.name?.toUpperCase() || 'AGENT'}!\r\n                      </h2>\r\n                      <p className=\"text-yellow-100 text-xs sm:text-sm md:text-base font-medium leading-relaxed\">\r\n                        Here's what's happening with your business today ✨\r\n                      </p>\r\n                      <div className=\"flex flex-wrap items-center gap-1.5 sm:gap-2 mt-2\">\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-400 rounded-full animate-pulse\"></div>\r\n                          <span className=\"text-xs font-medium\">Live Dashboard</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-blue-400 rounded-full animate-pulse [animation-delay:0.5s]\"></div>\r\n                          <span className=\"text-xs font-medium\">Real-time Updates</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4\">\r\n                    <div className=\"flex items-center gap-2 bg-white/10 rounded-full px-2 sm:px-3 py-1 backdrop-blur-sm w-fit\">\r\n                      <span className=\"text-xs text-white font-medium\">\r\n                        {new Date().toLocaleDateString('en-US', {\r\n                          weekday: 'short',\r\n                          month: 'short',\r\n                          day: 'numeric'\r\n                        })}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1 text-white/80\">\r\n                      <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full\"></div>\r\n                      <span className=\"text-xs\">All systems operational</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Key Metrics */}\r\n            {statsLoading ? (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {Array.from({ length: 4 }).map((_, i) => (\r\n                  <Card key={i} className=\"animate-pulse\">\r\n                    <CardContent className=\"pt-6\">\r\n                      <div className=\"h-4 bg-muted rounded w-1/2 mb-4\" />\r\n                      <div className=\"h-8 bg-muted rounded w-3/4\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <StatCard\r\n                  title=\"Available Balance\"\r\n                  value={formatCurrency(stats?.balance || 0)}\r\n                  icon={Wallet}\r\n                  description=\"Ready for withdrawal\"\r\n                  trend=\"+12%\"\r\n                  trendLabel=\"vs last month\"\r\n                />\r\n                <StatCard\r\n                  title=\"Today's Profit\"\r\n                  value={formatCurrency(stats?.todayProfit || 0)}\r\n                  icon={TrendingUp}\r\n                  description={`${stats?.todayTransactions || 0} transactions`}\r\n                  trend=\"+8%\"\r\n                  trendLabel=\"vs yesterday\"\r\n                />\r\n                <StatCard\r\n                  key={`profit-${displayProfit}`}\r\n                  title=\"Total Profit\"\r\n                  value={formatCurrency(displayProfit)}\r\n                  icon={DollarSign}\r\n                  description={`All-time earnings - Raw value: ${displayProfit}`}\r\n                  trend=\"+24%\"\r\n                  trendLabel=\"vs last month\"\r\n                />\r\n                <StatCard\r\n                  title=\"Active Orders\"\r\n                  value={stats?.totalTransactions || 0}\r\n                  icon={ShoppingCart}\r\n                  description=\"Completed transactions\"\r\n                  trend=\"+15%\"\r\n                  trendLabel=\"vs last month\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-1 gap-6\">\r\n              {/* Performance Overview */}\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <BarChart3 className=\"h-5 w-5\" />\r\n                    Performance Overview\r\n                  </CardTitle>\r\n                  <CardDescription>Your business metrics at a glance</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-6\">\r\n                  {/* Performance Chart */}\r\n                  <div className=\"h-64 w-full\">\r\n                    <PerformanceChart stats={stats} />\r\n                  </div>\r\n\r\n                  {/* Quick Actions */}\r\n                  <div>\r\n                    <h4 className=\"font-semibold mb-3 flex items-center gap-2\">\r\n                      <Zap className=\"h-4 w-4\" />\r\n                      Quick Actions\r\n                    </h4>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                      <Link href=\"/agent/bundles/mtn\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Package className=\"h-5 w-5\" />\r\n                          <span>MTN</span>\r\n                        </Button>\r\n                      </Link>\r\n                      <Link href=\"/agent/bundles/telecel\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Package className=\"h-5 w-5\" />\r\n                          <span>Telecel</span>\r\n                        </Button>\r\n                      </Link>\r\n                      <Link href=\"/agent/bundles/at-bigtime\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Package className=\"h-5 w-5\" />\r\n                          <span>AT BigTime</span>\r\n                        </Button>\r\n                      </Link>\r\n                      <Link href=\"/agent/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"w-full h-auto py-4 flex-col gap-2 text-xs md:text-sm\">\r\n                          <Wallet className=\"h-5 w-5\" />\r\n                          <span>Top Up</span>\r\n                        </Button>\r\n                      </Link>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Storefront & Order Tracker */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {/* Your Storefront */}\r\n              {agent && (\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Users className=\"h-5 w-5\" />\r\n                      Your Storefront\r\n                    </CardTitle>\r\n                    <CardDescription>Share your store link with customers</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"p-4 bg-green-500 text-white rounded-lg border border-green-600\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"text-sm font-medium text-white\">{agent.businessName}</span>\r\n                          <Badge variant=\"outline\" className=\"bg-white text-green-600 border-green-700\">Live</Badge>\r\n                        </div>\r\n                        <p className=\"text-xs text-white/90 mb-3\">\r\n                          Share this link with your customers:\r\n                        </p>\r\n                        <code className=\"text-xs sm:text-sm bg-white text-green-600 px-2 py-1 rounded mt-2 block sm:inline-block border border-green-700 break-all sm:break-normal\">\r\n                          {window.location.origin}/store/agent/{agent.storefrontSlug}\r\n                        </code>\r\n                      </div>\r\n                      <div className=\"flex flex-col sm:flex-row gap-2\">\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => navigator.clipboard.writeText(`${window.location.origin}/store/agent/${agent.storefrontSlug}`)}\r\n                          className=\"w-full sm:w-auto\"\r\n                        >\r\n                          Copy Link\r\n                        </Button>\r\n                        <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-full sm:w-auto\">\r\n                          <Button size=\"sm\" className=\"w-full\">\r\n                            <ExternalLink className=\"h-4 w-4 mr-1\" />\r\n                            Visit\r\n                          </Button>\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n\r\n              {/* Order Tracker */}\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Package className=\"h-5 w-5\" />\r\n                    Order Tracker\r\n                  </CardTitle>\r\n                  <CardDescription>Monitor your customers' purchase status</CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <OrderTracker />\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* API & Tools */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Code className=\"h-5 w-5\" />\r\n                  API & Tools\r\n                </CardTitle>\r\n                <CardDescription>Automate your business operations</CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"justify-start h-auto p-4 text-left\"\r\n                    onClick={() => setShowApiModal(true)}\r\n                  >\r\n                    <div>\r\n                      <div className=\"font-medium text-sm md:text-base\">API Keys</div>\r\n                      <div className=\"text-xs md:text-sm text-muted-foreground\">Integrate with external systems</div>\r\n                    </div>\r\n                  </Button>\r\n                  <Link href=\"/agent/settings\">\r\n                    <Button variant=\"outline\" className=\"justify-start h-auto p-4 w-full text-left\">\r\n                      <div>\r\n                        <div className=\"font-medium text-sm md:text-base\">Settings</div>\r\n                        <div className=\"text-xs md:text-sm text-muted-foreground\">Manage your profile & links</div>\r\n                      </div>\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n      <ApiIntegrationsModal open={showApiModal} onOpenChange={setShowApiModal} />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code, Users, TrendingUp } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\n\r\nexport default function DealerDashboard() {\r\n  const { user, agent } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Fetch dealer stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/dealer/stats\"],\r\n    queryFn: () => apiRequest(\"/api/dealer/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Mobile sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"w-64 p-0 bg-sidebar\">\r\n          <div className=\"flex flex-col h-full\">\r\n            <div className=\"p-4 border-b\">\r\n              <SheetTitle>Dealer Dashboard</SheetTitle>\r\n              <SheetDescription>\r\n                <VisuallyHidden>Navigation menu for dealer dashboard</VisuallyHidden>\r\n              </SheetDescription>\r\n            </div>\r\n            <nav className=\"flex-1 p-4 space-y-2\">\r\n              <Link href=\"/dealer/dashboard\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Users className=\"inline w-4 h-4 mr-2\" />\r\n                Dashboard\r\n              </Link>\r\n              <Link href=\"/dealer/bundles\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Package className=\"inline w-4 h-4 mr-2\" />\r\n                Data Bundles\r\n              </Link>\r\n              <Link href=\"/dealer/wallet\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Wallet className=\"inline w-4 h-4 mr-2\" />\r\n                Wallet\r\n              </Link>\r\n              <Link href=\"/dealer/transactions\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <CreditCard className=\"inline w-4 h-4 mr-2\" />\r\n                Transactions\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex\">\r\n        {/* Desktop sidebar */}\r\n        <div className=\"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-white border-r\">\r\n          <div className=\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto\">\r\n            <div className=\"flex items-center flex-shrink-0 px-4\">\r\n              <h1 className=\"text-xl font-bold text-gray-900\">Dealer Dashboard</h1>\r\n            </div>\r\n            <div className=\"mt-5 flex-grow flex flex-col\">\r\n              <nav className=\"flex-1 px-2 space-y-1\">\r\n                <Link href=\"/dealer/dashboard\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-900\">\r\n                  <Users className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Dashboard\r\n                </Link>\r\n                <Link href=\"/dealer/bundles\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Package className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Data Bundles\r\n                </Link>\r\n                <Link href=\"/dealer/wallet\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Wallet className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Wallet\r\n                </Link>\r\n                <Link href=\"/dealer/transactions\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <CreditCard className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Transactions\r\n                </Link>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main content area */}\r\n        <div className=\"md:pl-64 flex flex-col flex-1\">\r\n          <div className=\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow md:hidden\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-6 w-6\" />\r\n            </button>\r\n            <div className=\"flex-1 px-4 flex justify-between\">\r\n              <div className=\"flex-1 flex\">\r\n                <h1 className=\"text-xl font-semibold text-gray-900\">Dealer Dashboard</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <main className=\"flex-1\">\r\n            <div className=\"py-6\">\r\n              <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n                <h1 className=\"text-base sm:text-2xl font-semibold text-gray-900\">Welcome back, {user.name}!</h1>\r\n                <p className=\"mt-1 text-xs sm:text-sm text-gray-600\">Here's what's happening with your dealer account today.</p>\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                      <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.walletBalance || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <Link href=\"/dealer/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-2\">\r\n                          Top Up Wallet\r\n                        </Button>\r\n                      </Link>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Sales</CardTitle>\r\n                      <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.totalSales || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+20.1% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Profit</CardTitle>\r\n                      <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.totalProfit || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+15.3% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Active Agents</CardTitle>\r\n                      <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.activeAgents || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Agents under your management</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Recent Transactions */}\r\n                <div className=\"mt-8\">\r\n                  <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n                    <div className=\"px-4 py-5 sm:px-6\">\r\n                      <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Recent Transactions</h3>\r\n                      <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">Your latest transaction activity</p>\r\n                    </div>\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                      {transactionsLoading ? (\r\n                        <li className=\"px-4 py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </li>\r\n                      ) : transactions?.length > 0 ? (\r\n                        transactions.map((transaction: any) => (\r\n                          <li key={transaction.id} className=\"px-4 py-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"flex items-center\">\r\n                                <Package className=\"flex-shrink-0 h-5 w-5 text-gray-400\" />\r\n                                <div className=\"ml-3\">\r\n                                  <p className=\"text-sm font-medium text-gray-900\">\r\n                                    {transaction.type === 'purchase' ? 'Data Purchase' : 'Wallet Top-up'}\r\n                                  </p>\r\n                                  <p className=\"text-sm text-gray-500\">\r\n                                    {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'}>\r\n                                  {transaction.status}\r\n                                </Badge>\r\n                                <span className=\"ml-2 text-sm font-medium text-gray-900\">\r\n                                  GH₵{transaction.amount}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </li>\r\n                        ))\r\n                      ) : (\r\n                        <li className=\"px-4 py-4 text-center text-gray-500\">\r\n                          No recent transactions\r\n                        </li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"mt-8\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">Quick Actions</h3>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Package className=\"h-8 w-8 text-blue-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Sell Data Bundles</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your data bundle offerings</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/dealer/bundles\">\r\n                            <Button className=\"w-full\">View Bundles</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Wallet className=\"h-8 w-8 text-green-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Wallet Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Top up and manage your wallet</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/dealer/wallet\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Wallet</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Code className=\"h-8 w-8 text-purple-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">API Integrations</h4>\r\n                            <p className=\"text-sm text-gray-500\">Integrate with external systems</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setShowApiModal(true)}\r\n                          >\r\n                            API Settings\r\n                          </Button>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Integrations Modal */}\r\n      <ApiIntegrationsModal\r\n        isOpen={showApiModal}\r\n        onClose={() => setShowApiModal(false)}\r\n      />\r\n\r\n      {/* Order Tracker */}\r\n      <OrderTracker />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code, Users, TrendingUp, Crown } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\n\r\nexport default function SuperDealerDashboard() {\r\n  const { user, agent } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Fetch super dealer stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/super-dealer/stats\"],\r\n    queryFn: () => apiRequest(\"/api/super-dealer/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Mobile sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"w-64 p-0 bg-sidebar\">\r\n          <div className=\"flex flex-col h-full\">\r\n            <div className=\"p-4 border-b\">\r\n              <SheetTitle>Super Dealer Dashboard</SheetTitle>\r\n              <SheetDescription>\r\n                <VisuallyHidden>Navigation menu for super dealer dashboard</VisuallyHidden>\r\n              </SheetDescription>\r\n            </div>\r\n            <nav className=\"flex-1 p-4 space-y-2\">\r\n              <Link href=\"/super-dealer/dashboard\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Crown className=\"inline w-4 h-4 mr-2\" />\r\n                Dashboard\r\n              </Link>\r\n              <Link href=\"/super-dealer/bundles\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Package className=\"inline w-4 h-4 mr-2\" />\r\n                Data Bundles\r\n              </Link>\r\n              <Link href=\"/super-dealer/wallet\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Wallet className=\"inline w-4 h-4 mr-2\" />\r\n                Wallet\r\n              </Link>\r\n              <Link href=\"/super-dealer/transactions\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <CreditCard className=\"inline w-4 h-4 mr-2\" />\r\n                Transactions\r\n              </Link>\r\n              <Link href=\"/super-dealer/dealers\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Users className=\"inline w-4 h-4 mr-2\" />\r\n                Manage Dealers\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex\">\r\n        {/* Desktop sidebar */}\r\n        <div className=\"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-white border-r\">\r\n          <div className=\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto\">\r\n            <div className=\"flex items-center flex-shrink-0 px-4\">\r\n              <div className=\"flex items-center\">\r\n                <Crown className=\"w-8 h-8 text-yellow-500 mr-2\" />\r\n                <h1 className=\"text-xl font-bold text-gray-900\">Super Dealer</h1>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-5 flex-grow flex flex-col\">\r\n              <nav className=\"flex-1 px-2 space-y-1\">\r\n                <Link href=\"/super-dealer/dashboard\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-900\">\r\n                  <Crown className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Dashboard\r\n                </Link>\r\n                <Link href=\"/super-dealer/bundles\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Package className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Data Bundles\r\n                </Link>\r\n                <Link href=\"/super-dealer/wallet\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Wallet className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Wallet\r\n                </Link>\r\n                <Link href=\"/super-dealer/transactions\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <CreditCard className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Transactions\r\n                </Link>\r\n                <Link href=\"/super-dealer/dealers\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Users className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Manage Dealers\r\n                </Link>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main content area */}\r\n        <div className=\"md:pl-64 flex flex-col flex-1\">\r\n          <div className=\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow md:hidden\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-6 w-6\" />\r\n            </button>\r\n            <div className=\"flex-1 px-4 flex justify-between\">\r\n              <div className=\"flex-1 flex\">\r\n                <h1 className=\"text-xl font-semibold text-gray-900\">Super Dealer Dashboard</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <main className=\"flex-1\">\r\n            <div className=\"py-6\">\r\n              <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n                <div className=\"flex items-center\">\r\n                  <Crown className=\"w-4 sm:w-8 h-4 sm:h-8 text-yellow-500 mr-3\" />\r\n                  <h1 className=\"text-lg sm:text-2xl font-semibold text-gray-900\">Welcome back, {user.name}!</h1>\r\n                </div>\r\n                <p className=\"mt-1 text-xs sm:text-sm text-gray-600\">Super Dealer Dashboard - Advanced management and analytics.</p>\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                      <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.walletBalance || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <Link href=\"/super-dealer/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-2\">\r\n                          Top Up Wallet\r\n                        </Button>\r\n                      </Link>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Sales</CardTitle>\r\n                      <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.totalSales || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+25.5% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Profit</CardTitle>\r\n                      <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.totalProfit || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+22.1% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Managed Dealers</CardTitle>\r\n                      <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.managedDealers || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Dealers under your supervision</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Recent Transactions */}\r\n                <div className=\"mt-8\">\r\n                  <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n                    <div className=\"px-4 py-5 sm:px-6\">\r\n                      <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Recent Transactions</h3>\r\n                      <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">Your latest transaction activity</p>\r\n                    </div>\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                      {transactionsLoading ? (\r\n                        <li className=\"px-4 py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </li>\r\n                      ) : transactions?.length > 0 ? (\r\n                        transactions.map((transaction: any) => (\r\n                          <li key={transaction.id} className=\"px-4 py-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"flex items-center\">\r\n                                <Package className=\"flex-shrink-0 h-5 w-5 text-gray-400\" />\r\n                                <div className=\"ml-3\">\r\n                                  <p className=\"text-sm font-medium text-gray-900\">\r\n                                    {transaction.type === 'purchase' ? 'Data Purchase' : 'Wallet Top-up'}\r\n                                  </p>\r\n                                  <p className=\"text-sm text-gray-500\">\r\n                                    {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'}>\r\n                                  {transaction.status}\r\n                                </Badge>\r\n                                <span className=\"ml-2 text-sm font-medium text-gray-900\">\r\n                                  GH₵{transaction.amount}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </li>\r\n                        ))\r\n                      ) : (\r\n                        <li className=\"px-4 py-4 text-center text-gray-500\">\r\n                          No recent transactions\r\n                        </li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"mt-8\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">Quick Actions</h3>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Package className=\"h-8 w-8 text-blue-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Sell Data Bundles</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your data bundle offerings</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/super-dealer/bundles\">\r\n                            <Button className=\"w-full\">View Bundles</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Wallet className=\"h-8 w-8 text-green-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Wallet Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Top up and manage your wallet</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/super-dealer/wallet\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Wallet</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Users className=\"h-8 w-8 text-purple-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Manage Dealers</h4>\r\n                            <p className=\"text-sm text-gray-500\">Oversee your dealer network</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/super-dealer/dealers\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Dealers</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Code className=\"h-8 w-8 text-indigo-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">API Integrations</h4>\r\n                            <p className=\"text-sm text-gray-500\">Integrate with external systems</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setShowApiModal(true)}\r\n                          >\r\n                            API Settings\r\n                          </Button>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Integrations Modal */}\r\n      <ApiIntegrationsModal\r\n        isOpen={showApiModal}\r\n        onClose={() => setShowApiModal(false)}\r\n      />\r\n\r\n      {/* Order Tracker */}\r\n      <OrderTracker />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code, Users, TrendingUp, Crown, Shield, BarChart3 } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\n\r\nexport default function MasterDashboard() {\r\n  const { user, agent } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n\r\n  // Fetch master stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/master/stats\"],\r\n    queryFn: () => apiRequest(\"/api/master/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Mobile sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"w-64 p-0 bg-sidebar\">\r\n          <div className=\"flex flex-col h-full\">\r\n            <div className=\"p-4 border-b\">\r\n              <SheetTitle>Master Dashboard</SheetTitle>\r\n              <SheetDescription>\r\n                <VisuallyHidden>Navigation menu for master dashboard</VisuallyHidden>\r\n              </SheetDescription>\r\n            </div>\r\n            <nav className=\"flex-1 p-4 space-y-2\">\r\n              <Link href=\"/master/dashboard\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Shield className=\"inline w-4 h-4 mr-2\" />\r\n                Dashboard\r\n              </Link>\r\n              <Link href=\"/master/bundles\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Package className=\"inline w-4 h-4 mr-2\" />\r\n                Data Bundles\r\n              </Link>\r\n              <Link href=\"/master/wallet\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Wallet className=\"inline w-4 h-4 mr-2\" />\r\n                Wallet\r\n              </Link>\r\n              <Link href=\"/master/transactions\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <CreditCard className=\"inline w-4 h-4 mr-2\" />\r\n                Transactions\r\n              </Link>\r\n              <Link href=\"/master/network\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <Users className=\"inline w-4 h-4 mr-2\" />\r\n                Network Management\r\n              </Link>\r\n              <Link href=\"/master/analytics\" className=\"block px-3 py-2 rounded-md hover:bg-gray-100\">\r\n                <BarChart3 className=\"inline w-4 h-4 mr-2\" />\r\n                Analytics\r\n              </Link>\r\n            </nav>\r\n          </div>\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex\">\r\n        {/* Desktop sidebar */}\r\n        <div className=\"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 bg-white border-r\">\r\n          <div className=\"flex flex-col flex-grow pt-5 pb-4 overflow-y-auto\">\r\n            <div className=\"flex items-center flex-shrink-0 px-4\">\r\n              <div className=\"flex items-center\">\r\n                <Shield className=\"w-8 h-8 text-red-500 mr-2\" />\r\n                <h1 className=\"text-xl font-bold text-gray-900\">Master</h1>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-5 flex-grow flex flex-col\">\r\n              <nav className=\"flex-1 px-2 space-y-1\">\r\n                <Link href=\"/master/dashboard\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-900\">\r\n                  <Shield className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Dashboard\r\n                </Link>\r\n                <Link href=\"/master/bundles\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Package className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Data Bundles\r\n                </Link>\r\n                <Link href=\"/master/wallet\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Wallet className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Wallet\r\n                </Link>\r\n                <Link href=\"/master/transactions\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <CreditCard className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Transactions\r\n                </Link>\r\n                <Link href=\"/master/network\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <Users className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Network Management\r\n                </Link>\r\n                <Link href=\"/master/analytics\" className=\"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900\">\r\n                  <BarChart3 className=\"mr-3 flex-shrink-0 h-5 w-5\" />\r\n                  Analytics\r\n                </Link>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main content area */}\r\n        <div className=\"md:pl-64 flex flex-col flex-1\">\r\n          <div className=\"sticky top-0 z-10 flex-shrink-0 flex h-16 bg-white shadow md:hidden\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n              aria-label=\"Open sidebar\"\r\n              title=\"Open sidebar\"\r\n            >\r\n              <Menu className=\"h-6 w-6\" />\r\n            </button>\r\n            <div className=\"flex-1 px-4 flex justify-between\">\r\n              <div className=\"flex-1 flex\">\r\n                <h1 className=\"text-xl font-semibold text-gray-900\">Master Dashboard</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <main className=\"flex-1\">\r\n            <div className=\"py-6\">\r\n              <div className=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\r\n                <div className=\"flex items-center\">\r\n                  <Shield className=\"w-4 sm:w-8 h-4 sm:h-8 text-red-500 mr-3\" />\r\n                  <h1 className=\"text-base sm:text-2xl font-semibold text-gray-900\">Welcome back, {user.name}!</h1>\r\n                </div>\r\n                <p className=\"mt-1 text-xs sm:text-sm text-gray-600\">Master Dashboard - Complete system oversight and management.</p>\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-5\">\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                      <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.walletBalance || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <Link href=\"/master/wallet\">\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"mt-2\">\r\n                          Top Up Wallet\r\n                        </Button>\r\n                      </Link>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Sales</CardTitle>\r\n                      <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.totalSales || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+30.2% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Total Profit</CardTitle>\r\n                      <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          `GH₵${stats?.totalProfit || '0.00'}`\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">+28.7% from last month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">Network Size</CardTitle>\r\n                      <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          stats?.networkSize || 0\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Total agents in network</p>\r\n                    </CardContent>\r\n                  </Card>\r\n\r\n                  <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">System Health</CardTitle>\r\n                      <BarChart3 className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"text-2xl font-bold text-green-600\">\r\n                        {statsLoading ? (\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          '98.5%'\r\n                        )}\r\n                      </div>\r\n                      <p className=\"text-xs text-muted-foreground\">Uptime this month</p>\r\n                    </CardContent>\r\n                  </Card>\r\n                </div>\r\n\r\n                {/* Recent Transactions */}\r\n                <div className=\"mt-8\">\r\n                  <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n                    <div className=\"px-4 py-5 sm:px-6\">\r\n                      <h3 className=\"text-lg leading-6 font-medium text-gray-900\">Recent Transactions</h3>\r\n                      <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">Your latest transaction activity</p>\r\n                    </div>\r\n                    <ul className=\"divide-y divide-gray-200\">\r\n                      {transactionsLoading ? (\r\n                        <li className=\"px-4 py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </li>\r\n                      ) : transactions?.length > 0 ? (\r\n                        transactions.map((transaction: any) => (\r\n                          <li key={transaction.id} className=\"px-4 py-4\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <div className=\"flex items-center\">\r\n                                <Package className=\"flex-shrink-0 h-5 w-5 text-gray-400\" />\r\n                                <div className=\"ml-3\">\r\n                                  <p className=\"text-sm font-medium text-gray-900\">\r\n                                    {transaction.type === 'purchase' ? 'Data Purchase' : 'Wallet Top-up'}\r\n                                  </p>\r\n                                  <p className=\"text-sm text-gray-500\">\r\n                                    {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex items-center\">\r\n                                <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'}>\r\n                                  {transaction.status}\r\n                                </Badge>\r\n                                <span className=\"ml-2 text-sm font-medium text-gray-900\">\r\n                                  GH₵{transaction.amount}\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </li>\r\n                        ))\r\n                      ) : (\r\n                        <li className=\"px-4 py-4 text-center text-gray-500\">\r\n                          No recent transactions\r\n                        </li>\r\n                      )}\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"mt-8\">\r\n                  <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">Quick Actions</h3>\r\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5\">\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Package className=\"h-8 w-8 text-blue-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Sell Data Bundles</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your data bundle offerings</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/bundles\">\r\n                            <Button className=\"w-full\">View Bundles</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Wallet className=\"h-8 w-8 text-green-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Wallet Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Top up and manage your wallet</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/wallet\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Wallet</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Users className=\"h-8 w-8 text-purple-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Network Management</h4>\r\n                            <p className=\"text-sm text-gray-500\">Manage your entire agent network</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/network\">\r\n                            <Button variant=\"outline\" className=\"w-full\">Manage Network</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <BarChart3 className=\"h-8 w-8 text-orange-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">Analytics</h4>\r\n                            <p className=\"text-sm text-gray-500\">View detailed analytics and reports</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Link href=\"/master/analytics\">\r\n                            <Button variant=\"outline\" className=\"w-full\">View Analytics</Button>\r\n                          </Link>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex items-center\">\r\n                          <Code className=\"h-8 w-8 text-indigo-600\" />\r\n                          <div className=\"ml-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900\">API Integrations</h4>\r\n                            <p className=\"text-sm text-gray-500\">Integrate with external systems</p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setShowApiModal(true)}\r\n                          >\r\n                            API Settings\r\n                          </Button>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n\r\n      {/* API Integrations Modal */}\r\n      <ApiIntegrationsModal\r\n        isOpen={showApiModal}\r\n        onClose={() => setShowApiModal(false)}\r\n      />\r\n\r\n      {/* Order Tracker */}\r\n      <OrderTracker />\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n","import { Badge } from \"@/components/ui/badge\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { CheckCircle, Clock, XCircle, RefreshCw, Layers } from \"lucide-react\";\r\n\r\ninterface StatusBadgeProps {\r\n  status: string;\r\n  statusConfig?: Record<string, { label: string; color: string }>;\r\n  className?: string;\r\n}\r\n\r\nconst defaultStatusConfig: Record<string, { label: string; color: string; icon?: typeof CheckCircle }> = {\r\n  pending: { label: \"Processing\", color: \"bg-blue-500 text-white\", icon: Layers },\r\n  processing: { label: \"Processing\", color: \"bg-blue-500 text-white\", icon: Layers },\r\n  confirmed: { label: \"Confirmed\", color: \"bg-blue-600 text-white\", icon: CheckCircle },\r\n  completed: { label: \"Completed\", color: \"bg-green-500 text-white\", icon: CheckCircle },\r\n  delivered: { label: \"Delivered\", color: \"bg-green-500 text-white\", icon: CheckCircle },\r\n  cancelled: { label: \"Cancelled\", color: \"bg-red-500 text-white\", icon: XCircle },\r\n  failed: { label: \"Failed\", color: \"bg-red-500 text-white\", icon: XCircle },\r\n  refunded: { label: \"Refunded\", color: \"bg-blue-500 text-white\", icon: RefreshCw },\r\n  approved: { label: \"Approved\", color: \"bg-blue-500 text-white\", icon: CheckCircle },\r\n  rejected: { label: \"Rejected\", color: \"bg-red-500 text-white\", icon: XCircle },\r\n  sent: { label: \"Sent\", color: \"bg-green-500 text-white\", icon: CheckCircle },\r\n  retrying: { label: \"Retrying\", color: \"bg-yellow-500 text-white\", icon: RefreshCw },\r\n};\r\n\r\nexport function StatusBadge({ status, statusConfig, className }: StatusBadgeProps) {\r\n  const config = statusConfig?.[status] || defaultStatusConfig[status] || {\r\n    label: status,\r\n    color: \"bg-gray-100 text-gray-700 dark:bg-white dark:text-gray-300\",\r\n  };\r\n\r\n  const Icon = (defaultStatusConfig[status] as any)?.icon;\r\n\r\n  return (\r\n    <Badge\r\n      variant=\"outline\"\r\n      className={cn(\r\n        \"gap-1 border-0 font-medium\",\r\n        config.color,\r\n        className\r\n      )}\r\n    >\r\n      {Icon && <Icon className=\"h-3 w-3\" />}\r\n      {config.label}\r\n    </Badge>\r\n  );\r\n}\r\n","\"use client\"\r\n\r\nimport { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatusBadge } from \"@/components/ui/status-badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { formatCurrency, formatDate, NETWORKS } from \"@/lib/constants\";\r\nimport { BarChart3, Search, DollarSign, TrendingUp, ShoppingCart, Menu, Layers, ChevronDown } from \"lucide-react\";\r\nimport type { Transaction } from \"@shared/schema\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@radix-ui/react-popover\";\r\n\r\n// Status display utility\r\n\r\n\r\ninterface AgentTransactionStats {\r\n  totalTransactions: number;\r\n  totalRevenue: number;\r\n  totalProfit: number;\r\n  todayTransactions: number;\r\n}\r\n\r\nexport default function AgentTransactions() {\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [typeFilter, setTypeFilter] = useState<string>(\"all\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: transactions, isLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/agent/transactions\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time updates\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const { data: stats } = useQuery<AgentTransactionStats>({\r\n    queryKey: [\"/api/agent/transactions/stats\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time stats\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const filteredTransactions = transactions?.filter((tx) => {\r\n    if (statusFilter !== \"all\" && tx.status !== statusFilter) return false;\r\n    if (typeFilter !== \"all\" && tx.type !== typeFilter) return false;\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      if (\r\n        !tx.reference.toLowerCase().includes(term) &&\r\n        !tx.productName.toLowerCase().includes(term) &&\r\n        !(tx.customerPhone && tx.customerPhone.toLowerCase().includes(term))\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  });\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">My Transactions</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6\">\r\n              <StatCard\r\n                title=\"Total Transactions\"\r\n                value={stats?.totalTransactions || 0}\r\n                icon={ShoppingCart}\r\n                description=\"All time\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n              <StatCard\r\n                title=\"Total Revenue\"\r\n                value={formatCurrency(stats?.totalRevenue || 0)}\r\n                icon={DollarSign}\r\n                description=\"From sales\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n              <StatCard\r\n                title=\"Total Profit\"\r\n                value={formatCurrency(stats?.totalProfit || 0)}\r\n                icon={TrendingUp}\r\n                description=\"Your earnings\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n              <StatCard\r\n                title=\"Today\"\r\n                value={stats?.todayTransactions || 0}\r\n                icon={BarChart3}\r\n                description=\"Transactions today\"\r\n                className=\"text-sm md:text-base\"\r\n              />\r\n            </div>\r\n\r\n            <Card className=\"bg-white text-black border-gray-200 md:col-span-2 lg:col-span-3\">\r\n              <CardHeader className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-3 pb-3 md:pb-6\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-base md:text-lg text-black\">\r\n                    <BarChart3 className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                    <span className=\"truncate\">Transaction History</span>\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-sm md:text-base text-gray-600\">\r\n                    View all your customer orders and earnings\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex flex-col sm:flex-row flex-wrap gap-2 w-full lg:w-auto\">\r\n                  <div className=\"relative flex-1 sm:flex-initial\">\r\n                    <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search...\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"pl-9 w-full sm:w-48 text-sm\"\r\n                      data-testid=\"input-search\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-32 text-xs md:text-sm\" data-testid=\"filter-status\">\r\n                        <SelectValue placeholder=\"Status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Status</SelectItem>\r\n                        <SelectItem value=\"pending\">Pending</SelectItem>\r\n                        <SelectItem value=\"confirmed\">Confirmed</SelectItem>\r\n                        <SelectItem value=\"completed\">Completed</SelectItem>\r\n                        <SelectItem value=\"delivered\">Delivered</SelectItem>\r\n                        <SelectItem value=\"cancelled\">Cancelled</SelectItem>\r\n                        <SelectItem value=\"failed\">Failed</SelectItem>\r\n                        <SelectItem value=\"refunded\">Refunded</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Select value={typeFilter} onValueChange={setTypeFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-36 md:w-40 text-xs md:text-sm\" data-testid=\"filter-type\">\r\n                        <SelectValue placeholder=\"Type\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Types</SelectItem>\r\n                        <SelectItem value=\"data_bundle\">Data Bundles</SelectItem>\r\n                        <SelectItem value=\"result_checker\">Result Checkers</SelectItem>\r\n                        <SelectItem value=\"wallet_topup\">Wallet Top-up</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"px-3 md:px-6\">\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : filteredTransactions && filteredTransactions.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"text-xs md:text-sm\">Order ID</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Product</TableHead>\r\n                          <TableHead className=\"hidden sm:table-cell text-xs md:text-sm\">Network</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Amount</TableHead>\r\n                          <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">My Profit</TableHead>\r\n                          <TableHead className=\"hidden lg:table-cell text-xs md:text-sm\">Customer</TableHead>\r\n                          <TableHead className=\"hidden xl:table-cell text-xs md:text-sm\">Payment</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Status</TableHead>\r\n                          <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">Date</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {filteredTransactions.slice(0, 20).map((tx) => {\r\n                          const network = NETWORKS.find((n) => n.id === tx.network);\r\n                          const isBulkOrder = (tx as any).isBulkOrder;\r\n                          const phoneNumbersRaw = (tx as any).phoneNumbers;\r\n                          const phoneNumbers = phoneNumbersRaw ? (typeof phoneNumbersRaw === 'string' ? JSON.parse(phoneNumbersRaw) : phoneNumbersRaw) as Array<{phone: string, bundleName: string, dataAmount: string}> : undefined;\r\n                          const isWalletTopup = tx.type === \"wallet_topup\";\r\n                          return (\r\n                            <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\r\n                              <TableCell className=\"font-mono text-xs md:text-sm\">{tx.id.slice(0,8)}</TableCell>\r\n                              <TableCell className=\"max-w-[150px] md:max-w-[200px]\">\r\n                                <div className=\"font-medium truncate text-xs md:text-sm\">{tx.productName}</div>\r\n                                <div className=\"flex gap-1 mt-1 flex-wrap\">\r\n                                  <Badge variant=\"outline\" className=\"text-xs px-1 py-0\">\r\n                                    {tx.type === \"data_bundle\" ? \"Data\" :\r\n                                     tx.type === \"result_checker\" ? \"Result\" :\r\n                                     tx.type === \"wallet_topup\" ? \"Wallet\" : tx.type}\r\n                                  </Badge>\r\n                                  {isBulkOrder && (\r\n                                    <Badge variant=\"secondary\" className=\"text-xs px-1 py-0 flex items-center gap-1\">\r\n                                      <Layers className=\"h-2.5 w-2.5\" />\r\n                                      {phoneNumbers?.length || 0}\r\n                                    </Badge>\r\n                                  )}\r\n                                </div>\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden sm:table-cell\">\r\n                                {isWalletTopup ? (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                ) : network ? (\r\n                                  <Badge\r\n                                    style={{\r\n                                      backgroundColor: network.color,\r\n                                      color: network.textColor,\r\n                                    }}\r\n                                    className=\"text-xs px-1 py-0\"\r\n                                  >\r\n                                    {network.name}\r\n                                  </Badge>\r\n                                ) : (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"font-medium tabular-nums text-xs md:text-sm\">\r\n                                <div>{formatCurrency(tx.amount)}</div>\r\n                                {isBulkOrder && phoneNumbers && (\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {formatCurrency(parseFloat(tx.amount) / phoneNumbers.length)} each\r\n                                  </div>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden md:table-cell text-green-600 tabular-nums font-medium text-xs md:text-sm\">\r\n                                {isWalletTopup ? (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                ) : (\r\n                                  <div>+{formatCurrency(tx.agentProfit || 0)}</div>\r\n                                )}\r\n                                {isBulkOrder && phoneNumbers && !isWalletTopup && (\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {formatCurrency(parseFloat(tx.agentProfit || \"0\") / phoneNumbers.length)} each\r\n                                  </div>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden lg:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                                {isWalletTopup ? (\r\n                                  <span className=\"text-muted-foreground\">Self</span>\r\n                                ) : isBulkOrder && phoneNumbers ? (\r\n                                  <Popover>\r\n                                    <PopoverTrigger asChild>\r\n                                      <Button variant=\"ghost\" size=\"sm\" className=\"h-auto p-1 text-left justify-start text-muted-foreground hover:text-foreground\">\r\n                                        <div className=\"text-xs\">\r\n                                          <div className=\"font-semibold\">{phoneNumbers.length} numbers</div>\r\n                                          <div className=\"truncate max-w-[80px] md:max-w-[100px]\">\r\n                                            {phoneNumbers[0]?.phone}\r\n                                          </div>\r\n                                        </div>\r\n                                        <ChevronDown className=\"h-3 w-3 ml-1\" />\r\n                                      </Button>\r\n                                    </PopoverTrigger>\r\n                                    <PopoverContent className=\"w-80\">\r\n                                      <div className=\"space-y-2\">\r\n                                        <h4 className=\"font-medium\">Bulk Order Numbers</h4>\r\n                                        <div className=\"space-y-1 max-h-40 overflow-y-auto\">\r\n                                          {phoneNumbers.map((item, index) => (\r\n                                            <div key={index} className=\"text-sm\">\r\n                                              <div className=\"font-mono\">{item.phone}</div>\r\n                                              <div className=\"text-muted-foreground text-xs\">\r\n                                                {item.bundleName} - {item.dataAmount}\r\n                                              </div>\r\n                                            </div>\r\n                                          ))}\r\n                                        </div>\r\n                                      </div>\r\n                                    </PopoverContent>\r\n                                  </Popover>\r\n                                ) : (\r\n                                  tx.customerPhone\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden xl:table-cell\">\r\n                                <Badge\r\n                                  variant={\r\n                                    (tx as any).paymentStatus === \"paid\" ? \"default\" :\r\n                                    (tx as any).paymentStatus === \"failed\" ? \"destructive\" :\r\n                                    (tx as any).paymentStatus === \"cancelled\" ? \"outline\" :\r\n                                    \"secondary\"\r\n                                  }\r\n                                  className=\"text-xs\"\r\n                                >\r\n                                  {(tx as any).paymentStatus || \"pending\"}\r\n                                </Badge>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <StatusBadge status={tx.status} />\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden md:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                                {formatDate(tx.createdAt)}\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-6 md:py-12 text-muted-foreground text-sm md:text-base\">\r\n                    No transactions found. Share your store link to start making sales!\r\n                  </div>\r\n                )}\r\n                {filteredTransactions && filteredTransactions.length > 20 && (\r\n                  <div className=\"text-center py-2 md:py-4 text-xs md:text-sm text-muted-foreground\">\r\n                    Showing 20 of {filteredTransactions.length} items\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage } from \"@/components/ui/form\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate, WITHDRAWAL_STATUSES } from \"@/lib/constants\";\r\nimport { Wallet, Plus, DollarSign, Clock, CheckCircle, Menu, Smartphone, Building2 } from \"lucide-react\";\r\nimport type { Withdrawal, Agent } from \"@shared/schema\";\r\n\r\nconst withdrawalSchema = z.object({\r\n  amount: z.string()\r\n    .min(1, \"Amount is required\")\r\n    .refine((val) => parseFloat(val) >= 10, \"Minimum withdrawal amount is GH₵10\")\r\n    .refine((val) => parseFloat(val) <= 100000, \"Maximum withdrawal amount is GH₵100,000\"),\r\n  paymentMethod: z.enum([\"mtn_momo\", \"telecel_cash\", \"airtel_tigo_cash\", \"vodafone_cash\"], {\r\n    required_error: \"Please select a payment method\"\r\n  }),\r\n  accountNumber: z.string().min(5, \"Phone number is required\"),\r\n  accountName: z.string().min(2, \"Account name is required\"),\r\n});\r\n\r\ntype WithdrawalFormData = z.infer<typeof withdrawalSchema>;\r\n\r\nexport default function AgentWithdrawals() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [isRequestOpen, setIsRequestOpen] = useState(false);\r\n\r\n  const { data: profileData } = useQuery<{ profile: Agent & { profitBalance: number; walletBalance: number; totalWithdrawals: number; role: string } }>({\r\n    queryKey: [\"/api/profile\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time balance updates\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0, // Always fetch fresh data\r\n  });\r\n\r\n  const agent = profileData?.profile;\r\n\r\n  const { data: withdrawals, isLoading } = useQuery<Withdrawal[]>({\r\n    queryKey: [\"/api/agent/withdrawals\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds for real-time withdrawal status updates\r\n    refetchOnWindowFocus: true,\r\n    refetchOnReconnect: true,\r\n    staleTime: 0, // Always fetch fresh data\r\n  });\r\n\r\n  const form = useForm<WithdrawalFormData>({\r\n    resolver: zodResolver(withdrawalSchema),\r\n    defaultValues: {\r\n      amount: \"\",\r\n      paymentMethod: \"mtn_momo\",\r\n      accountNumber: \"\",\r\n      accountName: \"\",\r\n    },\r\n  });\r\n\r\n  const paymentMethods = [\r\n    { value: \"mtn_momo\", label: \"MTN Mobile Money\", icon: Smartphone, description: \"Send to MTN MoMo number\" },\r\n    { value: \"telecel_cash\", label: \"Telecel Cash\", icon: Smartphone, description: \"Send to Telecel Cash number\" },\r\n    { value: \"airtel_tigo_cash\", label: \"AirtelTigo Cash\", icon: Smartphone, description: \"Send to AirtelTigo Cash number\" },\r\n    { value: \"vodafone_cash\", label: \"Vodafone Cash\", icon: Smartphone, description: \"Send to Vodafone Cash number\" },\r\n  ];\r\n\r\n  const requestMutation = useMutation({\r\n    mutationFn: (data: WithdrawalFormData) =>\r\n      apiRequest(\"POST\", \"/api/agent/withdrawals\", { ...data, amount: parseFloat(data.amount) }),\r\n    onSuccess: (response: any) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/withdrawals\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/profile\"] });\r\n      setIsRequestOpen(false);\r\n      form.reset();\r\n      toast({ \r\n        title: \"Withdrawal Requested!\", \r\n        description: response.message || \"Your withdrawal request has been submitted and is pending admin approval.\"\r\n      });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Withdrawal failed\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: WithdrawalFormData) => {\r\n    const amount = parseFloat(data.amount);\r\n    const balance = agent?.profitBalance || 0;\r\n\r\n    if (amount < 10) {\r\n      toast({\r\n        title: \"Amount too low\",\r\n        description: \"Minimum withdrawal amount is GH₵10\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (amount > balance) {\r\n      toast({\r\n        title: \"Insufficient balance\",\r\n        description: `Available balance: ${formatCurrency(balance)}`,\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n    requestMutation.mutate(data);\r\n  };\r\n\r\n  const stats = {\r\n    pending: withdrawals?.filter((w) => w.status === \"pending\").length || 0,\r\n    approved: withdrawals?.filter((w) => w.status === \"approved\" || w.status === \"paid\").length || 0,\r\n    totalWithdrawn: withdrawals\r\n      ?.filter((w) => w.status === \"paid\")\r\n      .reduce((sum, w) => sum + parseFloat(w.amount), 0) || 0,\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig = WITHDRAWAL_STATUSES[status as keyof typeof WITHDRAWAL_STATUSES];\r\n    return (\r\n      <Badge className={statusConfig?.color || \"\"}>\r\n        {statusConfig?.label || status}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-xs md:text-lg lg:text-xl font-semibold\">Withdrawals</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isRequestOpen} onOpenChange={setIsRequestOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-request-withdrawal\" className=\"flex items-center text-xs px-1 py-0.5 h-6 md:text-sm md:px-3 md:py-2 md:h-10 lg:text-base lg:px-4 lg:py-2 lg:h-10\">\r\n                  <Plus className=\"h-2.5 w-2.5 mr-0.5 md:h-4 md:w-4 md:mr-2\" />\r\n                  Request Withdrawal\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"bg-white\">\r\n                <DialogHeader>\r\n                  <DialogTitle>Request Profit Withdrawal</DialogTitle>\r\n                  <DialogDescription>\r\n                    Request profit withdrawal (Minimum: GH₵10). Funds will be transferred after admin approval.\r\n                  </DialogDescription>\r\n                </DialogHeader>\r\n                <Form {...form}>\r\n                  <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                    <div className=\"p-4 bg-muted rounded-lg mb-4\">\r\n                      <p className=\"text-sm text-muted-foreground\">Profit Balance</p>\r\n                      <p className=\"text-lg font-bold\">{formatCurrency(agent?.profitBalance || 0)}</p>\r\n                    </div>\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"amount\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Amount (GHS) - Minimum GH₵10</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"number\"\r\n                              step=\"0.01\"\r\n                              min=\"10\"\r\n                              placeholder=\"10.00\"\r\n                              data-testid=\"input-amount\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"paymentMethod\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabelWithoutFor>Payment Method</FormLabelWithoutFor>\r\n                          <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                            <FormControl>\r\n                              <SelectTrigger>\r\n                                <SelectValue placeholder=\"Select payment method\" />\r\n                              </SelectTrigger>\r\n                            </FormControl>\r\n                            <SelectContent>\r\n                              {paymentMethods.map((method) => (\r\n                                <SelectItem key={method.value} value={method.value}>\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <method.icon className=\"h-4 w-4\" />\r\n                                    <div>\r\n                                      <div className=\"font-medium\">{method.label}</div>\r\n                                      <div className=\"text-xs text-muted-foreground\">{method.description}</div>\r\n                                    </div>\r\n                                  </div>\r\n                                </SelectItem>\r\n                              ))}\r\n                            </SelectContent>\r\n                          </Select>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"accountNumber\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Phone Number</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Enter phone number (e.g., 0241234567)\"\r\n                              data-testid=\"input-account-number\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"accountName\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Account Name</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Name on account\"\r\n                              data-testid=\"input-account-name\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      className=\"w-full\"\r\n                      disabled={requestMutation.isPending}\r\n                      data-testid=\"button-submit-withdrawal\"\r\n                    >\r\n                      {requestMutation.isPending ? \"Submitting...\" : \"Submit Request\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <StatCard\r\n                title=\"Profit Balance\"\r\n                value={formatCurrency(agent?.profitBalance || 0)}\r\n                icon={Wallet}\r\n                description=\"Ready to withdraw\"\r\n              />\r\n              <StatCard\r\n                title=\"Pending Requests\"\r\n                value={stats.pending}\r\n                icon={Clock}\r\n                description=\"Awaiting approval\"\r\n              />\r\n              <StatCard\r\n                title=\"Approved\"\r\n                value={stats.approved}\r\n                icon={CheckCircle}\r\n                description=\"Processed requests\"\r\n              />\r\n              <StatCard\r\n                title=\"Total Withdrawn\"\r\n                value={formatCurrency(stats.totalWithdrawn)}\r\n                icon={DollarSign}\r\n                description=\"All time\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Wallet className=\"h-5 w-5\" />\r\n                  Withdrawal History\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Track your withdrawal requests and their status\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : withdrawals && withdrawals.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Amount</TableHead>\r\n                        <TableHead>Payment Method</TableHead>\r\n                        <TableHead>Account Details</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Requested</TableHead>\r\n                        <TableHead>Processed</TableHead>\r\n                        <TableHead>Note</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {withdrawals.map((withdrawal) => (\r\n                        <TableRow key={withdrawal.id} data-testid={`row-withdrawal-${withdrawal.id}`}>\r\n                          <TableCell className=\"font-bold tabular-nums text-lg\">\r\n                            {formatCurrency(withdrawal.amount)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              {withdrawal.paymentMethod === \"bank\" ? (\r\n                                <Building2 className=\"h-4 w-4 text-blue-600\" />\r\n                              ) : (\r\n                                <Smartphone className=\"h-4 w-4 text-green-600\" />\r\n                              )}\r\n                              <span className=\"text-sm font-medium capitalize\">\r\n                                {withdrawal.paymentMethod?.replace(\"_\", \" \") || \"Bank\"}\r\n                              </span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium\">{withdrawal.accountName}</div>\r\n                              <div className=\"text-muted-foreground\">{withdrawal.accountNumber}</div>\r\n                              {withdrawal.paymentMethod === \"bank\" && withdrawal.bankName && (\r\n                                <div className=\"text-muted-foreground text-xs\">{withdrawal.bankName}</div>\r\n                              )}\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>{getStatusBadge(withdrawal.status)}</TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {formatDate(withdrawal.createdAt)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {withdrawal.paidAt ? formatDate(withdrawal.paidAt) : \"-\"}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm max-w-[150px] truncate\">\r\n                            {withdrawal.adminNote || \"-\"}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No withdrawal requests yet. Click \"Request Withdrawal\" to submit a withdrawal request (Min: GH₵10).\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { Store, ExternalLink, Copy, Save, Smartphone, Menu } from \"lucide-react\";\r\nimport type { Agent } from \"../../../../src/shared/schema\";\r\n\r\nconst storefrontSchema = z.object({\r\n  businessName: z.string().min(2, \"Business name must be at least 2 characters\"),\r\n  businessDescription: z.string().min(10, \"Business description must be at least 10 characters\"),\r\n  whatsappSupportLink: z.string().url(\"Please enter a valid WhatsApp link\").optional().or(z.literal(\"\")),\r\n  whatsappChannelLink: z.string().url(\"Please enter a valid WhatsApp Channel link\").optional().or(z.literal(\"\")),\r\n});\r\n\r\ntype StorefrontFormData = z.infer<typeof storefrontSchema>;\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    walletBalance: number;\r\n    profitBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n    user: {\r\n      name: string | null;\r\n      email: string | null;\r\n      phone: string | null;\r\n    };\r\n  };\r\n  stats: any;\r\n}\r\n\r\nexport default function AgentStorefront() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: profileData, isLoading: profileLoading } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n    refetchOnWindowFocus: true,\r\n  });\r\n  \r\n  const agent = profileData?.profile;\r\n\r\n  const form = useForm<StorefrontFormData>({\r\n    resolver: zodResolver(storefrontSchema),\r\n    defaultValues: {\r\n      businessName: \"\",\r\n      businessDescription: \"\",\r\n      whatsappSupportLink: \"\",\r\n      whatsappChannelLink: \"\",\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (agent) {\r\n      form.reset({\r\n        businessName: agent.businessName || \"\",\r\n        businessDescription: agent.businessDescription || \"\",\r\n        whatsappSupportLink: agent.whatsappSupportLink || \"\",\r\n        whatsappChannelLink: agent.whatsappChannelLink || \"\",\r\n      });\r\n    }\r\n  }, [agent, form]);\r\n\r\n  const updateStoreMutation = useMutation({\r\n    mutationFn: (data: StorefrontFormData) =>\r\n      apiRequest(\"PATCH\", \"/api/agent/storefront\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/profile\"] });\r\n      toast({ title: \"Store details updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update store\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: StorefrontFormData) => {\r\n    updateStoreMutation.mutate(data);\r\n  };\r\n\r\n  const copyStoreLink = () => {\r\n    if (agent) {\r\n      const url = `${window.location.origin}/store/agent/${agent.storefrontSlug}`;\r\n      navigator.clipboard.writeText(url);\r\n      toast({ title: \"Store link copied to clipboard!\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">My Storefront</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          {/* Hero Section */}\r\n          <div className=\"max-w-4xl mx-auto mb-8\">\r\n            <div className=\"relative bg-green-500 rounded-lg p-8 border border-green-600\">\r\n              <div className=\"flex items-center gap-4 mb-4\">\r\n                <div className=\"p-3 bg-white/20 rounded-full\">\r\n                  <Store className=\"h-8 w-8 text-white\" />\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-white\">\r\n                    {agent?.businessName || \"Your Storefront\"}\r\n                  </h2>\r\n                  <p className=\"text-green-100\">\r\n                    Manage and customize your online store\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white/10 rounded-md p-4 border border-white/20\">\r\n                <p className=\"text-white/90 leading-relaxed\">\r\n                  {agent?.businessDescription || \"No business description provided. Update it below to tell customers about your store.\"}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-4 mt-6\">\r\n                <div className=\"flex items-center gap-2 text-sm text-white/90\">\r\n                  <Smartphone className=\"h-4 w-4\" />\r\n                  <span>Active Storefront</span>\r\n                </div>\r\n                {agent?.storefrontSlug && (\r\n                  <Badge variant=\"secondary\" className=\"text-xs bg-white/20 text-white border-white/30\">\r\n                    /{agent.storefrontSlug}\r\n                  </Badge>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"max-w-4xl mx-auto space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Store className=\"h-5 w-5\" />\r\n                  Store Link\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Share this link with your customers\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center gap-2\">\r\n                  <Input\r\n                    value={agent ? `${window.location.origin}/store/agent/${agent.storefrontSlug}` : \"\"}\r\n                    readOnly\r\n                    className=\"font-mono text-sm flex-1 min-w-0\"\r\n                    data-testid=\"input-store-url\"\r\n                  />\r\n                  <div className=\"flex items-center gap-2 sm:shrink-0\">\r\n                    <Button variant=\"outline\" size=\"icon\" onClick={copyStoreLink} data-testid=\"button-copy-link\">\r\n                      <Copy className=\"h-4 w-4\" />\r\n                    </Button>\r\n                    {agent && (\r\n                      <a href={`/store/agent/${agent.storefrontSlug}`} target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Open storefront in new tab\">\r\n                        <Button variant=\"outline\" size=\"icon\" data-testid=\"button-open-store\">\r\n                          <ExternalLink className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </a>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Store Details</CardTitle>\r\n                <CardDescription>\r\n                  Customize how your store appears to customers\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <Form {...form}>\r\n                  <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"businessName\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Business Name</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Your business name\"\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-business-name\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"businessDescription\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Description</FormLabel>\r\n                          <FormControl>\r\n                            <Textarea\r\n                              placeholder=\"Tell customers about your business...\"\r\n                              className=\"resize-none\"\r\n                              rows={3}\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-business-description\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            This will be shown on your storefront page\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"whatsappSupportLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Support Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://wa.me/1234567890\"\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-whatsapp-support\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp for customer support. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={form.control}\r\n                      name=\"whatsappChannelLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Channel Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://whatsapp.com/channel/...\"\r\n                              disabled={profileLoading}\r\n                              data-testid=\"input-whatsapp-channel\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp Channel. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={updateStoreMutation.isPending || profileLoading}\r\n                      data-testid=\"button-save-details\"\r\n                    >\r\n                      <Save className=\"h-4 w-4 mr-2\" />\r\n                      {updateStoreMutation.isPending ? \"Saving...\" : profileLoading ? \"Loading...\" : \"Save Changes to my storefront page\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { Settings, User, Lock, Save, Menu } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport type { Agent, User as UserType } from \"@shared/schema\";\r\n\r\nconst profileSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  phone: z.string().optional(),\r\n  whatsappSupportLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n  whatsappChannelLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n});\r\n\r\nconst passwordSchema = z.object({\r\n  currentPassword: z.string().min(6, \"Password must be at least 6 characters\"),\r\n  newPassword: z.string().min(6, \"Password must be at least 6 characters\"),\r\n  confirmPassword: z.string(),\r\n}).refine((data) => data.newPassword === data.confirmPassword, {\r\n  message: \"Passwords don't match\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype ProfileFormData = z.infer<typeof profileSchema>;\r\ntype PasswordFormData = z.infer<typeof passwordSchema>;\r\n\r\ninterface AgentProfileResponse {\r\n  profile: Agent & {\r\n    user: UserType;\r\n    profitBalance: number;\r\n    walletBalance: number;\r\n    totalWithdrawals: number;\r\n    role: string;\r\n  };\r\n  stats: any;\r\n}\r\n\r\nexport default function AgentSettings() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: profileData } = useQuery<AgentProfileResponse>({\r\n    queryKey: [\"/api/profile\"],\r\n  });\r\n  \r\n  const profile = profileData?.profile;\r\n\r\n  const profileForm = useForm<ProfileFormData>({\r\n    resolver: zodResolver(profileSchema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      whatsappSupportLink: \"\",\r\n      whatsappChannelLink: \"\",\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (profile) {\r\n      profileForm.reset({\r\n        name: profile.user?.name || \"\",\r\n        email: profile.user?.email || \"\",\r\n        phone: profile.user?.phone || \"\",\r\n        whatsappSupportLink: profile.whatsappSupportLink || \"\",\r\n        whatsappChannelLink: profile.whatsappChannelLink || \"\",\r\n      });\r\n    }\r\n  }, [profile, profileForm]);\r\n\r\n  const passwordForm = useForm<PasswordFormData>({\r\n    resolver: zodResolver(passwordSchema),\r\n    defaultValues: {\r\n      currentPassword: \"\",\r\n      newPassword: \"\",\r\n      confirmPassword: \"\",\r\n    },\r\n  });\r\n\r\n  const updateProfileMutation = useMutation({\r\n    mutationFn: (data: ProfileFormData) =>\r\n      apiRequest(\"PATCH\", \"/api/agent/profile\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/profile\"] });\r\n      toast({ title: \"Profile updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update profile\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updatePasswordMutation = useMutation({\r\n    mutationFn: (data: PasswordFormData) =>\r\n      apiRequest(\"POST\", \"/api/agent/password\", data),\r\n    onSuccess: () => {\r\n      passwordForm.reset();\r\n      toast({ title: \"Password updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update password\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const onProfileSubmit = (data: ProfileFormData) => {\r\n    updateProfileMutation.mutate(data);\r\n  };\r\n\r\n  const onPasswordSubmit = (data: PasswordFormData) => {\r\n    updatePasswordMutation.mutate(data);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Settings</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-2xl mx-auto space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <User className=\"h-5 w-5\" />\r\n                  Profile Information\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Update your personal details\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <Form {...profileForm}>\r\n                  <form onSubmit={profileForm.handleSubmit(onProfileSubmit)} className=\"space-y-4\">\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"name\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Full Name</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"Your full name\"\r\n                              data-testid=\"input-name\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"email\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Email Address</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"email\"\r\n                              placeholder=\"your@email.com\"\r\n                              data-testid=\"input-email\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"phone\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Phone Number</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"+233 XX XXX XXXX\"\r\n                              data-testid=\"input-phone\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Used for account recovery and notifications\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"whatsappSupportLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Support Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://wa.me/1234567890\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp for customer support. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={profileForm.control}\r\n                      name=\"whatsappChannelLink\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>WhatsApp Channel Link</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              placeholder=\"https://whatsapp.com/channel/...\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormDescription>\r\n                            Link to your WhatsApp Channel. Leave empty to hide from storefront.\r\n                          </FormDescription>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={updateProfileMutation.isPending}\r\n                      data-testid=\"button-save-profile\"\r\n                    >\r\n                      <Save className=\"h-4 w-4 mr-2\" />\r\n                      {updateProfileMutation.isPending ? \"Saving...\" : \"Save Changes\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Lock className=\"h-5 w-5\" />\r\n                  Change Password\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Update your account password\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <Form {...passwordForm}>\r\n                  <form onSubmit={passwordForm.handleSubmit(onPasswordSubmit)} className=\"space-y-4\">\r\n                    <FormField\r\n                      control={passwordForm.control}\r\n                      name=\"currentPassword\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Current Password</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"password\"\r\n                              placeholder=\"Enter current password\"\r\n                              data-testid=\"input-current-password\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Separator />\r\n\r\n                    <FormField\r\n                      control={passwordForm.control}\r\n                      name=\"newPassword\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>New Password</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"password\"\r\n                              placeholder=\"Enter new password\"\r\n                              data-testid=\"input-new-password\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <FormField\r\n                      control={passwordForm.control}\r\n                      name=\"confirmPassword\"\r\n                      render={({ field }) => (\r\n                        <FormItem>\r\n                          <FormLabel>Confirm New Password</FormLabel>\r\n                          <FormControl>\r\n                            <Input\r\n                              type=\"password\"\r\n                              placeholder=\"Confirm new password\"\r\n                              data-testid=\"input-confirm-password\"\r\n                              {...field}\r\n                            />\r\n                          </FormControl>\r\n                          <FormMessage />\r\n                        </FormItem>\r\n                      )}\r\n                    />\r\n\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={updatePasswordMutation.isPending}\r\n                      data-testid=\"button-change-password\"\r\n                    >\r\n                      <Lock className=\"h-4 w-4 mr-2\" />\r\n                      {updatePasswordMutation.isPending ? \"Updating...\" : \"Change Password\"}\r\n                    </Button>\r\n                  </form>\r\n                </Form>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { MessageCircle, Send } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ninterface ChatMessage {\r\n  id: string;\r\n  message: string;\r\n  senderType: \"user\" | \"admin\";\r\n  isRead: boolean;\r\n  createdAt: string;\r\n}\r\n\r\ninterface SupportChat {\r\n  id: string;\r\n  userId: string;\r\n  status: \"open\" | \"closed\";\r\n  createdAt: string;\r\n}\r\n\r\ninterface ChatDetails {\r\n  chat: SupportChat;\r\n  messages: ChatMessage[];\r\n}\r\n\r\nexport function SupportChat() {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [chatId, setChatId] = useState<string | null>(null);\r\n  const [activeSupport, setActiveSupport] = useState<\"whatsapp\" | \"chat\">(\"chat\");\r\n  const [authError, setAuthError] = useState<string | null>(null);\r\n  const scrollAreaRef = useRef<HTMLDivElement>(null);\r\n  const queryClient = useQueryClient();\r\n  const { toast } = useToast();\r\n  const { isAuthenticated, isLoading: authLoading } = useAuth();\r\n\r\n  // Get or create chat session\r\n  const { data: chats, error: chatsError } = useQuery<SupportChat[]>({\r\n    queryKey: [\"/api/support/chats\"],\r\n    queryFn: async () => {\r\n      return await apiRequest(\"GET\", \"/api/support/chats\");\r\n    },\r\n    enabled: isAuthenticated && !authLoading,\r\n    retry: false,\r\n  });\r\n\r\n  // Create chat (used when starting first message)\r\n  const createChatMutation = useMutation({\r\n    mutationFn: async () => {\r\n      if (!isAuthenticated) {\r\n        throw new Error(\"Please log in to start a support chat.\");\r\n      }\r\n      return await apiRequest(\"POST\", \"/api/support/chat/create\", {});\r\n    },\r\n    onSuccess: (data) => {\r\n      setChatId(data.chatId);\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/support/chats\"] });\r\n    },\r\n    onError: (error) => {\r\n      console.error('Failed to create chat:', error);\r\n      toast({\r\n        title: \"Failed to create chat\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  // Get chat messages\r\n  const { data: chatData, isLoading, error: chatError } = useQuery<ChatDetails>({\r\n    queryKey: [\"/api/support/chat\", chatId],\r\n    queryFn: async () => {\r\n      return await apiRequest(\"GET\", `/api/support/chat/${chatId}`);\r\n    },\r\n    enabled: !!chatId && isAuthenticated && !authLoading,\r\n    refetchInterval: 5000, // Poll every 5 seconds\r\n    retry: false,\r\n  });\r\n\r\n  // Set chatId from existing chats (do not auto-create to avoid empty chats)\r\n  useEffect(() => {\r\n    if (!isAuthenticated || authLoading) {\r\n      return;\r\n    }\r\n\r\n    if (typeof chats === 'undefined') {\r\n      return; // query not ready yet\r\n    }\r\n\r\n    if (!chatId && Array.isArray(chats)) {\r\n      const openChat = chats.find(c => c.status === \"open\");\r\n      if (openChat) {\r\n        setChatId(openChat.id);\r\n      }\r\n    }\r\n  }, [chats, chatId, isAuthenticated, authLoading]);\r\n\r\n  // Surface auth errors clearly so users know to re-login\r\n  useEffect(() => {\r\n    const unauthorized = (err?: unknown) => {\r\n      const msg = err instanceof Error ? err.message : String(err || \"\");\r\n      return msg.toLowerCase().includes(\"unauthorized\") || msg.toLowerCase().includes(\"401\");\r\n    };\r\n\r\n    if (chatsError && unauthorized(chatsError)) {\r\n      setAuthError(\"Your session expired. Please log in again to use support chat.\");\r\n    } else if (chatError && unauthorized(chatError)) {\r\n      setAuthError(\"Your session expired. Please log in again to use support chat.\");\r\n    } else {\r\n      setAuthError(null);\r\n    }\r\n  }, [chatsError, chatError]);\r\n\r\n  const sendMessageMutation = useMutation({\r\n    mutationFn: async (message: string) => {\r\n      if (!isAuthenticated) {\r\n        throw new Error(\"Please log in to send messages.\");\r\n      }\r\n\r\n      let id = chatId;\r\n      if (!id) {\r\n        const created = await apiRequest<{ success: boolean; chatId: string }>(\"POST\", \"/api/support/chat/create\", {});\r\n        id = created.chatId;\r\n        setChatId(id);\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/support/chats\"] });\r\n      }\r\n\r\n      return await apiRequest(\"POST\", `/api/support/chat/${id}/message`, { message });\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/support/chat\", chatId] });\r\n      setMessage(\"\");\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to send message\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleSendMessage = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!message.trim() || !chatId || !isAuthenticated) return;\r\n    sendMessageMutation.mutate(message);\r\n  };\r\n\r\n  const handleWhatsAppSupport = () => {\r\n    setActiveSupport(\"whatsapp\");\r\n    const phoneNumber = \"+233501234567\"; // Replace with actual support number\r\n    const messageText = encodeURIComponent(\"Hi, I need help with my data bundle purchase.\");\r\n    window.open(`https://wa.me/${phoneNumber}?text=${messageText}`, \"_blank\");\r\n  };\r\n\r\n  const handleLiveChatSupport = () => {\r\n    setActiveSupport(\"chat\");\r\n    document.getElementById('chat-section')?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (scrollAreaRef.current) {\r\n      scrollAreaRef.current.scrollTop = scrollAreaRef.current.scrollHeight;\r\n    }\r\n  }, [chatData?.messages]);\r\n\r\n  // Mark admin messages as read when user views them\r\n  useEffect(() => {\r\n    if (chatData?.messages && chatId) {\r\n      const unreadAdminMessages = chatData.messages.filter(\r\n        msg => msg.senderType === 'admin' && !msg.isRead\r\n      );\r\n      \r\n      // Mark each unread admin message as read\r\n      unreadAdminMessages.forEach(async (msg) => {\r\n        try {\r\n          await apiRequest(\"PUT\", `/api/support/message/${msg.id}/read`, {}) as Response;\r\n        } catch (error) {\r\n          console.error('Failed to mark message as read:', error);\r\n        }\r\n      });\r\n      \r\n      // Invalidate unread count query to update badge\r\n      if (unreadAdminMessages.length > 0) {\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/support/unread-count\"] });\r\n      }\r\n    }\r\n  }, [chatData?.messages, chatId, queryClient]);\r\n\r\n  const messages = chatData?.messages || [];\r\n\r\n  if (!isAuthenticated && !authLoading) {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle className=\"text-lg\">Customer Support</CardTitle>\r\n          <CardDescription>You need to log in to start a support chat.</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <Button onClick={() => window.location.href = \"/login\"} className=\"w-full\">Go to Login</Button>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div>\r\n        <h2 className=\"text-2xl font-bold mb-2\">Customer Support</h2>\r\n        <p className=\"text-sm text-muted-foreground mb-4\">\r\n          Choose your preferred support channel\r\n        </p>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n          <Button\r\n            onClick={handleWhatsAppSupport}\r\n            className={`h-auto py-4 text-sm flex-col gap-2 ${\r\n              activeSupport === \"whatsapp\"\r\n                ? \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                : \"bg-green-600 hover:bg-green-700 text-white\"\r\n            }`}\r\n          >\r\n            <MessageCircle className=\"h-6 w-6\" />\r\n            <span>WhatsApp Support</span>\r\n            <span className=\"text-xs opacity-90\">Get instant help via WhatsApp</span>\r\n          </Button>\r\n          <Button\r\n            onClick={handleLiveChatSupport}\r\n            className={`h-auto py-4 text-sm flex-col gap-2 ${\r\n              activeSupport === \"chat\"\r\n                ? \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                : \"border hover:bg-accent\"\r\n            }`}\r\n          >\r\n            <MessageCircle className=\"h-6 w-6\" />\r\n            <span>Live Chat</span>\r\n            <span className=\"text-xs text-muted-foreground\">Chat with our support team</span>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <Card id=\"chat-section\">\r\n        <CardHeader>\r\n          <CardTitle className=\"flex items-center gap-2 text-base md:text-lg\">\r\n            <MessageCircle className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n            Live Chat\r\n            {chatId ? (\r\n              <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full\">\r\n                Connected\r\n              </span>\r\n            ) : (\r\n              <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full\">\r\n                {createChatMutation.isPending ? \"Connecting...\" : \"Initializing...\"}\r\n              </span>\r\n            )}\r\n          </CardTitle>\r\n          <CardDescription className=\"text-xs md:text-sm\">\r\n            Send us a message and we'll respond as soon as possible\r\n          </CardDescription>\r\n        </CardHeader>\r\n        <CardContent className=\"space-y-4\">\r\n\r\n        {authError && (\r\n          <div className=\"rounded-md border border-amber-300 bg-amber-50 px-3 py-2 text-sm text-amber-800\">\r\n            {authError}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"border rounded-lg h-[600px] flex flex-col\">\r\n          <ScrollArea className=\"flex-1 p-4\" ref={scrollAreaRef}>\r\n            {isLoading ? (\r\n              <div className=\"text-center text-muted-foreground\">Loading messages...</div>\r\n            ) : messages.length === 0 ? (\r\n              <div className=\"text-center text-muted-foreground\">\r\n                No messages yet. Start a conversation!\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {messages.map((msg: ChatMessage) => (\r\n                  <div\r\n                    key={msg.id}\r\n                    className={`flex gap-3 ${\r\n                      msg.senderType === \"user\" ? \"justify-end\" : \"justify-start\"\r\n                    }`}\r\n                  >\r\n                    {msg.senderType === \"admin\" && (\r\n                      <Avatar className=\"h-8 w-8\">\r\n                        <AvatarFallback className=\"text-xs\">ST</AvatarFallback>\r\n                      </Avatar>\r\n                    )}\r\n                    <div\r\n                      className={`max-w-[70%] rounded-lg px-3 py-2 ${\r\n                        msg.senderType === \"user\"\r\n                          ? \"bg-primary text-primary-foreground\"\r\n                          : \"bg-muted\"\r\n                      }`}\r\n                    >\r\n                      <p className=\"text-sm\">{msg.message}</p>\r\n                      <p className=\"text-xs opacity-70 mt-1\">\r\n                        {new Date(msg.createdAt).toLocaleTimeString()}\r\n                      </p>\r\n                    </div>\r\n                    {msg.senderType === \"user\" && (\r\n                      <Avatar className=\"h-8 w-8\">\r\n                        <AvatarFallback>ME</AvatarFallback>\r\n                      </Avatar>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </ScrollArea>\r\n\r\n          <form onSubmit={handleSendMessage} className=\"p-4 border-t\">\r\n            <div className=\"flex gap-2\">\r\n              <Input\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                placeholder=\"Type your message...\"\r\n                disabled={sendMessageMutation.isPending}\r\n              />\r\n              <Button\r\n                type=\"submit\"\r\n                size=\"sm\"\r\n                disabled={sendMessageMutation.isPending || !message.trim()}\r\n                title={\r\n                  !message.trim() ? \"Message cannot be empty\" :\r\n                  sendMessageMutation.isPending ? \"Sending message...\" :\r\n                  \"Send message\"\r\n                }\r\n              >\r\n                <Send className=\"h-4 w-4\" />\r\n                {sendMessageMutation.isPending && \"Sending...\"}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { SupportChat } from \"@/components/user/support-chat\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Menu } from \"lucide-react\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n\r\nexport default function AgentSupportPage() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for support</SheetDescription>\r\n          </VisuallyHidden>\r\n          <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for support</SheetDescription>\r\n                </VisuallyHidden>\r\n                <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Support Chat</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Get help from our support team</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            <SupportChat />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo } from \"react\";\r\nimport { useParams } from \"wouter\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Smartphone, Upload, Menu, Package, AlertCircle, Wallet, CreditCard, CheckCircle } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\n\r\ntype BundleWithPrice = DataBundle & {\r\n  effective_price: string;\r\n  description?: string;\r\n};\r\n\r\n// Helper function to extract numeric value from bundle name\r\nconst extractDataAmount = (bundleName: string): number => {\r\n  const match = bundleName.match(/(\\d+(?:\\.\\d+)?)\\s*(GB|MB)/);\r\n  if (!match) return 0;\r\n  const value = parseFloat(match[1]);\r\n  const unit = match[2].toUpperCase();\r\n  // Convert to GB for consistent sorting\r\n  return unit === 'MB' ? value / 1024 : value;\r\n};\r\n\r\n// Helper function to sort bundles by data amount\r\nconst sortBundlesByDataAmount = (bundles: BundleWithPrice[] | undefined): BundleWithPrice[] => {\r\n  if (!bundles) return [];\r\n  return [...bundles].sort((a, b) => extractDataAmount(a.name) - extractDataAmount(b.name));\r\n};\r\n\r\ninterface AgentProfile {\r\n  markupPercentage: number;\r\n}\r\n\r\ninterface AgentData {\r\n  profile: AgentProfile;\r\n}\r\n\r\ninterface MutationResponse {\r\n  newBalance: string;\r\n  paymentUrl: string;\r\n}\r\n\r\nconst NetworkInfo = {\r\n  mtn: {\r\n    name: \"MTN\",\r\n    color: \"bg-yellow-400\",\r\n    logo: mtnLogo,\r\n  },\r\n  \"at_ishare\": {\r\n    name: \"AirtelTigo iShare\",\r\n    color: \"bg-red-500\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  \"at_bigtime\": {\r\n    name: \"AirtelTigo BIG TIME\",\r\n    color: \"bg-red-600\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  telecel: {\r\n    name: \"Telecel\",\r\n    color: \"bg-green-500\",\r\n    logo: telecelLogo,\r\n  },\r\n};\r\n\r\nexport default function AgentBundlesPage() {\r\n  const { network } = useParams<{ network: string }>();\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  \r\n  // Single purchase state\r\n  const [selectedBundle, setSelectedBundle] = useState<BundleWithPrice | null>(null);\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [paymentMethod, setPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>('paystack');\r\n  \r\n  // Bulk purchase state\r\n  const [bulkPhoneNumbers, setBulkPhoneNumbers] = useState(\"\");\r\n  const [bulkPaymentMethod, setBulkPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>('paystack');\r\n\r\n  // Fetch bundles for the selected network\r\n  const { data: bundles, isLoading: bundlesLoading } = useQuery({\r\n    queryKey: [\"/api/products/data-bundles\", network],\r\n    queryFn: async () => {\r\n      // Convert hyphens to underscores for API call\r\n      const apiNetwork = network?.replace(/-/g, '_');\r\n      const response = await apiRequest<BundleWithPrice[]>(\"GET\", `/api/products/data-bundles?network=${apiNetwork}`);\r\n      return response;\r\n    },\r\n    enabled: !!network,\r\n  });\r\n\r\n  // Fetch agent data for pricing\r\n  const { data: agentData } = useQuery<AgentData>({\r\n    queryKey: [\"/api/profile\"],\r\n    queryFn: async () => apiRequest(\"GET\", \"/api/profile\") as Promise<AgentData>,\r\n  });\r\n\r\n  // Fetch wallet balance\r\n  const { data: walletData } = useQuery<{ user: { walletBalance: string } }>({\r\n    queryKey: [\"/api/auth/me\"],\r\n    enabled: true,\r\n  });\r\n\r\n  const walletBalance = walletData?.user?.walletBalance ? parseFloat(walletData.user.walletBalance) : 0;\r\n\r\n  // Calculate bulk purchase total\r\n  const bulkTotal = useMemo(() => {\r\n    if (!bulkPhoneNumbers.trim() || !bundles) return null;\r\n    \r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    let total = 0;\r\n    let count = 0;\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gbAmount = parseFloat(parts[1]);\r\n        if (!isNaN(gbAmount) && gbAmount > 0) {\r\n          const matchingBundle = bundles.find(b => {\r\n            const dataAmount = b.dataAmount.toLowerCase();\r\n            const gbMatch = dataAmount.match(/(\\d+(?:\\.\\d+)?)/);\r\n            if (gbMatch) {\r\n              const bundleGB = parseFloat(gbMatch[1]);\r\n              return bundleGB === gbAmount;\r\n            }\r\n            return false;\r\n          });\r\n          \r\n          if (matchingBundle) {\r\n            const agentPrice = parseFloat(matchingBundle.effective_price);\r\n            total += agentPrice;\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return count > 0 ? { total, count } : null;\r\n  }, [bulkPhoneNumbers, bundles]);\r\n\r\n  // Single purchase mutation\r\n  const purchaseMutation = useMutation({\r\n    mutationFn: async (data: { bundleId: string; phoneNumber: string; paymentMethod: \"wallet\" | \"paystack\" }) => {\r\n      const bundle = bundles?.find(b => b.id === data.bundleId);\r\n      if (!bundle) throw new Error(\"Bundle not found\");\r\n      \r\n      const phoneNumbers = [data.phoneNumber];\r\n      const agentPrice = parseFloat(bundle.effective_price);\r\n      const isBulk = false;\r\n\r\n      if (data.paymentMethod === \"wallet\") {\r\n        const payload = {\r\n          productType: \"data_bundle\",\r\n          productId: bundle.id,\r\n          productName: bundle.name,\r\n          network: bundle.network,\r\n          amount: agentPrice.toFixed(2),\r\n          customerPhone: phoneNumbers[0],\r\n          phoneNumbers: undefined,\r\n          isBulkOrder: isBulk,\r\n        };\r\n        \r\n        const response = await apiRequest(\"POST\", \"/api/wallet/pay\", payload);\r\n        return response as MutationResponse;\r\n      } else {\r\n        const payload = {\r\n          productType: \"data_bundle\",\r\n          productId: bundle.id,\r\n          customerPhone: phoneNumbers[0],\r\n          phoneNumbers: undefined,\r\n          isBulkOrder: isBulk,\r\n          customerEmail: user?.email || undefined,\r\n        };\r\n        \r\n        const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n        return response as MutationResponse;\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setSelectedBundle(null);\r\n        setPhoneNumber(\"\");\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      const isCooldown = errorMessage.includes(\"wait\") && errorMessage.includes(\"minute\");\r\n      \r\n      toast({\r\n        title: isCooldown ? \"⏳ Purchase Limit\" : isInsufficientBalance ? \"⚠️ Insufficient Wallet Balance\" : \"❌ Payment Failed\",\r\n        description: isCooldown\r\n          ? errorMessage\r\n          : isInsufficientBalance \r\n            ? \"Your wallet balance is too low for this purchase. Please top up your wallet or use Paystack.\"\r\n            : `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: isCooldown ? 8000 : 6000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Bulk purchase mutation\r\n  const bulkPurchaseMutation = useMutation({\r\n    mutationFn: async (data: {\r\n      bundleId: string;\r\n      phoneNumbers: string[];\r\n      paymentMethod: \"wallet\" | \"paystack\";\r\n      orderItems?: Array<{ phone: string; bundleId: string; bundleName: string; price: number }>;\r\n      totalAmount?: number;\r\n    }) => {\r\n      const isBulk = true;\r\n\r\n      // Use new orderItems format if available\r\n      if (data.orderItems && data.totalAmount !== undefined) {\r\n        const phoneNumbers = data.orderItems.map(item => item.phone);\r\n        const totalAmount = data.totalAmount;\r\n\r\n        if (data.paymentMethod === \"wallet\") {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            productName: `Bulk Order - ${data.orderItems.length} items`,\r\n            network: network,\r\n            amount: totalAmount.toFixed(2),\r\n            customerPhone: phoneNumbers[0],\r\n            isBulkOrder: isBulk,\r\n            orderItems: data.orderItems,\r\n          };\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/wallet/pay\", payload);\r\n          return response as MutationResponse;\r\n        } else {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            network: network,\r\n            customerPhone: phoneNumbers[0],\r\n            isBulkOrder: isBulk,\r\n            orderItems: data.orderItems,\r\n            totalAmount: totalAmount,\r\n            customerEmail: user?.email || undefined,\r\n          };\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n\r\n          return response as MutationResponse;\r\n        }\r\n      } else {\r\n        // Fallback to old format for backward compatibility\r\n        const bundle = bundles?.find(b => b.id === data.bundleId);\r\n        if (!bundle) throw new Error(\"Bundle not found\");\r\n\r\n        const phoneNumbers = data.phoneNumbers;\r\n        const basePrice = parseFloat(bundle.basePrice);\r\n        const markup = agentData?.profile?.markupPercentage || 0;\r\n        const agentPrice = basePrice + (basePrice * markup / 100);\r\n        const totalAmount = agentPrice * phoneNumbers.length;\r\n\r\n        if (data.paymentMethod === \"wallet\") {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            productId: bundle.id,\r\n            productName: bundle.name,\r\n            network: bundle.network,\r\n            amount: totalAmount.toFixed(2),\r\n            customerPhone: phoneNumbers[0],\r\n            phoneNumbers: phoneNumbers,\r\n            isBulkOrder: isBulk,\r\n          };\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/wallet/pay\", payload);\r\n          return response as MutationResponse;\r\n        } else {\r\n          const payload = {\r\n            productType: \"data_bundle\",\r\n            productId: bundle.id,\r\n            customerPhone: phoneNumbers[0],\r\n            phoneNumbers: phoneNumbers,\r\n            isBulkOrder: isBulk,\r\n            customerEmail: user?.email || undefined,\r\n          };\r\n\r\n          const response = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n          return response as MutationResponse;\r\n        }\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your bulk purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setBulkPhoneNumbers(\"\");\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isCooldown = errorMessage.includes(\"wait\") && errorMessage.includes(\"minute\");\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      \r\n      toast({\r\n        title: isCooldown ? \"⏳ Purchase Limit\" : isInsufficientBalance ? \"⚠️ Insufficient Balance\" : \"❌ Payment Error\",\r\n        description: errorMessage,\r\n        variant: \"destructive\",\r\n        duration: isCooldown ? 8000 : 6000,\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleSinglePurchase = () => {\r\n    if (!selectedBundle || !phoneNumber) return;\r\n    \r\n    const agentPrice = parseFloat(selectedBundle.effective_price);\r\n    \r\n    if (paymentMethod === \"wallet\" && agentPrice > walletBalance) {\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${(agentPrice - walletBalance).toFixed(2)} more. Please top up your wallet or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!paymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    purchaseMutation.mutate({\r\n      bundleId: selectedBundle.id,\r\n      phoneNumber,\r\n      paymentMethod,\r\n    });\r\n  };\r\n\r\n  const handleBulkPurchase = () => {\r\n    if (!bulkPhoneNumbers.trim()) {\r\n      toast({\r\n        title: \"❌ Missing Information\",\r\n        description: \"Please enter phone numbers with GB amounts\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Parse and validate bulk input\r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    const parsedData: Array<{ phone: string; gb: number }> = [];\r\n\r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) {\r\n        toast({\r\n          title: \"❌ Invalid Format\",\r\n          description: `Line \"${line}\" must have format: phone_number GB_amount (e.g., \"0241234567 2\")`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      let phoneStr = parts[0];\r\n      const gbAmount = parseFloat(parts[1]);\r\n\r\n      if (isNaN(gbAmount) || gbAmount <= 0) {\r\n        toast({\r\n          title: \"❌ Invalid GB Amount\",\r\n          description: `GB amount \"${parts[1]}\" must be a positive number`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      // Normalize the phone number\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n\r\n      // Validate phone number for the selected network\r\n      const validation = validatePhoneNetwork(normalizedPhone, network);\r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: `${phoneStr}: ${validation.error || `Must be for ${networkInfo?.name} network. Valid prefixes: ${prefixes.join(\", \")}`}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      parsedData.push({ phone: normalizedPhone, gb: gbAmount });\r\n    }\r\n\r\n    if (parsedData.length === 0) {\r\n      toast({\r\n        title: \"No Data\",\r\n        description: \"Please enter at least one phone number with GB amount\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Find matching bundles for each GB amount from our bundles list\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let totalAmount = 0;\r\n\r\n    for (const item of parsedData) {\r\n      // Find a bundle that matches the GB amount (looking for bundles with the GB in the dataAmount)\r\n      const matchingBundle = bundles?.find(b => {\r\n        const dataAmount = b.dataAmount;\r\n        // Try to extract GB from dataAmount (e.g., \"5GB\" -> 5)\r\n        const gbMatch = dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n        if (gbMatch) {\r\n          const bundleGB = parseFloat(gbMatch[1]);\r\n          return bundleGB === item.gb;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (!matchingBundle) {\r\n        toast({\r\n          title: \"❌ Bundle Not Found\",\r\n          description: `No ${item.gb}GB bundle available for ${networkInfo?.name}. Please check available bundles.`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Validate phone network but don't deny - just alert\r\n      const validation = validatePhoneNetwork(item.phone, network);\r\n      if (!validation.isValid) {\r\n        toast({\r\n          title: \"⚠️ Network Mismatch\",\r\n          description: `${item.phone}: ${validation.error}. Purchase will proceed but may fail if network doesn't match.`,\r\n          variant: \"default\",\r\n          duration: 6000,\r\n        });\r\n      }\r\n\r\n      const agentPrice = matchingBundle.agentPrice ? parseFloat(matchingBundle.agentPrice) : \r\n        parseFloat(matchingBundle.basePrice) + (parseFloat(matchingBundle.basePrice) * (agentData?.profile?.markupPercentage || 0) / 100);\r\n\r\n      orderItems.push({\r\n        phone: item.phone,\r\n        bundleId: matchingBundle.id,\r\n        bundleName: matchingBundle.name,\r\n        price: agentPrice,\r\n      });\r\n\r\n      totalAmount += agentPrice;\r\n    }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    if (bulkPaymentMethod === \"wallet\" && walletBalance < totalAmount) {\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${(totalAmount - walletBalance).toFixed(2)} more. Please top up your wallet or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!bulkPaymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    bulkPurchaseMutation.mutate({\r\n      bundleId: \"\", // Not used in new format\r\n      phoneNumbers: [], // Not used in new format\r\n      paymentMethod: bulkPaymentMethod,\r\n      orderItems,\r\n      totalAmount,\r\n    });\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const networkInfo = NetworkInfo[(network?.replace(/-/g, '_')) as keyof typeof NetworkInfo];\r\n\r\n  if (!networkInfo) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold mb-4\">Network Not Found</h1>\r\n          <p className=\"text-muted-foreground\">The requested network is not available.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block flex-shrink-0\">\r\n        <AgentSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n          </VisuallyHidden>\r\n          <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 flex-shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div className=\"flex items-center gap-3\">\r\n              <img\r\n                src={networkInfo.logo}\r\n                alt={networkInfo.name}\r\n                className=\"h-8 w-8 rounded\"\r\n              />\r\n              <div>\r\n                <h1 className=\"text-xl font-bold\">{networkInfo.name} Bundles</h1>\r\n                <p className=\"text-sm text-muted-foreground\">Purchase data bundles for your customers</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto space-y-6\">\r\n            {/* Network Header */}\r\n            <Card>\r\n              <CardContent className=\"pt-6\">\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className={`w-4 h-4 rounded-full ${networkInfo.color}`} />\r\n                  <div>\r\n                    <h2 className=\"text-lg font-semibold\">{networkInfo.name} Data Bundles</h2>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      Purchase data bundles for your customers with your markup pricing\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Warning Message */}\r\n            <div className=\"text-sm text-orange-600 flex items-start gap-2\">\r\n              <span className=\"text-lg\">⚠️</span>\r\n              <span>Please double-check your beneficiary number before completing purchase</span>\r\n            </div>\r\n\r\n            <Tabs defaultValue=\"single\" className=\"w-full\">\r\n              <TabsList className=\"grid w-full grid-cols-2\">\r\n                <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                  <Smartphone className=\"h-4 w-4 mr-2\" />\r\n                  Single Purchase\r\n                </TabsTrigger>\r\n                {network !== \"at_ishare\" && (\r\n                  <TabsTrigger value=\"bulk\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                    <Package className=\"h-4 w-4 mr-2\" />\r\n                    Bulk Purchase\r\n                  </TabsTrigger>\r\n                )}\r\n              </TabsList>\r\n\r\n              {/* Single Purchase Tab */}\r\n              <TabsContent value=\"single\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Purchase Data Bundle</CardTitle>\r\n                    <CardDescription>Select a bundle and enter recipient details</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Bundle Dropdown */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label>Select Bundle</Label>\r\n                      {bundlesLoading ? (\r\n                        <div className=\"flex justify-center py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </div>\r\n                      ) : (\r\n                        <Select\r\n                          value={selectedBundle?.id || \"\"}\r\n                          onValueChange={(value) => {\r\n                            const bundle = bundles?.find(b => b.id === value);\r\n                            setSelectedBundle(bundle || null);\r\n                          }}\r\n                        >\r\n                          <SelectTrigger>\r\n                            <SelectValue placeholder=\"Choose a data bundle\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {bundles && bundles.length > 0 ? (\r\n                              sortBundlesByDataAmount(bundles).map((bundle) => {\r\n                                const effectivePrice = parseFloat(bundle.effective_price);\r\n                                return (\r\n                                  <SelectItem key={bundle.id} value={bundle.id}>\r\n                                    {bundle.name} - {bundle.validity} - GH₵{effectivePrice.toFixed(2)}\r\n                                  </SelectItem>\r\n                                );\r\n                              })\r\n                            ) : (\r\n                              <SelectItem value=\"no-bundles\" disabled>\r\n                                No bundles available\r\n                              </SelectItem>\r\n                            )}\r\n                          </SelectContent>\r\n                        </Select>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Selected Bundle Display */}\r\n                    {selectedBundle && (\r\n                      <div className=\"p-2 bg-yellow-500 text-white rounded-lg border border-yellow-600\">\r\n                        <p className=\"text-sm text-white\">Selected Bundle</p>\r\n                        <p className=\"font-medium text-lg text-white\">{selectedBundle.name}</p>\r\n                        <p className=\"text-sm text-white\">{selectedBundle.validity}</p>\r\n                        {selectedBundle.description && (\r\n                          <p className=\"text-xs text-white mt-1\">{selectedBundle.description}</p>\r\n                        )}\r\n                        <div className=\"flex items-center gap-2 mt-2\">\r\n                          <span className=\"text-2xl font-bold text-white\">\r\n                            GH₵{parseFloat(selectedBundle.effective_price).toFixed(2)}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"phone\">Beneficiary Number</Label>\r\n                      <Input\r\n                        id=\"phone\"\r\n                        placeholder=\"0241234567\"\r\n                        value={phoneNumber}\r\n                        onChange={(e) => setPhoneNumber(e.target.value)}\r\n                      />\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        For <strong>{networkInfo?.name}</strong> network only. \r\n                        Valid prefixes: <strong>{selectedBundle ? getNetworkPrefixes(selectedBundle.network).join(\", \") : \"\"}</strong>\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label>Payment Method</Label>\r\n                      <RadioGroup \r\n                        value={paymentMethod || \"\"} \r\n                        onValueChange={(value: \"wallet\" | \"paystack\") => setPaymentMethod(value)}\r\n                        className=\"grid gap-3\"\r\n                      >\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <RadioGroupItem\r\n                            value=\"wallet\"\r\n                            id=\"wallet-single\"\r\n                            disabled={selectedBundle ? parseFloat(selectedBundle.effective_price) > walletBalance : false}\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"wallet-single\"\r\n                            className={`flex items-center justify-between rounded-lg border-2 border-muted bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all ${\r\n                              selectedBundle ? parseFloat(selectedBundle.effective_price) > walletBalance : false\r\n                                ? \"opacity-50 cursor-not-allowed\"\r\n                                : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Wallet Balance</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Available: GH₵{walletBalance.toFixed(2)}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                          {selectedBundle ? parseFloat(selectedBundle.effective_price) > walletBalance : false && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <RadioGroupItem\r\n                            value=\"paystack\"\r\n                            id=\"paystack-single\"\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"paystack-single\"\r\n                            className=\"flex items-center justify-between rounded-lg border-2 border-muted bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all\"\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Pay with MoMo</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                        </div>\r\n                      </RadioGroup>\r\n                    </div>\r\n\r\n                    {selectedBundle && paymentMethod === \"wallet\" && parseFloat(selectedBundle.effective_price) > walletBalance && (\r\n                      <Alert variant=\"default\" className=\"border-destructive bg-white text-destructive\">\r\n                        <AlertCircle className=\"h-4 w-4\" />\r\n                        <AlertDescription className=\"text-sm\">\r\n                          <strong>Insufficient Balance:</strong> You need GH₵{(parseFloat(selectedBundle.effective_price) - walletBalance).toFixed(2)} more.\r\n                          <a href=\"/agent/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                        </AlertDescription>\r\n                      </Alert>\r\n                    )}\r\n\r\n                    <Button\r\n                      className=\"w-full\"\r\n                      size=\"lg\"\r\n                      onClick={handleSinglePurchase}\r\n                      disabled={!selectedBundle || !phoneNumber || !paymentMethod || purchaseMutation.isPending || (paymentMethod === \"wallet\" && selectedBundle && parseFloat(selectedBundle.effective_price) > walletBalance)}\r\n                    >\r\n                      {purchaseMutation.isPending ? (\r\n                        <>\r\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                          Processing...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Smartphone className=\"mr-2 h-4 w-4\" />\r\n                          Purchase Bundle\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              {/* Bulk Purchase Tab */}\r\n              {network !== \"at_ishare\" && (\r\n                <TabsContent value=\"bulk\" className=\"space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                      <CardTitle>Bulk Purchase</CardTitle>\r\n                      <CardDescription>Enter phone numbers with GB amounts for {networkInfo?.name}</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <Label htmlFor=\"bulk-phones\">Beneficiary Numbers and GB Amounts</Label>\r\n                          {bulkPhoneNumbers.trim() && (\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              {bulkPhoneNumbers.split('\\n').filter(line => line.trim()).length} entries\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        <Textarea\r\n                          id=\"bulk-phones\"\r\n                          placeholder=\"0546591622 1&#10;0247064874 3&#10;0245696072 2&#10;233547897522 10&#10;...add as many as you need (no limit)\"\r\n                          rows={20}\r\n                          value={bulkPhoneNumbers}\r\n                          onChange={(e) => setBulkPhoneNumbers(e.target.value)}\r\n                          className=\"font-mono text-sm\"\r\n                        />\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          Enter one number per line with GB amount (e.g., \"0241234567 2\" for 2GB). \r\n                          Supports formats: 0241234567 or 233241234567 (no + sign). \r\n                          <strong className=\"text-green-600\">✓ No limit - add 100+ numbers!</strong>\r\n                          <br />\r\n                          All numbers must be for <strong>{networkInfo?.name}</strong> network.\r\n                          Valid prefixes: <strong>{network ? getNetworkPrefixes(network).join(\", \") : \"\"}</strong>\r\n                        </p>\r\n                      </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label>Payment Method</Label>\r\n                      <RadioGroup \r\n                        value={bulkPaymentMethod || \"\"} \r\n                        onValueChange={(value: \"wallet\" | \"paystack\") => setBulkPaymentMethod(value)}\r\n                        className=\"grid gap-3\"\r\n                      >\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <RadioGroupItem\r\n                            value=\"wallet\"\r\n                            id=\"wallet-bulk\"\r\n                            disabled={bulkTotal ? walletBalance < bulkTotal.total : false}\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"wallet-bulk\"\r\n                            className={`flex items-center justify-between rounded-lg border-2 border-muted !bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all ${\r\n                              bulkTotal ? walletBalance < bulkTotal.total : false ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Wallet Balance</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Available: GH₵{walletBalance.toFixed(2)}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                          {bulkTotal ? walletBalance < bulkTotal.total : false && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <RadioGroupItem\r\n                            value=\"paystack\"\r\n                            id=\"paystack-bulk\"\r\n                            className=\"peer sr-only\"\r\n                          />\r\n                          <Label\r\n                            htmlFor=\"paystack-bulk\"\r\n                            className=\"flex items-center justify-between rounded-lg border-2 border-muted bg-white p-4 hover:border-green-500 hover:shadow-md peer-checked:border-green-500 peer-checked:bg-green-50 peer-checked:shadow-md cursor-pointer transition-all\"\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                              <div>\r\n                                <div className=\"font-medium text-green-700\">Pay with MoMo</div>\r\n                                <div className=\"text-sm text-green-600\">\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                            )}\r\n                          </Label>\r\n                        </div>\r\n                      </RadioGroup>\r\n                    </div>\r\n\r\n                    {/* Insufficient Balance Alert for Bulk */}\r\n                    {bulkTotal && bulkPaymentMethod === \"wallet\" && walletBalance < bulkTotal.total && (\r\n                      <Alert variant=\"default\" className=\"border-destructive bg-white text-destructive\">\r\n                        <AlertCircle className=\"h-4 w-4\" />\r\n                        <AlertDescription className=\"text-sm\">\r\n                          <strong>Insufficient Balance:</strong> You need GH₵{(bulkTotal.total - walletBalance).toFixed(2)} more.\r\n                          <a href=\"/agent/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                        </AlertDescription>\r\n                      </Alert>\r\n                    )}\r\n\r\n                      <Button\r\n                        className=\"w-full\"\r\n                        size=\"lg\"\r\n                        onClick={handleBulkPurchase}\r\n                        disabled={\r\n                          !bulkPhoneNumbers.trim() ||\r\n                          !bulkPaymentMethod ||\r\n                          bulkPurchaseMutation.isPending ||\r\n                          (bulkPaymentMethod === \"wallet\" && bulkTotal !== null && walletBalance < bulkTotal.total)\r\n                        }\r\n                      >\r\n                        {bulkPurchaseMutation.isPending ? (\r\n                          <>\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Upload className=\"mr-2 h-4 w-4\" />\r\n                            {bulkTotal\r\n                              ? `Purchase for GH₵${bulkTotal.total.toFixed(2)} (${bulkTotal.count} items)`\r\n                              : \"Purchase Data Bundles\"\r\n                            }\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    </CardContent>\r\n                  </Card>\r\n              </TabsContent>\r\n              )}\r\n            </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage } from \"@/components/ui/form\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Wallet, Plus, Loader2, CreditCard, CheckCircle } from \"lucide-react\";\r\n\r\nconst topupSchema = z.object({\r\n  amount: z.string().refine((val) => {\r\n    const num = parseFloat(val);\r\n    return !isNaN(num) && num >= 1;\r\n  }, \"Minimum top-up amount is GHS 1\"),\r\n  paymentMethod: z.enum([\"paystack\"], {\r\n    required_error: \"Please select a payment method\",\r\n  }),\r\n});\r\n\r\ntype TopupFormData = z.infer<typeof topupSchema>;\r\n\r\nexport function WalletTopup() {\r\n  const [open, setOpen] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const { toast } = useToast();\r\n\r\n  const form = useForm<TopupFormData>({\r\n    resolver: zodResolver(topupSchema),\r\n    defaultValues: {\r\n      amount: \"\",\r\n      paymentMethod: \"paystack\",\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      form.reset({\r\n        amount: \"\",\r\n        paymentMethod: \"paystack\",\r\n      });\r\n    }\r\n  }, [open, form]);\r\n\r\n  const topupMutation = useMutation({\r\n    mutationFn: async (data: TopupFormData) => {\r\n      return await apiRequest(\"/api/wallet/topup/initialize\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ amount: data.amount, paymentMethod: data.paymentMethod }),\r\n      });\r\n    },\r\n    onSuccess: (data: any) => {\r\n      // Redirect to Paystack payment page\r\n      if (data.authorizationUrl) {\r\n        window.location.href = data.authorizationUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to initialize payment\";\r\n      toast({\r\n        title: \"❌ Wallet Top-up Failed\",\r\n        description: `${errorMessage}. Please check your connection and try again. If the issue persists, contact support.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: TopupFormData) => {\r\n    setIsProcessing(true);\r\n    topupMutation.mutate(data);\r\n  };\r\n\r\n  const quickAmounts = [10, 20, 50, 100, 200, 500];\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button variant=\"default\" size=\"sm\">\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          Top Up Wallet\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-md bg-white text-black\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Wallet className=\"w-5 h-5\" />\r\n            Top Up Wallet\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            Add money to your wallet to make instant purchases\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"amount\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Amount (GHS)</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Enter amount\"\r\n                      step=\"0.01\"\r\n                      min=\"1\"\r\n                      {...field}\r\n                      disabled={isProcessing}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {/* Payment Method */}\r\n            <FormField\r\n              control={form.control}\r\n              name=\"paymentMethod\"\r\n              render={({ field }) => (\r\n                <FormItem className=\"space-y-3\">\r\n                  <FormLabelWithoutFor className=\"text-green-700\">Payment Method</FormLabelWithoutFor>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"grid gap-3\"\r\n                    >\r\n                      <div className=\"flex items-center space-x-3 p-4 rounded-lg border-2 border-black !bg-white hover:border-green-500 hover:shadow-md cursor-pointer transition-all\">\r\n                        <RadioGroupItem value=\"paystack\" id=\"paystack\" />\r\n                        <div className=\"flex items-center justify-between flex-1\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                            <div>\r\n                              <div className=\"font-medium text-green-700\">Pay with MoMo</div>\r\n                              <div className=\"text-sm text-green-600\">\r\n                                Secure payment via Paystack\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          {field.value === \"paystack\" && (\r\n                            <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <div>\r\n              <p className=\"text-sm text-muted-foreground mb-2\">Quick amounts:</p>\r\n              <div className=\"grid grid-cols-3 gap-2\">\r\n                {quickAmounts.map((amount) => (\r\n                  <Button\r\n                    key={amount}\r\n                    type=\"button\"\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => form.setValue(\"amount\", amount.toString())}\r\n                    disabled={isProcessing}\r\n                  >\r\n                    GHS {amount}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"w-full\"\r\n              disabled={isProcessing}\r\n            >\r\n              {isProcessing ? (\r\n                <>\r\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                  Processing...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <CreditCard className=\"w-4 h-4 mr-2\" />\r\n                  Continue to Payment\r\n                </>\r\n              )}\r\n            </Button>\r\n          </form>\r\n        </Form>\r\n\r\n        <div className=\"text-xs text-muted-foreground space-y-1 mt-4\">\r\n          <p>• Secure payment via Paystack</p>\r\n          <p>• Funds reflect instantly after payment</p>\r\n          <p>• Use wallet for faster checkout</p>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Wallet, TrendingUp, Clock, CheckCircle, XCircle, ArrowDownRight, CreditCard, Menu } from \"lucide-react\";\r\nimport { Link } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { WalletTopup } from \"@/components/user/wallet-topup\";\r\n\r\ninterface Transaction {\r\n  id: string;\r\n  reference: string;\r\n  type: string;\r\n  productName: string;\r\n  amount: string;\r\n  status: string;\r\n  paymentMethod: string;\r\n  createdAt: string;\r\n  completedAt: string | null;\r\n}\r\n\r\ninterface WalletStats {\r\n  balance: string;\r\n  totalTopups: number;\r\n  totalTopupAmount: string;\r\n  totalSpent: string;\r\n  lastTopupDate: string | null;\r\n  lastTopupAmount: string | null;\r\n}\r\n\r\nconst getStatusConfig = (status: string) => {\r\n  switch (status.toLowerCase()) {\r\n    case 'completed':\r\n    case 'delivered':\r\n      return {\r\n        variant: 'default' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-green-500',\r\n        label: status === 'completed' ? 'Completed' : 'Delivered'\r\n      };\r\n    case 'confirmed':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-500',\r\n        label: 'Confirmed'\r\n      };\r\n    case 'pending':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-amber-500',\r\n        label: 'Pending'\r\n      };\r\n    case 'failed':\r\n      return {\r\n        variant: 'destructive' as const,\r\n        icon: XCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-red-500',\r\n        label: 'Failed'\r\n      };\r\n    default:\r\n      return {\r\n        variant: 'outline' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-gray-500',\r\n        label: status\r\n      };\r\n  }\r\n};\r\n\r\nexport default function AgentWalletPage() {\r\n  const { user } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Fetch wallet stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery<WalletStats>({\r\n    queryKey: [\"/api/agent/wallet\"],\r\n    queryFn: () => apiRequest(\"/api/agent/wallet\", { disableAutoLogout: true }),\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 10)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/agent/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/agent/transactions\", { disableAutoLogout: true }),\r\n    refetchInterval: 30000,\r\n    select: (data) => data.slice(0, 10), // Only show 10 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n          </VisuallyHidden>\r\n          <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-base sm:text-lg font-bold\">Agent Wallet</h1>\r\n              <p className=\"text-xs text-muted-foreground\">Manage your wallet balance and transactions</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <Card className=\"bg-blue-500 border-blue-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">User Wallet Balance</CardTitle>\r\n                  <Wallet className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-lg font-bold text-white\">\r\n                    GH₵{user?.walletBalance || '0.00'}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Available for purchases</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card className=\"bg-green-500 border-green-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">Agent Profit Balance</CardTitle>\r\n                  <TrendingUp className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-lg font-bold text-white\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.balance || '0.00'}`\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Withdrawable earnings</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card className=\"bg-purple-500 border-purple-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">Total Top-ups</CardTitle>\r\n                  <CreditCard className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-lg font-bold text-white\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      stats?.totalTopups || 0\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Wallet top-up transactions</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card className=\"bg-red-500 border-red-600\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium text-white\">Total Spent</CardTitle>\r\n                  <ArrowDownRight className=\"h-4 w-4 text-white/80\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-lg font-bold text-white\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.totalSpent || '0.00'}`\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-white/70 mt-2\">Total amount spent</p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Top-up Section */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Top Up User Wallet</CardTitle>\r\n                <CardDescription>Add funds to your user wallet to purchase data bundles and make instant payments</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <WalletTopup />\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Recent Transactions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle>Recent Transactions</CardTitle>\r\n                    <CardDescription>Your latest wallet transactions</CardDescription>\r\n                  </div>\r\n                  <Link href=\"/agent/transactions\">\r\n                    <Button variant=\"outline\" size=\"sm\">\r\n                      View All\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                  </div>\r\n                ) : transactions && transactions.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Order ID</TableHead>\r\n                        <TableHead>Type</TableHead>\r\n                        <TableHead>Product</TableHead>\r\n                        <TableHead>Amount</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Date</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {transactions.map((transaction) => {\r\n                        const statusConfig = getStatusConfig(transaction.status);\r\n                        const StatusIcon = statusConfig.icon;\r\n\r\n                        return (\r\n                          <TableRow key={transaction.id}>\r\n                            <TableCell className=\"font-mono text-sm\">\r\n                              {transaction.id.slice(0,8)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Badge variant=\"outline\" className=\"capitalize\">\r\n                                {transaction.type.replace('_', ' ')}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"max-w-[200px] truncate\">\r\n                              {transaction.productName}\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium tabular-nums\">\r\n                              GH₵{transaction.amount}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${statusConfig.bgColor}`}>\r\n                                <StatusIcon className={`h-3 w-3 ${statusConfig.color}`} />\r\n                                <span className={statusConfig.color}>{statusConfig.label}</span>\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-muted-foreground text-sm\">\r\n                              {new Date(transaction.createdAt).toLocaleString()}\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        );\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    No transactions yet. Start by topping up your wallet.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { Menu, TrendingUp, AlertCircle } from \"lucide-react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ntype PricingData = {\r\n  bundleId: string;\r\n  agentPrice: string;\r\n  adminBasePrice: string;\r\n  agentProfit: string;\r\n};\r\n\r\ntype DataBundle = {\r\n  id: string;\r\n  name: string;\r\n  network: string;\r\n  dataAmount: string;\r\n  validity: string;\r\n  basePrice: string;\r\n};\r\n\r\nexport default function AgentPricingPage() {\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [priceChanges, setPriceChanges] = useState<Record<string, { agentPrice: string; agentProfit: string }>>({});\r\n\r\n  const { data: pricing, isLoading } = useQuery<PricingData[]>({\r\n    queryKey: [\"/api/agent/pricing\"],\r\n  });\r\n\r\n  const { data: bundles } = useQuery<DataBundle[]>({\r\n    queryKey: [\"/api/products/data-bundles\"],\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: (prices: Record<string, { agentPrice: string; agentProfit: string }>) =>\r\n      apiRequest(\"POST\", \"/api/agent/pricing\", { prices }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/agent/pricing\"] });\r\n      setPriceChanges({});\r\n      toast({ title: \"Pricing updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update pricing\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const getBundleName = (bundleId: string) => {\r\n    const bundle = bundles?.find(b => b.id === bundleId);\r\n    return bundle ? `${bundle.network.toUpperCase()} ${bundle.dataAmount} - ${bundle.validity}` : bundleId;\r\n  };\r\n\r\n  const getCurrentPrice = (bundleId: string) => {\r\n    const existing = pricing?.find(p => p.bundleId === bundleId);\r\n    const changes = priceChanges[bundleId];\r\n    return {\r\n      agentPrice: changes?.agentPrice || existing?.agentPrice || \"0.00\",\r\n      agentProfit: changes?.agentProfit || existing?.agentProfit || \"0.00\",\r\n      adminBasePrice: existing?.adminBasePrice || \"0.00\",\r\n    };\r\n  };\r\n\r\n  const handlePriceChange = (bundleId: string, field: 'agentPrice' | 'agentProfit', value: string) => {\r\n    const current = getCurrentPrice(bundleId);\r\n    const numValue = parseFloat(value) || 0;\r\n\r\n    if (field === 'agentPrice') {\r\n      // When agent price changes, auto-calculate profit\r\n      const basePrice = parseFloat(current.adminBasePrice);\r\n      const profit = Math.max(0, numValue - basePrice);\r\n      setPriceChanges(prev => ({\r\n        ...prev,\r\n        [bundleId]: {\r\n          agentPrice: value,\r\n          agentProfit: profit.toFixed(2),\r\n        }\r\n      }));\r\n    }\r\n    // Profit field is now read-only - no direct editing allowed\r\n  };\r\n\r\n  const handleSave = () => {\r\n    if (Object.keys(priceChanges).length === 0) {\r\n      toast({ title: \"No changes to save\" });\r\n      return;\r\n    }\r\n    updateMutation.mutate(priceChanges);\r\n  };\r\n\r\n  const hasUnsavedChanges = Object.keys(priceChanges).length > 0;\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AgentSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AgentSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-sm lg:text-base font-semibold\">Pricing Management</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            {hasUnsavedChanges && (\r\n              <div className=\"flex items-center gap-2 text-sm text-orange-600\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                Unsaved changes\r\n              </div>\r\n            )}\r\n            <Button\r\n              onClick={handleSave}\r\n              disabled={updateMutation.isPending || !hasUnsavedChanges}\r\n            >\r\n              {updateMutation.isPending ? \"Saving...\" : \"Save Changes\"}\r\n            </Button>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <TrendingUp className=\"h-5 w-5\" />\r\n                  Set Your Selling Prices\r\n                </CardTitle>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Set your selling prices for data bundles. Your profit margin will be calculated automatically.\r\n                </p>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : pricing && pricing.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Data Bundle</TableHead>\r\n                        <TableHead>Base Price</TableHead>\r\n                        <TableHead>Your Price</TableHead>\r\n                        <TableHead>Your Profit</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {pricing.map((price) => {\r\n                        const current = getCurrentPrice(price.bundleId);\r\n                        const hasChanges = priceChanges[price.bundleId];\r\n\r\n                        return (\r\n                          <TableRow key={price.bundleId} className={hasChanges ? \"bg-blue-50\" : \"\"}>\r\n                            <TableCell className=\"font-medium\">\r\n                              {getBundleName(price.bundleId)}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {formatCurrency(current.adminBasePrice)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={current.agentPrice}\r\n                                onChange={(e) => handlePriceChange(price.bundleId, 'agentPrice', e.target.value)}\r\n                                className=\"w-24 tabular-nums\"\r\n                                min={current.adminBasePrice}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Input\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                value={current.agentProfit}\r\n                                readOnly\r\n                                disabled\r\n                                className=\"w-24 tabular-nums bg-gray-100 cursor-not-allowed\"\r\n                              />\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        );\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No pricing data available. Please contact admin to set up base prices.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>How Pricing Works</CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div className=\"p-4 border rounded-lg\">\r\n                    <h4 className=\"font-medium mb-2\">Base Price</h4>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      The minimum price set by admin for each role. You cannot sell below this price.\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"p-4 border rounded-lg\">\r\n                    <h4 className=\"font-medium mb-2\">Your Price</h4>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      The price you charge customers. Must be at least the base price.\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"p-4 border rounded-lg\">\r\n                    <h4 className=\"font-medium mb-2\">Your Profit</h4>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      Your Price minus Base Price. This is your profit margin per sale.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Crown } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\n\r\nexport default function DealerPricingPage() {\r\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\r\n\r\n  const { data: pricing, isLoading } = useQuery({\r\n    queryKey: [\"/api/dealer/pricing\"],\r\n    queryFn: () => apiRequest(\"/api/dealer/pricing\"),\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <Crown className=\"mx-auto h-12 w-12 text-yellow-500\" />\r\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Dealer Pricing Plans</h2>\r\n          <p className=\"mt-2 text-lg text-gray-600\">\r\n            Choose the perfect plan for your dealer business\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-16 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {pricing?.plans?.map((plan: any) => (\r\n            <Card\r\n              key={plan.id}\r\n              className={`relative ${selectedPlan === plan.id ? 'ring-2 ring-blue-500' : ''}`}\r\n            >\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center justify-between\">\r\n                  {plan.name}\r\n                  {plan.recommended && (\r\n                    <Badge variant=\"default\">Recommended</Badge>\r\n                  )}\r\n                </CardTitle>\r\n                <CardDescription>{plan.description}</CardDescription>\r\n                <div className=\"mt-4\">\r\n                  <span className=\"text-3xl font-bold\">GH₵{plan.price}</span>\r\n                  <span className=\"text-gray-500\">/{plan.interval}</span>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-2\">\r\n                  {plan.features?.map((feature: string, index: number) => (\r\n                    <li key={index} className=\"flex items-center\">\r\n                      <span className=\"text-green-500 mr-2\">✓</span>\r\n                      {feature}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <Button\r\n                  className=\"w-full mt-6\"\r\n                  variant={selectedPlan === plan.id ? \"default\" : \"outline\"}\r\n                  onClick={() => setSelectedPlan(plan.id)}\r\n                >\r\n                  {selectedPlan === plan.id ? \"Selected\" : \"Select Plan\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        {selectedPlan && (\r\n          <div className=\"mt-12 text-center\">\r\n            <Button size=\"lg\" className=\"px-8\">\r\n              Upgrade to Selected Plan\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Crown } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\n\r\nexport default function SuperDealerPricingPage() {\r\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\r\n\r\n  const { data: pricing, isLoading } = useQuery({\r\n    queryKey: [\"/api/super-dealer/pricing\"],\r\n    queryFn: () => apiRequest(\"/api/super-dealer/pricing\"),\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <Crown className=\"mx-auto h-12 w-12 text-yellow-500\" />\r\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Super Dealer Pricing Plans</h2>\r\n          <p className=\"mt-2 text-lg text-gray-600\">\r\n            Advanced plans for managing dealer networks\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-16 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {pricing?.plans?.map((plan: any) => (\r\n            <Card\r\n              key={plan.id}\r\n              className={`relative ${selectedPlan === plan.id ? 'ring-2 ring-blue-500' : ''}`}\r\n            >\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center justify-between\">\r\n                  {plan.name}\r\n                  {plan.recommended && (\r\n                    <Badge variant=\"default\">Recommended</Badge>\r\n                  )}\r\n                </CardTitle>\r\n                <CardDescription>{plan.description}</CardDescription>\r\n                <div className=\"mt-4\">\r\n                  <span className=\"text-3xl font-bold\">GH₵{plan.price}</span>\r\n                  <span className=\"text-gray-500\">/{plan.interval}</span>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-2\">\r\n                  {plan.features?.map((feature: string, index: number) => (\r\n                    <li key={index} className=\"flex items-center\">\r\n                      <span className=\"text-green-500 mr-2\">✓</span>\r\n                      {feature}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <Button\r\n                  className=\"w-full mt-6\"\r\n                  variant={selectedPlan === plan.id ? \"default\" : \"outline\"}\r\n                  onClick={() => setSelectedPlan(plan.id)}\r\n                >\r\n                  {selectedPlan === plan.id ? \"Selected\" : \"Select Plan\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        {selectedPlan && (\r\n          <div className=\"mt-12 text-center\">\r\n            <Button size=\"lg\" className=\"px-8\">\r\n              Upgrade to Selected Plan\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Loader2, Shield } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\n\r\nexport default function MasterPricingPage() {\r\n  const [selectedPlan, setSelectedPlan] = useState<string | null>(null);\r\n\r\n  const { data: pricing, isLoading } = useQuery({\r\n    queryKey: [\"/api/master/pricing\"],\r\n    queryFn: () => apiRequest(\"/api/master/pricing\"),\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"text-center\">\r\n          <Shield className=\"mx-auto h-12 w-12 text-red-500\" />\r\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">Master Pricing Plans</h2>\r\n          <p className=\"mt-2 text-lg text-gray-600\">\r\n            Enterprise-level plans for complete system management\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-16 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {pricing?.plans?.map((plan: any) => (\r\n            <Card\r\n              key={plan.id}\r\n              className={`relative ${selectedPlan === plan.id ? 'ring-2 ring-blue-500' : ''}`}\r\n            >\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center justify-between\">\r\n                  {plan.name}\r\n                  {plan.recommended && (\r\n                    <Badge variant=\"default\">Recommended</Badge>\r\n                  )}\r\n                </CardTitle>\r\n                <CardDescription>{plan.description}</CardDescription>\r\n                <div className=\"mt-4\">\r\n                  <span className=\"text-3xl font-bold\">GH₵{plan.price}</span>\r\n                  <span className=\"text-gray-500\">/{plan.interval}</span>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <ul className=\"space-y-2\">\r\n                  {plan.features?.map((feature: string, index: number) => (\r\n                    <li key={index} className=\"flex items-center\">\r\n                      <span className=\"text-green-500 mr-2\">✓</span>\r\n                      {feature}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n                <Button\r\n                  className=\"w-full mt-6\"\r\n                  variant={selectedPlan === plan.id ? \"default\" : \"outline\"}\r\n                  onClick={() => setSelectedPlan(plan.id)}\r\n                >\r\n                  {selectedPlan === plan.id ? \"Selected\" : \"Select Plan\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n\r\n        {selectedPlan && (\r\n          <div className=\"mt-12 text-center\">\r\n            <Button size=\"lg\" className=\"px-8\">\r\n              Upgrade to Selected Plan\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { Link, useLocation } from \"wouter\";\r\nimport {\r\n  LayoutDashboard,\r\n  Smartphone,\r\n  FileCheck,\r\n  Users,\r\n  UserCircle,\r\n  Wallet,\r\n  BarChart3,\r\n  Settings,\r\n  LogOut,\r\n  Bell,\r\n  X,\r\n  MessageCircle,\r\n  AlertTriangle,\r\n  Code,\r\n  Trophy,\r\n  Video,\r\n  CreditCard,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\n\r\nconst sidebarNavItems = [\r\n  {\r\n    title: \"Dashboard\",\r\n    href: \"/admin\",\r\n    icon: LayoutDashboard,\r\n  },\r\n  {\r\n    title: \"Data Bundles\",\r\n    href: \"/admin/data-bundles\",\r\n    icon: Smartphone,\r\n  },\r\n  {\r\n    title: \"Role Base Prices\",\r\n    href: \"/admin/role-base-prices\",\r\n    icon: Settings,\r\n  },\r\n  {\r\n    title: \"Result Checkers\",\r\n    href: \"/admin/result-checkers\",\r\n    icon: FileCheck,\r\n  },\r\n  {\r\n    title: \"Transactions\",\r\n    href: \"/admin/transactions\",\r\n    icon: BarChart3,\r\n  },\r\n  {\r\n    title: \"Users\",\r\n    href: \"/admin/users\",\r\n    icon: UserCircle,\r\n  },\r\n  {\r\n    title: \"Agents\",\r\n    href: \"/admin/agents\",\r\n    icon: Users,\r\n  },\r\n  {\r\n    title: \"User Rankings\",\r\n    href: \"/admin/rankings\",\r\n    icon: Trophy,\r\n  },\r\n  {\r\n    title: \"Withdrawals\",\r\n    href: \"/admin/withdrawals\",\r\n    icon: Wallet,\r\n  },\r\n  {\r\n    title: \"Manual Top-up\",\r\n    href: \"/admin/manual-topup\",\r\n    icon: CreditCard,\r\n  },\r\n  {\r\n    title: \"Chat Support\",\r\n    href: \"/admin/chat-support\",\r\n    icon: MessageCircle,\r\n  },\r\n  {\r\n    title: \"Announcements\",\r\n    href: \"/admin/announcements\",\r\n    icon: Bell,\r\n  },\r\n  {\r\n    title: \"Video Guides\",\r\n    href: \"/admin/guides\",\r\n    icon: Video,\r\n  },\r\n  {\r\n    title: \"External API Providers\",\r\n    href: \"/admin/external-api-providers\",\r\n    icon: Code,\r\n  },\r\n  {\r\n    title: \"API Keys & Integrations\",\r\n    href: \"/dashboard/api-integrations\",\r\n    icon: Code,\r\n  },\r\n  {\r\n    title: \"Break Settings\",\r\n    href: \"/admin/break-settings\",\r\n    icon: AlertTriangle,\r\n  },\r\n  {\r\n    title: \"Settings\",\r\n    href: \"/admin/settings\",\r\n    icon: Settings,\r\n  },\r\n];\r\n\r\nexport function AdminSidebar({ onClose }: { onClose?: () => void } = {}) {\r\n  const [location] = useLocation();\r\n  const { user, logout, isLoggingOut } = useAuth();\r\n\r\n  // Get unread message count for admin\r\n  const { data: unreadCount = 0 } = useQuery<number>({\r\n    queryKey: [\"/api/support/admin/unread-count\"],\r\n    queryFn: async () => {\r\n      try {\r\n        const data = await apiRequest<{ count: number }>(\"GET\", \"/api/support/admin/unread-count\");\r\n        return data.count || 0;\r\n      } catch (error) {\r\n        return 0;\r\n      }\r\n    },\r\n    refetchInterval: 5000, // Refetch every 5 seconds\r\n  });\r\n\r\n  return (\r\n    <div \r\n      className={`flex h-screen w-64 flex-col border-r text-white relative overflow-hidden bg-black`}\r\n    >\r\n      {onClose && (\r\n        <div className=\"absolute top-4 right-4 md:hidden\">\r\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\r\n            <X className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      )}\r\n      <div className={`flex h-16 items-center gap-2 border-b px-6 bg-black ${onClose ? 'pr-16' : ''}`}>\r\n        <div className=\"flex flex-col\">\r\n          <span className=\"font-semibold text-sm text-white\">{user?.name || 'Admin'}</span>\r\n          <span className=\"text-xs text-gray-400\">Admin Panel</span>\r\n        </div>\r\n      </div>\r\n\r\n      <ScrollArea className=\"flex-1 px-3 py-4\">\r\n        <nav className=\"flex flex-col gap-1\">\r\n          {sidebarNavItems.map((item) => {\r\n            const isActive = location === item.href || (item.href !== \"/admin\" && location.startsWith(item.href));\r\n            const isChatSupport = item.href === \"/admin/chat-support\";\r\n            return (\r\n              <Link key={item.href} href={item.href}>\r\n                <Button\r\n                  variant={isActive ? \"default\" : \"ghost\"}\r\n                  className={cn(\r\n                    \"w-full justify-start gap-2 px-2 py-1.5 text-xs font-normal relative\",\r\n                    isActive && \"bg-yellow-500 text-white font-medium shadow-sm\"\r\n                  )}\r\n                  onClick={onClose}\r\n                  data-testid={`link-admin-${item.title.toLowerCase().replace(\" \", \"-\")}`}\r\n                >\r\n                  <item.icon className=\"h-4 w-4\" />\r\n                  <span className=\"flex-1 text-left\">{item.title}</span>\r\n                  {isChatSupport && unreadCount > 0 && (\r\n                    <Badge variant=\"destructive\" className=\"ml-auto\">\r\n                      {unreadCount}\r\n                    </Badge>\r\n                  )}\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n        </nav>\r\n      </ScrollArea>\r\n\r\n      <div className=\"border-t p-3\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          className=\"w-full justify-start gap-2 px-2 py-1.5 text-xs bg-black text-red-500 hover:bg-gray-800\"\r\n          onClick={() => logout()}\r\n          disabled={isLoggingOut}\r\n          data-testid=\"button-admin-logout\"\r\n        >\r\n          <LogOut className=\"h-4 w-4\" />\r\n          {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { Link, useLocation } from \"wouter\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  LayoutDashboard,\r\n  Smartphone,\r\n  Wallet,\r\n  History,\r\n  MessageCircle,\r\n  LogOut,\r\n  Settings,\r\n  Trophy,\r\n  Code,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { useTheme } from \"@/components/theme-provider\";\r\n\r\nconst sidebarNavItems = [\r\n  { title: \"Dashboard\", href: \"/user/dashboard\", icon: LayoutDashboard },\r\n  { title: \"MTN Bundles\", href: \"/user/bundles/mtn\", icon: Smartphone },\r\n  { title: \"AT iShare Bundles\", href: \"/user/bundles/at_ishare\", icon: Smartphone },\r\n  { title: \"AT BIG TIME Bundles\", href: \"/user/bundles/at_bigtime\", icon: Smartphone },\r\n  { title: \"TELECEL Bundles\", href: \"/user/bundles/telecel\", icon: Smartphone },\r\n  { title: \"Top Up Wallet\", href: \"/user/wallet\", icon: Wallet },\r\n  { title: \"API Keys & Integrations\", href: \"/dashboard/api-integrations\", icon: Code },\r\n  { title: \"Settings\", href: \"/user/settings\", icon: Settings },\r\n  { title: \"Order History\", href: \"/user/history\", icon: History },\r\n  { title: \"Support\", href: \"/user/support\", icon: MessageCircle },\r\n];\r\n\r\nexport function UserSidebar({ onClose }: { onClose?: () => void } = {}) {\r\n  const [location] = useLocation();\r\n  const { logout, isLoggingOut, user, agent } = useAuth();\r\n  const { theme } = useTheme();\r\n\r\n  // Get user rank\r\n  const { data: rankData } = useQuery<{ rank: number }>({\r\n    queryKey: [\"user-rank\"],\r\n    queryFn: () => apiRequest(\"GET\", \"/api/user/rank\"),\r\n    enabled: !!user,\r\n  });\r\n\r\n  return (\r\n    <div className={`flex h-full w-64 flex-col border-r text-sidebar-foreground relative ${\r\n      onClose ? 'bg-white dark:bg-black dark:text-white' : 'bg-sidebar dark:bg-black dark:text-white'\r\n    }`}>\r\n      <div className={`flex h-16 items-center justify-center border-b px-6 ${onClose ? 'pr-4' : ''} dark:border-gray-700`}>\r\n        <div className=\"flex flex-col items-center text-center w-full\">\r\n          <div className=\"flex items-center justify-center gap-4 mb-1 w-full\">\r\n            <div className=\"flex flex-col items-center\">\r\n              <p className=\"text-sm font-medium dark:text-white\">{user?.name || 'User'}</p>\r\n              <p className=\"text-xs text-muted-foreground dark:text-gray-300\">{user?.email}</p>\r\n            </div>\r\n            {rankData && (\r\n              <div className=\"flex items-center gap-1 rounded-full bg-green-500 px-2 py-0.5 text-xs font-medium text-white border border-green-600 dark:bg-green-600 dark:border-green-700\">\r\n                <Trophy className=\"h-2.5 w-2.5\" />\r\n                <span>\r\n                  {rankData.rank && rankData.rank > 0 ? `#${rankData.rank}` : 'Unranked'}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <ScrollArea className=\"flex-1 px-3 py-4\">\r\n        <nav className=\"flex flex-col gap-1\">\r\n          {sidebarNavItems.map((item) => {\r\n            const isActive = location === item.href || (item.href !== \"/user/dashboard\" && location.startsWith(item.href));\r\n\r\n            return (\r\n              <Link key={item.href} href={item.href}>\r\n                <Button\r\n                  variant={isActive ? \"default\" : \"ghost\"}\r\n                  className={cn(\r\n                    \"w-full justify-start gap-3 font-normal relative dark:text-white dark:hover:bg-gray-700\",\r\n                    isActive && \"bg-yellow-500 text-white font-medium shadow-sm dark:bg-yellow-600\"\r\n                  )}\r\n                  onClick={() => onClose && onClose()}\r\n                >\r\n                  <item.icon className=\"h-4 w-4 dark:text-white\" />\r\n                  <span className=\"flex-1 text-left dark:text-white\">{item.title}</span>\r\n                </Button>\r\n              </Link>\r\n            );\r\n          })}\r\n\r\n          {!agent && (\r\n            <Link href=\"/agent/register\">\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full justify-start gap-3 mt-2 bg-green-500 text-white border-green-500 hover:bg-green-600 hover:border-green-600 dark:bg-green-600 dark:border-green-600 dark:hover:bg-green-700\"\r\n                onClick={() => onClose && onClose()}\r\n              >\r\n                <Smartphone className=\"h-4 w-4\" />\r\n                Become an Agent\r\n              </Button>\r\n            </Link>\r\n          )}\r\n        </nav>\r\n      </ScrollArea>\r\n\r\n      <div className=\"border-t p-3 dark:border-gray-700\">\r\n        <Button\r\n          variant=\"ghost\"\r\n          className=\"w-full justify-start gap-3 text-destructive hover:text-destructive hover:bg-destructive/10 dark:text-red-400 dark:hover:bg-red-900/20\"\r\n          onClick={() => { onClose && onClose(); logout(); }}\r\n          disabled={isLoggingOut}\r\n        >\r\n          <LogOut className=\"h-4 w-4 dark:text-red-400\" />\r\n          {isLoggingOut ? \"Logging out...\" : \"Log out\"}\r\n        </Button>\r\n\r\n        {/* Developer Credit */}\r\n        <div className=\"mt-3 pt-3 border-t border-border/50 dark:border-gray-600\">\r\n          <p className=\"text-xs text-muted-foreground text-center dark:text-gray-400\">\r\n            Developed by{' '}\r\n            <a\r\n              href=\"https://bm-portfolio-up2x.onrender.com\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className=\"text-primary hover:text-primary/80 font-medium dark:text-blue-400 dark:hover:text-blue-300\"\r\n            >\r\n              BlusMotif\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { buttonVariants } from \"@/components/ui/button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'wouter';\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { toast } from 'sonner';\r\nimport { Key, Plus, Trash2, Copy, CheckCircle, XCircle, Code, Webhook, Menu } from 'lucide-react';\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\n\r\ninterface ApiKey {\r\n  id: string;\r\n  name: string;\r\n  key: string;\r\n  permissions: string;\r\n  isActive: boolean;\r\n  lastUsed?: string;\r\n  createdAt: string;\r\n}\r\n\r\nconst ApiKeysPage: React.FC = () => {\r\n  const [, navigate] = useLocation();\r\n  const { user } = useAuth();\r\n  const [apiKeys, setApiKeys] = useState<ApiKey[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [creating, setCreating] = useState(false);\r\n  const [newKeyName, setNewKeyName] = useState('');\r\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\r\n  const [createdKey, setCreatedKey] = useState<string>('');\r\n  const [showCreatedKey, setShowCreatedKey] = useState(false);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('keys');\r\n\r\n  useEffect(() => {\r\n    fetchApiKeys();\r\n  }, []);\r\n\r\n  const fetchApiKeys = async () => {\r\n    try {\r\n      // Get the access token from Supabase session\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      \r\n      if (!session?.access_token) {\r\n        toast.error('Please log in to manage API keys');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/api-keys', {\r\n        headers: {\r\n          'Authorization': `Bearer ${session.access_token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setApiKeys(data);\r\n      } else {\r\n        if (response.status === 401) {\r\n          toast.error('Please log in to manage API keys');\r\n        } else {\r\n          toast.error('Failed to fetch API keys');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error fetching API keys');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createApiKey = async () => {\r\n    if (!newKeyName.trim()) {\r\n      toast.error('Please enter a name for your API key');\r\n      return;\r\n    }\r\n\r\n    if (newKeyName.trim().length > 100) {\r\n      toast.error('API key name must be 100 characters or less');\r\n      return;\r\n    }\r\n\r\n    setCreating(true);\r\n    try {\r\n      // Get the access token from Supabase session\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      \r\n      if (!session?.access_token) {\r\n        toast.error('Please log in to create API keys');\r\n        setCreating(false);\r\n        return;\r\n      }\r\n\r\n      const response = await fetch('/api/user/api-keys', {\r\n        method: 'POST',\r\n        headers: { \r\n          'Authorization': `Bearer ${session.access_token}`,\r\n          'Content-Type': 'application/json' \r\n        },\r\n        body: JSON.stringify({ name: newKeyName.trim() })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setCreatedKey(data.key);\r\n        setShowCreatedKey(true);\r\n        setNewKeyName('');\r\n        setShowCreateDialog(false);\r\n        fetchApiKeys();\r\n        \r\n        // Show remaining rate limit\r\n        if (data.remaining !== undefined) {\r\n          toast.success(`API key created! You can create ${data.remaining} more keys this hour.`);\r\n        } else {\r\n          toast.success('API key created successfully');\r\n        }\r\n      } else {\r\n        const error = await response.json();\r\n        \r\n        // Handle auth error\r\n        if (response.status === 401) {\r\n          toast.error('Please log in to create API keys');\r\n        } else if (response.status === 429) {\r\n          toast.error(error.error || 'Rate limit exceeded. Please try again later.');\r\n        } else {\r\n          toast.error(error.error || 'Failed to create API key');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error creating API key');\r\n    } finally {\r\n      setCreating(false);\r\n    }\r\n  };\r\n\r\n\r\n  const deleteApiKey = async (keyId: string) => {\r\n    try {\r\n      // Get the access token from Supabase session\r\n      const { data: { session } } = await supabase.auth.getSession();\r\n      \r\n      if (!session?.access_token) {\r\n        toast.error('Please log in to revoke API keys');\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(`/api/user/api-keys/${keyId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${session.access_token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        fetchApiKeys(); // Refetch to get updated list\r\n        toast.success('API key revoked successfully');\r\n      } else {\r\n        const error = await response.json();\r\n        if (response.status === 401) {\r\n          toast.error('Please log in to revoke API keys');\r\n        } else {\r\n          toast.error(error.error || 'Failed to revoke API key');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error revoking API key');\r\n    }\r\n  };\r\n\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    toast.success('Copied to clipboard');\r\n  };\r\n\r\n\r\n\r\n\r\n  const renderSidebar = () => {\r\n    if (!user) return null;\r\n\r\n    switch (user.role) {\r\n      case 'admin':\r\n        return <AdminSidebar onClose={() => setSidebarOpen(false)} />;\r\n      case 'agent':\r\n      case 'dealer':\r\n      case 'super_dealer':\r\n      case 'master':\r\n        return <AgentSidebar onClose={() => setSidebarOpen(false)} />;\r\n      case 'user':\r\n        return <UserSidebar onClose={() => setSidebarOpen(false)} />;\r\n      default:\r\n        return <AdminSidebar onClose={() => setSidebarOpen(false)} />;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex h-screen bg-background\">\r\n        {renderSidebar()}\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-lg\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            {renderSidebar()}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        {renderSidebar()}\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">API Keys & Integrations</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-muted-foreground\">\r\n                  Manage your API keys and integrate with third-party services\r\n                </p>\r\n              </div>\r\n              <Dialog open={showCreateDialog} onOpenChange={setShowCreateDialog}>\r\n          <DialogTrigger asChild>\r\n            <Button>\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Create API Key\r\n            </Button>\r\n          </DialogTrigger>\r\n          <DialogContent className=\"bg-black text-white border border-gray-800\">\r\n            <DialogHeader>\r\n              <DialogTitle className=\"text-white font-bold text-lg\">Create New API Key</DialogTitle>\r\n              <DialogDescription className=\"text-gray-200\">\r\n                Create a new API key to access our services programmatically.\r\n              </DialogDescription>\r\n            </DialogHeader>\r\n            <div className=\"mt-3 p-3 bg-yellow-900/40 border border-yellow-600/60 rounded-md\">\r\n              <p className=\"text-yellow-300 text-sm font-semibold mb-1\">⚠️ Security Notice</p>\r\n              <ul className=\"text-yellow-200 text-xs space-y-1 ml-4 list-disc\">\r\n                <li>Maximum 10 active keys per account</li>\r\n                <li>Maximum 5 key creations per hour</li>\r\n                <li>Keys are shown only once - save immediately!</li>\r\n                <li>Keys cannot be recovered if lost</li>\r\n              </ul>\r\n            </div>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"keyName\" className=\"text-white font-semibold\">API Key Name</Label>\r\n                <Input\r\n                  id=\"keyName\"\r\n                  placeholder=\"e.g., Production App, Development\"\r\n                  value={newKeyName}\r\n                  onChange={(e) => setNewKeyName(e.target.value)}\r\n                  maxLength={100}\r\n                  className=\"bg-gray-900 border-gray-700 text-white placeholder:text-gray-500 focus:border-yellow-500\"\r\n                />\r\n                <p className=\"text-xs text-gray-400 mt-1\">{newKeyName.length}/100 characters</p>\r\n              </div>\r\n              <div className=\"flex justify-end space-x-2\">\r\n                <Button variant=\"outline\" onClick={() => setShowCreateDialog(false)} className=\"border-gray-700 text-white hover:bg-gray-900 hover:text-white\">\r\n                  Cancel\r\n                </Button>\r\n                <Button onClick={createApiKey} disabled={creating} className=\"bg-yellow-500 text-black hover:bg-yellow-600 font-semibold\">\r\n                  {creating ? 'Creating...' : 'Create Key'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n\r\n      {/* Created Key Dialog */}\r\n      <Dialog open={showCreatedKey} onOpenChange={setShowCreatedKey}>\r\n        <DialogContent className=\"max-w-2xl bg-gray-900 border-gray-700\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"flex items-center gap-2 text-xl text-white\">\r\n              <Key className=\"w-6 h-6 text-yellow-500\" />\r\n              API Key Created Successfully!\r\n            </DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"p-4 bg-red-900/30 border-2 border-red-600 rounded-lg mt-4\">\r\n            <p className=\"text-red-300 font-bold text-sm mb-2\">\r\n              🔐 CRITICAL: Save Your API Key Now!\r\n            </p>\r\n            <ul className=\"text-red-300 text-xs space-y-1 ml-4 list-disc\">\r\n              <li>This is the ONLY time you'll see this key in full</li>\r\n              <li>Copy and store it securely (e.g., password manager)</li>\r\n              <li>Once you close this dialog, the key will be masked forever</li>\r\n              <li>If lost, you must revoke and create a new key</li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"p-4 bg-gray-800 rounded-lg border-2 border-yellow-500\">\r\n              <Label className=\"text-sm font-semibold mb-2 block text-white\">Your API Key:</Label>\r\n              <code className=\"text-sm break-all block p-3 bg-black text-green-400 rounded font-mono\">\r\n                {createdKey}\r\n              </code>\r\n            </div>\r\n            <div className=\"flex justify-end space-x-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  copyToClipboard(createdKey);\r\n                  toast.success('API key copied! Make sure to save it securely.');\r\n                }}\r\n                className=\"border-yellow-500 text-yellow-400 hover:bg-yellow-500/20\"\r\n              >\r\n                <Copy className=\"w-4 h-4 mr-2\" />\r\n                Copy to Clipboard\r\n              </Button>\r\n              <Button \r\n                onClick={() => {\r\n                  setShowCreatedKey(false);\r\n                  toast.info('API key dialog closed. The key is now masked in your list.');\r\n                }}\r\n                className=\"bg-yellow-500 hover:bg-yellow-600 text-black font-semibold\"\r\n              >\r\n                I've Saved It Securely\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\r\n        <TabsList className=\"grid w-full grid-cols-4\">\r\n          <TabsTrigger value=\"keys\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">API Keys</TabsTrigger>\r\n          <TabsTrigger value=\"integrations\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">Integrations</TabsTrigger>\r\n          <TabsTrigger value=\"webhooks\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">Webhooks</TabsTrigger>\r\n          <TabsTrigger value=\"docs\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">Documentation</TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent value=\"keys\" className=\"space-y-6\">\r\n          {apiKeys.length === 0 ? (\r\n            <Card>\r\n              <CardContent className=\"flex flex-col items-center justify-center py-12\">\r\n                <Key className=\"w-12 h-12 text-muted-foreground mb-4\" />\r\n                <h3 className=\"text-lg font-semibold mb-2\">No API Keys Yet</h3>\r\n                <p className=\"text-muted-foreground text-center mb-4\">\r\n                  Create your first API key to start integrating with our services.\r\n                </p>\r\n                <Button onClick={() => setShowCreateDialog(true)}>\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Create Your First API Key\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n          ) : (\r\n            <div className=\"grid gap-4\">\r\n              {apiKeys.map((apiKey) => (\r\n                <Card key={apiKey.id}>\r\n                  <CardHeader>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <Key className=\"w-5 h-5\" />\r\n                        <div>\r\n                          <CardTitle className=\"text-lg\">{apiKey.name}</CardTitle>\r\n                          <CardDescription>\r\n                            Created {new Date(apiKey.createdAt).toLocaleDateString()}\r\n                            {apiKey.lastUsed && ` • Last used ${new Date(apiKey.lastUsed).toLocaleDateString()}`}\r\n                          </CardDescription>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Badge variant={apiKey.isActive ? \"default\" : \"secondary\"}>\r\n                          {apiKey.isActive ? (\r\n                            <><CheckCircle className=\"w-3 h-3 mr-1\" /> Active</>\r\n                          ) : (\r\n                            <><XCircle className=\"w-3 h-3 mr-1\" /> Revoked</>\r\n                          )}\r\n                        </Badge>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <div className=\"space-y-4\">\r\n                      <div>\r\n                        <Label className=\"text-sm font-medium\">API Key</Label>\r\n                        <div className=\"flex items-center space-x-2 mt-1\">\r\n                          <code className=\"flex-1 p-2 bg-muted rounded text-sm font-mono overflow-x-auto\">\r\n                            {apiKey.key}\r\n                          </code>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => copyToClipboard(apiKey.key)}\r\n                            title=\"Copy masked key\"\r\n                          >\r\n                            <Copy className=\"w-4 h-4\" />\r\n                          </Button>\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                          Key is masked for security. Full key was shown only once at creation.\r\n                        </p>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center space-x-4\">\r\n                          <AlertDialog>\r\n                            <AlertDialogTrigger asChild>\r\n                              <Button \r\n                                variant=\"destructive\" \r\n                                size=\"sm\"\r\n                                disabled={!apiKey.isActive}\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                                Revoke Key\r\n                              </Button>\r\n                            </AlertDialogTrigger>\r\n                            <AlertDialogContent className=\"bg-gray-900 border-gray-700\">\r\n                              <AlertDialogHeader>\r\n                                <AlertDialogTitle className=\"text-white\">Revoke API Key</AlertDialogTitle>\r\n                                <AlertDialogDescription className=\"text-gray-300\">\r\n                                  Are you sure you want to revoke this API key? This action cannot be undone and any applications using this key will immediately lose access.\r\n                                </AlertDialogDescription>\r\n                              </AlertDialogHeader>\r\n                              <AlertDialogFooter>\r\n                                <AlertDialogCancel className=\"bg-gray-800 text-white border-gray-700 hover:bg-gray-700\">Cancel</AlertDialogCancel>\r\n                                <AlertDialogAction \r\n                                  onClick={() => deleteApiKey(apiKey.id)}\r\n                                  className=\"bg-red-600 hover:bg-red-700\"\r\n                                >\r\n                                  Revoke Permanently\r\n                                </AlertDialogAction>\r\n                              </AlertDialogFooter>\r\n                            </AlertDialogContent>\r\n                          </AlertDialog>\r\n                          \r\n                          <div className=\"text-sm text-muted-foreground\">\r\n                            {apiKey.isActive ? (\r\n                              <span className=\"text-green-600\">✓ Key is active and functional</span>\r\n                            ) : (\r\n                              <span className=\"text-red-600\">⨯ Key has been revoked</span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"integrations\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Third-Party Integrations</CardTitle>\r\n              <CardDescription>\r\n                Connect your applications and services to our platform\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-lg flex items-center\">\r\n                      <Code className=\"w-5 h-5 mr-2\" />\r\n                      REST API\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">\r\n                      Use our REST API to programmatically access data bundles, result checkers, and transactions.\r\n                    </p>\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      size=\"sm\" \r\n                      onClick={() => navigate('/dashboard/api-documentation')}\r\n                    >\r\n                      View API Docs\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"text-lg flex items-center\">\r\n                      <Webhook className=\"w-5 h-5 mr-2\" />\r\n                      Webhooks\r\n                    </CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <p className=\"text-sm text-muted-foreground mb-4\">\r\n                      Receive real-time notifications about transaction status changes and other events.\r\n                    </p>\r\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => setActiveTab('webhooks')}>\r\n                      Configure Webhooks\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"webhooks\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Webhook Configuration</CardTitle>\r\n              <CardDescription>\r\n                Receive real-time notifications when order status changes\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"space-y-6\">\r\n                <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\r\n                  <h4 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-2\">💡 How to Use Webhooks</h4>\r\n                  <p className=\"text-sm text-blue-800 dark:text-blue-200 mb-3\">\r\n                    Include the <code className=\"bg-blue-100 dark:bg-blue-900 px-2 py-0.5 rounded text-xs\">webhookUrl</code> parameter when creating orders via API:\r\n                  </p>\r\n                  <pre className=\"bg-gray-900 text-green-400 p-3 rounded text-xs overflow-x-auto\">\r\n{`{\r\n  \"productId\": \"mtn-1gb\",\r\n  \"customerPhone\": \"0241234567\",\r\n  \"amount\": \"5.00\",\r\n  \"webhookUrl\": \"https://your-app.com/webhooks/order-status\"\r\n}`}\r\n                  </pre>\r\n                  <p className=\"text-xs text-blue-700 dark:text-blue-300 mt-3\">\r\n                    When the order status changes (pending → completed/failed), we'll send a POST request to your webhook URL with the updated order details.\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <Label className=\"text-base font-semibold\">Webhook Payload Example</Label>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">\r\n                      Here's what you'll receive when an order status updates:\r\n                    </p>\r\n                    <pre className=\"bg-gray-900 text-green-400 p-4 rounded text-xs overflow-x-auto\">\r\n{`{\r\n  \"event\": \"order.status_updated\",\r\n  \"reference\": \"TXN_1234567890\",\r\n  \"status\": \"completed\",\r\n  \"deliveryStatus\": \"delivered\",\r\n  \"timestamp\": \"2024-01-15T10:30:00.000Z\",\r\n  \"order\": {\r\n    \"id\": \"uuid-here\",\r\n    \"reference\": \"TXN_1234567890\",\r\n    \"amount\": 5.00,\r\n    \"previousStatus\": \"pending\",\r\n    \"currentStatus\": \"completed\"\r\n  },\r\n  \"products\": [\r\n    {\r\n      \"bundleId\": \"mtn-1gb\",\r\n      \"bundleName\": \"MTN 1GB\",\r\n      \"phone\": \"0241234567\",\r\n      \"network\": \"mtn\"\r\n    }\r\n  ]\r\n}`}\r\n                    </pre>\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2\">\r\n                    <Button onClick={() => navigate('/dashboard/api-documentation')} className=\"flex-1\">\r\n                      View Full Documentation\r\n                    </Button>\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      onClick={() => {\r\n                        window.open('https://webhook.site', '_blank');\r\n                        toast.success('Opening webhook.site for testing!');\r\n                      }}\r\n                      className=\"flex-1\"\r\n                    >\r\n                      <Webhook className=\"w-4 h-4 mr-2\" />\r\n                      Test with webhook.site\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"docs\" className=\"space-y-6\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>API Documentation</CardTitle>\r\n              <CardDescription>\r\n                Complete documentation for integrating with our platform\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => navigate('/dashboard/api-documentation')}>\r\n                  <Code className=\"w-4 h-4 mr-2\" />\r\n                  REST API Reference\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => navigate('/dashboard/api-documentation')}>\r\n                  <Webhook className=\"w-4 h-4 mr-2\" />\r\n                  Webhook Documentation\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => navigate('/dashboard/api-documentation')}>\r\n                  <Key className=\"w-4 h-4 mr-2\" />\r\n                  Authentication Guide\r\n                </Button>\r\n                <Button variant=\"outline\" className=\"justify-start\" onClick={() => {\r\n                  window.open('https://documenter.getpostman.com/view/your-collection-id', '_blank');\r\n                  toast.info('Opening Postman Collection...');\r\n                }}>\r\n                  Download Postman Collection\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default ApiKeysPage;","import React, { useState } from 'react';\r\nimport { useLocation } from 'wouter';\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { AgentSidebarV2 as AgentSidebar } from \"@/components/layout/agent-sidebar-v2\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { \r\n  BookOpen, \r\n  Code, \r\n  Key, \r\n  Server, \r\n  Package, \r\n  Menu,\r\n  Copy,\r\n  Check,\r\n  ExternalLink,\r\n  ShoppingCart\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst ApiDocumentationPage: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [, navigate] = useLocation();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [copiedCode, setCopiedCode] = useState<string | null>(null);\r\n\r\n  const baseUrl = 'https://resellershubprogh.com';\r\n\r\n  const copyToClipboard = (text: string, id: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopiedCode(id);\r\n    toast.success('Copied to clipboard!');\r\n    setTimeout(() => setCopiedCode(null), 2000);\r\n  };\r\n\r\n  // Determine sidebar based on user role\r\n  const renderSidebar = () => {\r\n    if (!user) return null;\r\n    \r\n    switch(user.role) {\r\n      case 'admin':\r\n        return <AdminSidebar onClose={() => setSidebarOpen(false)} />;\r\n      case 'agent':\r\n      case 'dealer':\r\n      case 'super_dealer':\r\n      case 'master':\r\n        return <AgentSidebar onClose={() => setSidebarOpen(false)} />;\r\n      default:\r\n        return <UserSidebar onClose={() => setSidebarOpen(false)} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            {renderSidebar()}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        {renderSidebar()}\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(!sidebarOpen)}\r\n            >\r\n              <Menu className=\"h-6 w-6\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">API Documentation</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <Tabs defaultValue=\"overview\" className=\"space-y-6\">\r\n              <TabsList className=\"grid w-full grid-cols-4\">\r\n                <TabsTrigger value=\"overview\" className=\"flex items-center gap-2 data-[state=active]:text-green-500\">\r\n                  <BookOpen className=\"w-4 h-4\" />\r\n                  Overview\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"authentication\" className=\"flex items-center gap-2 data-[state=active]:text-green-500\">\r\n                  <Key className=\"w-4 h-4\" />\r\n                  Authentication\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"endpoints\" className=\"flex items-center gap-2 data-[state=active]:text-green-500\">\r\n                  <Server className=\"w-4 h-4\" />\r\n                  Endpoints\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"examples\" className=\"flex items-center gap-2 data-[state=active]:text-green-500\">\r\n                  <Code className=\"w-4 h-4\" />\r\n                  Code Examples\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              {/* Overview Section */}\r\n              <TabsContent value=\"overview\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Package className=\"w-5 h-5 text-primary\" />\r\n                      Offers & Orders API\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                      Browse data bundle offers and create single/bulk orders with agent store slugs\r\n                    </CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-6\">\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold mb-3\">Base URL</h3>\r\n                      <div className=\"bg-muted p-4 rounded-lg border font-mono text-sm flex items-center justify-between\">\r\n                        <code>{baseUrl}/api</code>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"sm\"\r\n                          onClick={() => copyToClipboard(`${baseUrl}/api`, 'baseUrl')}\r\n                        >\r\n                          {copiedCode === 'baseUrl' ? (\r\n                            <Check className=\"w-4 h-4 text-green-500\" />\r\n                          ) : (\r\n                            <Copy className=\"w-4 h-4\" />\r\n                          )}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold mb-3\">What This API Does</h3>\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <div className=\"border rounded-lg p-4 bg-blue-50 dark:bg-blue-900/20\">\r\n                          <h4 className=\"font-semibold mb-2 flex items-center gap-2 text-blue-900 dark:text-blue-100\">\r\n                            <Package className=\"w-4 h-4\" />\r\n                            Browse Offers\r\n                          </h4>\r\n                          <p className=\"text-sm text-blue-800 dark:text-blue-200\">\r\n                            View data bundles from MTN, Vodafone, AirtelTigo with pricing per network\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"border rounded-lg p-4 bg-green-50 dark:bg-green-900/20\">\r\n                          <h4 className=\"font-semibold mb-2 flex items-center gap-2 text-green-900 dark:text-green-100\">\r\n                            <ShoppingCart className=\"w-4 h-4\" />\r\n                            Single Orders\r\n                          </h4>\r\n                          <p className=\"text-sm text-green-800 dark:text-green-200\">\r\n                            Purchase one bundle at a time with phone number for delivery\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"border rounded-lg p-4 bg-purple-50 dark:bg-purple-900/20\">\r\n                          <h4 className=\"font-semibold mb-2 text-purple-900 dark:text-purple-100\">📦 Bulk Orders</h4>\r\n                          <p className=\"text-sm text-purple-800 dark:text-purple-200\">\r\n                            Buy multiple bundles in one transaction for different phone numbers\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"border rounded-lg p-4 bg-yellow-50 dark:bg-yellow-900/20\">\r\n                          <h4 className=\"font-semibold mb-2 text-yellow-900 dark:text-yellow-100\">🏪 Agent Store Slug</h4>\r\n                          <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\r\n                            Use agent slugs to access custom pricing and track commissions\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"border-t pt-6\">\r\n                      <h3 className=\"text-lg font-semibold mb-3\">Key Concepts</h3>\r\n                      <div className=\"space-y-4\">\r\n                        <div className=\"p-4 bg-muted rounded-lg text-foreground\">\r\n                          <h4 className=\"font-medium mb-2\">🔖 What is a Slug?</h4>\r\n                          <p className=\"text-sm text-muted-foreground mb-2\">\r\n                            A slug is a unique identifier for an agent's storefront. Example: <code className=\"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-blue-600 dark:text-blue-400\">john-data-store</code>\r\n                          </p>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            Use slugs to access agent-specific offers at: <code className=\"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-blue-600 dark:text-blue-400\">/api/store/agent/{'{slug}'}</code>\r\n                          </p>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 bg-muted rounded-lg text-foreground\">\r\n                          <h4 className=\"font-medium mb-2\">📱 Single vs Bulk Orders</h4>\r\n                          <p className=\"text-sm text-muted-foreground mb-2\">\r\n                            <strong>Single:</strong> One bundle to one phone number\r\n                          </p>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            <strong>Bulk:</strong> Multiple bundles to different phone numbers in one API call\r\n                          </p>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-500/50 rounded-lg\">\r\n                          <h4 className=\"font-medium mb-3 flex items-center gap-2 text-blue-900 dark:text-white\">\r\n                            📞 Phone Number Requirements\r\n                          </h4>\r\n                          <div className=\"space-y-2 text-sm text-blue-900 dark:text-white\">\r\n                            <div className=\"flex items-start gap-2\">\r\n                              <span className=\"text-blue-600 dark:text-blue-300 font-bold\">•</span>\r\n                              <div className=\"text-blue-900 dark:text-white\">\r\n                                <strong>Format:</strong> Must be exactly 10 digits starting with 0<br/>\r\n                                <code className=\"bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded text-xs text-blue-900 dark:text-white\">0241234567, 0501234567, 0261234567</code>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-start gap-2\">\r\n                              <span className=\"text-blue-600 dark:text-blue-300 font-bold\">•</span>\r\n                              <div className=\"text-blue-900 dark:text-white\">\r\n                                <strong>No Network Validation:</strong> Phone numbers are NOT validated against network prefixes<br/>\r\n                                <span className=\"text-xs text-blue-700 dark:text-blue-200\">The API accepts any valid 10-digit phone regardless of network</span>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-start gap-2\">\r\n                              <span className=\"text-blue-600 dark:text-blue-300 font-bold\">•</span>\r\n                              <div className=\"text-blue-900 dark:text-white\">\r\n                                <strong>Cooldown Period:</strong> 20-minute wait between orders for same phone number<br/>\r\n                                <span className=\"text-xs text-blue-700 dark:text-blue-200\">Prevents duplicate orders and abuse</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-500/50 rounded-lg\">\r\n                          <h4 className=\"font-medium mb-3 flex items-center gap-2 text-purple-900 dark:text-white\">\r\n                            🌐 Network-Specific Rules\r\n                          </h4>\r\n                          <div className=\"space-y-3 text-sm text-purple-900 dark:text-white\">\r\n                            <div className=\"p-3 bg-white dark:bg-purple-800/30 rounded border border-purple-200 dark:border-purple-700\">\r\n                              <div className=\"font-semibold mb-1 text-purple-900 dark:text-white\">MTN, Telecel, AT Bigtime</div>\r\n                              <div className=\"text-xs space-y-1 text-purple-800 dark:text-purple-100\">\r\n                                <div>✅ Single orders supported</div>\r\n                                <div>✅ Bulk orders supported</div>\r\n                                <div>✅ Wallet payment supported</div>\r\n                                <div>✅ Paystack payment supported</div>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"p-3 bg-white dark:bg-purple-800/30 rounded border border-red-300 dark:border-red-600\">\r\n                              <div className=\"font-semibold mb-1 text-red-700 dark:text-red-300\">AT iShare</div>\r\n                              <div className=\"text-xs space-y-1 text-purple-800 dark:text-purple-100\">\r\n                                <div>✅ Single orders supported</div>\r\n                                <div>❌ Bulk orders NOT supported</div>\r\n                                <div>✅ Wallet payment supported</div>\r\n                                <div>✅ Paystack payment supported</div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"border-t pt-6\">\r\n                      <h3 className=\"text-lg font-semibold mb-3\">Status Codes</h3>\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center gap-3 p-2 border rounded\">\r\n                          <Badge variant=\"outline\" className=\"bg-green-50 dark:bg-green-900/20\">200</Badge>\r\n                          <span className=\"text-sm\">Success - Offers retrieved or order created</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-3 p-2 border rounded\">\r\n                          <Badge variant=\"outline\" className=\"bg-yellow-50 dark:bg-yellow-900/20\">400</Badge>\r\n                          <span className=\"text-sm\">Bad Request - Invalid phone or insufficient balance</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-3 p-2 border rounded\">\r\n                          <Badge variant=\"outline\" className=\"bg-yellow-50 dark:bg-yellow-900/20\">404</Badge>\r\n                          <span className=\"text-sm\">Not Found - Invalid slug or bundle doesn't exist</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              {/* Authentication Section */}\r\n              <TabsContent value=\"authentication\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Key className=\"w-5 h-5 text-primary\" />\r\n                      API Key Authentication\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                      Secure your API requests with API keys\r\n                    </CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-6\">\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold mb-3\">Header Format</h3>\r\n                      <div className=\"bg-black p-4 rounded-lg\">\r\n                        <pre className=\"text-green-400 text-sm\">\r\n{`Authorization: Bearer YOUR_API_KEY\r\nContent-Type: application/json`}\r\n                        </pre>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold mb-3\">Example Request</h3>\r\n                      <div className=\"bg-black p-4 rounded-lg overflow-x-auto\">\r\n                        <pre className=\"text-green-400 text-sm\">\r\n{`curl -X GET \"${baseUrl}/api/products/data-bundles\" \\\\\r\n  -H \"Authorization: Bearer sk_1234567890abcdef...\" \\\\\r\n  -H \"Content-Type: application/json\"`}\r\n                        </pre>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-500/50 rounded-lg\">\r\n                      <Key className=\"w-5 h-5 text-blue-500 dark:text-blue-300 mt-0.5\" />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"font-medium text-blue-700 dark:text-white mb-2\">\r\n                          Get Your API Key\r\n                        </p>\r\n                        <p className=\"text-sm text-blue-600 dark:text-white mb-3\">\r\n                          Generate your API key from the API Keys & Integrations page. Maximum 10 active keys per account.\r\n                        </p>\r\n                        <Button variant=\"outline\" size=\"sm\" onClick={() => navigate('/dashboard/api-integrations')}>\r\n                          <Key className=\"w-4 h-4 mr-2\" />\r\n                          Go to API Keys\r\n                          <ExternalLink className=\"w-3 h-3 ml-2\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              {/* Endpoints Section */}\r\n              <TabsContent value=\"endpoints\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Server className=\"w-5 h-5 text-primary\" />\r\n                      API Endpoints\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                      Browse offers and create single/bulk orders\r\n                    </CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-8\">\r\n                    {/* Browse Offers */}\r\n                    <div>\r\n                      <h3 className=\"text-xl font-semibold mb-4 pb-2 border-b\">1. Browse Offers</h3>\r\n                      \r\n                      <div className=\"space-y-6\">\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <div className=\"flex items-center gap-3 mb-3\">\r\n                            <Badge className=\"bg-blue-500 text-white\">GET</Badge>\r\n                            <code className=\"text-sm font-mono\">/api/products/data-bundles</code>\r\n                          </div>\r\n                          <p className=\"text-sm text-muted-foreground mb-4\">\r\n                            Get all available data bundle offers across all networks\r\n                          </p>\r\n                          \r\n                          <div className=\"mb-3\">\r\n                            <p className=\"text-sm font-semibold mb-2\">Query Parameters (Optional):</p>\r\n                            <div className=\"bg-muted p-3 rounded text-sm text-foreground\">\r\n                              <div><code className=\"text-blue-600 dark:text-blue-400 font-semibold\">network</code>: Filter by network (use: <code className=\"bg-blue-100 dark:bg-blue-900 px-2 py-0.5 rounded text-blue-700 dark:text-blue-300 font-bold\">mtn</code>, <code className=\"bg-blue-100 dark:bg-blue-900 px-2 py-0.5 rounded text-blue-700 dark:text-blue-300 font-bold\">telecel</code>, <code className=\"bg-blue-100 dark:bg-blue-900 px-2 py-0.5 rounded text-blue-700 dark:text-blue-300 font-bold\">at_bigtime</code>, or <code className=\"bg-blue-100 dark:bg-blue-900 px-2 py-0.5 rounded text-blue-700 dark:text-blue-300 font-bold\">at_ishare</code>)</div>\r\n                            </div>\r\n                            <p className=\"text-xs text-muted-foreground mt-2\">Example: <code className=\"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-blue-600 dark:text-blue-400\">/api/products/data-bundles?network=mtn</code></p>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <p className=\"text-sm font-semibold mb-2\">Response Example:</p>\r\n                            <div className=\"bg-black p-3 rounded\">\r\n                              <pre className=\"text-green-400 text-xs\">\r\n{`[\r\n  {\r\n    \"id\": 123,\r\n    \"network\": \"mtn\",\r\n    \"volume\": \"1GB\",\r\n    \"validity\": \"daily\",\r\n    \"price\": 5.00,\r\n    \"description\": \"MTN 1GB Daily Bundle\"\r\n  },\r\n  {\r\n    \"id\": 124,\r\n    \"network\": \"mtn\",\r\n    \"volume\": \"2GB\",\r\n    \"validity\": \"weekly\",\r\n    \"price\": 15.00,\r\n    \"description\": \"MTN 2GB Weekly Bundle\"\r\n  }\r\n]`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <div className=\"flex items-center gap-3 mb-3\">\r\n                            <Badge className=\"bg-blue-500 text-white\">GET</Badge>\r\n                            <code className=\"text-sm font-mono\">/api/store/agent/{'{slug}'}</code>\r\n                          </div>\r\n                          <p className=\"text-sm text-muted-foreground mb-4\">\r\n                            Get offers from a specific agent's store using their slug\r\n                          </p>\r\n                          \r\n                          <div className=\"mb-3\">\r\n                            <p className=\"text-sm font-semibold mb-2\">Path Parameters:</p>\r\n                            <div className=\"bg-muted p-3 rounded text-sm text-foreground\">\r\n                              <code className=\"text-primary\">slug</code>: Agent's storefront slug (e.g., \"john-data-store\")\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <p className=\"text-sm font-semibold mb-2\">Response Example:</p>\r\n                            <div className=\"bg-black p-3 rounded\">\r\n                              <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"agent\": {\r\n    \"id\": 1,\r\n    \"businessName\": \"John's Data Store\",\r\n    \"storefrontSlug\": \"john-data-store\"\r\n  },\r\n  \"bundles\": [\r\n    {\r\n      \"id\": 123,\r\n      \"network\": \"mtn\",\r\n      \"volume\": \"1GB\",\r\n      \"price\": 4.50\r\n    }\r\n  ]\r\n}`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Create Orders */}\r\n                    <div>\r\n                      <h3 className=\"text-xl font-semibold mb-4 pb-2 border-b\">2. Create Orders - Volume + Network Method</h3>\r\n                      \r\n                      {/* Network Names Notice */}\r\n                      <div className=\"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/30 border-2 border-yellow-500 rounded-lg shadow-sm\">\r\n                        <h4 className=\"font-bold mb-3 text-yellow-900 dark:text-white text-base flex items-center gap-2\">\r\n                          <span className=\"text-2xl\">⚠️</span> IMPORTANT: Use These Exact Network Names\r\n                        </h4>\r\n                        <p className=\"text-sm mb-3 font-medium text-yellow-900 dark:text-white\">When specifying the <code className=\"bg-yellow-100 dark:bg-yellow-800 px-2 py-1 rounded text-yellow-900 dark:text-white font-bold\">network</code> parameter, use these <strong className=\"text-yellow-900 dark:text-white\">exact lowercase spellings</strong>:</p>\r\n                        <div className=\"grid grid-cols-2 gap-3 mb-4\">\r\n                          <div className=\"flex items-center gap-2 font-mono text-sm bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <span className=\"text-green-600 dark:text-green-400 font-bold text-lg\">✓</span> \r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">mtn</code>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 font-mono text-sm bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <span className=\"text-green-600 dark:text-green-400 font-bold text-lg\">✓</span> \r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">telecel</code>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 font-mono text-sm bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <span className=\"text-green-600 dark:text-green-400 font-bold text-lg\">✓</span> \r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">at_bigtime</code>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 font-mono text-sm bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <span className=\"text-green-600 dark:text-green-400 font-bold text-lg\">✓</span> \r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">at_ishare</code>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"bg-white dark:bg-gray-800 p-3 rounded border border-yellow-400\">\r\n                          <p className=\"text-xs font-medium mb-2 text-gray-900 dark:text-gray-100\">✅ All code examples in this documentation use these exact spellings</p>\r\n                          <p className=\"text-xs text-gray-600 dark:text-gray-300\">Note: While network names are case-insensitive (server converts to lowercase), we recommend using lowercase in your code</p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"space-y-6\">\r\n                        {/* Single Order: Volume + Network */}\r\n                        <div className=\"border-2 border-green-500 rounded-lg p-4 bg-green-50 dark:bg-green-900/20\">\r\n                          <div className=\"flex items-center gap-3 mb-3\">\r\n                            <Badge className=\"bg-green-500 text-white\">POST</Badge>\r\n                            <code className=\"text-sm font-mono\">/api/checkout/initialize</code>\r\n                            <Badge variant=\"outline\" className=\"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\">SINGLE ORDER</Badge>\r\n                          </div>\r\n                          <p className=\"text-sm text-muted-foreground mb-4\">\r\n                            <strong>Single Order</strong> - Order one bundle for one phone number using volume and network\r\n                          </p>\r\n                          \r\n                          <div className=\"mb-3\">\r\n                            <p className=\"text-sm font-semibold mb-2\">Required Fields:</p>\r\n                            <div className=\"bg-muted p-3 rounded text-sm space-y-2 mb-3 text-foreground\">\r\n                              <div><code className=\"text-primary\">volume</code>: Bundle size (e.g., \"1GB\", \"2GB\", \"5GB\")</div>\r\n                              <div><code className=\"text-primary\">network</code>: Network name (\"mtn\", \"telecel\", \"at_bigtime\", \"at_ishare\")</div>\r\n                              <div><code className=\"text-primary\">productType</code>: \"data_bundle\"</div>\r\n                              <div><code className=\"text-primary\">customerPhone</code>: Recipient's 10-digit phone (e.g., \"0241234567\")</div>\r\n                              <div><code className=\"text-primary\">paymentMethod</code>: \"wallet\" (API orders use wallet balance)</div>\r\n                              <div><code className=\"text-primary\">agentSlug</code>: Agent's storefront slug (optional)</div>\r\n                            </div>\r\n                            <p className=\"text-sm font-semibold mb-2\">Request Body Example:</p>\r\n                            <div className=\"bg-black p-3 rounded\">\r\n                              <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1GB\",\r\n  \"network\": \"mtn\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhone\": \"0241234567\",\r\n  \"paymentMethod\": \"wallet\",\r\n  \"agentSlug\": \"john-data-store\"\r\n}`}\r\n                              </pre>\r\n                            </div>\r\n                            <div className=\"mt-3 p-3 bg-green-100 dark:bg-green-900/40 border border-green-500/50 rounded\">\r\n                              <p className=\"text-sm font-semibold text-green-800 dark:text-white mb-1\">✅ Why Use This Method:</p>\r\n                              <ul className=\"text-xs text-green-700 dark:text-green-100 space-y-1 ml-4 list-disc\">\r\n                                <li>No need to look up bundle IDs - just specify volume and network</li>\r\n                                <li>Automatic price calculation based on user role</li>\r\n                                <li>System finds the matching bundle automatically</li>\r\n                                <li>Perfect for simple integrations</li>\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <p className=\"text-sm font-semibold mb-2\">Success Response (200):</p>\r\n                            <div className=\"bg-black p-3 rounded\">\r\n                              <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"success\": true,\r\n  \"message\": \"Order created successfully. Amount deducted from wallet.\",\r\n  \"transaction\": {\r\n    \"id\": \"67131c28-21e2-4cfa-ab4e-ef9716ce5ee6\",\r\n    \"reference\": \"CLEC-MKVUPCNI-4438D1BC\",\r\n    \"amount\": \"4.70\",\r\n    \"status\": \"confirmed\",\r\n    \"productName\": \"MTN 1GB - Non Expiry\"\r\n  },\r\n  \"wallet\": {\r\n    \"previousBalance\": \"50.00\",\r\n    \"amountDeducted\": \"4.70\",\r\n    \"newBalance\": \"45.30\"\r\n  }\r\n}`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Bulk Order: Volume + Network */}\r\n                        <div className=\"border rounded-lg p-4 bg-purple-50 dark:bg-purple-900/20\">\r\n                          <div className=\"flex items-center gap-3 mb-3\">\r\n                            <Badge className=\"bg-purple-500 text-white\">POST</Badge>\r\n                            <code className=\"text-sm font-mono\">/api/checkout/initialize</code>\r\n                            <Badge variant=\"outline\" className=\"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200\">BULK ORDER</Badge>\r\n                          </div>\r\n                          <p className=\"text-sm text-muted-foreground mb-4\">\r\n                            <strong>Bulk Order:</strong> Send the same bundle to multiple phone numbers using volume and network\r\n                          </p>\r\n                          \r\n                          <div className=\"mb-3\">\r\n                            <p className=\"text-sm font-semibold mb-2\">Required Fields:</p>\r\n                            <div className=\"bg-muted p-3 rounded text-sm space-y-2 mb-3 text-foreground\">\r\n                              <div><code className=\"text-primary\">volume</code>: Bundle size (e.g., \"1GB\", \"2GB\", \"5GB\")</div>\r\n                              <div><code className=\"text-primary\">network</code>: Network name (\"mtn\", \"telecel\", \"at_bigtime\", \"at_ishare\")</div>\r\n                              <div><code className=\"text-primary\">productType</code>: \"data_bundle\"</div>\r\n                              <div><code className=\"text-primary\">customerPhones</code>: Array of 10-digit phone numbers</div>\r\n                              <div><code className=\"text-primary\">paymentMethod</code>: \"wallet\" (API orders use wallet balance)</div>\r\n                              <div><code className=\"text-primary\">agentSlug</code>: Agent's storefront slug (optional)</div>\r\n                              <div><code className=\"text-primary\">isBulkOrder</code>: true (automatically detected when using customerPhones array)</div>\r\n                            </div>\r\n                            <p className=\"text-sm font-semibold mb-2\">Request Body:</p>\r\n                            <div className=\"bg-black p-3 rounded\">\r\n                              <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1GB\",\r\n  \"network\": \"mtn\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhones\": [\r\n    \"0241234567\",\r\n    \"0207654321\",\r\n    \"0551122334\"\r\n  ],\r\n  \"paymentMethod\": \"wallet\",\r\n  \"agentSlug\": \"john-data-store\",\r\n  \"isBulkOrder\": true\r\n}`}\r\n                              </pre>\r\n                            </div>\r\n                            <div className=\"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-500/50 rounded\">\r\n                              <p className=\"text-sm font-semibold text-yellow-800 dark:text-white mb-1\">⚠️ Important Notes:</p>\r\n                              <ul className=\"text-xs text-yellow-700 dark:text-yellow-100 space-y-1 ml-4 list-disc\">\r\n                                <li>All phones must be 10 digits starting with 0</li>\r\n                                <li>Phone numbers are validated server-side</li>\r\n                                <li>No duplicate phones allowed in one bulk order</li>\r\n                                <li>20-minute cooldown per phone number enforced</li>\r\n                                <li>Same volume and network sent to all recipients</li>\r\n                                <li>Bulk orders NOT supported for AT iShare network</li>\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <p className=\"text-sm font-semibold mb-2\">Success Response (200):</p>\r\n                            <div className=\"bg-black p-3 rounded\">\r\n                              <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"success\": true,\r\n  \"message\": \"Bulk order created successfully. Amount deducted from wallet.\",\r\n  \"transaction\": {\r\n    \"id\": \"67131c28-21e2-4cfa-ab4e-ef9716ce5ee6\",\r\n    \"reference\": \"CLEC-BULK-XYZ789\",\r\n    \"amount\": \"14.10\",\r\n    \"status\": \"confirmed\",\r\n    \"productName\": \"MTN 1GB - Bulk Order (3 recipients)\"\r\n  },\r\n  \"wallet\": {\r\n    \"previousBalance\": \"50.00\",\r\n    \"amountDeducted\": \"14.10\",\r\n    \"newBalance\": \"35.90\"\r\n  },\r\n  \"recipients\": [\r\n    {\"phone\": \"0241234567\", \"bundleName\": \"MTN 1GB - Non Expiry\", \"dataAmount\": \"1GB\"},\r\n    {\"phone\": \"0207654321\", \"bundleName\": \"MTN 1GB - Non Expiry\", \"dataAmount\": \"1GB\"},\r\n    {\"phone\": \"0551122334\", \"bundleName\": \"MTN 1GB - Non Expiry\", \"dataAmount\": \"1GB\"}\r\n  ]\r\n}`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"border-l-4 border-red-500 pl-4 py-2 bg-red-50 dark:bg-red-900/20\">\r\n                          <p className=\"font-semibold text-sm mb-2 text-red-700 dark:text-red-400\">\r\n                            ❌ Error Responses:\r\n                          </p>\r\n                          <div className=\"bg-black p-3 rounded\">\r\n                            <pre className=\"text-red-400 text-xs\">\r\n{`// 400 - Invalid Phone\r\n{\r\n  \"error\": \"Invalid phone number length. Phone number must be exactly 10 digits including the prefix (e.g., 0241234567)\"\r\n}\r\n\r\n// 400 - Insufficient Balance (Wallet Payment)\r\n{\r\n  \"error\": \"Insufficient wallet balance\",\r\n  \"balance\": \"20.00\",\r\n  \"required\": \"50.00\"\r\n}\r\n\r\n// 429 - Cooldown Active\r\n{\r\n  \"error\": \"Please wait 15 minute(s) before purchasing another bundle for 0241234567.\",\r\n  \"cooldownMinutes\": 15,\r\n  \"phone\": \"0241234567\"\r\n}\r\n\r\n// 404 - Bundle Not Found (Volume+Network)\r\n{\r\n  \"error\": \"No 1GB bundle found for mtn network\",\r\n  \"hint\": \"Available volumes can be fetched from /api/products/data-bundles?network=mtn\"\r\n}`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Network-Specific Examples */}\r\n                    <div>\r\n                      <h3 className=\"text-xl font-semibold mb-4 pb-2 border-b\">3. Network-Specific Order Examples</h3>\r\n                      \r\n                      <div className=\"mb-6 p-4 bg-blue-50 dark:bg-blue-900/30 border-2 border-blue-500 rounded-lg shadow-sm\">\r\n                        <h4 className=\"font-bold mb-3 text-blue-900 dark:text-white text-base flex items-center gap-2\">\r\n                          <span className=\"text-2xl\">📡</span> Use These Exact Network Names in Your Code\r\n                        </h4>\r\n                        <p className=\"text-sm mb-3 font-medium text-blue-900 dark:text-white\">All examples below use these exact network spellings:</p>\r\n                        <div className=\"grid grid-cols-2 gap-3 mb-3\">\r\n                          <div className=\"flex items-center gap-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">\"mtn\"</code>\r\n                            <span className=\"text-xs text-gray-600 dark:text-gray-400\">MTN Ghana</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">\"telecel\"</code>\r\n                            <span className=\"text-xs text-gray-600 dark:text-gray-400\">Telecel</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">\"at_bigtime\"</code>\r\n                            <span className=\"text-xs text-gray-600 dark:text-gray-400\">AT Bigtime</span>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-700\">\r\n                            <code className=\"text-blue-600 dark:text-blue-400 font-bold text-base\">\"at_ishare\"</code>\r\n                            <span className=\"text-xs text-gray-600 dark:text-gray-400\">AT iShare</span>\r\n                          </div>\r\n                        </div>\r\n                        <p className=\"text-xs font-semibold bg-white dark:bg-gray-800 p-2 rounded text-gray-900 dark:text-gray-100\">✅ Copy these exact spellings from the examples below</p>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-6\">\r\n                        {/* MTN Examples */}\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg\">MTN Network</h4>\r\n                          \r\n                          <div className=\"space-y-4\">\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Single Order (MTN):</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1GB\",\r\n  \"network\": \"mtn\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhone\": \"0241234567\",\r\n  \"paymentMethod\": \"wallet\",\r\n  \"agentSlug\": \"john-data-store\"\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Bulk Order (MTN) - ✅ Supported:</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1GB\",\r\n  \"network\": \"mtn\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhones\": [\r\n    \"0241234567\",\r\n    \"0254567890\"\r\n  ],\r\n  \"paymentMethod\": \"wallet\",\r\n  \"agentSlug\": \"john-data-store\",\r\n  \"isBulkOrder\": true\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Telecel Examples */}\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg\">Telecel Network</h4>\r\n                          \r\n                          <div className=\"space-y-4\">\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Single Order (Telecel):</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"2GB\",\r\n  \"network\": \"telecel\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhone\": \"0201234567\",\r\n  \"paymentMethod\": \"wallet\"\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Bulk Order (Telecel) - ✅ Supported:</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"2GB\",\r\n  \"network\": \"telecel\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhones\": [\r\n    \"0201234567\",\r\n    \"0501234567\"\r\n  ],\r\n  \"paymentMethod\": \"wallet\",\r\n  \"isBulkOrder\": true\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* AT Bigtime Examples */}\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg\">AT Bigtime Network</h4>\r\n                          \r\n                          <div className=\"space-y-4\">\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Single Order (AT Bigtime):</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1.5GB\",\r\n  \"network\": \"at_bigtime\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhone\": \"0261234567\",\r\n  \"paymentMethod\": \"wallet\"\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Bulk Order (AT Bigtime) - ✅ Supported:</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1.5GB\",\r\n  \"network\": \"at_bigtime\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhones\": [\r\n    \"0261234567\",\r\n    \"0271234567\"\r\n  ],\r\n  \"paymentMethod\": \"wallet\",\r\n  \"isBulkOrder\": true\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* AT iShare Examples */}\r\n                        <div className=\"border rounded-lg p-4 border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-900/10\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg text-red-700 dark:text-red-400\">AT iShare Network</h4>\r\n                          \r\n                          <div className=\"space-y-4\">\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Single Order (AT iShare) - ✅ Supported:</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1GB\",\r\n  \"network\": \"at_ishare\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhone\": \"0561234567\",\r\n  \"paymentMethod\": \"wallet\"\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"p-3 bg-red-100 dark:bg-red-900/20 border border-red-500/50 rounded\">\r\n                              <p className=\"text-sm font-semibold mb-2 text-red-800 dark:text-red-300\">❌ Bulk Order (AT iShare) - NOT SUPPORTED</p>\r\n                              <p className=\"text-xs text-red-700 dark:text-red-400\">\r\n                                AT iShare network does not support bulk orders. Attempting to create a bulk order with network=\"at_ishare\" will result in an error:\r\n                              </p>\r\n                              <div className=\"bg-black p-2 rounded mt-2\">\r\n                                <pre className=\"text-red-400 text-xs\">\r\n{`{\r\n  \"error\": \"Bulk purchases are not available for AT iShare network\"\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Verify Order */}\r\n                    <div>\r\n                      <h3 className=\"text-xl font-semibold mb-4 pb-2 border-b\">4. Verify Order Status</h3>\r\n                      \r\n                      <div className=\"space-y-6\">\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <div className=\"flex items-center gap-3 mb-3\">\r\n                            <Badge className=\"bg-blue-500 text-white\">GET</Badge>\r\n                            <code className=\"text-sm font-mono\">/api/transactions/verify/{'{reference}'}</code>\r\n                          </div>\r\n                          <p className=\"text-sm text-muted-foreground mb-4\">\r\n                            Check order status after payment using the reference code\r\n                          </p>\r\n                          \r\n                          <div className=\"mb-3\">\r\n                            <p className=\"text-sm font-semibold mb-2\">Path Parameters:</p>\r\n                            <div className=\"bg-muted p-3 rounded text-sm text-foreground\">\r\n                              <code className=\"text-primary\">reference</code>: Transaction reference (e.g., \"CLEC-ABC123\")\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <p className=\"text-sm font-semibold mb-2\">Success Response (200):</p>\r\n                            <div className=\"bg-black p-3 rounded\">\r\n                              <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"status\": \"success\",\r\n  \"transaction\": {\r\n    \"id\": 789,\r\n    \"reference\": \"CLEC-ABC123\",\r\n    \"amount\": 5.00,\r\n    \"status\": \"completed\"\r\n  },\r\n  \"products\": [\r\n    {\r\n      \"type\": \"data_bundle\",\r\n      \"network\": \"mtn\",\r\n      \"volume\": \"1GB\",\r\n      \"phone\": \"0241234567\"\r\n    }\r\n  ]\r\n}`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Webhooks Section */}\r\n                    <div>\r\n                      <h3 className=\"text-xl font-semibold mb-4 pb-2 border-b\">5. Webhooks - Automatic Status Updates</h3>\r\n                      \r\n                      <div className=\"mb-4 p-4 bg-green-50 dark:bg-green-900/30 border-2 border-green-500 rounded-lg\">\r\n                        <h4 className=\"font-bold mb-2 text-green-900 dark:text-white\">🔔 Automatic Notifications</h4>\r\n                        <p className=\"text-sm text-green-900 dark:text-white\">Instead of constantly checking order status, provide a webhook URL when creating orders. Our system will automatically notify you when the order status changes (paid, processing, completed, failed).</p>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-6\">\r\n                        {/* How to Use Webhooks */}\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg\">How to Receive Status Updates</h4>\r\n                          \r\n                          <div className=\"space-y-4\">\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Step 1: Add webhookUrl to Your Order Request</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`{\r\n  \"volume\": \"1GB\",\r\n  \"network\": \"mtn\",\r\n  \"productType\": \"data_bundle\",\r\n  \"customerPhone\": \"0241234567\",\r\n  \"paymentMethod\": \"wallet\",\r\n  \"webhookUrl\": \"https://yoursite.com/api/webhook\"\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Step 2: We'll POST to Your Webhook URL on Every Status Change</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`POST https://yoursite.com/api/webhook\r\nContent-Type: application/json\r\nUser-Agent: Resellers-Hub-Webhook/1.0\r\nX-Webhook-Signature: [base64_signature]\r\n\r\n{\r\n  \"event\": \"order.status_updated\",\r\n  \"reference\": \"CLEC-ABC123\",\r\n  \"status\": \"completed\",\r\n  \"deliveryStatus\": \"delivered\",\r\n  \"timestamp\": \"2026-01-27T00:30:00.000Z\",\r\n  \"order\": {\r\n    \"id\": \"67131c28-21e2-4cfa-ab4e-ef9716ce5ee6\",\r\n    \"reference\": \"CLEC-ABC123\",\r\n    \"amount\": 4.70,\r\n    \"customerEmail\": null,\r\n    \"isBulkOrder\": false,\r\n    \"createdAt\": \"2026-01-27T00:21:19.578Z\",\r\n    \"completedAt\": \"2026-01-27T00:30:00.000Z\",\r\n    \"previousStatus\": \"processing\",\r\n    \"currentStatus\": \"completed\"\r\n  },\r\n  \"products\": [\r\n    {\r\n      \"bundleId\": \"9706a8cb-c33c-445b-9569-83d07799b7ca\",\r\n      \"bundleName\": \"MTN 1GB - Non Expiry\",\r\n      \"phone\": \"0241234567\",\r\n      \"network\": \"mtn\"\r\n    }\r\n  ]\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Order Status Flow */}\r\n                        <div className=\"border rounded-lg p-4 bg-blue-50 dark:bg-blue-900/30\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg text-blue-900 dark:text-white\">Order Status Flow</h4>\r\n                          <div className=\"space-y-2 text-sm text-blue-900 dark:text-white\">\r\n                            <div className=\"flex items-center gap-3 p-2 bg-white dark:bg-gray-800 rounded\">\r\n                              <span className=\"font-mono font-bold text-yellow-600\">pending</span>\r\n                              <span>→</span>\r\n                              <span className=\"text-muted-foreground\">Order created, awaiting payment</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 p-2 bg-white dark:bg-gray-800 rounded\">\r\n                              <span className=\"font-mono font-bold text-blue-600\">confirmed</span>\r\n                              <span>→</span>\r\n                              <span className=\"text-muted-foreground\">Payment confirmed (paid), order queued for processing</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 p-2 bg-white dark:bg-gray-800 rounded\">\r\n                              <span className=\"font-mono font-bold text-purple-600\">pending (deliveryStatus: processing)</span>\r\n                              <span>→</span>\r\n                              <span className=\"text-muted-foreground\">Bundle being sent to network provider</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 p-2 bg-white dark:bg-gray-800 rounded\">\r\n                              <span className=\"font-mono font-bold text-green-600\">completed (deliveryStatus: delivered)</span>\r\n                              <span>→</span>\r\n                              <span className=\"text-muted-foreground\">Bundle delivered successfully ✅</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3 p-2 bg-white dark:bg-gray-800 rounded\">\r\n                              <span className=\"font-mono font-bold text-red-600\">failed</span>\r\n                              <span>→</span>\r\n                              <span className=\"text-muted-foreground\">Delivery failed, will auto-refund ❌</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"mt-3 p-3 bg-blue-100 dark:bg-blue-800/40 border border-blue-500/50 rounded\">\r\n                            <p className=\"text-sm font-semibold text-blue-800 dark:text-white mb-1\">📝 Note:</p>\r\n                            <p className=\"text-xs text-blue-700 dark:text-blue-100\">Webhooks are sent when <strong>status</strong> or <strong>deliveryStatus</strong> changes. Monitor both fields to track the complete order lifecycle.</p>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Webhook Implementation Guide */}\r\n                        <div className=\"border rounded-lg p-4\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg\">Implement Your Webhook Endpoint</h4>\r\n                          \r\n                          <div className=\"space-y-4\">\r\n                            <div>\r\n                              <p className=\"text-sm font-semibold mb-2\">Example Webhook Handler (Node.js/Express):</p>\r\n                              <div className=\"bg-black p-3 rounded\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`app.post('/api/webhook', express.json(), (req, res) => {\r\n  const { event, reference, status, deliveryStatus, order, products } = req.body;\r\n  \r\n  // Verify webhook signature (recommended for production)\r\n  const signature = req.headers['x-webhook-signature'];\r\n  // if (!verifySignature(req.body, signature)) {\r\n  //   return res.status(401).json({ error: 'Invalid signature' });\r\n  // }\r\n  \r\n  // Update your database based on status\r\n  if (status === 'completed' && deliveryStatus === 'delivered') {\r\n    // Bundle successfully delivered\r\n    database.updateOrder(reference, { \r\n      status: 'completed',\r\n      deliveredAt: order.completedAt\r\n    });\r\n    \r\n    // Notify customer(s)\r\n    products.forEach(product => {\r\n      sendSMS(product.phone, \r\n        \\`Your \\${product.bundleName} has been delivered!\\`\r\n      );\r\n    });\r\n    \r\n  } else if (status === 'failed') {\r\n    // Delivery failed - handle refund if needed\r\n    database.updateOrder(reference, { \r\n      status: 'failed',\r\n      refundProcessed: true \r\n    });\r\n    \r\n    // Notify admin\r\n    notifyAdmin(\\`Order \\${reference} failed - check logs\\`);\r\n    \r\n  } else if (status === 'confirmed') {\r\n    // Payment confirmed, order being processed\r\n    database.updateOrder(reference, { status: 'paid' });\r\n  }\r\n  \r\n  // CRITICAL: Always respond with 200 OK within 10 seconds\r\n  res.status(200).json({ received: true });\r\n});`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-500/50 rounded p-3\">\r\n                              <p className=\"text-sm font-semibold text-yellow-800 dark:text-white mb-2\">⚠️ Important Webhook Requirements:</p>\r\n                              <ul className=\"text-xs text-yellow-700 dark:text-yellow-100 space-y-1 ml-4 list-disc\">\r\n                                <li><strong>Response Time:</strong> Your endpoint MUST return HTTP 200 within 10 seconds (timeout enforced)</li>\r\n                                <li><strong>Retry Logic:</strong> Failed webhooks are retried up to 3 times with exponential backoff (1s, 2s, 4s)</li>\r\n                                <li><strong>Idempotency:</strong> Handle duplicate webhooks gracefully - same status may be sent multiple times</li>\r\n                                <li><strong>Async Processing:</strong> If processing takes &gt;5s, respond 200 immediately and process async</li>\r\n                                <li><strong>Security:</strong> Use HTTPS for production webhook URLs</li>\r\n                                <li><strong>Signature Verification:</strong> Check X-Webhook-Signature header to verify authenticity</li>\r\n                                <li><strong>Status Transitions:</strong> pending → confirmed → pending(processing) → completed(delivered) or failed</li>\r\n                              </ul>\r\n                            </div>\r\n                            \r\n                            <div className=\"mt-3 p-3 bg-blue-50 dark:bg-blue-900/30 border border-blue-500/50 rounded\">\r\n                              <p className=\"text-sm font-semibold text-blue-800 dark:text-white mb-2\">🔐 Webhook Security (Optional):</p>\r\n                              <p className=\"text-xs text-blue-700 dark:text-blue-100 mb-2\">Each webhook includes an <code className=\"bg-blue-100 dark:bg-blue-800 px-1 rounded text-blue-900 dark:text-white\">X-Webhook-Signature</code> header for verification. While optional, it's recommended for production to prevent unauthorized webhook calls.</p>\r\n                              <div className=\"bg-black p-2 rounded mt-2\">\r\n                                <pre className=\"text-green-400 text-xs\">\r\n{`// Verify webhook signature (optional but recommended)\r\nconst signature = req.headers['x-webhook-signature'];\r\nconst isValid = verifyWebhookSignature(req.body, signature);\r\nif (!isValid) {\r\n  return res.status(401).json({ error: 'Invalid signature' });\r\n}`}\r\n                                </pre>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Testing Webhooks */}\r\n                        <div className=\"border rounded-lg p-4 bg-purple-50 dark:bg-purple-900/30\">\r\n                          <h4 className=\"font-semibold mb-3 text-lg text-purple-800 dark:text-white\">🧪 Testing Webhooks</h4>\r\n                          <p className=\"text-sm mb-3 text-purple-900 dark:text-white\">Use these services to test your webhook before going live:</p>\r\n                          <div className=\"space-y-2 text-sm text-purple-900 dark:text-white\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <code className=\"bg-white dark:bg-gray-800 px-2 py-1 rounded text-blue-600 dark:text-blue-400\">webhook.site</code>\r\n                              <span className=\"text-muted-foreground\">Get a temporary webhook URL and see incoming requests</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <code className=\"bg-white dark:bg-gray-800 px-2 py-1 rounded text-blue-600 dark:text-blue-400\">ngrok</code>\r\n                              <span className=\"text-muted-foreground\">Expose your local development server to the internet</span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              {/* Code Examples Section */}\r\n              <TabsContent value=\"examples\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                      <Code className=\"w-5 h-5 text-primary\" />\r\n                      Code Examples\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                      Complete examples for browsing offers and creating single/bulk orders\r\n                      <div className=\"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-500/50 rounded inline-block\">\r\n                        <p className=\"text-xs font-semibold mb-1 text-yellow-900 dark:text-white\">📌 Network names in all examples:</p>\r\n                        <code className=\"text-xs font-mono font-bold text-blue-600 dark:text-blue-400\">mtn</code> | <code className=\"text-xs font-mono font-bold text-blue-600 dark:text-blue-400\">telecel</code> | <code className=\"text-xs font-mono font-bold text-blue-600 dark:text-blue-400\">at_bigtime</code> | <code className=\"text-xs font-mono font-bold text-blue-600 dark:text-blue-400\">at_ishare</code>\r\n                      </div>\r\n                    </CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-8\">\r\n                    {/* JavaScript Examples */}\r\n                    <div>\r\n                      <h3 className=\"text-xl font-semibold mb-4\">JavaScript</h3>\r\n                      \r\n                      <div className=\"space-y-6\">\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium\">1. Browse Offers</h4>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => copyToClipboard('js1-code', 'js1')}\r\n                            >\r\n                              {copiedCode === 'js1' ? (\r\n                                <><Check className=\"w-4 h-4 mr-2 text-green-500\" />Copied!</>\r\n                              ) : (\r\n                                <><Copy className=\"w-4 h-4 mr-2\" />Copy</>\r\n                              )}\r\n                            </Button>\r\n                          </div>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`const API_KEY = 'sk_your_api_key_here';\r\nconst BASE_URL = '${baseUrl}/api';\r\n\r\nasync function getBundleOffers(network = 'MTN') {\r\n  const response = await fetch(\r\n    \\`\\${BASE_URL}/products/data-bundles?network=\\${network}\\`,\r\n    {\r\n      headers: {\r\n        'Authorization': \\`Bearer \\${API_KEY}\\`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }\r\n  );\r\n  \r\n  const bundles = await response.json();\r\n  return bundles;\r\n}\r\n\r\ngetBundleOffers('MTN');`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium\">2. Browse Agent Store by Slug</h4>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => copyToClipboard('js2-code', 'js2')}\r\n                            >\r\n                              {copiedCode === 'js2' ? (\r\n                                <><Check className=\"w-4 h-4 mr-2 text-green-500\" />Copied!</>\r\n                              ) : (\r\n                                <><Copy className=\"w-4 h-4 mr-2\" />Copy</>\r\n                              )}\r\n                            </Button>\r\n                          </div>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`async function getAgentStore(slug) {\r\n  const response = await fetch(\r\n    \\`\\${BASE_URL}/store/agent/\\${slug}\\`,\r\n    {\r\n      headers: {\r\n        'Authorization': \\`Bearer \\${API_KEY}\\`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }\r\n  );\r\n  \r\n  if (!response.ok) {\r\n    return null;\r\n  }\r\n  \r\n  const store = await response.json();\r\n  return store;\r\n}\r\n\r\ngetAgentStore('john-data-store');`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium\">3. Create Order (Volume + Network - SIMPLEST ⭐)</h4>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => copyToClipboard(`async function createOrder(volume, network, phone, agentSlug = null) {\r\n  const response = await fetch(\\`\\${BASE_URL}/checkout/initialize\\`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': \\`Bearer \\${API_KEY}\\`,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      volume: volume,           // \\\"1GB\\\", \\\"2GB\\\", \\\"5GB\\\", etc.\r\n      network: network,         // \\\"mtn\\\", \\\"telecel\\\", \\\"at_bigtime\\\", \\\"at_ishare\\\"\r\n      productType: 'data_bundle',\r\n      customerPhone: phone,     // 10-digit phone: \\\"0241234567\\\"\r\n      paymentMethod: 'paystack',\r\n      agentSlug: agentSlug      // Optional agent slug\r\n    })\r\n  });\r\n  \r\n  const result = await response.json();\r\n  \r\n  if (result.paymentUrl) {\r\n    // Redirect user to complete payment\r\n    window.location.href = result.paymentUrl;\r\n    return result;\r\n  } else {\r\n    throw new Error(result.error);\r\n  }\r\n}\r\n\r\n// Examples:\r\ncreateOrder('1GB', 'mtn', '0241234567', 'john-data-store');\r\ncreateOrder('5GB', 'telecel', '0501234567');\r\ncreateOrder('2GB', 'at_bigtime', '0261234567');`, 'js3')}\r\n                            >\r\n                              {copiedCode === 'js3' ? (\r\n                                <><Check className=\"w-4 h-4 mr-2 text-green-500\" />Copied!</>\r\n                              ) : (\r\n                                <><Copy className=\"w-4 h-4 mr-2\" />Copy</>\r\n                              )}\r\n                            </Button>\r\n                          </div>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`async function createOrder(volume, network, phone, agentSlug = null) {\r\n  const response = await fetch(\\`\\${BASE_URL}/checkout/initialize\\`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': \\`Bearer \\${API_KEY}\\`,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      volume: volume,           // \\\"1GB\\\", \\\"2GB\\\", \\\"5GB\\\", etc.\r\n      network: network,         // \\\"mtn\\\", \\\"telecel\\\", \\\"at_bigtime\\\", \\\"at_ishare\\\"\r\n      productType: 'data_bundle',\r\n      customerPhone: phone,     // 10-digit phone: \\\"0241234567\\\"\r\n      paymentMethod: 'paystack',\r\n      agentSlug: agentSlug      // Optional agent slug\r\n    })\r\n  });\r\n  \r\n  const result = await response.json();\r\n  \r\n  if (result.paymentUrl) {\r\n    // Redirect user to complete payment\r\n    window.location.href = result.paymentUrl;\r\n    return result;\r\n  } else {\r\n    throw new Error(result.error);\r\n  }\r\n}\r\n\r\n// Examples:\r\ncreateOrder('1GB', 'mtn', '0241234567', 'john-data-store');\r\ncreateOrder('5GB', 'telecel', '0501234567');\r\ncreateOrder('2GB', 'at_bigtime', '0261234567');`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium\">4. Create Bulk Order</h4>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => copyToClipboard('js4-code', 'js4')}\r\n                            >\r\n                              {copiedCode === 'js4' ? (\r\n                                <><Check className=\"w-4 h-4 mr-2 text-green-500\" />Copied!</>\r\n                              ) : (\r\n                                <><Copy className=\"w-4 h-4 mr-2\" />Copy</>\r\n                              )}\r\n                            </Button>\r\n                          </div>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`async function createBulkOrder(orders, network, agentSlug = null) {\r\n  const response = await fetch(\\`\\${BASE_URL}/checkout/initialize\\`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Authorization': \\`Bearer \\${API_KEY}\\`,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      orderItems: orders.map(order => ({\r\n        bundleId: order.bundleId,\r\n        phone: order.phone,\r\n        bundleName: order.bundleName\r\n      })),\r\n      productType: 'data_bundle',\r\n      network: network,  // \\\"mtn\\\", \\\"telecel\\\", \\\"at_bigtime\\\" (NOT at_ishare)\r\n      paymentMethod: 'paystack',\r\n      agentSlug: agentSlug,\r\n      isBulkOrder: true\r\n    })\r\n  });\r\n  \r\n  const result = await response.json();\r\n  \r\n  if (result.paymentUrl) {\r\n    window.location.href = result.paymentUrl;\r\n    return result;\r\n  } else {\r\n    throw new Error(result.error);\r\n  }\r\n}\r\n\r\n// Example: 3 MTN bundles for different phones\r\nconst bulkOrders = [\r\n  { bundleId: '123', phone: '0241234567', bundleName: 'MTN 1GB Daily' },\r\n  { bundleId: '124', phone: '0207654321', bundleName: 'MTN 2GB Weekly' },\r\n  { bundleId: '125', phone: '0551122334', bundleName: 'MTN 5GB Monthly' }\r\n];\r\n\r\ncreateBulkOrder(bulkOrders, 'mtn', 'john-data-store');`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium\">5. Verify Order</h4>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => copyToClipboard('js5-code', 'js5')}\r\n                            >\r\n                              {copiedCode === 'js5' ? (\r\n                                <><Check className=\"w-4 h-4 mr-2 text-green-500\" />Copied!</>\r\n                              ) : (\r\n                                <><Copy className=\"w-4 h-4 mr-2\" />Copy</>\r\n                              )}\r\n                            </Button>\r\n                          </div>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`async function verifyOrder(reference) {\r\n  const response = await fetch(\r\n    \\`\\${BASE_URL}/transactions/verify/\\${reference}\\`,\r\n    {\r\n      headers: {\r\n        'Authorization': \\`Bearer \\${API_KEY}\\`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }\r\n  );\r\n  \r\n  const result = await response.json();\r\n  return result;\r\n}\r\n\r\nverifyOrder('CLEC-ABC123');`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Network-Specific Examples */}\r\n                        <div className=\"border-t pt-6 mt-6\">\r\n                          <h4 className=\"font-medium mb-4 text-lg\">6. All Networks Examples</h4>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`// ============================================\r\n// ALL SUPPORTED NETWORKS\r\n// ============================================\r\n\r\n// MTN Network (Single & Bulk Supported)\r\nconst mtnSingle = {\r\n  volume: '1GB',\r\n  network: 'mtn',\r\n  productType: 'data_bundle',\r\n  customerPhone: '0241234567',\r\n  paymentMethod: 'wallet'\r\n};\r\n\r\nconst mtnBulk = {\r\n  volume: '1GB',\r\n  network: 'mtn',\r\n  productType: 'data_bundle',\r\n  customerPhones: ['0241234567', '0254567890'],\r\n  paymentMethod: 'wallet',\r\n  isBulkOrder: true\r\n};\r\n\r\n// Telecel Network (Single & Bulk Supported)\r\nconst telecelSingle = {\r\n  volume: '2GB',\r\n  network: 'telecel',\r\n  productType: 'data_bundle',\r\n  customerPhone: '0201234567',\r\n  paymentMethod: 'wallet'\r\n};\r\n\r\nconst telecelBulk = {\r\n  volume: '2GB',\r\n  network: 'telecel',\r\n  productType: 'data_bundle',\r\n  customerPhones: ['0201234567', '0501234567'],\r\n  paymentMethod: 'wallet',\r\n  isBulkOrder: true\r\n};\r\n\r\n// AT Bigtime Network (Single & Bulk Supported)\r\nconst atBigtimeSingle = {\r\n  volume: '1.5GB',\r\n  network: 'at_bigtime',\r\n  productType: 'data_bundle',\r\n  customerPhone: '0261234567',\r\n  paymentMethod: 'wallet'\r\n};\r\n\r\nconst atBigtimeBulk = {\r\n  volume: '1.5GB',\r\n  network: 'at_bigtime',\r\n  productType: 'data_bundle',\r\n  customerPhones: ['0261234567', '0271234567'],\r\n  paymentMethod: 'wallet',\r\n  isBulkOrder: true\r\n};\r\n\r\n// AT iShare Network (ONLY Single Supported - NO BULK)\r\nconst atIshareSingle = {\r\n  volume: '1GB',\r\n  network: 'at_ishare',\r\n  productType: 'data_bundle',\r\n  customerPhone: '0561234567',\r\n  paymentMethod: 'wallet'\r\n};\r\n\r\n// ❌ AT iShare Bulk NOT SUPPORTED - Will return error\r\nconst atIshareBulk = {\r\n  // This will FAIL with error:\r\n  // \"Bulk purchases are not available for AT iShare network\"\r\n  orderItems: [...],\r\n  network: 'at_ishare',  // ❌ Will be rejected\r\n  isBulkOrder: true\r\n};\r\n\r\n// Usage examples for all networks - using volume + network\r\nawait createOrder('1GB', 'mtn', '0241234567', 'agent-slug');        // MTN\r\nawait createOrder('2GB', 'telecel', '0201234567', 'agent-slug');    // Telecel\r\nawait createOrder('1.5GB', 'at_bigtime', '0261234567', 'agent-slug'); // AT Bigtime\r\nawait createOrder('1GB', 'at_ishare', '0561234567', 'agent-slug');  // AT iShare\r\n\r\n// Bulk orders (NOT for at_ishare) - using volume + network\r\nawait createBulkOrder('1GB', 'mtn', ['0241234567', '0254567890'], 'agent-slug');      // ✅ Works\r\nawait createBulkOrder('2GB', 'telecel', ['0201234567', '0501234567'], 'agent-slug'); // ✅ Works\r\nawait createBulkOrder('1.5GB', 'at_bigtime', ['0261234567', '0271234567'], 'agent-slug'); // ✅ Works\r\n// await createBulkOrder('1GB', 'at_ishare', [...phones], 'agent-slug');  // ❌ Will fail`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Python Examples */}\r\n                    <div className=\"border-t pt-8\">\r\n                      <h3 className=\"text-xl font-semibold mb-4\">Python</h3>\r\n                      \r\n                      <div className=\"space-y-6\">\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium\">Browse Offers & Create Single Order</h4>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => copyToClipboard('py1-code', 'py1')}\r\n                            >\r\n                              {copiedCode === 'py1' ? (\r\n                                <><Check className=\"w-4 h-4 mr-2 text-green-500\" />Copied!</>\r\n                              ) : (\r\n                                <><Copy className=\"w-4 h-4 mr-2\" />Copy</>\r\n                              )}\r\n                            </Button>\r\n                          </div>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`import requests\r\n\r\nAPI_KEY = 'sk_your_api_key_here'\r\nBASE_URL = '${baseUrl}/api'\r\nheaders = {\r\n    'Authorization': f'Bearer {API_KEY}',\r\n    'Content-Type': 'application/json'\r\n}\r\n\r\ndef get_bundles(network='mtn'):\r\n    \"\"\"Browse offers by network\"\"\"\r\n    response = requests.get(\r\n        f'{BASE_URL}/products/data-bundles?network={network}',\r\n        headers=headers\r\n    )\r\n    bundles = response.json()\r\n    return bundles\r\n\r\ndef create_single_order(volume, network, phone, agent_slug):\r\n    \"\"\"Create single order using volume + network\"\"\"\r\n    payload = {\r\n        'volume': volume,\r\n        'network': network,\r\n        'productType': 'data_bundle',\r\n        'customerPhone': phone,\r\n        'agentSlug': agent_slug,\r\n        'paymentMethod': 'wallet'\r\n    }\r\n    \r\n    response = requests.post(\r\n        f'{BASE_URL}/checkout/initialize',\r\n        headers=headers,\r\n        json=payload\r\n    )\r\n    \r\n    result = response.json()\r\n    if response.status_code == 200:\r\n        return result\r\n    else:\r\n        raise Exception(result.get('error'))\r\n\r\n# Usage\r\nbundles = get_bundles('mtn')\r\ncreate_single_order('1GB', 'mtn', '0241234567', 'john-data-store')`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <h4 className=\"font-medium\">Create Bulk Order</h4>\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => copyToClipboard('py2-code', 'py2')}\r\n                            >\r\n                              {copiedCode === 'py2' ? (\r\n                                <><Check className=\"w-4 h-4 mr-2 text-green-500\" />Copied!</>\r\n                              ) : (\r\n                                <><Copy className=\"w-4 h-4 mr-2\" />Copy</>\r\n                              )}\r\n                            </Button>\r\n                          </div>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`def create_bulk_order(volume, network, phones, agent_slug):\r\n    \"\"\"Create bulk order for multiple recipients using volume + network\"\"\"\r\n    payload = {\r\n        'volume': volume,\r\n        'network': network,\r\n        'productType': 'data_bundle',\r\n        'customerPhones': phones,\r\n        'agentSlug': agent_slug,\r\n        'paymentMethod': 'wallet',\r\n        'isBulkOrder': True\r\n    }\r\n    \r\n    response = requests.post(\r\n        f'{BASE_URL}/checkout/initialize',\r\n        headers=headers,\r\n        json=payload\r\n    )\r\n    \r\n    result = response.json()\r\n    if response.status_code == 200:\r\n        return result\r\n    else:\r\n        raise Exception(result.get('error'))\r\n\r\n# Buy 1GB MTN bundle for 3 different phones\r\nbulk_phones = ['0241234567', '0207654321', '0551122334']\r\n\r\ncreate_bulk_order('1GB', 'mtn', bulk_phones, 'john-data-store')`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* All Networks Python Examples */}\r\n                        <div className=\"border-t pt-6 mt-6\">\r\n                          <h4 className=\"font-medium mb-4 text-lg\">All Networks Examples (Python)</h4>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`# ============================================\r\n# PYTHON - ALL SUPPORTED NETWORKS\r\n# ============================================\r\n\r\n# MTN Network (Single & Bulk)\r\nmtn_single = create_single_order('1GB', 'mtn', '0241234567', 'agent-slug')\r\n\r\nmtn_bulk_phones = ['0241234567', '0254567890']\r\ncreate_bulk_order('1GB', 'mtn', mtn_bulk_phones, 'agent-slug')\r\n\r\n# Telecel Network (Single & Bulk)\r\ntelecel_single = create_single_order('2GB', 'telecel', '0201234567', 'agent-slug')\r\n\r\ntelecel_bulk_phones = ['0201234567', '0501234567']\r\ncreate_bulk_order('2GB', 'telecel', telecel_bulk_phones, 'agent-slug')\r\n\r\n# AT Bigtime Network (Single & Bulk)\r\nat_bigtime_single = create_single_order('1.5GB', 'at_bigtime', '0261234567', 'agent-slug')\r\n\r\nat_bigtime_bulk_phones = ['0261234567', '0271234567']\r\ncreate_bulk_order('1.5GB', 'at_bigtime', at_bigtime_bulk_phones, 'agent-slug')\r\n\r\n# AT iShare Network (ONLY Single - NO BULK)\r\nat_ishare_single = create_single_order('1GB', 'at_ishare', '0561234567', 'agent-slug')\r\n\r\n# ❌ AT iShare Bulk NOT SUPPORTED\r\n# create_bulk_order('1GB', 'at_ishare', [...phones], 'agent-slug')  # This will fail!\r\n\r\n# Bulk orders (MTN, Telecel, AT Bigtime only)\r\ncreate_bulk_order('1GB', 'mtn', mtn_bulk_phones, 'agent-slug')         # ✅ Works\r\ncreate_bulk_order('2GB', 'telecel', telecel_bulk_phones, 'agent-slug') # ✅ Works\r\ncreate_bulk_order('1.5GB', 'at_bigtime', at_bigtime_bulk_phones, 'agent-slug')  # ✅ Works`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* cURL Examples */}\r\n                    <div className=\"border-t pt-8\">\r\n                      <h3 className=\"text-xl font-semibold mb-4\">cURL Commands</h3>\r\n                      \r\n                      <div className=\"space-y-6\">\r\n                        <div>\r\n                          <h4 className=\"font-medium mb-2\">Browse Offers</h4>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`curl -X GET \"${baseUrl}/api/products/data-bundles?network=mtn\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\"`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <h4 className=\"font-medium mb-2\">Browse Agent Store</h4>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`curl -X GET \"${baseUrl}/api/store/agent/john-data-store\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\"`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <h4 className=\"font-medium mb-2\">Single Order (Volume + Network)</h4>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`curl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1GB\",\r\n    \"network\": \"mtn\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhone\": \"0241234567\",\r\n    \"agentSlug\": \"john-data-store\",\r\n    \"paymentMethod\": \"wallet\"\r\n  }'`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <h4 className=\"font-medium mb-2\">Bulk Order (Volume + Network)</h4>\r\n                          <div className=\"bg-black rounded-lg overflow-x-auto\">\r\n                            <pre className=\"p-4 text-sm text-green-400\">\r\n{`curl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1GB\",\r\n    \"network\": \"mtn\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhones\": [\r\n      \"0241234567\",\r\n      \"0207654321\",\r\n      \"0551122334\"\r\n    ],\r\n    \"agentSlug\": \"john-data-store\",\r\n    \"paymentMethod\": \"wallet\",\r\n    \"isBulkOrder\": true\r\n  }'`}\r\n                            </pre>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* All Networks cURL Examples */}\r\n                        <div className=\"border-t pt-6 mt-6\">\r\n                          <h4 className=\"font-medium mb-4 text-lg\">All Networks Examples (cURL)</h4>\r\n                          \r\n                          {/* MTN */}\r\n                          <div className=\"mb-6\">\r\n                            <h5 className=\"font-medium mb-2 text-blue-400\">MTN Network</h5>\r\n                            <div className=\"bg-black rounded-lg overflow-x-auto mb-3\">\r\n                              <pre className=\"p-4 text-sm text-green-400\">\r\n{`# MTN Single Order\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1GB\",\r\n    \"network\": \"mtn\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhone\": \"0241234567\",\r\n    \"paymentMethod\": \"wallet\"\r\n  }'\r\n\r\n# MTN Bulk Order\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1GB\",\r\n    \"network\": \"mtn\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhones\": [\"0241234567\", \"0254567890\"],\r\n    \"paymentMethod\": \"wallet\",\r\n    \"isBulkOrder\": true\r\n  }'`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Telecel */}\r\n                          <div className=\"mb-6\">\r\n                            <h5 className=\"font-medium mb-2 text-blue-400\">Telecel Network</h5>\r\n                            <div className=\"bg-black rounded-lg overflow-x-auto mb-3\">\r\n                              <pre className=\"p-4 text-sm text-green-400\">\r\n{`# Telecel Single Order\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"2GB\",\r\n    \"network\": \"telecel\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhone\": \"0201234567\",\r\n    \"paymentMethod\": \"wallet\"\r\n  }'\r\n\r\n# Telecel Bulk Order\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"2GB\",\r\n    \"network\": \"telecel\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhones\": [\"0201234567\", \"0501234567\"],\r\n    \"paymentMethod\": \"wallet\",\r\n    \"isBulkOrder\": true\r\n  }'`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* AT Bigtime */}\r\n                          <div className=\"mb-6\">\r\n                            <h5 className=\"font-medium mb-2 text-blue-400\">AT Bigtime Network</h5>\r\n                            <div className=\"bg-black rounded-lg overflow-x-auto mb-3\">\r\n                              <pre className=\"p-4 text-sm text-green-400\">\r\n{`# AT Bigtime Single Order\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1.5GB\",\r\n    \"network\": \"at_bigtime\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhone\": \"0261234567\",\r\n    \"paymentMethod\": \"wallet\"\r\n  }'\r\n\r\n# AT Bigtime Bulk Order\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1.5GB\",\r\n    \"network\": \"at_bigtime\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhones\": [\"0261234567\", \"0271234567\"],\r\n    \"paymentMethod\": \"wallet\",\r\n    \"isBulkOrder\": true\r\n  }'`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* AT iShare */}\r\n                          <div className=\"mb-6\">\r\n                            <h5 className=\"font-medium mb-2 text-blue-400\">AT iShare Network (Single Only)</h5>\r\n                            <div className=\"bg-black rounded-lg overflow-x-auto mb-3\">\r\n                              <pre className=\"p-4 text-sm text-green-400\">\r\n{`# AT iShare Single Order (✅ Supported)\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1GB\",\r\n    \"network\": \"at_ishare\",\r\n    \"productType\": \"data_bundle\",\r\n    \"customerPhone\": \"0561234567\",\r\n    \"paymentMethod\": \"wallet\"\r\n  }'\r\n\r\n# AT iShare Bulk Order (❌ NOT SUPPORTED - Will Fail)\r\ncurl -X POST \"${baseUrl}/api/checkout/initialize\" \\\\\r\n  -H \"Authorization: Bearer sk_your_api_key_here\" \\\\\r\n  -H \"Content-Type: application/json\" \\\\\r\n  -d '{\r\n    \"volume\": \"1GB\",\r\n    \"network\": \"at_ishare\",\r\n    \"customerPhones\": [...],\r\n    \"isBulkOrder\": true\r\n  }'\r\n# Error response:\r\n# {\r\n#   \"error\": \"Bulk purchases are not available for AT iShare network\"\r\n# }`}\r\n                              </pre>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n            </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ApiDocumentationPage;\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { StatusBadge } from \"@/components/ui/status-badge\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { DollarSign, ShoppingCart, Users, Wallet, TrendingUp, Package, Menu, Trophy, Award, Medal } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { ApiIntegrationsModal } from \"@/components/api-integrations-modal\";\r\nimport { Transaction } from \"@shared/schema\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar } from \"recharts\";\r\n\r\ninterface DashboardStats {\r\n  totalRevenue: number;\r\n  totalTransactions: number;\r\n  totalAgents: number;\r\n  pendingWithdrawals: number;\r\n  pendingAgents: number;\r\n  activationRevenue: number;\r\n  todayRevenue: number;\r\n  todayTransactions: number;\r\n  totalAgentProfits: number;\r\n  paystackMode?: \"test\" | \"live\";\r\n}\r\n\r\ninterface TopCustomer {\r\n  customerEmail: string;\r\n  customerPhone: string | null;\r\n  customerName: string | null;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n  rank: number;\r\n  lastPurchase: string;\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [showApiModal, setShowApiModal] = useState(false);\r\n  const { user } = useAuth();\r\n  const { data: stats, isLoading: statsLoading } = useQuery<DashboardStats>({\r\n    queryKey: [\"/api/admin/stats\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n  });\r\n\r\n  const { data: recentTransactions, isLoading: transactionsLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/admin/transactions/recent\"],\r\n    refetchInterval: 30000, // Refresh every 30 seconds\r\n  });\r\n\r\n  const { data: topCustomers, isLoading: rankingsLoading } = useQuery<TopCustomer[]>({\r\n    queryKey: [\"/api/admin/rankings/customers\"],\r\n    refetchInterval: 60000, // Refresh every minute\r\n  });\r\n\r\n  const { data: analyticsData, isLoading: analyticsLoading } = useQuery<Array<{ date: string; revenue: number; transactions: number }>>({\r\n    queryKey: [\"/api/admin/analytics/revenue\"],\r\n    refetchInterval: 300000, // Refresh every 5 minutes\r\n  });\r\n\r\n  // Format chart data for display\r\n  const chartData = analyticsData ? analyticsData.map(item => ({\r\n    name: new Date(item.date).toLocaleDateString('en-US', { weekday: 'short' }),\r\n    revenue: item.revenue,\r\n    transactions: item.transactions,\r\n  })) : [];\r\n\r\n  const getRankIcon = (index: number) => {\r\n    if (index === 0) return <Trophy className=\"h-5 w-5 text-yellow-500\" />;\r\n    if (index === 1) return <Medal className=\"h-5 w-5 text-gray-400\" />;\r\n    if (index === 2) return <Award className=\"h-5 w-5 text-amber-600\" />;\r\n    return <span className=\"text-sm font-semibold text-muted-foreground\">#{index + 1}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Dashboard</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-4 lg:space-y-6\">\r\n            {/* Welcome Message */}\r\n            <Card className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 border-yellow-600 shadow-xl overflow-hidden relative\">\r\n              <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12\"></div>\r\n              <CardContent className=\"p-6 relative\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex items-center justify-center w-14 h-14 bg-white/20 rounded-full shadow-lg backdrop-blur-sm\">\r\n                      <span className=\"text-3xl animate-bounce\">👋</span>\r\n                    </div>\r\n                    <div>\r\n                      <h2 className=\"text-2xl lg:text-3xl font-bold text-white mb-1 drop-shadow-sm\">\r\n                        Welcome back, {user?.name?.toUpperCase() || 'ADMIN'}! \r\n                      </h2>\r\n                      <p className=\"text-yellow-100 text-sm lg:text-base font-medium\">\r\n                        Here's what's happening with your business today ✨\r\n                      </p>\r\n                      <div className=\"flex items-center gap-2 mt-2\">\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\r\n                          <span className=\"text-xs font-medium\">Live Dashboard</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-pulse animate-delay-500\"></div>\r\n                          <span className=\"text-xs font-medium\">Real-time Updates</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"hidden lg:flex flex-col items-end gap-2\">\r\n                    <div className=\"flex items-center gap-2 bg-white/10 rounded-full px-3 py-1 backdrop-blur-sm\">\r\n                      <span className=\"text-xs text-white font-medium\">\r\n                        {new Date().toLocaleDateString('en-US', { \r\n                          weekday: 'long', \r\n                          year: 'numeric', \r\n                          month: 'long', \r\n                          day: 'numeric' \r\n                        })}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1 text-white/80\">\r\n                      <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full\"></div>\r\n                      <span className=\"text-xs\">All systems operational</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {statsLoading ? (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 lg:gap-6\">\r\n                {Array.from({ length: 5 }).map((_, i) => (\r\n                  <Card key={i} className=\"animate-pulse\">\r\n                    <CardContent className=\"pt-4 lg:pt-6\">\r\n                      <div className=\"h-4 bg-muted rounded w-1/2 mb-4\" />\r\n                      <div className=\"h-8 bg-muted rounded w-3/4\" />\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 lg:gap-6\">\r\n                <StatCard\r\n                  title=\"Total Revenue\"\r\n                  value={formatCurrency(stats?.totalRevenue || 0)}\r\n                  icon={DollarSign}\r\n                  description=\"All time\"\r\n                />\r\n                <StatCard\r\n                  title=\"Total Transactions\"\r\n                  value={stats?.totalTransactions || 0}\r\n                  icon={ShoppingCart}\r\n                  description=\"Completed orders\"\r\n                />\r\n                <StatCard\r\n                  title=\"Active Agents\"\r\n                  value={stats?.totalAgents || 0}\r\n                  icon={Users}\r\n                  description=\"Registered agents\"\r\n                />\r\n                <StatCard\r\n                  title=\"Total Agent Profits\"\r\n                  value={formatCurrency(stats?.totalAgentProfits || 0)}\r\n                  icon={TrendingUp}\r\n                  description=\"Combined agent earnings\"\r\n                />\r\n                <StatCard\r\n                  title=\"Paystack Balance\"\r\n                  value={formatCurrency((stats as any)?.paystackBalance || 0)}\r\n                  icon={Wallet}\r\n                  description={stats?.paystackMode === \"test\" ? \"Paystack Test Mode\" : \"Available in Paystack\"}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {statsLoading ? null : (\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Wallet className=\"h-5 w-5 text-amber-500\" />\r\n                    Account Status\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                    <div className=\"p-4 bg-muted rounded-lg\">\r\n                      <p className=\"text-sm text-muted-foreground mb-2\">Pending Withdrawals</p>\r\n                      <p className=\"text-2xl font-bold\">{stats?.pendingWithdrawals || 0}</p>\r\n                    </div>\r\n                    <div className=\"p-4 bg-muted rounded-lg\">\r\n                      <p className=\"text-sm text-muted-foreground mb-2\">Today's Revenue</p>\r\n                      <p className=\"text-2xl font-bold text-green-600\">{formatCurrency(stats?.todayRevenue || 0)}</p>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Analytics Chart */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                  <TrendingUp className=\"h-5 w-5 text-blue-500\" />\r\n                  Revenue Analytics\r\n                </CardTitle>\r\n                <CardDescription>Weekly revenue and transaction trends</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {analyticsLoading ? (\r\n                  <div className=\"h-64 flex items-center justify-center\">\r\n                    <div className=\"animate-pulse text-muted-foreground\">Loading analytics...</div>\r\n                  </div>\r\n                ) : chartData.length > 0 ? (\r\n                  <div className=\"h-64\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <BarChart data={chartData}>\r\n                        <CartesianGrid strokeDasharray=\"3 3\" />\r\n                        <XAxis dataKey=\"name\" />\r\n                        <YAxis />\r\n                        <Tooltip \r\n                          formatter={(value, name) => [\r\n                            name === 'revenue' ? formatCurrency(Number(value)) : value,\r\n                            name === 'revenue' ? 'Revenue' : 'Transactions'\r\n                          ]}\r\n                        />\r\n                        <Bar \r\n                          dataKey=\"revenue\" \r\n                          fill=\"#10b981\" \r\n                          radius={[4, 4, 0, 0]}\r\n                        />\r\n                      </BarChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"h-64 flex items-center justify-center\">\r\n                    <div className=\"text-muted-foreground\">No analytics data available</div>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n              <Card className=\"lg:col-span-2\">\r\n                <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                  <CardTitle className=\"text-lg\">Recent Transactions</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  {transactionsLoading ? (\r\n                    <TableSkeleton rows={5} />\r\n                  ) : recentTransactions && recentTransactions.length > 0 ? (\r\n                    <div className=\"overflow-x-auto\">\r\n                      <Table>\r\n                        <TableHeader>\r\n                          <TableRow>\r\n                            <TableHead>Order ID</TableHead>\r\n                            <TableHead>Product</TableHead>\r\n                            <TableHead>Amount</TableHead>\r\n                            <TableHead>Status</TableHead>\r\n                            <TableHead>Date</TableHead>\r\n                          </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                          {recentTransactions.slice(0, 10).map((tx) => (\r\n                            <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\r\n                              <TableCell className=\"font-mono text-sm\">{tx.id.slice(0,8)}</TableCell>\r\n                              <TableCell className=\"max-w-[200px] truncate\">{tx.productName}</TableCell>\r\n                              <TableCell className=\"font-medium tabular-nums\">{formatCurrency(tx.amount)}</TableCell>\r\n                              <TableCell><StatusBadge status={tx.status} /></TableCell>\r\n                              <TableCell className=\"text-muted-foreground text-sm\">{formatDate(tx.createdAt)}</TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                      No transactions yet\r\n                    </div>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"text-lg\">Quick Stats</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between p-3 bg-green-500 text-white rounded-lg border border-green-600\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <TrendingUp className=\"h-5 w-5 text-white\" />\r\n                      <span className=\"text-sm font-medium text-white\">Today's Revenue</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-white\">\r\n                      {formatCurrency(stats?.todayRevenue || 0)}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-3 bg-blue-500 text-white rounded-lg border border-blue-600\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Package className=\"h-5 w-5 text-white\" />\r\n                      <span className=\"text-sm font-medium text-white\">Today's Orders</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-white\">\r\n                      {stats?.todayTransactions || 0}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-3 bg-purple-500 text-white rounded-lg border border-purple-600\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <DollarSign className=\"h-5 w-5 text-white\" />\r\n                      <span className=\"text-sm font-medium text-white\">Activation Revenue</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-white\">\r\n                      {formatCurrency(stats?.activationRevenue || 0)}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between p-3 bg-orange-100 dark:bg-orange-900 rounded-lg border border-orange-200 dark:border-orange-800\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <Users className=\"h-5 w-5 text-orange-600 dark:text-orange-400\" />\r\n                      <span className=\"text-sm font-medium text-orange-900 dark:text-orange-100\">Pending Agents</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-orange-700 dark:text-orange-300\">\r\n                      {stats?.pendingAgents || 0}\r\n                    </span>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                    <Trophy className=\"h-5 w-5 text-yellow-500\" />\r\n                    Top Customers\r\n                  </CardTitle>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">Highest spending customers</p>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {rankingsLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : topCustomers && topCustomers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"w-16\">Rank</TableHead>\r\n                          <TableHead>Customer</TableHead>\r\n                          <TableHead className=\"text-right\">Total Spent</TableHead>\r\n                          <TableHead className=\"text-right\">Purchases</TableHead>\r\n                          <TableHead className=\"text-right\">Last Purchase</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {topCustomers.map((customer, index) => (\r\n                          <TableRow key={customer.rank}>\r\n                            <TableCell className=\"text-center\">\r\n                              {getRankIcon(index)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"flex flex-col\">\r\n                                <span className=\"font-medium\">\r\n                                  {customer.customerName || customer.customerEmail}\r\n                                </span>\r\n                                {customer.customerPhone && (\r\n                                  <span className=\"text-xs text-muted-foreground\">\r\n                                    {customer.customerPhone}\r\n                                  </span>\r\n                                )}\r\n                                <span className=\"text-xs text-muted-foreground truncate max-w-[200px]\">\r\n                                  {customer.customerEmail}\r\n                                </span>\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <span className=\"font-bold text-green-600 dark:text-green-400\">\r\n                                {formatCurrency(customer.totalSpent)}\r\n                              </span>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <Badge variant=\"secondary\">\r\n                                {customer.totalPurchases} {customer.totalPurchases === 1 ? 'order' : 'orders'}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right text-sm text-muted-foreground\">\r\n                              {formatDate(customer.lastPurchase)}\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    <Trophy className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n                    <p>No customer rankings yet</p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Order Tracker */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Track Orders</CardTitle>\r\n              <CardDescription>Search and monitor order status across the platform</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <OrderTracker />\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n      </div>\r\n      <ApiIntegrationsModal open={showApiModal} onOpenChange={setShowApiModal} />\r\n    </div>\r\n  );\r\n}\r\n","import * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, NETWORKS } from \"@/lib/constants\";\r\nimport { Plus, Pencil, Trash2, Smartphone, Menu, AlertTriangle } from \"lucide-react\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\nexport default function AdminDataBundles() {\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\r\n  const [editingBundle, setEditingBundle] = useState<DataBundle | null>(null);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: bundles, isLoading } = useQuery<DataBundle[]>({\r\n    queryKey: [\"/api/admin/data-bundles\"],\r\n    refetchInterval: 60000, // Refetch every minute for product data\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const { data: roleBasePrices } = useQuery<Array<{ bundleId: string; role: string; basePrice: string }>>({\r\n    queryKey: [\"/api/admin/role-base-prices\"],\r\n    enabled: user?.role === 'admin',\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: Partial<DataBundle>) =>\r\n      apiRequest(\"POST\", \"/api/admin/data-bundles\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/data-bundles\"] });\r\n      setIsCreateOpen(false);\r\n      toast({ title: \"Data bundle created successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to create bundle\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<DataBundle> }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/data-bundles/${id}`, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/data-bundles\"] });\r\n      setEditingBundle(null);\r\n      toast({ title: \"Data bundle updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update bundle\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) =>\r\n      apiRequest(\"DELETE\", `/api/admin/data-bundles/${id}`),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/data-bundles\"] });\r\n      toast({ title: \"Data bundle deleted successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete bundle\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const getRoleBasePrice = (bundleId: string, role: string) => {\r\n    const price = roleBasePrices?.find(p => p.bundleId === bundleId && p.role === role);\r\n    return price ? formatCurrency(price.basePrice) : '-';\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Data Bundles</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-create-bundle\">\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Add Bundle\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"bg-white text-blue-800\">\r\n                <DialogHeader>\r\n                  <DialogTitle className=\"text-blue-800\">Create Data Bundle</DialogTitle>\r\n                </DialogHeader>\r\n                <BundleForm\r\n                  onSubmit={(data) => createMutation.mutate(data)}\r\n                  isLoading={createMutation.isPending}\r\n                />\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Smartphone className=\"h-5 w-5\" />\r\n                  All Data Bundles\r\n                </CardTitle>\r\n                <Badge variant=\"secondary\">{bundles?.length || 0} bundles</Badge>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : bundles && bundles.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Network</TableHead>\r\n                        <TableHead>Name</TableHead>\r\n                        <TableHead>Data</TableHead>\r\n                        <TableHead>Validity</TableHead>\r\n                        <TableHead>Base Price</TableHead>\r\n                        <TableHead>Agent Base</TableHead>\r\n                        <TableHead>Dealer Base</TableHead>\r\n                        <TableHead>Super Dealer Base</TableHead>\r\n                        <TableHead>Master Base</TableHead>\r\n                        <TableHead>Admin Price</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {bundles.map((bundle) => {\r\n                        const network = NETWORKS.find((n) => n.id === bundle.network);\r\n                        return (\r\n                          <TableRow key={bundle.id} data-testid={`row-bundle-${bundle.id}`}>\r\n                            <TableCell>\r\n                              <Badge\r\n                                style={{\r\n                                  backgroundColor: network?.color,\r\n                                  color: network?.textColor,\r\n                                }}\r\n                              >\r\n                                {network?.name || bundle.network.toUpperCase()}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium\">{bundle.network.toUpperCase()} {bundle.dataAmount} - {bundle.validity}</TableCell>\r\n                            <TableCell>{bundle.dataAmount}</TableCell>\r\n                            <TableCell>{bundle.validity}</TableCell>\r\n                            <TableCell className=\"font-medium tabular-nums\">\r\n                              {formatCurrency(bundle.basePrice)}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'agent')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'dealer')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'super_dealer')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {getRoleBasePrice(bundle.id, 'master')}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              {bundle.adminPrice ? formatCurrency(bundle.adminPrice) : '-'}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Badge variant={bundle.isActive ? \"default\" : \"secondary\"}>\r\n                                {bundle.isActive ? \"Active\" : \"Inactive\"}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <div className=\"flex justify-end gap-2\">\r\n                                <Button\r\n                                  size=\"icon\"\r\n                                  variant=\"ghost\"\r\n                                  onClick={() => setEditingBundle(bundle)}\r\n                                  data-testid={`button-edit-${bundle.id}`}\r\n                                >\r\n                                  <Pencil className=\"h-4 w-4\" />\r\n                                </Button>\r\n                                <Button\r\n                                  size=\"icon\"\r\n                                  variant=\"ghost\"\r\n                                  onClick={() => {\r\n                                    if (confirm(\"Are you sure you want to delete this bundle?\")) {\r\n                                      deleteMutation.mutate(bundle.id);\r\n                                    }\r\n                                  }}\r\n                                  data-testid={`button-delete-${bundle.id}`}\r\n                                >\r\n                                  <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                                </Button>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        );\r\n                      })}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No data bundles found. Click \"Add Bundle\" to create one.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <Dialog open={!!editingBundle} onOpenChange={(open) => !open && setEditingBundle(null)}>\r\n        <DialogContent className=\"bg-white text-blue-800\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-blue-800\">Edit Data Bundle</DialogTitle>\r\n          </DialogHeader>\r\n          {editingBundle && (\r\n            <BundleForm\r\n              bundle={editingBundle}\r\n              onSubmit={(data) => updateMutation.mutate({ id: editingBundle.id, data })}\r\n              isLoading={updateMutation.isPending}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BundleForm({\r\n  bundle,\r\n  onSubmit,\r\n  isLoading,\r\n}: {\r\n  bundle?: DataBundle;\r\n  onSubmit: (data: Partial<DataBundle>) => void;\r\n  isLoading: boolean;\r\n}) {\r\n  const { user } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    name: bundle?.name || \"\",\r\n    network: bundle?.network || \"mtn\",\r\n    dataAmount: bundle?.dataAmount || \"\",\r\n    validity: bundle?.validity || \"\",\r\n    basePrice: bundle?.basePrice || \"\",\r\n    adminPrice: bundle?.adminPrice || \"\",\r\n    isActive: bundle?.isActive ?? true,\r\n  });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    // Convert empty strings to undefined for price fields\r\n    const processedData = {\r\n      ...formData,\r\n      basePrice: formData.basePrice === \"\" ? undefined : formData.basePrice,\r\n      adminPrice: formData.adminPrice === \"\" ? undefined : formData.adminPrice,\r\n    };\r\n    \r\n    onSubmit(processedData);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"name\" className=\"text-blue-800\">Name</Label>\r\n          <Input\r\n            id=\"name\"\r\n            value={formData.name}\r\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n            placeholder=\"e.g., MTN 1GB Daily\"\r\n            required\r\n            data-testid=\"input-bundle-name\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-blue-800\">Network</Label>\r\n          <Select\r\n            value={formData.network}\r\n            onValueChange={(value) => setFormData({ ...formData, network: value })}\r\n          >\r\n            <SelectTrigger data-testid=\"select-bundle-network\" className=\"text-blue-800\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {NETWORKS.map((n) => (\r\n                <SelectItem key={n.id} value={n.id} className=\"text-blue-800\">\r\n                  {n.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"dataAmount\" className=\"text-blue-800\">Data Amount</Label>\r\n          <Input\r\n            id=\"dataAmount\"\r\n            value={formData.dataAmount}\r\n            onChange={(e) => setFormData({ ...formData, dataAmount: e.target.value })}\r\n            placeholder=\"e.g., 1GB, 500MB\"\r\n            required\r\n            data-testid=\"input-bundle-data\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"validity\" className=\"text-blue-800\">Validity</Label>\r\n          <Input\r\n            id=\"validity\"\r\n            value={formData.validity}\r\n            onChange={(e) => setFormData({ ...formData, validity: e.target.value })}\r\n            placeholder=\"e.g., 1 Day, 30 Days\"\r\n            required\r\n            data-testid=\"input-bundle-validity\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"basePrice\" className=\"text-blue-800\">Base Price (GHS)</Label>\r\n          <Input\r\n            id=\"basePrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.basePrice}\r\n            onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            required\r\n            data-testid=\"input-bundle-price\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"adminPrice\" className=\"text-blue-800\">Admin Price (GHS)</Label>\r\n          <Input\r\n            id=\"adminPrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.adminPrice}\r\n            onChange={(e) => setFormData({ ...formData, adminPrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            data-testid=\"input-bundle-admin-price\"\r\n            className=\"text-blue-800 placeholder-blue-400\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {user?.role === 'admin' && (\r\n        <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n          <div className=\"flex items-start gap-2\">\r\n            <AlertTriangle className=\"h-5 w-5 text-blue-600 mt-0.5\" />\r\n            <div className=\"text-sm\">\r\n              <p className=\"font-medium text-blue-900\">Role-Based Pricing System</p>\r\n              <p className=\"text-blue-700 mt-1\">\r\n                Role-specific base prices are now managed separately. Use the \"Role Base Prices\" section\r\n                in the admin panel to set minimum prices for each role (agent, dealer, super_dealer, master).\r\n                Roles can then set their own profit margins above these base prices.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Per-bundle API selection removed; system-wide API configuration used instead */}\r\n\r\n      {(formData.network && formData.dataAmount && formData.validity && formData.basePrice) && (\r\n        <div className=\"p-4 bg-muted rounded-lg border\">\r\n          <Label className=\"text-sm font-medium text-blue-800 mb-2 block\">Preview (How users will see this bundle)</Label>\r\n          <div className=\"text-sm font-medium\">\r\n            {formData.network.toUpperCase()} {formData.dataAmount} - {formData.validity} - GH₵{formData.basePrice}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <Switch\r\n            id=\"isActive\"\r\n            checked={formData.isActive}\r\n            onCheckedChange={(checked) => setFormData({ ...formData, isActive: checked })}\r\n            data-testid=\"switch-bundle-active\"\r\n            className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n          />\r\n          <Label className=\"text-blue-800\">Active</Label>\r\n        </div>\r\n        <Button type=\"submit\" disabled={isLoading} data-testid=\"button-submit-bundle\">\r\n          {isLoading ? \"Saving...\" : bundle ? \"Update Bundle\" : \"Create Bundle\"}\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { Plus, Pencil, Trash2, Menu, Settings } from \"lucide-react\";\r\n\r\ntype RoleBasePrice = {\r\n  bundleId: string;\r\n  role: string;\r\n  basePrice: string;\r\n};\r\n\r\ntype DataBundle = {\r\n  id: string;\r\n  name: string;\r\n  network: string;\r\n  dataAmount: string;\r\n  validity: string;\r\n};\r\n\r\nexport default function AdminRoleBasePrices() {\r\n  const { toast } = useToast();\r\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\r\n  const [editingPrice, setEditingPrice] = useState<RoleBasePrice | null>(null);\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: roleBasePrices, isLoading } = useQuery<RoleBasePrice[]>({\r\n    queryKey: [\"/api/admin/role-base-prices\"],\r\n  });\r\n\r\n  const { data: bundles } = useQuery<DataBundle[]>({\r\n    queryKey: [\"/api/admin/data-bundles\"],\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: { bundleId: string; role: string; basePrice: string }) =>\r\n      apiRequest(\"POST\", \"/api/admin/role-base-prices\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/role-base-prices\"] });\r\n      setIsCreateOpen(false);\r\n      toast({ title: \"Role base price set successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to set role base price\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ bundleId, role, basePrice }: { bundleId: string; role: string; basePrice: string }) =>\r\n      apiRequest(\"POST\", \"/api/admin/role-base-prices\", { bundleId, role, basePrice }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/role-base-prices\"] });\r\n      setEditingPrice(null);\r\n      toast({ title: \"Role base price updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update role base price\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: ({ bundleId, role }: { bundleId: string; role: string }) =>\r\n      apiRequest(\"DELETE\", `/api/admin/role-base-prices/${bundleId}/${role}`),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/role-base-prices\"] });\r\n      toast({ title: \"Role base price deleted successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete role base price\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const getBundleName = (bundleId: string) => {\r\n    const bundle = bundles?.find(b => b.id === bundleId);\r\n    return bundle ? `${bundle.network.toUpperCase()} ${bundle.dataAmount} - ${bundle.validity}` : bundleId;\r\n  };\r\n\r\n  const getRoleLabel = (role: string) => {\r\n    const labels: Record<string, string> = {\r\n      agent: \"Agent\",\r\n      dealer: \"Dealer\",\r\n      super_dealer: \"Super Dealer\",\r\n      master: \"Master\",\r\n    };\r\n    return labels[role] || role;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Role Base Prices</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-create-price\">\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Set Base Price\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"bg-white text-blue-800\">\r\n                <DialogHeader>\r\n                  <DialogTitle className=\"text-blue-800\">Set Role Base Price</DialogTitle>\r\n                </DialogHeader>\r\n                <PriceForm\r\n                  onSubmit={(data) => createMutation.mutate(data)}\r\n                  isLoading={createMutation.isPending}\r\n                  bundles={bundles}\r\n                />\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Settings className=\"h-5 w-5\" />\r\n                  Role Base Prices\r\n                </CardTitle>\r\n                <div className=\"text-sm text-muted-foreground\">\r\n                  {roleBasePrices?.length || 0} prices configured\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : roleBasePrices && roleBasePrices.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Data Bundle</TableHead>\r\n                        <TableHead>Role</TableHead>\r\n                        <TableHead>Base Price</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {roleBasePrices.map((price, index) => (\r\n                        <TableRow key={`${price.bundleId}-${price.role}-${index}`}>\r\n                          <TableCell className=\"font-medium\">\r\n                            {getBundleName(price.bundleId)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {getRoleLabel(price.role)}\r\n                          </TableCell>\r\n                          <TableCell className=\"font-medium tabular-nums\">\r\n                            {formatCurrency(price.basePrice)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <div className=\"flex justify-end gap-2\">\r\n                              <Button\r\n                                size=\"icon\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => setEditingPrice(price)}\r\n                              >\r\n                                <Pencil className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button\r\n                                size=\"icon\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => {\r\n                                  if (confirm(\"Are you sure you want to delete this base price?\")) {\r\n                                    deleteMutation.mutate({ bundleId: price.bundleId, role: price.role });\r\n                                  }\r\n                                }}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                              </Button>\r\n                            </div>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No role base prices configured. Click \"Set Base Price\" to create one.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <Dialog open={!!editingPrice} onOpenChange={(open) => !open && setEditingPrice(null)}>\r\n        <DialogContent className=\"bg-white text-blue-800\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-blue-800\">Edit Role Base Price</DialogTitle>\r\n          </DialogHeader>\r\n          {editingPrice && (\r\n            <PriceForm\r\n              price={editingPrice}\r\n              onSubmit={(data) => updateMutation.mutate(data)}\r\n              isLoading={updateMutation.isPending}\r\n              bundles={bundles}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PriceForm({\r\n  price,\r\n  onSubmit,\r\n  isLoading,\r\n  bundles,\r\n}: {\r\n  price?: RoleBasePrice;\r\n  onSubmit: (data: { bundleId: string; role: string; basePrice: string }) => void;\r\n  isLoading: boolean;\r\n  bundles?: DataBundle[];\r\n}) {\r\n  const [formData, setFormData] = useState({\r\n    bundleId: price?.bundleId || \"\",\r\n    role: price?.role || \"agent\",\r\n    basePrice: price?.basePrice || \"\",\r\n  });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    const priceNum = parseFloat(formData.basePrice);\r\n    if (isNaN(priceNum) || priceNum < 0) {\r\n      return;\r\n    }\r\n\r\n    onSubmit({\r\n      bundleId: formData.bundleId,\r\n      role: formData.role,\r\n      basePrice: priceNum.toFixed(2),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"space-y-2\">\r\n        <Label className=\"text-blue-800\">Data Bundle</Label>\r\n        <Select\r\n          value={formData.bundleId}\r\n          onValueChange={(value) => setFormData({ ...formData, bundleId: value })}\r\n        >\r\n          <SelectTrigger className=\"text-blue-800\">\r\n            <SelectValue placeholder=\"Select a data bundle\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {bundles?.map((bundle) => (\r\n              <SelectItem key={bundle.id} value={bundle.id} className=\"text-blue-800\">\r\n                {bundle.network.toUpperCase()} {bundle.dataAmount} - {bundle.validity}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label className=\"text-blue-800\">Role</Label>\r\n        <Select\r\n          value={formData.role}\r\n          onValueChange={(value) => setFormData({ ...formData, role: value })}\r\n        >\r\n          <SelectTrigger className=\"text-blue-800\">\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"agent\" className=\"text-blue-800\">Agent</SelectItem>\r\n            <SelectItem value=\"dealer\" className=\"text-blue-800\">Dealer</SelectItem>\r\n            <SelectItem value=\"super_dealer\" className=\"text-blue-800\">Super Dealer</SelectItem>\r\n            <SelectItem value=\"master\" className=\"text-blue-800\">Master</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"basePrice\" className=\"text-blue-800\">Base Price (GHS)</Label>\r\n        <Input\r\n          id=\"basePrice\"\r\n          type=\"number\"\r\n          step=\"0.01\"\r\n          value={formData.basePrice}\r\n          onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n          className=\"text-blue-800 placeholder-blue-400\"\r\n          placeholder=\"0.00\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex justify-end\">\r\n        <Button type=\"submit\" disabled={isLoading}>\r\n          {isLoading ? \"Saving...\" : price ? \"Update Price\" : \"Set Price\"}\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate, RESULT_CHECKER_TYPES } from \"@/lib/constants\";\r\nimport { Plus, FileCheck, Package, AlertCircle, Menu } from \"lucide-react\";\r\nimport type { ResultChecker } from \"@shared/schema\";\r\n\r\ninterface StockSummary {\r\n  type: string;\r\n  year: number;\r\n  total: number;\r\n  available: number;\r\n  sold: number;\r\n}\r\n\r\nexport default function AdminResultCheckers() {\r\n  const { toast } = useToast();\r\n  const [isBulkAddOpen, setIsBulkAddOpen] = useState(false);\r\n  const [isEditOpen, setIsEditOpen] = useState(false);\r\n  const [editingChecker, setEditingChecker] = useState<ResultChecker | null>(null);\r\n  const [selectedType, setSelectedType] = useState<string>(\"all\");\r\n  const [selectedYear, setSelectedYear] = useState<string>(\"all\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: checkers, isLoading } = useQuery<ResultChecker[]>({\r\n    queryKey: [\"/api/admin/result-checkers\"],\r\n    refetchInterval: 60000, // Refetch every minute for stock data\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const { data: stockSummary } = useQuery<StockSummary[]>({\r\n    queryKey: [\"/api/admin/result-checkers/summary\"],\r\n    refetchInterval: 60000, // Refetch every minute for stock summary\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const bulkAddMutation = useMutation<{ added: number }, Error, { type: string; year: number; basePrice: string; costPrice: string; checkers: string; file?: File }>({\r\n    mutationFn: async (data: { type: string; year: number; basePrice: string; costPrice: string; checkers: string; file?: File }) => {\r\n      if (data.file) {\r\n        // Handle file upload\r\n        const formData = new FormData();\r\n        formData.append('type', data.type);\r\n        formData.append('year', data.year.toString());\r\n        formData.append('basePrice', data.basePrice);\r\n        formData.append('costPrice', data.costPrice);\r\n        formData.append('file', data.file);\r\n\r\n        const response = await fetch('/api/admin/result-checkers/bulk-upload', {\r\n          method: 'POST',\r\n          body: formData,\r\n          credentials: 'include',\r\n          headers: await(async () => {\r\n            const { data } = await supabase.auth.getSession();\r\n            const token = data.session?.access_token;\r\n            const headers: Record<string, string> = {};\r\n            if (token) {\r\n              headers['Authorization'] = `Bearer ${token}`;\r\n            }\r\n            return headers;\r\n          })(),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          const errorData = await response.json().catch(() => ({ message: 'Upload failed' }));\r\n          throw new Error(errorData.message || 'Upload failed');\r\n        }\r\n\r\n        return response.json();\r\n      } else {\r\n        // Handle text input\r\n        const response = await apiRequest(\"POST\", \"/api/admin/result-checkers/bulk\", {\r\n          type: data.type,\r\n          year: data.year,\r\n          basePrice: data.basePrice,\r\n          costPrice: data.costPrice,\r\n          checkers: data.checkers,\r\n        });\r\n        return response;\r\n      }\r\n    },\r\n    onSuccess: (data: { added: number }) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers/summary\"] });\r\n      setIsBulkAddOpen(false);\r\n      toast({ title: `${data.added} result checkers added successfully` });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to add checkers\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: async (data: { id: string; updates: Partial<ResultChecker> }) => {\r\n      const response = await apiRequest(\"PUT\", `/api/admin/result-checkers/${data.id}`, data.updates);\r\n      return response;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers/summary\"] });\r\n      setIsEditOpen(false);\r\n      setEditingChecker(null);\r\n      toast({ title: \"Result checker updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update checker\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      await apiRequest(\"DELETE\", `/api/admin/result-checkers/${id}`);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/result-checkers/summary\"] });\r\n      toast({ title: \"Result checker deleted successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete checker\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const filteredCheckers = checkers?.filter((checker) => {\r\n    if (selectedType !== \"all\" && checker.type !== selectedType) return false;\r\n    if (selectedYear !== \"all\" && checker.year.toString() !== selectedYear) return false;\r\n    return true;\r\n  });\r\n\r\n  const currentYear = new Date().getFullYear();\r\n  const years = [currentYear, currentYear - 1, currentYear - 2];\r\n\r\n  const totalStock = stockSummary?.reduce((acc, s) => acc + s.total, 0) || 0;\r\n  const availableStock = stockSummary?.reduce((acc, s) => acc + s.available, 0) || 0;\r\n  const soldStock = stockSummary?.reduce((acc, s) => acc + s.sold, 0) || 0;\r\n\r\n  const handleEdit = (checker: ResultChecker) => {\r\n    setEditingChecker(checker);\r\n    setIsEditOpen(true);\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    if (confirm(\"Are you sure you want to delete this result checker?\")) {\r\n      deleteMutation.mutate(id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Result Checkers</h1>\r\n          </div>\r\n          <div className=\"flex items-center gap-4\">\r\n            <Dialog open={isBulkAddOpen} onOpenChange={setIsBulkAddOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button data-testid=\"button-bulk-add\">\r\n                  <Plus className=\"h-4 w-4 mr-2\" />\r\n                  Bulk Add\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"max-w-lg bg-black\">\r\n                <DialogHeader>\r\n                  <DialogTitle className=\"text-white\">Bulk Add Result Checkers</DialogTitle>\r\n                </DialogHeader>\r\n                <BulkAddForm\r\n                  onSubmit={(data) => bulkAddMutation.mutate(data)}\r\n                  isLoading={bulkAddMutation.isPending}\r\n                />\r\n              </DialogContent>\r\n            </Dialog>\r\n            <Dialog open={isEditOpen} onOpenChange={setIsEditOpen}>\r\n              <DialogContent className=\"max-w-lg\">\r\n                <DialogHeader>\r\n                  <DialogTitle>Edit Result Checker</DialogTitle>\r\n                </DialogHeader>\r\n                {editingChecker && (\r\n                  <EditForm\r\n                    checker={editingChecker}\r\n                    onSubmit={(updates) => updateMutation.mutate({ id: editingChecker.id, updates })}\r\n                    isLoading={updateMutation.isPending}\r\n                  />\r\n                )}\r\n              </DialogContent>\r\n            </Dialog>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <StatCard\r\n                title=\"Total Stock\"\r\n                value={totalStock}\r\n                icon={Package}\r\n                description=\"All result checkers\"\r\n              />\r\n              <StatCard\r\n                title=\"Available\"\r\n                value={availableStock}\r\n                icon={FileCheck}\r\n                description=\"Ready for sale\"\r\n              />\r\n              <StatCard\r\n                title=\"Sold\"\r\n                value={soldStock}\r\n                icon={AlertCircle}\r\n                description=\"Delivered to customers\"\r\n              />\r\n            </div>\r\n\r\n            {stockSummary && stockSummary.length > 0 && (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {stockSummary.map((item) => (\r\n                  <Card key={`${item.type}-${item.year}`}>\r\n                    <CardHeader className=\"pb-2\">\r\n                      <CardTitle className=\"text-sm font-medium\">\r\n                        {item.type.toUpperCase()} {item.year}\r\n                      </CardTitle>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                      <div className=\"flex items-baseline justify-between\">\r\n                        <span className=\"text-2xl font-bold\">{item.available}</span>\r\n                        <span className=\"text-sm text-muted-foreground\">/ {item.total} total</span>\r\n                      </div>\r\n                      <div className=\"mt-2 h-2 bg-muted rounded-full overflow-hidden\">\r\n                        <div\r\n                          className=\"h-full bg-primary transition-all progress-bar-fill\"\r\n                          style={{ '--progress-width': `${Math.min((item.available / item.total) * 100, 100)}%` } as React.CSSProperties}\r\n                        />\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            )}\r\n\r\n            <Card className=\"md:col-span-2 lg:col-span-3\">\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2 pb-3 md:pb-6\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-base md:text-lg\">\r\n                    <FileCheck className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                    <span className=\"truncate\">Result Checker Inventory</span>\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-sm md:text-base\">\r\n                    View and manage PIN/Serial inventory\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex gap-1 md:gap-2 flex-shrink-0\">\r\n                  <Select value={selectedType} onValueChange={setSelectedType}>\r\n                    <SelectTrigger className=\"w-24 md:w-32 text-xs md:text-sm\" data-testid=\"filter-type\">\r\n                      <SelectValue placeholder=\"Type\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Types</SelectItem>\r\n                      {RESULT_CHECKER_TYPES.map((t) => (\r\n                        <SelectItem key={t.id} value={t.id}>\r\n                          {t.name}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                  <Select value={selectedYear} onValueChange={setSelectedYear}>\r\n                    <SelectTrigger className=\"w-20 md:w-32 text-xs md:text-sm\" data-testid=\"filter-year\">\r\n                      <SelectValue placeholder=\"Year\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Years</SelectItem>\r\n                      {years.map((y) => (\r\n                        <SelectItem key={y} value={y.toString()}>\r\n                          {y}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"px-3 md:px-6\">\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : filteredCheckers && filteredCheckers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"text-xs md:text-sm\">Type</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Year</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Serial</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">PIN</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Price</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Status</TableHead>\r\n                          <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">Sold To</TableHead>\r\n                          <TableHead className=\"hidden lg:table-cell text-xs md:text-sm\">Date</TableHead>\r\n                          <TableHead className=\"text-xs md:text-sm\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {filteredCheckers.slice(0, 20).map((checker) => (\r\n                          <TableRow key={checker.id} data-testid={`row-checker-${checker.id}`}>\r\n                            <TableCell className=\"text-xs md:text-sm\">\r\n                              <Badge variant=\"outline\" className=\"text-xs\">{checker.type.toUpperCase()}</Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium text-xs md:text-sm\">{checker.year}</TableCell>\r\n                            <TableCell className=\"font-mono text-xs md:text-sm\">{checker.serialNumber}</TableCell>\r\n                            <TableCell className=\"font-mono text-xs md:text-sm\">\r\n                              {checker.isSold ? checker.pin : \"****\"}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums text-xs md:text-sm\">\r\n                              {formatCurrency(checker.basePrice)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Badge variant={checker.isSold ? \"secondary\" : \"default\"} className=\"text-xs\">\r\n                                {checker.isSold ? \"Sold\" : \"Available\"}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"hidden md:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                              {checker.soldToPhone || \"-\"}\r\n                            </TableCell>\r\n                            <TableCell className=\"hidden lg:table-cell text-muted-foreground text-xs\">\r\n                              {checker.soldAt ? formatDate(checker.soldAt) : formatDate(checker.createdAt)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"flex gap-1 md:gap-2\">\r\n                                <Button\r\n                                  variant=\"outline\"\r\n                                  size=\"sm\"\r\n                                  onClick={() => handleEdit(checker)}\r\n                                  disabled={checker.isSold}\r\n                                  className=\"text-xs px-2 py-1 h-7\"\r\n                                >\r\n                                  Edit\r\n                                </Button>\r\n                                <Button\r\n                                  variant=\"outline\"\r\n                                  size=\"sm\"\r\n                                  onClick={() => handleDelete(checker.id)}\r\n                                  className=\"text-destructive hover:text-destructive text-xs px-2 py-1 h-7\"\r\n                                >\r\n                                  Delete\r\n                                </Button>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-6 md:py-12 text-muted-foreground text-sm md:text-base\">\r\n                    No result checkers found. Use \"Bulk Add\" to add inventory.\r\n                  </div>\r\n                )}\r\n                {filteredCheckers && filteredCheckers.length > 20 && (\r\n                  <div className=\"text-center py-2 md:py-4 text-xs md:text-sm text-muted-foreground\">\r\n                    Showing 20 of {filteredCheckers.length} items\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BulkAddForm({\r\n  onSubmit,\r\n  isLoading,\r\n}: {\r\n  onSubmit: (data: { type: string; year: number; basePrice: string; costPrice: string; checkers: string; file?: File }) => void;\r\n  isLoading: boolean;\r\n}) {\r\n  const currentYear = new Date().getFullYear();\r\n  const [formData, setFormData] = useState({\r\n    type: \"bece\",\r\n    year: currentYear.toString(),\r\n    basePrice: \"\",\r\n    costPrice: \"\",\r\n    checkers: \"\",\r\n  });\r\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSubmit({\r\n      ...formData,\r\n      year: parseInt(formData.year),\r\n      file: uploadedFile || undefined,\r\n    });\r\n  };\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setUploadedFile(file);\r\n      // Clear manual input when file is selected\r\n      setFormData({ ...formData, checkers: \"\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-white\">Type</Label>\r\n          <Select\r\n            value={formData.type}\r\n            onValueChange={(value) => setFormData({ ...formData, type: value })}\r\n          >\r\n            <SelectTrigger data-testid=\"select-checker-type\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {RESULT_CHECKER_TYPES.map((t) => (\r\n                <SelectItem key={t.id} value={t.id}>\r\n                  {t.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-white\">Year</Label>\r\n          <Select\r\n            value={formData.year}\r\n            onValueChange={(value) => setFormData({ ...formData, year: value })}\r\n          >\r\n            <SelectTrigger data-testid=\"select-checker-year\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {[currentYear, currentYear + 1, currentYear - 1].map((y) => (\r\n                <SelectItem key={y} value={y.toString()}>\r\n                  {y}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"costPrice\" className=\"text-white\">Cost Price (GHS)</Label>\r\n          <Input\r\n            id=\"costPrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.costPrice}\r\n            onChange={(e) => setFormData({ ...formData, costPrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            required\r\n            data-testid=\"input-checker-cost\"\r\n          />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"basePrice\" className=\"text-white\">Selling Price (GHS)</Label>\r\n          <Input\r\n            id=\"basePrice\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.basePrice}\r\n            onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n            placeholder=\"0.00\"\r\n            required\r\n            data-testid=\"input-checker-price\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"checkers\" className=\"text-white\">PIN/Serial Pairs</Label>\r\n        <Textarea\r\n          id=\"checkers\"\r\n          value={formData.checkers}\r\n          onChange={(e) => setFormData({ ...formData, checkers: e.target.value })}\r\n          placeholder=\"Enter one per line in format: SERIAL,PIN&#10;e.g.,&#10;ABC123456,1234567890&#10;DEF789012,0987654321\"\r\n          rows={8}\r\n          required={!uploadedFile}\r\n          disabled={!!uploadedFile}\r\n          data-testid=\"input-checker-pairs\"\r\n        />\r\n        <p className=\"text-xs text-gray-300\">\r\n          Format: SERIAL,PIN (one per line) - OR upload a CSV file below\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label htmlFor=\"file\" className=\"text-white\">Upload CSV File (Optional)</Label>\r\n        <Input\r\n          id=\"file\"\r\n          type=\"file\"\r\n          accept=\".csv\"\r\n          onChange={handleFileChange}\r\n          data-testid=\"input-checker-file\"\r\n        />\r\n        <p className=\"text-xs text-gray-300\">\r\n          CSV format: SERIAL,PIN (one pair per line, no headers)\r\n        </p>\r\n        {uploadedFile && (\r\n          <p className=\"text-sm text-green-400\">\r\n            File selected: {uploadedFile.name}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      <Button type=\"submit\" className=\"w-full\" disabled={isLoading} data-testid=\"button-submit-checkers\">\r\n        {isLoading ? \"Adding...\" : \"Add Result Checkers\"}\r\n      </Button>\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction EditForm({\r\n  checker,\r\n  onSubmit,\r\n  isLoading,\r\n}: {\r\n  checker: ResultChecker;\r\n  onSubmit: (updates: Partial<ResultChecker>) => void;\r\n  isLoading: boolean;\r\n}) {\r\n  const [formData, setFormData] = useState({\r\n    type: checker.type,\r\n    year: checker.year.toString(),\r\n    serialNumber: checker.serialNumber,\r\n    pin: checker.pin,\r\n    basePrice: checker.basePrice,\r\n  });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    onSubmit({\r\n      type: formData.type,\r\n      year: parseInt(formData.year),\r\n      serialNumber: formData.serialNumber,\r\n      pin: formData.pin,\r\n      basePrice: formData.basePrice,\r\n    });\r\n  };\r\n\r\n  const currentYear = new Date().getFullYear();\r\n  const years = [currentYear, currentYear - 1, currentYear - 2];\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div>\r\n          <Label>Type</Label>\r\n          <Select value={formData.type} onValueChange={(value) => setFormData({ ...formData, type: value })}>\r\n            <SelectTrigger>\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {RESULT_CHECKER_TYPES.map((t) => (\r\n                <SelectItem key={t.id} value={t.id}>\r\n                  {t.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n        <div>\r\n          <Label>Year</Label>\r\n          <Select value={formData.year} onValueChange={(value) => setFormData({ ...formData, year: value })}>\r\n            <SelectTrigger>\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {years.map((y) => (\r\n                <SelectItem key={y} value={y.toString()}>\r\n                  {y}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <Label htmlFor=\"edit-serial\">Serial Number</Label>\r\n        <Input\r\n          id=\"edit-serial\"\r\n          value={formData.serialNumber}\r\n          onChange={(e) => setFormData({ ...formData, serialNumber: e.target.value })}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <Label htmlFor=\"edit-pin\">PIN</Label>\r\n        <Input\r\n          id=\"edit-pin\"\r\n          value={formData.pin}\r\n          onChange={(e) => setFormData({ ...formData, pin: e.target.value })}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4\">\r\n        <div>\r\n          <Label htmlFor=\"edit-base-price\">Base Price</Label>\r\n          <Input\r\n            id=\"edit-base-price\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={formData.basePrice}\r\n            onChange={(e) => setFormData({ ...formData, basePrice: e.target.value })}\r\n            required\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\r\n        {isLoading ? \"Updating...\" : \"Update Result Checker\"}\r\n      </Button>\r\n    </form>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatusBadge } from \"@/components/ui/status-badge\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { formatCurrency, formatDate, NETWORKS } from \"@/lib/constants\";\r\nimport { BarChart3, Search, Menu, Layers, Download, Edit, ChevronUp, ChevronDown, ChevronRight, ChevronLeft, RotateCw } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport type { Transaction } from \"@shared/schema\";\r\n\r\ninterface SortableTableHeadProps {\r\n  field: string;\r\n  children: React.ReactNode;\r\n  sortField: string;\r\n  sortDirection: \"asc\" | \"desc\";\r\n  onSort: (field: string) => void;\r\n}\r\n\r\nfunction SortableTableHead({ field, children, sortField, sortDirection, onSort }: SortableTableHeadProps) {\r\n  return (\r\n    <TableHead\r\n      className=\"cursor-pointer select-none hover:bg-muted/50 transition-colors\"\r\n      onClick={() => onSort(field)}\r\n    >\r\n      <div className=\"flex items-center gap-1\">\r\n        {children}\r\n        {sortField === field && (\r\n          sortDirection === \"asc\" ? (\r\n            <ChevronUp className=\"h-4 w-4\" />\r\n          ) : (\r\n            <ChevronDown className=\"h-4 w-4\" />\r\n          )\r\n        )}\r\n      </div>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nexport default function AdminTransactions() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [typeFilter, setTypeFilter] = useState<string>(\"all\");\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [editingDeliveryStatus, setEditingDeliveryStatus] = useState<string | null>(null);\r\n  const [deliveryStatusValue, setDeliveryStatusValue] = useState<string>(\"\");\r\n  const [exportPaymentStatus, setExportPaymentStatus] = useState<string>(\"all\");\r\n  const [sortField, setSortField] = useState<string>(\"createdAt\");\r\n  const [sortDirection, setSortDirection] = useState<\"asc\" | \"desc\">(\"desc\");\r\n  const [expandedResultCheckers, setExpandedResultCheckers] = useState<Set<string>>(new Set());\r\n  const [resultCheckersData, setResultCheckersData] = useState<Record<string, any>>({});\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const ITEMS_PER_PAGE = 50;\r\n\r\n  const { data: transactions, isLoading, refetch } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/admin/transactions\"],\r\n    refetchInterval: 15000, // Refetch every 15 seconds for transactions\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  // Update delivery status mutation\r\n  const updateDeliveryStatusMutation = useMutation({\r\n    mutationFn: async ({ transactionId, deliveryStatus }: { transactionId: string; deliveryStatus: string }) => {\r\n      return apiRequest(\"PATCH\", `/api/admin/transactions/${transactionId}/delivery-status`, { deliveryStatus });\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/transactions\"] });\r\n      toast({ title: \"Delivery status updated successfully\" });\r\n      setEditingDeliveryStatus(null);\r\n      setDeliveryStatusValue(\"\");\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to update delivery status\", description: error?.message || 'Unknown error', variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Refresh single order status from SkyTech\r\n  const refreshOrderStatusMutation = useMutation({\r\n    mutationFn: async (transactionId: string) => {\r\n      return apiRequest(\"POST\", `/api/admin/refresh-order-status/${transactionId}`, {});\r\n    },\r\n    onSuccess: (data) => {\r\n      refetch(); // Refetch transactions list\r\n      toast({ title: \"✅ Order status updated\", description: data.message });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to refresh order status\", description: error?.message || 'Unknown error', variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Toggle result checker expansion and fetch data if needed\r\n  const toggleResultCheckerExpand = async (transactionId: string) => {\r\n    const newExpanded = new Set(expandedResultCheckers);\r\n\r\n    if (newExpanded.has(transactionId)) {\r\n      newExpanded.delete(transactionId);\r\n    } else {\r\n      newExpanded.add(transactionId);\r\n\r\n      // Fetch result checker data if not already loaded\r\n      if (!resultCheckersData[transactionId]) {\r\n        try {\r\n          const data = await apiRequest(\"GET\", `/api/admin/result-checker/${transactionId}`);\r\n          setResultCheckersData(prev => ({\r\n            ...prev,\r\n            [transactionId]: data\r\n          }));\r\n        } catch (error: any) {\r\n          toast({ \r\n            title: \"Failed to fetch result checker details\", \r\n            description: error?.message || 'Unknown error', \r\n            variant: \"destructive\" \r\n          });\r\n          return; // Don't expand if fetch failed\r\n        }\r\n      }\r\n    }\r\n\r\n    setExpandedResultCheckers(newExpanded);\r\n  };\r\n\r\n  // Export transactions mutation\r\n  const exportTransactionsMutation = useMutation({\r\n    mutationFn: async () => {\r\n      const params = new URLSearchParams();\r\n      if (exportPaymentStatus !== 'all') {\r\n        params.append('paymentStatus', exportPaymentStatus);\r\n      }\r\n      const response = await apiRequest(\"GET\", `/api/admin/transactions/export?${params.toString()}`);\r\n      return response;\r\n    },\r\n    onSuccess: (data) => {\r\n      // Convert to CSV and download\r\n      if (data && Array.isArray(data)) {\r\n        const csvContent = convertToCSV(data);\r\n        const statusLabel = exportPaymentStatus === 'all' ? 'all' : exportPaymentStatus;\r\n        downloadCSV(csvContent, `transactions-${statusLabel}-${new Date().toISOString().split('T')[0]}.csv`);\r\n        toast({ title: \"Transactions exported successfully\" });\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to export transactions\", description: error?.message || 'Unknown error', variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const filteredTransactions = transactions?.filter((tx) => {\r\n    if (statusFilter !== \"all\" && tx.status !== statusFilter) return false;\r\n    if (typeFilter !== \"all\" && tx.type !== typeFilter) return false;\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      if (\r\n        !tx.id.toLowerCase().includes(term) &&\r\n        !tx.productName.toLowerCase().includes(term) &&\r\n        (!tx.customerPhone || !tx.customerPhone.includes(term))\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  });\r\n\r\n  const stats = {\r\n    total: transactions?.length || 0,\r\n    completed: transactions?.filter((t) => t.status === \"completed\").length || 0,\r\n    processing: transactions?.filter((t) => t.status === \"processing\").length || 0,\r\n    failed: transactions?.filter((t) => t.status === \"failed\").length || 0,\r\n  };\r\n\r\n  // Sort handler\r\n  const handleSort = (field: string) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === \"asc\" ? \"desc\" : \"asc\");\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection(\"asc\");\r\n    }\r\n  };\r\n\r\n  // Sort transactions\r\n  const sortedTransactions = filteredTransactions?.sort((a, b) => {\r\n    let aValue: any = a[sortField as keyof Transaction];\r\n    let bValue: any = b[sortField as keyof Transaction];\r\n\r\n    // Handle special cases\r\n    if (sortField === \"amount\" || sortField === \"profit\") {\r\n      aValue = parseFloat(aValue);\r\n      bValue = parseFloat(bValue);\r\n    } else if (sortField === \"createdAt\") {\r\n      aValue = new Date(aValue).getTime();\r\n      bValue = new Date(bValue).getTime();\r\n    } else if (sortField === \"productName\") {\r\n      aValue = aValue.toLowerCase();\r\n      bValue = bValue.toLowerCase();\r\n    } else if (sortField === \"customerPhone\") {\r\n      aValue = aValue.toLowerCase();\r\n      bValue = bValue.toLowerCase();\r\n    }\r\n\r\n    if (aValue < bValue) return sortDirection === \"asc\" ? -1 : 1;\r\n    if (aValue > bValue) return sortDirection === \"asc\" ? 1 : -1;\r\n    return 0;\r\n  });\r\n\r\n  // Pagination\r\n  const totalPages = Math.ceil((sortedTransactions?.length || 0) / ITEMS_PER_PAGE);\r\n  const paginatedTransactions = sortedTransactions?.slice(\r\n    (currentPage - 1) * ITEMS_PER_PAGE,\r\n    currentPage * ITEMS_PER_PAGE\r\n  );\r\n\r\n  // Helper functions\r\n  const convertToCSV = (data: any[]) => {\r\n    if (data.length === 0) return '';\r\n\r\n    const headers = Object.keys(data[0]);\r\n    const csvRows = [];\r\n\r\n    // Add headers\r\n    csvRows.push(headers.join(','));\r\n\r\n    // Add data rows\r\n    for (const row of data) {\r\n      const values = headers.map(header => {\r\n        const value = row[header];\r\n        // Handle arrays and objects\r\n        if (Array.isArray(value)) {\r\n          return `\"${value.map(item => \r\n            typeof item === 'object' ? JSON.stringify(item) : item\r\n          ).join('; ')}\"`;\r\n        }\r\n        if (typeof value === 'object' && value !== null) {\r\n          return `\"${JSON.stringify(value)}\"`;\r\n        }\r\n        // Escape quotes and wrap in quotes if contains comma\r\n        const stringValue = String(value || '');\r\n        if (stringValue.includes(',') || stringValue.includes('\"')) {\r\n          return `\"${stringValue.replace(/\"/g, '\"\"')}\"`;\r\n        }\r\n        return stringValue;\r\n      });\r\n      csvRows.push(values.join(','));\r\n    }\r\n\r\n    return csvRows.join('\\n');\r\n  };\r\n\r\n  const downloadCSV = (csvContent: string, filename: string) => {\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', filename);\r\n    link.style.visibility = 'hidden';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const handleEditDeliveryStatus = (transactionId: string, currentStatus: string) => {\r\n    setEditingDeliveryStatus(transactionId);\r\n    setDeliveryStatusValue(currentStatus || \"pending\");\r\n  };\r\n\r\n  const handleSaveDeliveryStatus = (transactionId: string) => {\r\n    if (deliveryStatusValue) {\r\n      updateDeliveryStatusMutation.mutate({ transactionId, deliveryStatus: deliveryStatusValue });\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditingDeliveryStatus(null);\r\n    setDeliveryStatusValue(\"\");\r\n  };\r\n\r\n  // Helper to extract SkyTech status from API response for real-time tracking\r\n  const getSkytechStatus = (transaction: Transaction): string | null => {\r\n    try {\r\n      if (!transaction.apiResponse) return null;\r\n      const apiResponse = JSON.parse(transaction.apiResponse as string);\r\n      \r\n      // Check for latest status check\r\n      if (apiResponse.skytechStatus?.status) {\r\n        return apiResponse.skytechStatus.status;\r\n      }\r\n      \r\n      // Check for initial response\r\n      if (apiResponse.results && apiResponse.results[0]?.status) {\r\n        return apiResponse.results[0].status;\r\n      }\r\n      \r\n      return null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Transactions</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4\">\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold\">{stats.total}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Total Transactions</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold text-green-600\">{stats.completed}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Completed</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold text-orange-600\">{stats.pending}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Pending</p>\r\n                </CardContent>\r\n              </Card>\r\n              <Card className=\"text-sm md:text-base\">\r\n                <CardContent className=\"pt-4 md:pt-6\">\r\n                  <div className=\"text-xl md:text-2xl font-bold text-red-600\">{stats.failed}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Failed</p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            <Card className=\"md:col-span-2 lg:col-span-3\">\r\n              <CardHeader className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-3 pb-3 md:pb-6\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <CardTitle className=\"flex items-center gap-2 text-base md:text-lg\">\r\n                    <BarChart3 className=\"h-4 w-4 md:h-5 md:w-5\" />\r\n                    <span className=\"truncate\">All Transactions</span>\r\n                  </CardTitle>\r\n                  <CardDescription className=\"text-sm md:text-base\">\r\n                    View and track all customer orders\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex flex-col sm:flex-row flex-wrap gap-2 w-full lg:w-auto\">\r\n                  <div className=\"flex gap-2\">\r\n                    <Select value={exportPaymentStatus} onValueChange={setExportPaymentStatus}>\r\n                      <SelectTrigger className=\"w-full sm:w-36 md:w-40 text-xs md:text-sm\" data-testid=\"export-payment-status\">\r\n                        <SelectValue placeholder=\"Export Filter\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Payments</SelectItem>\r\n                        <SelectItem value=\"paid\">Paid Only</SelectItem>\r\n                        <SelectItem value=\"processing\">Processing Only</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Button\r\n                      onClick={() => exportTransactionsMutation.mutate()}\r\n                      disabled={exportTransactionsMutation.isPending}\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"gap-2 text-xs px-2 py-1 h-8\"\r\n                    >\r\n                      <Download className=\"h-3 w-3 md:h-4 md:w-4\" />\r\n                      {exportTransactionsMutation.isPending ? \"Exporting...\" : \"Export CSV\"}\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <div className=\"relative flex-1 sm:flex-initial\">\r\n                      <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                      <Input\r\n                        placeholder=\"Search...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"pl-9 w-full sm:w-48 text-sm\"\r\n                        data-testid=\"input-search\"\r\n                      />\r\n                    </div>\r\n                    <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-32 text-xs md:text-sm\" data-testid=\"filter-status\">\r\n                        <SelectValue placeholder=\"Status\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Status</SelectItem>\r\n                        <SelectItem value=\"completed\">Completed</SelectItem>\r\n                        <SelectItem value=\"processing\">Processing</SelectItem>\r\n                        <SelectItem value=\"failed\">Failed</SelectItem>\r\n                        <SelectItem value=\"refunded\">Refunded</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Select value={typeFilter} onValueChange={setTypeFilter}>\r\n                      <SelectTrigger className=\"w-full sm:w-36 md:w-40 text-xs md:text-sm\" data-testid=\"filter-type\">\r\n                        <SelectValue placeholder=\"Type\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"all\">All Types</SelectItem>\r\n                        <SelectItem value=\"data_bundle\">Data Bundles</SelectItem>\r\n                        <SelectItem value=\"result_checker\">Result Checkers</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent className=\"px-3 md:px-6\">\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={5} />\r\n                ) : sortedTransactions && sortedTransactions.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"overflow-x-auto\">\r\n                      <Table>\r\n                        <TableHeader>\r\n                          <TableRow>\r\n                            <TableHead className=\"text-xs md:text-sm\">Order ID</TableHead>\r\n                            <SortableTableHead field=\"productName\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                              <span className=\"text-xs md:text-sm\">Product</span>\r\n                            </SortableTableHead>\r\n                            <TableHead className=\"hidden sm:table-cell text-xs md:text-sm\">Network</TableHead>\r\n                            <SortableTableHead field=\"amount\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                              <span className=\"text-xs md:text-sm\">Amount</span>\r\n                            </SortableTableHead>\r\n                            <SortableTableHead field=\"profit\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                              <span className=\"text-xs md:text-sm\">Profit</span>\r\n                            </SortableTableHead>\r\n                            <TableHead className=\"hidden lg:table-cell text-xs md:text-sm\">Customer</TableHead>\r\n                            <TableHead className=\"hidden xl:table-cell text-xs md:text-sm\">Payment</TableHead>\r\n                            <TableHead className=\"text-xs md:text-sm\">Status</TableHead>\r\n                            <TableHead className=\"hidden md:table-cell text-xs md:text-sm\">Delivery</TableHead>\r\n                            <SortableTableHead field=\"createdAt\" sortField={sortField} sortDirection={sortDirection} onSort={handleSort}>\r\n                              <span className=\"text-xs md:text-sm\">Date</span>\r\n                            </SortableTableHead>\r\n                            <TableHead className=\"text-xs md:text-sm\">Actions</TableHead>\r\n                          </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                          {paginatedTransactions?.map((tx) => {\r\n                          let network = NETWORKS.find((n) => n.id === tx.network);\r\n                          const isBulkOrder = (tx as any).isBulkOrder;\r\n                          const phoneNumbersRaw = (tx as any).phoneNumbers;\r\n                          const phoneNumbers = phoneNumbersRaw ? (typeof phoneNumbersRaw === 'string' ? (() => { try { return JSON.parse(phoneNumbersRaw); } catch (e) { console.error('Failed to parse phoneNumbers:', e, phoneNumbersRaw); return []; } })() : phoneNumbersRaw) as Array<{phone: string, bundleName: string, dataAmount: string}> : undefined;\r\n                          const deliveryStatus = (tx as any).deliveryStatus || \"pending\";\r\n                          \r\n                          // For bulk orders, if network is not found, try to extract from bundle name\r\n                          if (!network && isBulkOrder && phoneNumbers && phoneNumbers.length > 0) {\r\n                            const bundleName = phoneNumbers[0].bundleName;\r\n                            if (bundleName) {\r\n                              const lower = bundleName.toLowerCase();\r\n                              if (lower.includes('mtn')) {\r\n                                network = NETWORKS.find(n => n.id === 'mtn');\r\n                              } else if (lower.includes('telecel')) {\r\n                                network = NETWORKS.find(n => n.id === 'telecel');\r\n                              } else if (lower.includes('bigtime')) {\r\n                                network = NETWORKS.find(n => n.id === 'at_bigtime');\r\n                              } else if (lower.includes('ishare')) {\r\n                                network = NETWORKS.find(n => n.id === 'at_ishare');\r\n                              }\r\n                            }\r\n                          }\r\n                          \r\n                          const isResultChecker = tx.type === \"result_checker\";\r\n                          const isExpanded = expandedResultCheckers.has(tx.id);\r\n                          const checkerData = resultCheckersData[tx.id];\r\n                          const quantity = (tx as any).quantity || 1;\r\n                          \r\n                          return (\r\n                            <>\r\n                            <TableRow key={tx.id} data-testid={`row-transaction-${tx.id}`}>\r\n                              <TableCell className=\"font-mono text-xs md:text-sm\">{tx.id.slice(0,8)}</TableCell>\r\n                              <TableCell className=\"max-w-[150px] md:max-w-[200px]\">\r\n                                <div className=\"font-medium truncate text-xs md:text-sm\">{tx.productName}</div>\r\n                                <div className=\"flex gap-1 mt-1 flex-wrap\">\r\n                                  <Badge variant=\"outline\" className=\"text-xs px-1 py-0\">\r\n                                    {tx.type === \"data_bundle\" ? \"Data\" : \"Result\"}\r\n                                  </Badge>\r\n                                  {(isBulkOrder || (isResultChecker && quantity > 1)) && (\r\n                                    <Badge variant=\"secondary\" className=\"text-xs px-1 py-0 flex items-center gap-1\">\r\n                                      <Layers className=\"h-2.5 w-2.5\" />\r\n                                      {phoneNumbers?.length || quantity}\r\n                                    </Badge>\r\n                                  )}\r\n                                </div>\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden sm:table-cell\">\r\n                                {network ? (\r\n                                  <Badge\r\n                                    style={{\r\n                                      backgroundColor: network.color,\r\n                                      color: network.textColor,\r\n                                    }}\r\n                                    className=\"text-xs px-1 py-0\"\r\n                                  >\r\n                                    {network.name}\r\n                                  </Badge>\r\n                                ) : (\r\n                                  <span className=\"text-muted-foreground\">-</span>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"font-medium tabular-nums text-xs md:text-sm\">\r\n                                <div>{formatCurrency(tx.amount)}</div>\r\n                                {((isBulkOrder && phoneNumbers) || (isResultChecker && quantity > 1)) && (\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {formatCurrency(parseFloat(tx.amount) / (phoneNumbers?.length || quantity))} each\r\n                                  </div>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"text-green-600 tabular-nums text-xs md:text-sm\">\r\n                                {formatCurrency(tx.profit)}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden lg:table-cell text-muted-foreground text-xs md:text-sm\">\r\n                                {isBulkOrder && phoneNumbers ? (\r\n                                  <div className=\"text-xs\">\r\n                                    <div className=\"font-semibold\">\r\n                                      {phoneNumbers.length} items: {phoneNumbers.map(p => p.dataAmount).join(', ')}\r\n                                    </div>\r\n                                    <div className=\"text-muted-foreground truncate max-w-[80px] md:max-w-[120px]\">\r\n                                      {phoneNumbers[0]?.phone || 'Unknown'}\r\n                                    </div>\r\n                                  </div>\r\n                                ) : (\r\n                                  tx.customerPhone\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden xl:table-cell\">\r\n                                <Badge\r\n                                  variant={\r\n                                    (tx as any).paymentStatus === \"paid\" ? \"default\" :\r\n                                    (tx as any).paymentStatus === \"failed\" ? \"destructive\" :\r\n                                    (tx as any).paymentStatus === \"cancelled\" ? \"outline\" :\r\n                                    \"secondary\"\r\n                                  }\r\n                                  className=\"text-xs\"\r\n                                >\r\n                                  {(tx as any).paymentStatus || \"pending\"}\r\n                                </Badge>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <StatusBadge status={tx.status} />\r\n                              </TableCell>\r\n                              <TableCell className=\"hidden md:table-cell\">\r\n                                {editingDeliveryStatus === tx.id ? (\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <Select value={deliveryStatusValue} onValueChange={setDeliveryStatusValue}>\r\n                                      <SelectTrigger className=\"w-24 md:w-32 h-7 md:h-8 text-xs\">\r\n                                        <SelectValue />\r\n                                      </SelectTrigger>\r\n                                      <SelectContent>\r\n                                        <SelectItem value=\"processing\">Processing</SelectItem>\r\n                                        <SelectItem value=\"delivered\">Delivered</SelectItem>\r\n                                        <SelectItem value=\"failed\">Failed</SelectItem>\r\n                                      </SelectContent>\r\n                                    </Select>\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      onClick={() => handleSaveDeliveryStatus(tx.id)}\r\n                                      disabled={updateDeliveryStatusMutation.isPending}\r\n                                      className=\"h-7 px-2 text-xs\"\r\n                                    >\r\n                                      {updateDeliveryStatusMutation.isPending ? \"...\" : \"Save\"}\r\n                                    </Button>\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      variant=\"outline\"\r\n                                      onClick={handleCancelEdit}\r\n                                      className=\"h-7 px-2 text-xs\"\r\n                                    >\r\n                                      Cancel\r\n                                    </Button>\r\n                                  </div>\r\n                                ) : (\r\n                                  <div className=\"flex flex-col gap-1\">\r\n                                    {(() => {\r\n                                      const skytechStatus = getSkytechStatus(tx);\r\n                                      const statusToDisplay = skytechStatus || deliveryStatus;\r\n                                      \r\n                                      // Determine badge variant based on SkyTech status\r\n                                      let variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\" = \"outline\";\r\n                                      let isProcessing = false;\r\n                                      \r\n                                      if (skytechStatus) {\r\n                                        const status = skytechStatus.toLowerCase();\r\n                                        if (status === 'completed' || status === 'delivered' || status === 'success') {\r\n                                          variant = \"default\";\r\n                                        } else if (status === 'processing' || status === 'pending' || status === 'queued') {\r\n                                          variant = \"secondary\";\r\n                                          isProcessing = true;\r\n                                        } else if (status === 'failed' || status === 'error') {\r\n                                          variant = \"destructive\";\r\n                                        }\r\n                                      } else {\r\n                                        // Fallback to internal delivery status styling\r\n                                        if (deliveryStatus === \"delivered\") {\r\n                                          variant = \"default\";\r\n                                        } else if (deliveryStatus === \"processing\") {\r\n                                          variant = \"secondary\";\r\n                                          isProcessing = true;\r\n                                        } else if (deliveryStatus === \"failed\") {\r\n                                          variant = \"destructive\";\r\n                                        }\r\n                                      }\r\n\r\n                                      return (\r\n                                        <>\r\n                                          <Badge\r\n                                            variant={variant}\r\n                                            className={`cursor-pointer text-xs ${\r\n                                              isProcessing ? \"bg-blue-500 text-white hover:bg-blue-600 animate-pulse\" : \"\"\r\n                                            }`}\r\n                                            onClick={() => handleEditDeliveryStatus(tx.id, deliveryStatus)}\r\n                                            title={skytechStatus ? `SkyTech: ${skytechStatus} | Internal: ${deliveryStatus}` : `Click to change delivery status (Current: ${deliveryStatus})`}\r\n                                          >\r\n                                            {isProcessing ? \"🔄 Processing\" : statusToDisplay.charAt(0).toUpperCase() + statusToDisplay.slice(1)}\r\n                                          </Badge>\r\n                                          {skytechStatus && (\r\n                                            <span className=\"text-[10px] text-muted-foreground\">\r\n                                              From SkyTech\r\n                                            </span>\r\n                                          )}\r\n                                          <span className=\"text-[10px] text-muted-foreground\">\r\n                                            {formatDate(tx.createdAt)}\r\n                                          </span>\r\n                                        </>\r\n                                      );\r\n                                    })()}\r\n                                  </div>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell className=\"text-muted-foreground text-xs md:text-sm\">\r\n                                {formatDate(tx.createdAt)}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <div className=\"flex gap-1\">\r\n                                  {isResultChecker && quantity > 1 && (\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      variant=\"ghost\"\r\n                                      onClick={() => toggleResultCheckerExpand(tx.id)}\r\n                                      className=\"h-6 w-6 p-0\"\r\n                                      title={isExpanded ? \"Collapse PINs\" : \"View all PINs\"}\r\n                                    >\r\n                                      <ChevronRight className={`h-4 w-4 transition-transform ${isExpanded ? 'rotate-90' : ''}`} />\r\n                                    </Button>\r\n                                  )}\r\n                                  {tx.type === \"data_bundle\" && (tx.status === \"pending\" || tx.status === \"confirmed\") && (\r\n                                    <Button\r\n                                      size=\"sm\"\r\n                                      variant=\"ghost\"\r\n                                      onClick={() => refreshOrderStatusMutation.mutate(tx.id)}\r\n                                      disabled={refreshOrderStatusMutation.isPending}\r\n                                      className=\"h-6 w-6 p-0\"\r\n                                      title=\"Refresh SkyTech status\"\r\n                                    >\r\n                                      <RotateCw className={`h-3 w-3 ${refreshOrderStatusMutation.isPending ? 'animate-spin' : ''}`} />\r\n                                    </Button>\r\n                                  )}\r\n                                  <Button\r\n                                    size=\"sm\"\r\n                                    variant=\"ghost\"\r\n                                    onClick={() => handleEditDeliveryStatus(tx.id, deliveryStatus)}\r\n                                    disabled={editingDeliveryStatus === tx.id}\r\n                                    className=\"h-6 w-6 p-0\"\r\n                                  >\r\n                                    <Edit className=\"h-3 w-3\" />\r\n                                  </Button>\r\n                                </div>\r\n                              </TableCell>\r\n                            </TableRow>\r\n\r\n                            {/* Expanded row for result checker details */}\r\n                            {isResultChecker && isExpanded && checkerData && (\r\n                              <TableRow key={`${tx.id}-expanded-details`}>\r\n                                <TableCell colSpan={11} className=\"bg-muted/30 p-4\">\r\n                                  <div className=\"space-y-3\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                      <h4 className=\"text-sm font-semibold\">Result Checker PINs ({checkerData.checkers?.length || 0})</h4>\r\n                                      <div className=\"text-xs text-muted-foreground\">\r\n                                        Customer: {checkerData.transaction?.customerPhone || 'N/A'}\r\n                                      </div>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n                                      {checkerData.checkers?.map((checker: any, index: number) => (\r\n                                        <div \r\n                                          key={checker.id} \r\n                                          className=\"p-3 rounded-lg border bg-card text-card-foreground\"\r\n                                        >\r\n                                          <div className=\"flex items-center justify-between mb-2\">\r\n                                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                                              PIN #{index + 1}\r\n                                            </Badge>\r\n                                            <span className=\"text-xs text-muted-foreground\">\r\n                                              {checker.type.toUpperCase()} {checker.year}\r\n                                            </span>\r\n                                          </div>\r\n                                          <div className=\"space-y-1\">\r\n                                            <div className=\"flex flex-col\">\r\n                                              <span className=\"text-xs text-muted-foreground\">Serial Number:</span>\r\n                                              <span className=\"font-mono text-sm font-medium\">{checker.serialNumber}</span>\r\n                                            </div>\r\n                                            <div className=\"flex flex-col\">\r\n                                              <span className=\"text-xs text-muted-foreground\">PIN:</span>\r\n                                              <span className=\"font-mono text-sm font-medium\">{checker.pin}</span>\r\n                                            </div>\r\n                                            {checker.soldAt && (\r\n                                              <div className=\"text-xs text-muted-foreground mt-2\">\r\n                                                Sold: {formatDate(checker.soldAt)}\r\n                                              </div>\r\n                                            )}\r\n                                          </div>\r\n                                        </div>\r\n                                      ))}\r\n                                    </div>\r\n                                  </div>\r\n                                </TableCell>\r\n                              </TableRow>\r\n                            )}\r\n                            </>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                    </div>\r\n                    \r\n                    {/* Pagination Controls */}\r\n                    <div className=\"flex flex-col gap-3 pt-4 sm:flex-row sm:items-center sm:justify-between\">\r\n                      <div className=\"text-xs text-muted-foreground leading-5 sm:text-sm sm:text-left text-center\">\r\n                        Showing {Math.min((currentPage - 1) * ITEMS_PER_PAGE + 1, sortedTransactions?.length || 0)} to {Math.min(currentPage * ITEMS_PER_PAGE, sortedTransactions?.length || 0)} of {sortedTransactions?.length || 0} transactions\r\n                      </div>\r\n                      <div className=\"flex flex-wrap items-center gap-2 justify-start sm:justify-end\">\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\r\n                          disabled={currentPage === 1}\r\n                          className=\"gap-1\"\r\n                        >\r\n                          <ChevronLeft className=\"h-4 w-4\" />\r\n                          Previous\r\n                        </Button>\r\n                        \r\n                        <div className=\"flex flex-wrap items-center gap-1\">\r\n                          <>\r\n                            {(() => {\r\n                              const maxVisible = 5;\r\n                              let start = Math.max(1, currentPage - Math.floor(maxVisible / 2));\r\n                              let end = Math.min(totalPages, start + maxVisible - 1);\r\n                              \r\n                              if (end - start + 1 < maxVisible) {\r\n                                start = Math.max(1, end - maxVisible + 1);\r\n                              }\r\n                              \r\n                              return (\r\n                                <>\r\n                                  {start > 1 && (\r\n                                    <>\r\n                                      <Button key=\"first\" variant=\"outline\" size=\"sm\" onClick={() => setCurrentPage(1)} className=\"h-8 w-8 p-0\">\r\n                                        1\r\n                                      </Button>\r\n                                      {start > 2 && <span key=\"ellipsis-start\" className=\"px-1\">...</span>}\r\n                                    </>\r\n                                  )}\r\n                                  \r\n                                  {Array.from({ length: end - start + 1 }, (_, idx) => {\r\n                                    const i = start + idx;\r\n                                    return (\r\n                                      <Button\r\n                                        key={`page-${i}`}\r\n                                        variant={currentPage === i ? \"default\" : \"outline\"}\r\n                                        size=\"sm\"\r\n                                        onClick={() => setCurrentPage(i)}\r\n                                        className=\"h-8 w-8 p-0\"\r\n                                      >\r\n                                        {i}\r\n                                      </Button>\r\n                                    );\r\n                                  })}\r\n                                  \r\n                                  {end < totalPages && (\r\n                                    <>\r\n                                      {end < totalPages - 1 && <span key=\"ellipsis-end\" className=\"px-1\">...</span>}\r\n                                      <Button key=\"last\" variant=\"outline\" size=\"sm\" onClick={() => setCurrentPage(totalPages)} className=\"h-8 w-8 p-0\">\r\n                                        {totalPages}\r\n                                      </Button>\r\n                                    </>\r\n                                  )}\r\n                                </>\r\n                              );\r\n                            })()}\r\n                          </>\r\n                        </div>\r\n                        \r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\r\n                          disabled={currentPage === totalPages}\r\n                          className=\"gap-1\"\r\n                        >\r\n                          Next\r\n                          <ChevronRight className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No transactions found matching your criteria.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { UserCircle, Trash2, ShoppingBag, Menu, Search, Download } from \"lucide-react\";\r\n\r\ninterface UserWithLastPurchase {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  phone: string | null;\r\n  role: string;\r\n  createdAt: string;\r\n  lastPurchase: {\r\n    date: string;\r\n    amount: number;\r\n    productType: string;\r\n  } | null;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n}\r\n\r\nexport default function AdminUsers() {\r\n  const { toast } = useToast();\r\n  const [roleFilter, setRoleFilter] = useState<string>(\"all\");\r\n  const [searchQuery, setSearchQuery] = useState<string>(\"\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [deleteUserId, setDeleteUserId] = useState<string | null>(null);\r\n  const [deleteInactiveDays, setDeleteInactiveDays] = useState<number | null>(null);\r\n  const [showDeleteInactiveDialog, setShowDeleteInactiveDialog] = useState(false);\r\n  const [editedRoles, setEditedRoles] = useState<Record<string, string>>({});\r\n  const [exportMode, setExportMode] = useState<string>(\"phone\");\r\n\r\n  const { data: users, isLoading } = useQuery<UserWithLastPurchase[]>({\r\n    queryKey: [\"/api/admin/users\"],\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/users/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\r\n      toast({ title: \"✅ User deleted successfully\" });\r\n      setDeleteUserId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to delete user\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const deleteInactiveMutation = useMutation({\r\n    mutationFn: (days: number) => apiRequest(\"DELETE\", `/api/admin/users/delete-inactive?days=${days}`, {}),\r\n    onSuccess: (data: { deletedCount: number; errors?: string[] }) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\r\n      toast({ \r\n        title: `✅ Deleted ${data.deletedCount} inactive users`,\r\n        description: data.errors ? `Errors: ${data.errors.join(', ')}` : undefined\r\n      });\r\n      setDeleteInactiveDays(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to delete inactive users\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const updateRoleMutation = useMutation({\r\n    mutationFn: ({ id, role }: { id: string; role: string }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/users/${id}/role`, { role }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      toast({ title: \"✅ User role updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to update user role\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const filteredUsers = users?.filter((user) => {\r\n    // Role filter\r\n    const roleMatch = roleFilter === \"all\" ||\r\n      (roleFilter === \"guest\" && user.role === \"guest\") ||\r\n      (roleFilter === \"user\" && user.role === \"user\") ||\r\n      (roleFilter === \"agent\" && user.role === \"agent\") ||\r\n      (roleFilter === \"dealer\" && user.role === \"dealer\") ||\r\n      (roleFilter === \"super_dealer\" && user.role === \"super_dealer\") ||\r\n      (roleFilter === \"master\" && user.role === \"master\") ||\r\n      (roleFilter === \"admin\" && user.role === \"admin\");\r\n\r\n    // Search filter\r\n    const searchMatch = !searchQuery ||\r\n      user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      (user.phone && user.phone.includes(searchQuery));\r\n\r\n    return roleMatch && searchMatch;\r\n  });\r\n\r\n  const stats = {\r\n    total: users?.length || 0,\r\n    guests: users?.filter((u) => u.role === \"guest\").length || 0,\r\n    users: users?.filter((u) => u.role === \"user\").length || 0,\r\n    agents: users?.filter((u) => u.role === \"agent\").length || 0,\r\n    dealers: users?.filter((u) => u.role === \"dealer\").length || 0,\r\n      superDealers: users?.filter((u) => u.role === \"super_dealer\").length || 0,\r\n      masters: users?.filter((u) => u.role === \"master\").length || 0,\r\n    admins: users?.filter((u) => u.role === \"admin\").length || 0,\r\n  };\r\n\r\n  const formatExportPhone = (value: string | null) => {\r\n    if (!value) return \"\";\r\n    const digits = value.replace(/\\D/g, \"\");\r\n    if (!digits) return \"\";\r\n    if (digits.startsWith(\"0\")) return digits;\r\n    if (digits.startsWith(\"233\") && digits.length > 3) {\r\n      return `0${digits.slice(3)}`;\r\n    }\r\n    if (digits.length === 9) {\r\n      return `0${digits}`;\r\n    }\r\n    return `0${digits}`;\r\n  };\r\n\r\n  const formatExportPhoneCell = (value: string | null) => {\r\n    const phone = formatExportPhone(value);\r\n    return phone ? `=\"${phone}\"` : \"\";\r\n  };\r\n\r\n  const handleExportUsers = () => {\r\n    if (!users || users.length === 0) {\r\n      toast({ title: \"No users to export\", variant: \"destructive\" });\r\n      return;\r\n    }\r\n\r\n    const headers = exportMode === \"phone\"\r\n      ? [\"Phone\"]\r\n      : exportMode === \"phone_email\"\r\n        ? [\"Phone\", \"Email\"]\r\n        : [\"Phone\", \"Username\"];\r\n\r\n    const rows = users.map((user) => {\r\n      const phone = formatExportPhoneCell(user.phone);\r\n      if (exportMode === \"phone\") {\r\n        return [phone];\r\n      }\r\n      if (exportMode === \"phone_email\") {\r\n        return [phone, user.email || \"\"];\r\n      }\r\n      return [phone, user.name || \"\"];\r\n    });\r\n\r\n    const csvContent = [headers, ...rows]\r\n      .map((row) => row.map((value) => `\"${String(value).replace(/\"/g, '\"\"')}\"`).join(\",\"))\r\n      .join(\"\\r\\n\");\r\n\r\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.setAttribute(\"download\", `users-export-${exportMode}.csv`);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Users</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <StatCard\r\n                title=\"Total Users\"\r\n                value={stats.total}\r\n                icon={UserCircle}\r\n                description=\"All registered users\"\r\n              />\r\n              <StatCard\r\n                title=\"Users\"\r\n                value={stats.users}\r\n                icon={UserCircle}\r\n                description=\"Regular users\"\r\n              />\r\n              <StatCard\r\n                title=\"Agents\"\r\n                value={stats.agents}\r\n                icon={UserCircle}\r\n                description=\"Agent accounts\"\r\n              />\r\n              <StatCard\r\n                title=\"Dealers\"\r\n                value={stats.dealers}\r\n                icon={UserCircle}\r\n                description=\"Dealer accounts\"\r\n              />\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <StatCard\r\n                title=\"Super Dealers\"\r\n                value={stats.superDealers}\r\n                icon={UserCircle}\r\n                description=\"Super dealer accounts\"\r\n              />\r\n              <StatCard\r\n                title=\"Guests\"\r\n                value={stats.guests}\r\n                icon={UserCircle}\r\n                description=\"Guest accounts\"\r\n              />\r\n              <StatCard\r\n                title=\"Admins\"\r\n                value={stats.admins}\r\n                icon={UserCircle}\r\n                description=\"Administrator accounts\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <UserCircle className=\"h-5 w-5\" />\r\n                    All Users\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    Manage user accounts and track purchases\r\n                  </CardDescription>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Select value={exportMode} onValueChange={setExportMode}>\r\n                      <SelectTrigger className=\"w-48\">\r\n                        <SelectValue placeholder=\"Export format\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent className=\"bg-white dark:bg-black border-2 border-gray-300 dark:border-gray-600 text-black dark:text-white\">\r\n                        <SelectItem value=\"phone\">Phone only</SelectItem>\r\n                        <SelectItem value=\"phone_email\">Phone + Email</SelectItem>\r\n                        <SelectItem value=\"phone_username\">Phone + Username</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                    <Button size=\"sm\" variant=\"outline\" onClick={handleExportUsers}>\r\n                      <Download className=\"h-4 w-4 mr-2\" />\r\n                      Export\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Input\r\n                      type=\"number\"\r\n                      placeholder=\"Days\"\r\n                      className=\"w-20\"\r\n                      value={deleteInactiveDays || \"\"}\r\n                      onChange={(e) => setDeleteInactiveDays(parseInt(e.target.value) || null)}\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      variant=\"destructive\"\r\n                      onClick={() => setShowDeleteInactiveDialog(true)}\r\n                      disabled={!deleteInactiveDays}\r\n                    >\r\n                      Delete Inactive\r\n                    </Button>\r\n                  </div>\r\n                  <div className=\"relative\">\r\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search users...\"\r\n                      className=\"w-64 pl-10\"\r\n                      value={searchQuery}\r\n                      onChange={(e) => setSearchQuery(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <Select value={roleFilter} onValueChange={setRoleFilter}>\r\n                    <SelectTrigger className=\"w-40\">\r\n                      <SelectValue placeholder=\"Role\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-white dark:bg-black border-2 border-gray-300 dark:border-gray-600 text-black dark:text-white\">\r\n                      <SelectItem value=\"all\">All Users</SelectItem>\r\n                      <SelectItem value=\"guest\">Guests</SelectItem>\r\n                      <SelectItem value=\"user\">Users</SelectItem>\r\n                      <SelectItem value=\"agent\">Agents</SelectItem>\r\n                      <SelectItem value=\"dealer\">Dealers</SelectItem>\r\n                      <SelectItem value=\"super_dealer\">Super Dealers</SelectItem>\r\n                      <SelectItem value=\"master\">Master</SelectItem>\r\n                      <SelectItem value=\"admin\">Admins</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={10} />\r\n                ) : filteredUsers && filteredUsers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Name</TableHead>\r\n                          <TableHead>Email</TableHead>\r\n                          <TableHead>Phone</TableHead>\r\n                          <TableHead>Role</TableHead>\r\n                          <TableHead>Last Purchase</TableHead>\r\n                          <TableHead>Total Purchases</TableHead>\r\n                          <TableHead>Total Spent</TableHead>\r\n                          <TableHead>Joined</TableHead>\r\n                          <TableHead className=\"text-right\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {filteredUsers.map((user) => (\r\n                          <TableRow key={user.id}>\r\n                            <TableCell>\r\n                              <div className=\"font-medium\">{user.name}</div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"text-sm text-muted-foreground\">{user.email}</div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"text-sm\">{user.phone || \"—\"}</div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Select\r\n                                value={editedRoles[user.id] || user.role}\r\n                                onValueChange={(newRole) => {\r\n                                  setEditedRoles(prev => ({ ...prev, [user.id]: newRole }));\r\n                                }}\r\n                                disabled={updateRoleMutation.isPending}\r\n                              >\r\n                                <SelectTrigger className=\"w-32\">\r\n                                  <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent className=\"bg-white dark:bg-black border-2 border-gray-300 dark:border-gray-600 text-black dark:text-white\">\r\n                                  <SelectItem value=\"guest\">Guest</SelectItem>\r\n                                  <SelectItem value=\"user\">User</SelectItem>\r\n                                  <SelectItem value=\"agent\">Agent</SelectItem>\r\n                                  <SelectItem value=\"dealer\">Dealer</SelectItem>\r\n                                  <SelectItem value=\"super_dealer\">Super Dealer</SelectItem>\r\n                                  <SelectItem value=\"master\">Master</SelectItem>\r\n                                  <SelectItem value=\"admin\">Admin</SelectItem>\r\n                                </SelectContent>\r\n                              </Select>\r\n                              {editedRoles[user.id] && editedRoles[user.id] !== user.role && (\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"outline\"\r\n                                  className=\"ml-2\"\r\n                                  onClick={() => {\r\n                                    updateRoleMutation.mutate({ id: user.id, role: editedRoles[user.id] });\r\n                                    setEditedRoles(prev => {\r\n                                      const newEdited = { ...prev };\r\n                                      delete newEdited[user.id];\r\n                                      return newEdited;\r\n                                    });\r\n                                  }}\r\n                                  disabled={updateRoleMutation.isPending}\r\n                                >\r\n                                  Save\r\n                                </Button>\r\n                              )}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              {user.lastPurchase ? (\r\n                                <div className=\"text-sm\">\r\n                                  <div className=\"font-medium\">\r\n                                    {formatCurrency(user.lastPurchase.amount)}\r\n                                  </div>\r\n                                  <div className=\"text-xs text-muted-foreground\">\r\n                                    {user.lastPurchase.productType} • {formatDate(user.lastPurchase.date)}\r\n                                  </div>\r\n                                </div>\r\n                              ) : (\r\n                                <span className=\"text-muted-foreground text-sm\">No purchases</span>\r\n                              )}\r\n                            </TableCell>\r\n                            <TableCell className=\"tabular-nums\">\r\n                              <div className=\"flex items-center gap-1\">\r\n                                <ShoppingBag className=\"h-3 w-3 text-muted-foreground\" />\r\n                                {user.totalPurchases}\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"font-medium tabular-nums\">\r\n                              {formatCurrency(user.totalSpent)}\r\n                            </TableCell>\r\n                            <TableCell className=\"text-muted-foreground text-sm\">\r\n                              {formatDate(user.createdAt)}\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                className=\"text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                onClick={() => setDeleteUserId(user.id)}\r\n                                disabled={user.role === \"admin\"}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No users found.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete inactive users confirmation dialog */}\r\n      <AlertDialog open={showDeleteInactiveDialog} onOpenChange={setShowDeleteInactiveDialog}>\r\n        <AlertDialogContent className=\"bg-white dark:bg-slate-950 text-white dark:text-white\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle className=\"text-white\">Delete Inactive Users</AlertDialogTitle>\r\n            <AlertDialogDescription className=\"text-white\">\r\n              Are you sure you want to delete all users who haven't made a purchase in the last {deleteInactiveDays} days? \r\n              This action cannot be undone. All user data and transactions will be permanently removed.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => {\r\n                if (deleteInactiveDays) {\r\n                  deleteInactiveMutation.mutate(deleteInactiveDays);\r\n                  setShowDeleteInactiveDialog(false);\r\n                }\r\n              }}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n              disabled={deleteInactiveMutation.isPending}\r\n            >\r\n              Delete Inactive Users\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <AlertDialog open={!!deleteUserId} onOpenChange={(open) => !open && setDeleteUserId(null)}>\r\n        <AlertDialogContent className=\"bg-white dark:bg-slate-950 text-white dark:text-white\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle className=\"text-white\">Delete User</AlertDialogTitle>\r\n            <AlertDialogDescription className=\"text-white\">\r\n              Are you sure you want to delete this user? This action cannot be undone.\r\n              All user data and transactions will be permanently removed.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => deleteUserId && deleteMutation.mutate(deleteUserId)}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from \"@/components/ui/dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { Users, CheckCircle, Clock, Store, Menu, Trash2, Edit } from \"lucide-react\";\r\nimport type { Agent } from \"@shared/schema\";\r\n\r\nconst whatsappSchema = z.object({\r\n  whatsappSupportLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n  whatsappChannelLink: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\r\n});\r\n\r\ntype WhatsappFormData = z.infer<typeof whatsappSchema>;\r\n\r\ninterface AgentWithUser extends Agent {\r\n  user: { name: string; email: string; phone: string } | null;\r\n}\r\n\r\nexport default function AdminAgents() {\r\n  const { toast } = useToast();\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [deleteAgentId, setDeleteAgentId] = useState<string | null>(null);\r\n  const [editAgentId, setEditAgentId] = useState<string | null>(null);\r\n\r\n  const whatsappForm = useForm<WhatsappFormData>({\r\n    resolver: zodResolver(whatsappSchema),\r\n    defaultValues: {\r\n      whatsappSupportLink: \"\",\r\n      whatsappChannelLink: \"\",\r\n    },\r\n  });\r\n\r\n  const { data: agents, isLoading } = useQuery<AgentWithUser[]>({\r\n    queryKey: [\"/api/admin/agents\"],\r\n    refetchInterval: 30000, // Refetch every 30 seconds\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/agents/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/agents\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\r\n      toast({ title: \"✅ Agent deleted successfully\" });\r\n      setDeleteAgentId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to delete agent\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const updateWhatsappMutation = useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: WhatsappFormData }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/agents/${id}/whatsapp`, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/agents\"] });\r\n      toast({ title: \"✅ WhatsApp links updated successfully\" });\r\n      setEditAgentId(null);\r\n      whatsappForm.reset();\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ \r\n        title: \"Failed to update WhatsApp links\", \r\n        description: error.message, \r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  const filteredAgents = agents?.filter((agent) => {\r\n    if (statusFilter === \"approved\") return agent.isApproved;\r\n    if (statusFilter === \"pending\") return !agent.isApproved;\r\n    return true;\r\n  });\r\n\r\n  const stats = {\r\n    total: agents?.length || 0,\r\n    approved: agents?.filter((a) => a.isApproved).length || 0,\r\n    pending: agents?.filter((a) => !a.isApproved).length || 0,\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Agents</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <StatCard\r\n                title=\"Total Agents\"\r\n                value={stats.total}\r\n                icon={Users}\r\n                description=\"Registered agents\"\r\n              />\r\n              <StatCard\r\n                title=\"Approved\"\r\n                value={stats.approved}\r\n                icon={CheckCircle}\r\n                description=\"Active agents\"\r\n              />\r\n              <StatCard\r\n                title=\"Pending Approval\"\r\n                value={stats.pending}\r\n                icon={Clock}\r\n                description=\"Awaiting review\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Store className=\"h-5 w-5\" />\r\n                    All Agents\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    Manage agent accounts and approvals\r\n                  </CardDescription>\r\n                </div>\r\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                  <SelectTrigger className=\"w-40\" data-testid=\"filter-status\">\r\n                    <SelectValue placeholder=\"Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Agents</SelectItem>\r\n                    <SelectItem value=\"approved\">Approved</SelectItem>\r\n                    <SelectItem value=\"pending\">Pending</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : filteredAgents && filteredAgents.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Business Name</TableHead>\r\n                        <TableHead>Contact</TableHead>\r\n                        <TableHead>Storefront</TableHead>\r\n                        <TableHead>Balance</TableHead>\r\n                        <TableHead>Total Sales</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Joined</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {filteredAgents.map((agent) => (\r\n                        <TableRow key={agent.id} data-testid={`row-agent-${agent.id}`}>\r\n                          <TableCell>\r\n                            <div className=\"font-medium\">{agent.businessName}</div>\r\n                            {agent.businessDescription && (\r\n                              <div className=\"text-sm text-muted-foreground truncate max-w-[200px]\">\r\n                                {agent.businessDescription}\r\n                              </div>\r\n                            )}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"text-sm\">{agent.user?.name}</div>\r\n                            <div className=\"text-xs text-muted-foreground\">{agent.user?.email}</div>\r\n                            <div className=\"text-xs text-muted-foreground\">{agent.user?.phone}</div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <a\r\n                              href={`/store/agent/${agent.storefrontSlug}`}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              className=\"text-primary hover:underline font-mono text-sm\"\r\n                            >\r\n                              /store/agent/{agent.storefrontSlug}\r\n                            </a>\r\n                          </TableCell>\r\n                          <TableCell className=\"font-medium tabular-nums\">\r\n                            {formatCurrency(agent.balance)}\r\n                          </TableCell>\r\n                          <TableCell className=\"tabular-nums\">\r\n                            {formatCurrency(agent.totalSales)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Badge variant={agent.isApproved ? \"default\" : \"secondary\"}>\r\n                              {agent.isApproved ? \"Approved\" : \"Pending\"}\r\n                            </Badge>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {formatDate(agent.createdAt)}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right\">\r\n                            <div className=\"flex justify-end gap-2\">\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                onClick={() => {\r\n                                  setEditAgentId(agent.id);\r\n                                  whatsappForm.reset({\r\n                                    whatsappSupportLink: agent.whatsappSupportLink || \"\",\r\n                                    whatsappChannelLink: agent.whatsappChannelLink || \"\",\r\n                                  });\r\n                                }}\r\n                              >\r\n                                <Edit className=\"h-4 w-4\" />\r\n                              </Button>\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"ghost\"\r\n                                className=\"text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                onClick={() => setDeleteAgentId(agent.id)}\r\n                              >\r\n                                <Trash2 className=\"h-4 w-4\" />\r\n                              </Button>\r\n                            </div>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No agents found.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <AlertDialog open={!!deleteAgentId} onOpenChange={(open) => !open && setDeleteAgentId(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Agent</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete this agent? This action cannot be undone.\r\n              The agent's storefront, transactions, and all related data will be permanently removed.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => deleteAgentId && deleteMutation.mutate(deleteAgentId)}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Edit WhatsApp Links Dialog */}\r\n      <Dialog open={!!editAgentId} onOpenChange={(open) => !open && setEditAgentId(null)}>\r\n        <DialogContent>\r\n          <DialogHeader>\r\n            <DialogTitle>Edit WhatsApp Links</DialogTitle>\r\n          </DialogHeader>\r\n          <form\r\n            onSubmit={whatsappForm.handleSubmit((data) => {\r\n              if (editAgentId) {\r\n                updateWhatsappMutation.mutate({ id: editAgentId, data });\r\n              }\r\n            })}\r\n            className=\"space-y-4\"\r\n          >\r\n            <div>\r\n              <Label htmlFor=\"whatsappSupportLink\">WhatsApp Support Link</Label>\r\n              <Input\r\n                id=\"whatsappSupportLink\"\r\n                placeholder=\"https://wa.me/1234567890\"\r\n                {...whatsappForm.register(\"whatsappSupportLink\")}\r\n              />\r\n              {whatsappForm.formState.errors.whatsappSupportLink && (\r\n                <p className=\"text-sm text-destructive mt-1\">\r\n                  {whatsappForm.formState.errors.whatsappSupportLink.message}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"whatsappChannelLink\">WhatsApp Channel Link</Label>\r\n              <Input\r\n                id=\"whatsappChannelLink\"\r\n                placeholder=\"https://whatsapp.com/channel/...\"\r\n                {...whatsappForm.register(\"whatsappChannelLink\")}\r\n              />\r\n              {whatsappForm.formState.errors.whatsappChannelLink && (\r\n                <p className=\"text-sm text-destructive mt-1\">\r\n                  {whatsappForm.formState.errors.whatsappChannelLink.message}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <DialogFooter>\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={() => setEditAgentId(null)}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={updateWhatsappMutation.isPending}\r\n              >\r\n                {updateWhatsappMutation.isPending ? \"Saving...\" : \"Save Changes\"}\r\n              </Button>\r\n            </DialogFooter>\r\n          </form>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { StatCard } from \"@/components/ui/stat-card\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency, formatDate, WITHDRAWAL_STATUSES } from \"@/lib/constants\";\r\nimport { Wallet, CheckCircle, XCircle, Clock, Banknote, Menu } from \"lucide-react\";\r\nimport type { Withdrawal } from \"@shared/schema\";\r\n\r\ninterface WithdrawalWithAgent extends Withdrawal {\r\n  agent: { businessName: string } | null;\r\n  user: { name: string } | null;\r\n}\r\n\r\nexport default function AdminWithdrawals() {\r\n  const { toast } = useToast();\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: withdrawals, isLoading, error } = useQuery<WithdrawalWithAgent[]>({\r\n    queryKey: [\"/api/admin/withdrawals\"],\r\n    refetchInterval: 20000, // Refetch every 20 seconds for withdrawals\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  // Show error if there's an issue fetching withdrawals\r\n  if (error) {\r\n    console.error(\"Error fetching withdrawals:\", error);\r\n    return (\r\n      <div className=\"flex h-screen bg-background\">\r\n        <AdminSidebar />\r\n        <div className=\"flex-1 p-8\">\r\n          <div className=\"text-center\">\r\n            <h1 className=\"text-2xl font-bold text-red-600 mb-4\">Error Loading Withdrawals</h1>\r\n            <p className=\"text-muted-foreground\">Unable to fetch withdrawal requests. Please try again later.</p>\r\n            <p className=\"text-sm text-muted-foreground mt-2\">Error: {error.message}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const filteredWithdrawals = Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => {\r\n    if (statusFilter === \"all\") return true;\r\n    return w.status === statusFilter;\r\n  }) : [];\r\n\r\n  const stats = {\r\n    total: Array.isArray(withdrawals) && withdrawals ? withdrawals.length : 0,\r\n    pending: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"pending\").length : 0,\r\n    approved: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"approved\").length : 0,\r\n    rejected: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"rejected\").length : 0,\r\n    paid: Array.isArray(withdrawals) && withdrawals ? withdrawals.filter((w) => w.status === \"paid\").length : 0,\r\n    totalAmount: Array.isArray(withdrawals) && withdrawals ? withdrawals.reduce((sum, w) => sum + parseFloat(w.amount), 0) : 0,\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig = WITHDRAWAL_STATUSES[status as keyof typeof WITHDRAWAL_STATUSES];\r\n    return (\r\n      <Badge className={statusConfig?.color || \"\"}>\r\n        {statusConfig?.label || status}\r\n      </Badge>\r\n    );\r\n  };\r\n\r\n  const actionMutation = useMutation({\r\n    mutationFn: async ({ id, action }: { id: string; action: \"approve\" | \"reject\" | \"mark_paid\" }) => {\r\n      const response = await apiRequest(\"POST\", `/api/admin/withdrawals/${id}/${action}`);\r\n      return response;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/withdrawals\"] });\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Withdrawal request updated successfully\",\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to update withdrawal request\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleApprove = (id: string) => {\r\n    actionMutation.mutate({ id, action: \"approve\" });\r\n  };\r\n\r\n  const handleReject = (id: string) => {\r\n    actionMutation.mutate({ id, action: \"reject\" });\r\n  };\r\n\r\n  const handleMarkPaid = (id: string) => {\r\n    actionMutation.mutate({ id, action: \"mark_paid\" });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Withdrawals</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n              <StatCard\r\n                title=\"Total Requests\"\r\n                value={stats.total}\r\n                icon={Wallet}\r\n                description=\"All time\"\r\n              />\r\n              <StatCard\r\n                title=\"Pending\"\r\n                value={stats.pending}\r\n                icon={Clock}\r\n                description=\"Awaiting approval\"\r\n              />\r\n              <StatCard\r\n                title=\"Approved\"\r\n                value={stats.approved}\r\n                icon={CheckCircle}\r\n                description=\"Ready for manual payout\"\r\n              />\r\n              <StatCard\r\n                title=\"Paid\"\r\n                value={stats.paid}\r\n                icon={CheckCircle}\r\n                description=\"Manually paid out\"\r\n              />\r\n            </div>\r\n\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2\">\r\n                <div>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Wallet className=\"h-5 w-5\" />\r\n                    Withdrawal Requests\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    Track all agent withdrawal requests and their transfer status\r\n                  </CardDescription>\r\n                </div>\r\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                  <SelectTrigger className=\"w-40\" data-testid=\"filter-status\">\r\n                    <SelectValue placeholder=\"Status\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"all\">All Status</SelectItem>\r\n                    <SelectItem value=\"pending\">Pending</SelectItem>\r\n                    <SelectItem value=\"approved\">Approved</SelectItem>\r\n                    <SelectItem value=\"rejected\">Rejected</SelectItem>\r\n                    <SelectItem value=\"paid\">Paid</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton rows={8} />\r\n                ) : filteredWithdrawals && filteredWithdrawals.length > 0 ? (\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead>Agent</TableHead>\r\n                        <TableHead>Amount</TableHead>\r\n                        <TableHead>Payment Method</TableHead>\r\n                        <TableHead>Account Details</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Requested</TableHead>\r\n                        <TableHead>Actions</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {filteredWithdrawals.map((withdrawal) => (\r\n                        <TableRow key={withdrawal.id} data-testid={`row-withdrawal-${withdrawal.id}`}>\r\n                          <TableCell>\r\n                            <div className=\"font-medium\">{withdrawal.agent?.businessName}</div>\r\n                            <div className=\"text-sm text-muted-foreground\">{withdrawal.user?.name}</div>\r\n                          </TableCell>\r\n                          <TableCell className=\"font-bold tabular-nums text-lg\">\r\n                            {formatCurrency(withdrawal.amount)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              {withdrawal.paymentMethod === \"bank\" ? (\r\n                                <Banknote className=\"h-4 w-4 text-blue-600\" />\r\n                              ) : (\r\n                                <Wallet className=\"h-4 w-4 text-green-600\" />\r\n                              )}\r\n                              <span className=\"text-sm font-medium capitalize\">\r\n                                {withdrawal.paymentMethod?.replace(\"_\", \" \") || \"Bank\"}\r\n                              </span>\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"text-sm\">\r\n                              <div className=\"font-medium\">{withdrawal.accountName}</div>\r\n                              <div className=\"text-muted-foreground\">{withdrawal.accountNumber}</div>\r\n                              {withdrawal.paymentMethod === \"bank\" && withdrawal.bankName && (\r\n                                <div className=\"text-muted-foreground text-xs\">{withdrawal.bankName}</div>\r\n                              )}\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell>{getStatusBadge(withdrawal.status)}</TableCell>\r\n                          <TableCell className=\"text-muted-foreground text-sm\">\r\n                            {formatDate(withdrawal.createdAt)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {withdrawal.status === \"pending\" && (\r\n                              <div className=\"flex gap-2\">\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"default\"\r\n                                  onClick={() => handleApprove(withdrawal.id)}\r\n                                  disabled={actionMutation.isPending}\r\n                                >\r\n                                  <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                                  Approve\r\n                                </Button>\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"destructive\"\r\n                                  onClick={() => handleReject(withdrawal.id)}\r\n                                  disabled={actionMutation.isPending}\r\n                                >\r\n                                  <XCircle className=\"h-4 w-4 mr-1\" />\r\n                                  Reject\r\n                                </Button>\r\n                              </div>\r\n                            )}\r\n                            {withdrawal.status === \"approved\" && (\r\n                              <Button\r\n                                size=\"sm\"\r\n                                variant=\"outline\"\r\n                                onClick={() => handleMarkPaid(withdrawal.id)}\r\n                                disabled={actionMutation.isPending}\r\n                              >\r\n                                <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                                Mark as Paid\r\n                              </Button>\r\n                            )}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    No withdrawal requests found.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { MessageCircle, Send, UserCircle, Clock, CheckCircle, Menu } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport type { SupportChat, ChatMessage } from \"@shared/schema\";\r\n\r\nexport default function AdminChatSupport() {\r\n  const [selectedChatId, setSelectedChatId] = useState<string | null>(null);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [filter, setFilter] = useState<\"open\" | \"closed\">(\"open\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n\r\n  // Get unread message count\r\n  const { data: unreadCount = 0 } = useQuery<number>({\r\n    queryKey: [\"/api/support/admin/unread-count\"],\r\n    queryFn: async () => {\r\n      try {\r\n        const data = await apiRequest<{ count: number }>(\"GET\", \"/api/support/admin/unread-count\");\r\n        return data.count || 0;\r\n      } catch (error) {\r\n        return 0;\r\n      }\r\n    },\r\n    refetchInterval: 5000, // Poll every 5 seconds\r\n  });\r\n\r\n  // Get all chats\r\n  const { data: chats, isLoading } = useQuery<SupportChat[]>({\r\n    queryKey: [`/api/admin/support/chats?status=${filter}`],\r\n    refetchInterval: 10000, // Poll every 10 seconds\r\n  });\r\n\r\n  // Get selected chat details\r\n  const { data: chatData } = useQuery<{ chat: SupportChat; messages: ChatMessage[] }>({\r\n    queryKey: [`/api/support/chat/${selectedChatId}`],\r\n    enabled: !!selectedChatId,\r\n    refetchInterval: 5000, // Poll every 5 seconds for new messages\r\n  });\r\n\r\n  // Send message mutation\r\n  const sendMessageMutation = useMutation({\r\n    mutationFn: (msg: string) =>\r\n      apiRequest(\"POST\", `/api/support/chat/${selectedChatId}/message`, { message: msg }),\r\n    onSuccess: () => {\r\n      setMessage(\"\");\r\n      queryClient.invalidateQueries({ queryKey: [`/api/support/chat/${selectedChatId}`] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/support/chats\"], exact: false });\r\n    },\r\n    onError: () => {\r\n      toast({\r\n        title: \"❌ Error\",\r\n        description: \"Failed to send message\",\r\n        variant: \"destructive\",\r\n        duration: 4000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Assign chat mutation\r\n  const assignChatMutation = useMutation({\r\n    mutationFn: (chatId: string) =>\r\n      apiRequest(\"PUT\", `/api/admin/support/chat/${chatId}/assign`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/support/chats\"], exact: false });\r\n      queryClient.invalidateQueries({ queryKey: [`/api/support/chat/${selectedChatId}`] });\r\n      toast({\r\n        title: \"✅ Assigned\",\r\n        description: \"Chat assigned to you\",\r\n        duration: 3000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Close chat mutation\r\n  const closeChatMutation = useMutation({\r\n    mutationFn: (chatId: string) =>\r\n      apiRequest(\"PUT\", `/api/support/chat/${chatId}/close`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/support/chats\"], exact: false });\r\n      setSelectedChatId(null);\r\n      toast({\r\n        title: \"✅ Chat Closed\",\r\n        description: \"The chat has been closed\",\r\n        duration: 3000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\r\n    }\r\n  }, [chatData?.messages]);\r\n\r\n  // Mark user messages as read when admin views them\r\n  useEffect(() => {\r\n    if (chatData?.messages && selectedChatId) {\r\n      const unreadUserMessages = chatData.messages.filter(\r\n        msg => msg.senderType === 'user' && !msg.isRead\r\n      );\r\n      \r\n      // Mark each unread user message as read\r\n      unreadUserMessages.forEach(async (msg) => {\r\n        try {\r\n          await apiRequest(\"PUT\", `/api/support/message/${msg.id}/read`, {});\r\n        } catch (error) {\r\n          console.error('Failed to mark message as read:', error);\r\n        }\r\n      });\r\n      \r\n      // Invalidate unread count query to update badge\r\n      if (unreadUserMessages.length > 0) {\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/support/admin/unread-count\"] });\r\n      }\r\n    }\r\n  }, [chatData?.messages, selectedChatId, queryClient]);\r\n\r\n  const handleSendMessage = () => {\r\n    if (!message.trim() || !selectedChatId) return;\r\n    sendMessageMutation.mutate(message);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        {/* Mobile header with menu button */}\r\n        <div className=\"lg:hidden border-b px-4 py-3 flex items-center justify-between bg-background\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            onClick={() => setSidebarOpen(true)}\r\n          >\r\n            <Menu className=\"h-5 w-5\" />\r\n          </Button>\r\n          <div className=\"flex items-center gap-2\">\r\n            <h1 className=\"text-lg font-semibold\">Support Chat</h1>\r\n            {unreadCount > 0 && (\r\n              <Badge variant=\"destructive\" className=\"h-5 min-w-5 flex items-center justify-center px-1.5\">\r\n                {unreadCount}\r\n              </Badge>\r\n            )}\r\n          </div>\r\n          <div className=\"w-10\" /> {/* Spacer for centering */}\r\n        </div>\r\n\r\n        <div className=\"flex-1 overflow-auto p-4 md:p-6\">\r\n          <div className=\"mb-4 md:mb-6 hidden lg:block\">\r\n            <div className=\"flex items-center gap-3 mb-2\">\r\n              <h1 className=\"text-2xl md:text-3xl font-bold\">Support Chat</h1>\r\n              {unreadCount > 0 && (\r\n                <Badge variant=\"destructive\" className=\"text-sm px-2.5 py-1\">\r\n                  {unreadCount} New {unreadCount === 1 ? 'Message' : 'Messages'}\r\n                </Badge>\r\n              )}\r\n            </div>\r\n            <p className=\"text-sm md:text-base text-muted-foreground\">Manage customer support conversations</p>\r\n          </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 h-[calc(100vh-140px)] md:h-[calc(100vh-200px)]\">\r\n          {/* Chat List */}\r\n          <Card className=\"lg:col-span-1 max-h-[40vh] lg:max-h-none\">\r\n            <CardHeader className=\"border-b p-3 md:p-6\">\r\n              <Tabs value={filter} onValueChange={(v) => setFilter(v as \"open\" | \"closed\")}>\r\n                <TabsList className=\"grid w-full grid-cols-2\">\r\n                  <TabsTrigger \r\n                    value=\"open\" \r\n                    className=\"text-xs md:text-sm data-[state=active]:bg-yellow-500 data-[state=active]:text-white data-[state=active]:font-medium data-[state=active]:shadow-sm\"\r\n                  >\r\n                    Open\r\n                  </TabsTrigger>\r\n                  <TabsTrigger \r\n                    value=\"closed\" \r\n                    className=\"text-xs md:text-sm data-[state=active]:bg-yellow-500 data-[state=active]:text-white data-[state=active]:font-medium data-[state=active]:shadow-sm\"\r\n                  >\r\n                    Closed\r\n                  </TabsTrigger>\r\n                </TabsList>\r\n              </Tabs>\r\n            </CardHeader>\r\n            <CardContent className=\"p-0\">\r\n              <ScrollArea className=\"h-[calc(40vh-100px)] lg:h-[calc(100vh-340px)]\">\r\n                {isLoading ? (\r\n                  <div className=\"p-4 text-center text-muted-foreground text-sm\">Loading...</div>\r\n                ) : !chats || chats.length === 0 ? (\r\n                  <div className=\"p-4 md:p-8 text-center text-muted-foreground\">\r\n                    <MessageCircle className=\"h-8 w-8 md:h-12 md:w-12 mx-auto mb-3 opacity-50\" />\r\n                    <p className=\"text-xs md:text-sm\">No {filter} chats</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"divide-y\">\r\n                    {chats.map((chat) => (\r\n                      <button\r\n                        key={chat.id}\r\n                        onClick={() => setSelectedChatId(chat.id)}\r\n                        className={`w-full p-3 md:p-4 text-left hover:bg-muted/50 transition-colors ${\r\n                          selectedChatId === chat.id ? \"bg-muted\" : \"\"\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-start justify-between mb-2\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <UserCircle className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <span className=\"font-medium text-sm\">{chat.userName}</span>\r\n                          </div>\r\n                          {chat.status === 'open' && (\r\n                            <Badge variant=\"default\" className=\"text-xs\">Open</Badge>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground truncate\">{chat.userEmail}</p>\r\n                        <div className=\"flex items-center gap-2 mt-2 text-xs text-muted-foreground\">\r\n                          <Clock className=\"h-3 w-3\" />\r\n                          <span>\r\n                            {new Date(chat.lastMessageAt).toLocaleString([], {\r\n                              month: 'short',\r\n                              day: 'numeric',\r\n                              hour: '2-digit',\r\n                              minute: '2-digit',\r\n                            })}\r\n                          </span>\r\n                        </div>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </ScrollArea>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Chat View */}\r\n          <Card className=\"lg:col-span-2 flex flex-col min-h-[55vh] lg:min-h-0\">\r\n            {!selectedChatId || !chatData ? (\r\n              <CardContent className=\"flex-1 flex items-center justify-center p-4\">\r\n                <div className=\"text-center text-muted-foreground\">\r\n                  <MessageCircle className=\"h-12 w-12 md:h-16 md:w-16 mx-auto mb-4 opacity-50\" />\r\n                  <p className=\"text-sm md:text-base\">Select a chat to view conversation</p>\r\n                </div>\r\n              </CardContent>\r\n            ) : (\r\n              <>\r\n                <CardHeader className=\"border-b p-3 md:p-6\">\r\n                  <div className=\"flex items-start md:items-center justify-between gap-2 flex-col md:flex-row\">\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <CardTitle className=\"text-base md:text-lg flex items-center gap-2\">\r\n                        <UserCircle className=\"h-4 w-4 md:h-5 md:w-5 flex-shrink-0\" />\r\n                        <span className=\"truncate\">{chatData.chat.userName}</span>\r\n                      </CardTitle>\r\n                      <p className=\"text-xs md:text-sm text-muted-foreground mt-1 truncate\">\r\n                        {chatData.chat.userEmail}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"flex gap-2 flex-wrap w-full md:w-auto\">\r\n                      {!chatData.chat.assignedToAdminId && chatData.chat.status === 'open' && (\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => assignChatMutation.mutate(chatData.chat.id)}\r\n                          disabled={assignChatMutation.isPending}\r\n                          className=\"text-xs flex-1 md:flex-initial\"\r\n                        >\r\n                          Assign to Me\r\n                        </Button>\r\n                      )}\r\n                      {chatData.chat.status === 'open' && (\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          onClick={() => closeChatMutation.mutate(chatData.chat.id)}\r\n                          disabled={closeChatMutation.isPending}\r\n                          className=\"text-xs flex-1 md:flex-initial\"\r\n                        >\r\n                          <CheckCircle className=\"h-3 w-3 md:h-4 md:w-4 mr-1\" />\r\n                          Close Chat\r\n                        </Button>\r\n                      )}\r\n                      {chatData.chat.status === 'closed' && (\r\n                        <Badge variant=\"secondary\" className=\"text-xs\">Closed</Badge>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"flex-1 p-0 overflow-hidden\">\r\n                  <ScrollArea className=\"h-[calc(55vh-150px)] lg:h-[calc(100vh-380px)] p-3 md:p-4\" ref={scrollRef}>\r\n                    {chatData.messages.length === 0 ? (\r\n                      <div className=\"text-center text-muted-foreground py-8\">\r\n                        <p className=\"text-xs md:text-sm\">No messages yet</p>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"space-y-2 md:space-y-3\">\r\n                        {chatData.messages.map((msg) => (\r\n                          <div\r\n                            key={msg.id}\r\n                            className={`flex ${\r\n                              msg.senderType === 'admin' ? 'justify-end' : 'justify-start'\r\n                            }`}\r\n                          >\r\n                            <div\r\n                              className={`max-w-[85%] md:max-w-[80%] rounded-lg p-2 md:p-3 ${\r\n                                msg.senderType === 'admin'\r\n                                  ? 'bg-primary text-primary-foreground'\r\n                                  : 'bg-muted'\r\n                              }`}\r\n                            >\r\n                              {msg.senderType === 'user' && (\r\n                                <p className=\"text-[10px] md:text-xs font-semibold mb-1 opacity-80\">Customer</p>\r\n                              )}\r\n                              <p className=\"text-xs md:text-sm whitespace-pre-wrap break-words\">\r\n                                {msg.message}\r\n                              </p>\r\n                              <p className=\"text-[10px] md:text-xs opacity-70 mt-1\">\r\n                                {new Date(msg.createdAt).toLocaleTimeString([], {\r\n                                  hour: '2-digit',\r\n                                  minute: '2-digit',\r\n                                })}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </ScrollArea>\r\n                </CardContent>\r\n\r\n                <div className=\"border-t p-3 md:p-4\">\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      placeholder=\"Type your message...\"\r\n                      value={message}\r\n                      onChange={(e) => setMessage(e.target.value)}\r\n                      onKeyPress={handleKeyPress}\r\n                      disabled={\r\n                        sendMessageMutation.isPending || chatData.chat.status === 'closed'\r\n                      }\r\n                      className=\"flex-1 text-sm\"\r\n                    />\r\n                    <Button\r\n                      onClick={handleSendMessage}\r\n                      disabled={\r\n                        !message.trim() ||\r\n                        sendMessageMutation.isPending ||\r\n                        chatData.chat.status === 'closed'\r\n                      }\r\n                      size=\"icon\"\r\n                      className=\"flex-shrink-0\"\r\n                    >\r\n                      <Send className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n          </Card>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Settings, Bell, Smartphone, Save, X, Menu, Key, Plus, Trash2, ExternalLink } from \"lucide-react\";\r\n\r\ninterface Setting {\r\n  key: string;\r\n  value: string;\r\n  description?: string;\r\n}\r\n\r\ninterface User {\r\n  id: string;\r\n  email: string;\r\n  name: string;\r\n  phone?: string;\r\n  role: string;\r\n  isActive: boolean;\r\n  walletBalance: string;\r\n  createdAt: string;\r\n}\r\n\r\ninterface Announcement {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  isActive: boolean;\r\n  createdBy: string;\r\n  createdAt: string;\r\n}\r\n\r\n// Function to parse URLs from text and create clickable links\r\nfunction parseMessageWithLinks(text: string) {\r\n  // URL regex pattern\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  \r\n  // Split text by URLs and create elements\r\n  const parts = text.split(urlRegex);\r\n  \r\n  return parts.map((part, index) => {\r\n    if (urlRegex.test(part)) {\r\n      return (\r\n        <a\r\n          key={index}\r\n          href={part}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-blue-600 hover:text-blue-800 underline inline-flex items-center gap-1\"\r\n        >\r\n          {part}\r\n          <ExternalLink className=\"h-3 w-3\" />\r\n        </a>\r\n      );\r\n    }\r\n    return part;\r\n  });\r\n}\r\n\r\nexport default function AdminSettings() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [settings, setSettings] = useState<Record<string, string>>({\r\n    data_bundle_auto_processing: \"false\", // Default to disabled\r\n  });\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\r\n  const [credentialForm, setCredentialForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    name: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [announcementForm, setAnnouncementForm] = useState({\r\n    title: \"\",\r\n    message: \"\",\r\n  });\r\n  const [announcements, setAnnouncements] = useState<Announcement[]>([]);\r\n\r\n  // Fetch settings from database\r\n  const { data: settingsData } = useQuery<Setting[]>({\r\n    queryKey: [\"/api/admin/settings\"],\r\n    refetchInterval: 30000, // Real-time updates every 30 seconds\r\n  });\r\n\r\n  // Fetch users for credential management\r\n  const { data: usersData } = useQuery<User[]>({\r\n    queryKey: [\"/api/admin/users\"],\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  // Fetch announcements\r\n  const { data: announcementsData } = useQuery<Announcement[]>({\r\n    queryKey: [\"/api/admin/announcements\"],\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  // Update setting mutation\r\n  const updateSettingMutation = useMutation({\r\n    mutationFn: async ({ key, value, description }: { key: string; value: string; description?: string }) => {\r\n      return apiRequest(\"PUT\", `/api/admin/settings/${key}`, { value, description });\r\n    },\r\n    onMutate: async ({ key, value }) => {\r\n      // Cancel any outgoing refetches\r\n      await queryClient.cancelQueries({ queryKey: [\"/api/admin/settings\"] });\r\n\r\n      // Snapshot the previous value\r\n      const previousSettings = queryClient.getQueryData<Setting[]>([\"/api/admin/settings\"]);\r\n\r\n      // Optimistically update the cache\r\n      queryClient.setQueryData<Setting[]>([\"/api/admin/settings\"], (old) => {\r\n        if (!old) return old;\r\n        return old.map(setting =>\r\n          setting.key === key ? { ...setting, value } : setting\r\n        );\r\n      });\r\n\r\n      // Also update local state optimistically\r\n      setSettings(prev => ({ ...prev, [key]: value }));\r\n\r\n      // Return a context object with the snapshotted value\r\n      return { previousSettings };\r\n    },\r\n    onError: (err, _, context) => {\r\n      // If the mutation fails, use the context returned from onMutate to roll back\r\n      if (context?.previousSettings) {\r\n        queryClient.setQueryData([\"/api/admin/settings\"], context.previousSettings);\r\n        // Also rollback local state\r\n        const previousMap: Record<string, string> = {};\r\n        context.previousSettings.forEach(setting => {\r\n          previousMap[setting.key] = setting.value;\r\n        });\r\n        setSettings(previousMap);\r\n      }\r\n      toast({ title: \"Failed to update setting\", description: err.message, variant: \"destructive\" });\r\n    },\r\n    onSuccess: () => {\r\n      toast({ title: \"Setting updated successfully\" });\r\n    },\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\r\n    },\r\n  });\r\n\r\n  // Update user credentials mutation\r\n  const updateCredentialsMutation = useMutation({\r\n    mutationFn: async ({ userId, data }: { userId: string; data: any }) => {\r\n      return apiRequest(\"PUT\", `/api/admin/users/${userId}/credentials`, data);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\r\n      setSelectedUser(null);\r\n      setCredentialForm({ email: \"\", password: \"\", name: \"\", phone: \"\" });\r\n      toast({ title: \"User credentials updated successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error?.message || \"Unknown error occurred\";\r\n      console.error(\"[Credentials] Update error:\", errorMessage);\r\n      toast({ \r\n        title: \"Failed to update credentials\", \r\n        description: errorMessage,\r\n        variant: \"destructive\" \r\n      });\r\n    },\r\n  });\r\n\r\n  // Create announcement mutation\r\n  const createAnnouncementMutation = useMutation({\r\n    mutationFn: async (data: { title: string; message: string }) => {\r\n      return apiRequest(\"POST\", \"/api/admin/announcements\", data);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      setAnnouncementForm({ title: \"\", message: \"\" });\r\n      toast({ title: \"Announcement created successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to create announcement\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Update announcement mutation\r\n  const updateAnnouncementMutation = useMutation({\r\n    mutationFn: async ({ id, isActive }: { id: string; isActive: boolean }) => {\r\n      return apiRequest(\"PATCH\", `/api/admin/announcements/${id}`, { isActive });\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"Announcement updated successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to update announcement\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Delete announcement mutation\r\n  const deleteAnnouncementMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      return apiRequest(\"DELETE\", `/api/admin/announcements/${id}`);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"Announcement deleted successfully\" });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({ title: \"Failed to delete announcement\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  // Initialize settings when data loads\r\n  useEffect(() => {\r\n    if (settingsData) {\r\n      const settingsMap: Record<string, string> = {\r\n        data_bundle_auto_processing: \"false\", // Default to disabled\r\n      };\r\n      settingsData.forEach(setting => {\r\n        settingsMap[setting.key] = setting.value;\r\n      });\r\n      setSettings(settingsMap);\r\n    }\r\n  }, [settingsData]);\r\n\r\n  useEffect(() => {\r\n    if (usersData) {\r\n      setUsers(usersData);\r\n    }\r\n  }, [usersData]);\r\n\r\n  useEffect(() => {\r\n    if (announcementsData) {\r\n      setAnnouncements(announcementsData);\r\n    }\r\n  }, [announcementsData]);\r\n\r\n  const handleSettingChange = (key: string, value: string) => {\r\n    setSettings(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleSaveSetting = (key: string, description?: string) => {\r\n    const value = settings[key];\r\n    if (value !== undefined) {\r\n      updateSettingMutation.mutate({ key, value, description });\r\n    }\r\n  };\r\n\r\n  const handleUserSelect = (user: User) => {\r\n    setSelectedUser(user);\r\n    setCredentialForm({\r\n      email: user.email,\r\n      password: \"\",\r\n      name: user.name,\r\n      phone: user.phone || \"\",\r\n    });\r\n  };\r\n\r\n  const handleUpdateCredentials = () => {\r\n    if (!selectedUser) return;\r\n\r\n    const data: any = {};\r\n    // Check for actual changes\r\n    if (credentialForm.email !== selectedUser.email) {\r\n      if (!credentialForm.email.trim()) {\r\n        toast({ title: \"Email cannot be empty\", variant: \"destructive\" });\r\n        return;\r\n      }\r\n      data.email = credentialForm.email;\r\n    }\r\n    if (credentialForm.password) {\r\n      if (credentialForm.password.length < 8) {\r\n        toast({ title: \"Password must be at least 8 characters\", variant: \"destructive\" });\r\n        return;\r\n      }\r\n      data.password = credentialForm.password;\r\n    }\r\n    if (credentialForm.name !== selectedUser.name) {\r\n      if (!credentialForm.name.trim()) {\r\n        toast({ title: \"Name cannot be empty\", variant: \"destructive\" });\r\n        return;\r\n      }\r\n      data.name = credentialForm.name;\r\n    }\r\n    if (credentialForm.phone !== (selectedUser.phone || \"\")) {\r\n      data.phone = credentialForm.phone;\r\n    }\r\n\r\n    if (Object.keys(data).length === 0) {\r\n      toast({ title: \"No changes detected\", variant: \"default\" });\r\n      return;\r\n    }\r\n\r\n    console.log(\"[Credentials] Submitting update for user:\", selectedUser.id, \"Data:\", Object.keys(data));\r\n    updateCredentialsMutation.mutate({ userId: selectedUser.id, data });\r\n  };\r\n\r\n  const handleCreateAnnouncement = () => {\r\n    if (!announcementForm.title.trim() || !announcementForm.message.trim()) {\r\n      toast({ title: \"Title and message are required\", variant: \"destructive\" });\r\n      return;\r\n    }\r\n\r\n    createAnnouncementMutation.mutate({\r\n      title: announcementForm.title.trim(),\r\n      message: announcementForm.message.trim(),\r\n    });\r\n  };\r\n\r\n  const handleToggleAnnouncement = (id: string, isActive: boolean) => {\r\n    updateAnnouncementMutation.mutate({ id, isActive: !isActive });\r\n  };\r\n\r\n  const handleDeleteAnnouncement = (id: string) => {\r\n    if (confirm(\"Are you sure you want to delete this announcement?\")) {\r\n      deleteAnnouncementMutation.mutate(id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Settings</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto space-y-6\">\r\n            {/* General Settings */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Settings className=\"h-5 w-5\" />\r\n                  General Settings\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Configure basic application settings\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"appName\">Application Name</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      id=\"appName\"\r\n                      value={settings.app_name || \"\"}\r\n                      onChange={(e) => handleSettingChange(\"app_name\", e.target.value)}\r\n                      placeholder=\"My App\"\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleSaveSetting(\"app_name\", \"Application name displayed in the UI\")}\r\n                      disabled={updateSettingMutation.isPending}\r\n                    >\r\n                      <Save className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"supportEmail\">Support Email</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      id=\"supportEmail\"\r\n                      type=\"email\"\r\n                      autoComplete=\"email\"\r\n                      value={settings.support_email || \"\"}\r\n                      onChange={(e) => handleSettingChange(\"support_email\", e.target.value)}\r\n                      placeholder=\"support@example.com\"\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleSaveSetting(\"support_email\", \"Support email for customer inquiries\")}\r\n                      disabled={updateSettingMutation.isPending}\r\n                    >\r\n                      <Save className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"supportPhone\">Support Phone</Label>\r\n                  <div className=\"flex gap-2\">\r\n                    <Input\r\n                      id=\"supportPhone\"\r\n                      autoComplete=\"tel\"\r\n                      value={settings.support_phone || \"\"}\r\n                      onChange={(e) => handleSettingChange(\"support_phone\", e.target.value)}\r\n                      placeholder=\"+233 XX XXX XXXX\"\r\n                    />\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleSaveSetting(\"support_phone\", \"Support phone number\")}\r\n                      disabled={updateSettingMutation.isPending}\r\n                    >\r\n                      <Save className=\"h-4 w-4\" />\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* User Credential Management */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Key className=\"h-5 w-5\" />\r\n                  User Credential Management\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Manage user credentials and account information\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"userSelect\">Select User to Manage</Label>\r\n                  <select\r\n                    id=\"userSelect\"\r\n                    aria-label=\"Select User to Manage\"\r\n                    className=\"w-full p-2 border rounded-md mt-1\"\r\n                    value={selectedUser?.id || \"\"}\r\n                    onChange={(e) => {\r\n                      const user = users.find(u => u.id === e.target.value);\r\n                      if (user) handleUserSelect(user);\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Choose a user...</option>\r\n                    {users.map(user => (\r\n                      <option key={user.id} value={user.id}>\r\n                        {user.name} ({user.email}) - {user.role}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {selectedUser && (\r\n                  <>\r\n                    <Separator />\r\n                    <div className=\"space-y-4\">\r\n                      <h3 className=\"font-medium\">Update Credentials for {selectedUser.name}</h3>\r\n                      \r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userEmail\">Email</Label>\r\n                        <Input\r\n                          id=\"userEmail\"\r\n                          type=\"email\"\r\n                          autoComplete=\"email\"\r\n                          value={credentialForm.email}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, email: e.target.value }))}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userName\">Name</Label>\r\n                        <Input\r\n                          id=\"userName\"\r\n                          autoComplete=\"name\"\r\n                          value={credentialForm.name}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, name: e.target.value }))}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userPhone\">Phone</Label>\r\n                        <Input\r\n                          id=\"userPhone\"\r\n                          autoComplete=\"tel\"\r\n                          value={credentialForm.phone}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, phone: e.target.value }))}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"userPassword\">New Password (leave empty to keep current)</Label>\r\n                        <Input\r\n                          id=\"userPassword\"\r\n                          type=\"password\"\r\n                          autoComplete=\"new-password\"\r\n                          value={credentialForm.password}\r\n                          onChange={(e) => setCredentialForm(prev => ({ ...prev, password: e.target.value }))}\r\n                          placeholder=\"Enter new password\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"flex gap-2\">\r\n                        <Button\r\n                          onClick={handleUpdateCredentials}\r\n                          disabled={updateCredentialsMutation.isPending}\r\n                        >\r\n                          {updateCredentialsMutation.isPending ? \"Updating...\" : \"Update Credentials\"}\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => {\r\n                            setSelectedUser(null);\r\n                            setCredentialForm({ email: \"\", password: \"\", name: \"\", phone: \"\" });\r\n                          }}\r\n                        >\r\n                          <X className=\"h-4 w-4 mr-2\" />\r\n                          Cancel\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Announcement Management */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Bell className=\"h-5 w-5\" />\r\n                  Announcement Management\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Create and manage system announcements for users\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"announcementTitle\">Title</Label>\r\n                    <Input\r\n                      id=\"announcementTitle\"\r\n                      value={announcementForm.title}\r\n                      onChange={(e) => setAnnouncementForm(prev => ({ ...prev, title: e.target.value }))}\r\n                      placeholder=\"Announcement title\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"announcementMessage\">Message</Label>\r\n                    <textarea\r\n                      id=\"announcementMessage\"\r\n                      className=\"w-full p-2 border rounded-md resize-none\"\r\n                      rows={3}\r\n                      value={announcementForm.message}\r\n                      onChange={(e) => setAnnouncementForm(prev => ({ ...prev, message: e.target.value }))}\r\n                      placeholder=\"Announcement message\"\r\n                    />\r\n                  </div>\r\n\r\n                  <Button\r\n                    onClick={handleCreateAnnouncement}\r\n                    disabled={createAnnouncementMutation.isPending}\r\n                    className=\"gap-2\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                    {createAnnouncementMutation.isPending ? \"Creating...\" : \"Create Announcement\"}\r\n                  </Button>\r\n                </div>\r\n\r\n                <Separator />\r\n\r\n                <div className=\"space-y-2\">\r\n                  <Label>Existing Announcements</Label>\r\n                  {announcements.length === 0 ? (\r\n                    <p className=\"text-sm text-muted-foreground\">No announcements yet</p>\r\n                  ) : (\r\n                    <div className=\"space-y-2\">\r\n                      {announcements.map(announcement => (\r\n                        <div key={announcement.id} className=\"flex items-center justify-between p-3 border rounded-md\">\r\n                          <div className=\"flex-1\">\r\n                            <h4 className=\"font-medium\">{announcement.title}</h4>\r\n                            <div className=\"text-sm text-muted-foreground\">\r\n                              {parseMessageWithLinks(announcement.message)}\r\n                            </div>\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                              By {announcement.createdBy} • {new Date(announcement.createdAt).toLocaleDateString()}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Switch\r\n                              checked={announcement.isActive}\r\n                              onCheckedChange={() => handleToggleAnnouncement(announcement.id, announcement.isActive)}\r\n                              className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                            />\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleDeleteAnnouncement(announcement.id)}\r\n                              className=\"text-red-600 hover:text-red-700\"\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { formatCurrency, formatDate } from \"@/lib/constants\";\r\nimport { Trophy, Award, Medal, Menu } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface TopCustomer {\r\n  customerEmail: string;\r\n  customerPhone: string | null;\r\n  customerName: string | null;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n  rank: number;\r\n  lastPurchase: string;\r\n}\r\n\r\nexport default function AdminRankings() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  const { data: topCustomers, isLoading: rankingsLoading } = useQuery<TopCustomer[]>({\r\n    queryKey: [\"/api/admin/rankings/customers\"],\r\n    refetchInterval: 60000, // Refresh every minute\r\n  });\r\n\r\n  const getRankIcon = (index: number) => {\r\n    if (index === 0) return <Trophy className=\"h-5 w-5 text-yellow-500\" />;\r\n    if (index === 1) return <Medal className=\"h-5 w-5 text-gray-400\" />;\r\n    if (index === 2) return <Award className=\"h-5 w-5 text-amber-600\" />;\r\n    return <span className=\"text-sm font-semibold text-muted-foreground\">#{index + 1}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Users Ranking</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <Card>\r\n              <CardHeader>\r\n                <div>\r\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                    <Trophy className=\"h-5 w-5 text-yellow-500\" />\r\n                    Top Customers\r\n                  </CardTitle>\r\n                  <p className=\"text-sm text-muted-foreground mt-1\">Highest spending customers</p>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {rankingsLoading ? (\r\n                  <TableSkeleton rows={10} />\r\n                ) : topCustomers && topCustomers.length > 0 ? (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"w-16\">Rank</TableHead>\r\n                          <TableHead>Customer</TableHead>\r\n                          <TableHead className=\"text-right\">Total Spent</TableHead>\r\n                          <TableHead className=\"text-right\">Purchases</TableHead>\r\n                          <TableHead className=\"text-right\">Last Purchase</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {topCustomers.map((customer, index) => (\r\n                          <TableRow key={customer.rank}>\r\n                            <TableCell className=\"text-center\">\r\n                              {getRankIcon(index)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"flex flex-col\">\r\n                                <span className=\"font-medium\">\r\n                                  {customer.customerName || customer.customerEmail}\r\n                                </span>\r\n                                {customer.customerPhone && (\r\n                                  <span className=\"text-xs text-muted-foreground\">\r\n                                    {customer.customerPhone}\r\n                                  </span>\r\n                                )}\r\n                                <span className=\"text-xs text-muted-foreground truncate max-w-[200px]\">\r\n                                  {customer.customerEmail}\r\n                                </span>\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <span className=\"font-bold text-green-600 dark:text-green-400\">\r\n                                {formatCurrency(customer.totalSpent)}\r\n                              </span>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right\">\r\n                              <Badge variant=\"secondary\">\r\n                                {customer.totalPurchases} {customer.totalPurchases === 1 ? 'order' : 'orders'}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"text-right text-sm text-muted-foreground\">\r\n                              {formatDate(customer.lastPurchase)}\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12 text-muted-foreground\">\r\n                    <Trophy className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\r\n                    <p className=\"text-lg font-medium mb-2\">No customer rankings yet</p>\r\n                    <p className=\"text-sm\">Customer rankings will appear here once transactions are completed</p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Lock, X, Menu, Settings, Save } from \"lucide-react\";\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\n\r\ninterface BreakSettings {\r\n  isEnabled: boolean;\r\n  message: string;\r\n}\r\n\r\nexport default function AdminBreakSettings() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const { user, isLoading: authLoading } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [isEnabled, setIsEnabled] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  // Fetch current break settings\r\n  const { data: breakSettings } = useQuery<BreakSettings>({\r\n    queryKey: [\"/api/admin/break-settings\"],\r\n    enabled: !!user,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (breakSettings) {\r\n      setIsEnabled(breakSettings.isEnabled);\r\n      setMessage(breakSettings.message);\r\n    }\r\n  }, [breakSettings]);\r\n\r\n  // Update break settings mutation\r\n  const updateMutation = useMutation({\r\n    mutationFn: async (settings: BreakSettings) => {\r\n      return await apiRequest<BreakSettings>(\"POST\", \"/api/admin/break-settings\", settings);\r\n    },\r\n    onSuccess: (data) => {\r\n      // Invalidate and refetch the break settings query\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/break-settings\"] });\r\n      // Also invalidate the public break settings query used by BreakModeGuard\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/break-settings\"] });\r\n      toast({\r\n        title: \"Settings Updated\",\r\n        description: `Site break mode ${data.isEnabled ? \"enabled\" : \"disabled\"} successfully.`,\r\n      });\r\n    },\r\n    onError: (error: any) => {\r\n      toast({\r\n        title: \"Update Failed\",\r\n        description: error.message || \"Failed to update break settings.\",\r\n        variant: \"destructive\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleSave = () => {\r\n    if (isEnabled && !message.trim()) {\r\n      toast({\r\n        title: \"Validation Error\",\r\n        description: \"Please enter a message when enabling break mode.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    updateMutation.mutate({\r\n      isEnabled,\r\n      message: message.trim(),\r\n    });\r\n  };\r\n\r\n  if (authLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <div className=\"flex items-center gap-2\">\r\n              <Settings className=\"h-5 w-5\" />\r\n              <h1 className=\"text-lg lg:text-xl font-semibold\">Break Settings</h1>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-6 lg:p-8\">\r\n          <div className=\"max-w-5xl mx-auto space-y-8\">\r\n            {/* Break Mode Toggle - Slide Switch */}\r\n            <div className=\"p-6 border-2 border-gray-200 dark:border-gray-700 rounded-lg bg-red-500\">\r\n              <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n                <div className=\"space-y-2 flex-1\">\r\n                  <Label className=\"text-lg font-bold flex items-center gap-3 text-white\">\r\n                    <Lock className=\"h-6 w-6 text-white drop-shadow-lg\" />\r\n                    Enable Break Mode\r\n                  </Label>\r\n                  <p className=\"text-base leading-relaxed text-white\">\r\n                    ⚠️ When enabled, the site will be completely unavailable to all users except administrators\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4 lg:gap-6\">\r\n                  <span className={`px-4 py-2 rounded-full text-sm font-bold min-w-[100px] text-center ${\r\n                    isEnabled\r\n                      ? 'bg-red-500 text-white shadow-lg'\r\n                      : 'bg-green-500 text-white shadow-md'\r\n                  }`}>\r\n                    {isEnabled ? '🚫 ENABLED' : '✅ DISABLED'}\r\n                  </span>\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <Label htmlFor=\"break-mode-toggle\" className=\"text-sm font-medium text-white\">\r\n                      {isEnabled ? 'ON' : 'OFF'}\r\n                    </Label>\r\n                    <Switch\r\n                      id=\"break-mode-toggle\"\r\n                      checked={isEnabled}\r\n                      onCheckedChange={setIsEnabled}\r\n                      disabled={updateMutation.isPending}\r\n                      className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Custom Message */}\r\n            <div className=\"space-y-4 p-4 bg-white rounded-lg border-2 border-gray-300 text-black\">\r\n              <Label htmlFor=\"break-message\" className=\"text-lg font-semibold\">Maintenance Message</Label>\r\n              <Textarea\r\n                id=\"break-message\"\r\n                placeholder=\"Enter a message to display to users when the site is in break mode...\"\r\n                value={message}\r\n                onChange={(e) => setMessage(e.target.value)}\r\n                disabled={!isEnabled || updateMutation.isPending}\r\n                rows={5}\r\n                className=\"resize-none text-base p-4 border-2 border-gray-400\"\r\n              />\r\n              <p className=\"text-sm text-black leading-relaxed\">\r\n                This message will be displayed to users when they try to access the site.\r\n                Keep it clear and informative about when the site will be available again.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Preview */}\r\n            {isEnabled && message && (\r\n              <div className=\"space-y-4 p-6 bg-blue-50 dark:bg-blue-950/20 rounded-lg border-2 border-blue-200 dark:border-blue-800\">\r\n                <Label className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">Preview</Label>\r\n                <div className=\"p-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-inner\">\r\n                  <div className=\"text-center space-y-6\">\r\n                    <div className=\"flex justify-center\">\r\n                      <div className=\"relative\">\r\n                        <div className=\"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center shadow-lg\">\r\n                          <Lock className=\"h-10 w-10 text-red-600 dark:text-red-400\" />\r\n                        </div>\r\n                        <div className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg\">\r\n                          <X className=\"h-3 w-3 text-white\" />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <h2 className=\"text-2xl font-bold text-red-600 dark:text-red-400 mb-3\">\r\n                        Site Closed\r\n                      </h2>\r\n                      <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap text-base leading-relaxed\">\r\n                        {message}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Save Button */}\r\n            <div className=\"flex flex-col sm:flex-row justify-center sm:justify-end gap-4 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700\">\r\n              <Button\r\n                onClick={handleSave}\r\n                disabled={updateMutation.isPending}\r\n                className=\"min-w-40 h-12 text-lg font-semibold\"\r\n                size=\"lg\"\r\n              >\r\n                {updateMutation.isPending ? (\r\n                  <>\r\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3\" />\r\n                    Saving Changes...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Save className=\"h-5 w-5 mr-3\" />\r\n                    Save Settings\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useEffect, useState } from \"react\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { Menu, Plus, Edit, Trash2, Star, StarOff, Eye, EyeOff, TestTube } from \"lucide-react\";\r\n\r\ninterface ExternalApiProvider {\r\n  id: string;\r\n  name: string;\r\n  provider: string;\r\n  apiKey: string;\r\n  apiSecret: string;\r\n  endpoint: string;\r\n  isActive: boolean;\r\n  isDefault: boolean;\r\n  networkMappings: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport default function AdminExternalApiProviders() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [providers, setProviders] = useState<ExternalApiProvider[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [editingProvider, setEditingProvider] = useState<ExternalApiProvider | null>(null);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [testingProvider, setTestingProvider] = useState<string | null>(null);\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    provider: \"\",\r\n    apiKey: \"\",\r\n    apiSecret: \"\",\r\n    endpoint: \"\",\r\n    isActive: true,\r\n    isDefault: false,\r\n    networkMappings: JSON.stringify({\r\n      \"mtn\": \"MTN\",\r\n      \"telecel\": \"TELECEL\",\r\n      \"at_bigtime\": \"AIRTELTIGO\",\r\n      \"at_ishare\": \"AIRTELTIGO\",\r\n      \"airteltigo\": \"AIRTELTIGO\"\r\n    }, null, 2)\r\n  });\r\n\r\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\r\n\r\n  useEffect(() => {\r\n    loadProviders();\r\n  }, []);\r\n\r\n  const loadProviders = async () => {\r\n    try {\r\n      const data = await apiRequest(\"GET\", \"/api/admin/external-providers\") as ExternalApiProvider[];\r\n      setProviders(data);\r\n    } catch (error) {\r\n      console.error(\"Failed to load providers:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to load external API providers\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      name: \"\",\r\n      provider: \"\",\r\n      apiKey: \"\",\r\n      apiSecret: \"\",\r\n      endpoint: \"\",\r\n      isActive: true,\r\n      isDefault: false,\r\n      networkMappings: JSON.stringify({\r\n        \"mtn\": \"MTN\",\r\n        \"telecel\": \"TELECEL\",\r\n        \"at_bigtime\": \"AIRTELTIGO\",\r\n        \"at_ishare\": \"AIRTELTIGO\",\r\n        \"airteltigo\": \"AIRTELTIGO\"\r\n      }, null, 2)\r\n    });\r\n    setEditingProvider(null);\r\n  };\r\n\r\n  const openEditDialog = (provider: ExternalApiProvider) => {\r\n    setForm({\r\n      name: provider.name,\r\n      provider: provider.provider,\r\n      apiKey: provider.apiKey,\r\n      apiSecret: provider.apiSecret,\r\n      endpoint: provider.endpoint,\r\n      isActive: provider.isActive,\r\n      isDefault: provider.isDefault,\r\n      networkMappings: provider.networkMappings || JSON.stringify({\r\n        \"mtn\": \"MTN\",\r\n        \"telecel\": \"TELECEL\",\r\n        \"at_bigtime\": \"AIRTELTIGO\",\r\n        \"at_ishare\": \"AIRTELTIGO\",\r\n        \"airteltigo\": \"AIRTELTIGO\"\r\n      }, null, 2)\r\n    });\r\n    setEditingProvider(provider);\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsSaving(true);\r\n\r\n    try {\r\n      // Validate JSON\r\n      JSON.parse(form.networkMappings);\r\n\r\n      const payload = {\r\n        ...form,\r\n        networkMappings: form.networkMappings\r\n      };\r\n\r\n      if (editingProvider) {\r\n        await apiRequest(\"PUT\", `/api/admin/external-providers/${editingProvider.id}`, payload);\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"External API provider updated successfully\",\r\n        });\r\n      } else {\r\n        await apiRequest(\"POST\", \"/api/admin/external-providers\", payload);\r\n        toast({\r\n          title: \"Success\",\r\n          description: \"External API provider created successfully\",\r\n        });\r\n      }\r\n\r\n      setDialogOpen(false);\r\n      resetForm();\r\n      loadProviders();\r\n    } catch (error: any) {\r\n      console.error(\"Failed to save provider:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: error.message || \"Failed to save external API provider\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm(\"Are you sure you want to delete this external API provider?\")) return;\r\n\r\n    try {\r\n      await apiRequest(\"DELETE\", `/api/admin/external-providers/${id}`);\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"External API provider deleted successfully\",\r\n      });\r\n      loadProviders();\r\n    } catch (error) {\r\n      console.error(\"Failed to delete provider:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to delete external API provider\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSetDefault = async (id: string) => {\r\n    try {\r\n      await apiRequest(\"POST\", `/api/admin/external-providers/${id}/set-default`);\r\n      toast({\r\n        title: \"Success\",\r\n        description: \"Default external API provider updated successfully\",\r\n      });\r\n      loadProviders();\r\n    } catch (error) {\r\n      console.error(\"Failed to set default provider:\", error);\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to set default external API provider\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const testProvider = async (provider: ExternalApiProvider) => {\r\n    setTestingProvider(provider.id);\r\n    try {\r\n      const result = await apiRequest(\"GET\", `/api/admin/external-balance?providerId=${provider.id}`) as { success: boolean; error?: string; balance?: any; celebrate?: any };\r\n      if (result.success) {\r\n        toast({\r\n          title: \"Test Successful\",\r\n          description: `Balance check successful for ${provider.name}`,\r\n        });\r\n      } else {\r\n        toast({\r\n          title: \"Test Failed\",\r\n          description: result.error || \"Balance check failed\",\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Test Failed\",\r\n        description: error.message || \"Balance check failed\",\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setTestingProvider(null);\r\n    }\r\n  };\r\n\r\n  const toggleSecretVisibility = (providerId: string) => {\r\n    setShowSecrets(prev => ({\r\n      ...prev,\r\n      [providerId]: !prev[providerId]\r\n    }));\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex h-screen bg-background\">\r\n        <AdminSidebar />\r\n        <div className=\"flex-1 flex items-center justify-center\">\r\n          <div className=\"text-lg\">Loading...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-white border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">External API Providers</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            {/* Header Actions */}\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6\">\r\n              <p className=\"text-muted-foreground\">\r\n                Manage external API providers for data bundle purchases\r\n              </p>\r\n              <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\r\n                <DialogTrigger asChild>\r\n                  <Button>\r\n                    <Plus className=\"h-4 w-4 mr-2\" />\r\n                    Add Provider\r\n                  </Button>\r\n                </DialogTrigger>\r\n                <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto bg-black text-white border-gray-700\">\r\n                  <DialogHeader>\r\n                    <DialogTitle className=\"text-white\">\r\n                      {editingProvider ? \"Edit\" : \"Add\"} External API Provider\r\n                    </DialogTitle>\r\n                    <DialogDescription className=\"text-gray-300\">\r\n                      {editingProvider\r\n                        ? \"Update the external API provider configuration.\"\r\n                        : \"Configure a new external API provider for data bundle purchases.\"\r\n                      }\r\n                    </DialogDescription>\r\n                  </DialogHeader>\r\n                  <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <Label htmlFor=\"name\" className=\"text-white\">Provider Name</Label>\r\n                        <Input\r\n                          id=\"name\"\r\n                          value={form.name}\r\n                          onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n                          placeholder=\"e.g., SkyTech GH\"\r\n                          required\r\n                          className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <Label htmlFor=\"provider\" className=\"text-white\">Provider Type</Label>\r\n                        <Select value={form.provider} onValueChange={(value) => setForm({ ...form, provider: value })}>\r\n                          <SelectTrigger className=\"bg-gray-800 border-gray-600 text-white\">\r\n                            <SelectValue placeholder=\"Select provider type\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent className=\"bg-gray-800 border-gray-600\">\r\n                            <SelectItem value=\"skytech\" className=\"text-white hover:bg-gray-700\">SkyTech</SelectItem>\r\n                            <SelectItem value=\"other\" className=\"text-white hover:bg-gray-700\">Other</SelectItem>\r\n                          </SelectContent>\r\n                        </Select>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"endpoint\" className=\"text-white\">API Endpoint</Label>\r\n                      <Input\r\n                        id=\"endpoint\"\r\n                        value={form.endpoint}\r\n                        onChange={(e) => setForm({ ...form, endpoint: e.target.value })}\r\n                        placeholder=\"https://api.example.com/v1/orders\"\r\n                        required\r\n                        className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <Label htmlFor=\"apiKey\" className=\"text-white\">API Key</Label>\r\n                        <Input\r\n                          id=\"apiKey\"\r\n                          type=\"password\"\r\n                          value={form.apiKey}\r\n                          onChange={(e) => setForm({ ...form, apiKey: e.target.value })}\r\n                          required\r\n                          className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <Label htmlFor=\"apiSecret\" className=\"text-white\">API Secret</Label>\r\n                        <Input\r\n                          id=\"apiSecret\"\r\n                          type=\"password\"\r\n                          value={form.apiSecret}\r\n                          onChange={(e) => setForm({ ...form, apiSecret: e.target.value })}\r\n                          required\r\n                          className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"networkMappings\" className=\"text-white\">Network Mappings (JSON)</Label>\r\n                      <Textarea\r\n                        id=\"networkMappings\"\r\n                        value={form.networkMappings}\r\n                        onChange={(e) => setForm({ ...form, networkMappings: e.target.value })}\r\n                        placeholder='{\"mtn\": \"MTN\", \"telecel\": \"TELECEL\"}'\r\n                        rows={6}\r\n                        required\r\n                        className=\"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400\"\r\n                      />\r\n                      <p className=\"text-sm text-gray-300 mt-1\">\r\n                        JSON mapping of internal network names to external API network codes\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Switch\r\n                          id=\"isActive\"\r\n                          checked={form.isActive}\r\n                          onCheckedChange={(checked) => setForm({ ...form, isActive: checked })}\r\n                          className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                        />\r\n                        <Label htmlFor=\"isActive\" className=\"text-white\">Active</Label>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Switch\r\n                          id=\"isDefault\"\r\n                          checked={form.isDefault}\r\n                          onCheckedChange={(checked) => setForm({ ...form, isDefault: checked })}\r\n                          className=\"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-red-500 [&_[data-radix-switch-thumb]]:bg-white\"\r\n                        />\r\n                        <Label htmlFor=\"isDefault\" className=\"text-white\">Set as Default</Label>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row justify-end gap-2 pt-4\">\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"outline\"\r\n                        onClick={() => setDialogOpen(false)}\r\n                        className=\"w-full sm:w-auto border-gray-600 text-white hover:bg-gray-700\"\r\n                      >\r\n                        Cancel\r\n                      </Button>\r\n                      <Button type=\"submit\" disabled={isSaving} className=\"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white\">\r\n                        {isSaving ? \"Saving...\" : (editingProvider ? \"Update\" : \"Create\")}\r\n                      </Button>\r\n                    </div>\r\n                  </form>\r\n                </DialogContent>\r\n              </Dialog>\r\n            </div>\r\n\r\n            {/* Providers Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6\">\r\n              {providers.map((provider) => (\r\n                <Card key={provider.id} className=\"relative bg-black text-white\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <CardTitle className=\"text-lg flex items-center space-x-2 flex-wrap text-white\">\r\n                        <span className=\"truncate\">{provider.name}</span>\r\n                        {provider.isDefault && (\r\n                          <Badge variant=\"default\" className=\"text-xs shrink-0 bg-yellow-500 text-black\">\r\n                            <Star className=\"h-3 w-3 mr-1\" />\r\n                            Default\r\n                          </Badge>\r\n                        )}\r\n                        {!provider.isActive && (\r\n                          <Badge variant=\"secondary\" className=\"text-xs shrink-0 bg-gray-600 text-white\">\r\n                            Inactive\r\n                          </Badge>\r\n                        )}\r\n                      </CardTitle>\r\n                      <div className=\"flex space-x-1 shrink-0\">\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => testProvider(provider)}\r\n                          disabled={testingProvider === provider.id}\r\n                          title=\"Test Provider\"\r\n                          className=\"h-8 w-8\"\r\n                        >\r\n                          <TestTube className={`h-4 w-4 ${testingProvider === provider.id ? 'animate-pulse' : ''}`} />\r\n                        </Button>\r\n                        {!provider.isDefault && (\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => handleSetDefault(provider.id)}\r\n                            title=\"Set as Default\"\r\n                            className=\"h-8 w-8\"\r\n                          >\r\n                            <StarOff className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        )}\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => openEditDialog(provider)}\r\n                          title=\"Edit Provider\"\r\n                          className=\"h-8 w-8\"\r\n                        >\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => handleDelete(provider.id)}\r\n                          title=\"Delete Provider\"\r\n                          className=\"text-destructive hover:text-destructive h-8 w-8\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-3\">\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">Provider Type</Label>\r\n                      <p className=\"text-sm text-white\">{provider.provider}</p>\r\n                    </div>\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">Endpoint</Label>\r\n                      <p className=\"font-mono break-all text-xs text-white\">{provider.endpoint}</p>\r\n                    </div>\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">API Key</Label>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Input\r\n                          value={showSecrets[provider.id] ? provider.apiKey : \"••••••••••••••••\"}\r\n                          readOnly\r\n                          className=\"font-mono h-8 text-xs bg-gray-800 border-gray-600 text-white\"\r\n                        />\r\n                        <Button\r\n                          variant=\"ghost\"\r\n                          size=\"icon\"\r\n                          onClick={() => toggleSecretVisibility(provider.id)}\r\n                          className=\"h-8 w-8 shrink-0 text-white hover:bg-gray-700\"\r\n                        >\r\n                          {showSecrets[provider.id] ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <Label className=\"text-sm font-medium text-gray-300\">Network Mappings</Label>\r\n                      <div className=\"text-xs bg-gray-800 p-2 rounded max-h-20 overflow-y-auto border border-gray-600\">\r\n                        <pre className=\"whitespace-pre-wrap break-words text-white\">{provider.networkMappings || \"{}\"}</pre>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              ))}\r\n            </div>\r\n\r\n            {providers.length === 0 && (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"text-muted-foreground\">\r\n                  <p className=\"text-lg mb-2\">No external API providers configured</p>\r\n                  <p className=\"text-sm\">Add your first provider to enable external data bundle purchases</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatDate } from \"@/lib/constants\";\r\nimport { Bell, Plus, Trash2, Menu, Eye, EyeOff, ExternalLink } from \"lucide-react\";\r\n\r\ninterface Announcement {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  isActive: boolean;\r\n  audiences?: string[] | string; // Support both old string format and new array format\r\n  audience?: string; // Legacy field for backwards compatibility\r\n  createdAt: string;\r\n  createdBy: string;\r\n}\r\n\r\n// Helper function to safely parse audiences\r\nfunction getAudiencesArray(announcement: Announcement): string[] {\r\n  // If audiences exists and is already an array, return it\r\n  if (Array.isArray(announcement.audiences)) {\r\n    return announcement.audiences;\r\n  }\r\n  \r\n  // If audiences is a JSON string, parse it\r\n  if (typeof announcement.audiences === 'string') {\r\n    try {\r\n      const parsed = JSON.parse(announcement.audiences);\r\n      return Array.isArray(parsed) ? parsed : [parsed];\r\n    } catch {\r\n      return [announcement.audiences];\r\n    }\r\n  }\r\n  \r\n  // Fallback to legacy audience field\r\n  if (announcement.audience) {\r\n    return [announcement.audience];\r\n  }\r\n  \r\n  // Default to \"all\"\r\n  return [\"all\"];\r\n}\r\n\r\n// Function to parse URLs from text and create clickable links\r\nfunction parseMessageWithLinks(text: string) {\r\n  // URL regex pattern\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  \r\n  // Split text by URLs and create elements\r\n  const parts = text.split(urlRegex);\r\n  \r\n  return parts.map((part, index) => {\r\n    if (urlRegex.test(part)) {\r\n      return (\r\n        <a\r\n          key={index}\r\n          href={part}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-blue-600 hover:text-blue-800 underline inline-flex items-start gap-1 flex-wrap break-words break-all overflow-wrap-anywhere whitespace-pre-wrap text-left\"\r\n        >\r\n          <span className=\"min-w-0 break-words break-all overflow-wrap-anywhere whitespace-pre-wrap\">{part}</span>\r\n          <ExternalLink className=\"h-3 w-3 flex-shrink-0\" />\r\n        </a>\r\n      );\r\n    }\r\n    return part;\r\n  });\r\n}\r\n\r\nexport default function AdminAnnouncements() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [newAnnouncement, setNewAnnouncement] = useState({\r\n    title: \"\",\r\n    message: \"\",\r\n    audiences: [\"all\"],\r\n  });\r\n  const [deleteAnnouncementId, setDeleteAnnouncementId] = useState<string | null>(null);\r\n\r\n  const { data: announcements, isLoading } = useQuery<Announcement[]>({\r\n    queryKey: [\"/api/admin/announcements\"],\r\n    refetchInterval: 30000,\r\n    onSuccess: (data) => {\r\n      console.log(\"[Admin] Fetched announcements:\", data?.map(a => ({ id: a.id, title: a.title, audiences: a.audiences })));\r\n    },\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: { title: string; message: string; audiences: string[] }) => {\r\n      console.log(\"[Admin] Sending to API:\", data);\r\n      return apiRequest(\"POST\", \"/api/admin/announcements\", data);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"✅ Announcement created successfully\" });\r\n      setNewAnnouncement({ title: \"\", message: \"\", audiences: [\"all\"] });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to create announcement\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const toggleMutation = useMutation({\r\n    mutationFn: ({ id, isActive }: { id: string; isActive: boolean }) =>\r\n      apiRequest(\"PATCH\", `/api/admin/announcements/${id}`, { isActive }),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"✅ Announcement updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to update announcement\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/announcements/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\r\n      toast({ title: \"✅ Announcement deleted successfully\" });\r\n      setDeleteAnnouncementId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to delete announcement\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleCreate = () => {\r\n    if (!newAnnouncement.title.trim() || !newAnnouncement.message.trim()) {\r\n      toast({\r\n        title: \"Validation Error\",\r\n        description: \"Please fill in both title and message\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n    console.log(\"Creating announcement with audiences:\", newAnnouncement.audiences);\r\n    createMutation.mutate(newAnnouncement);\r\n  };\r\n\r\n  const activeAnnouncements = announcements?.filter(a => a.isActive) || [];\r\n  const inactiveAnnouncements = announcements?.filter(a => !a.isActive) || [];\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"md:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Announcements</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-6xl mx-auto space-y-6\">\r\n            {/* Create Announcement Card */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Plus className=\"h-5 w-5\" />\r\n                  Create New Announcement\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Create announcements that will be shown to all registered users when they login\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"title\">Title</Label>\r\n                  <Textarea\r\n                    id=\"title\"\r\n                    value={newAnnouncement.title}\r\n                    onChange={(e) => setNewAnnouncement({ ...newAnnouncement, title: e.target.value })}\r\n                    placeholder=\"Enter announcement title\"\r\n                    rows={2}\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"message\">Message</Label>\r\n                  <Textarea\r\n                    id=\"message\"\r\n                    value={newAnnouncement.message}\r\n                    onChange={(e) => setNewAnnouncement({ ...newAnnouncement, message: e.target.value })}\r\n                    placeholder=\"Enter announcement message\"\r\n                    rows={4}\r\n                  />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <Label>Target Audiences (Select One or More)</Label>\r\n                  <div className=\"grid grid-cols-2 gap-3 border rounded-lg p-4\">\r\n                    {[\r\n                      { value: \"all\", label: \"Everyone\" },\r\n                      { value: \"guest\", label: \"Guests Only\" },\r\n                      { value: \"loggedIn\", label: \"Logged In Users\" },\r\n                      { value: \"agent\", label: \"Agents\" },\r\n                      { value: \"storefront\", label: \"Storefront Visitors\" },\r\n                    ].map(({ value, label }) => (\r\n                      <label key={value} className=\"flex items-center gap-2 cursor-pointer\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={newAnnouncement.audiences.includes(value)}\r\n                          onChange={(e) => {\r\n                            if (e.target.checked) {\r\n                              // If selecting \"all\", clear all others\r\n                              if (value === \"all\") {\r\n                                setNewAnnouncement({\r\n                                  ...newAnnouncement,\r\n                                  audiences: [\"all\"],\r\n                                });\r\n                              } else {\r\n                                // Remove \"all\" and add the selected value\r\n                                const updatedAudiences = newAnnouncement.audiences\r\n                                  .filter(a => a !== \"all\")\r\n                                  .concat(value);\r\n                                setNewAnnouncement({\r\n                                  ...newAnnouncement,\r\n                                  audiences: updatedAudiences,\r\n                                });\r\n                              }\r\n                            } else {\r\n                              // Remove the unchecked value\r\n                              const updatedAudiences = newAnnouncement.audiences.filter(a => a !== value);\r\n                              // If nothing is selected, default to \"all\"\r\n                              setNewAnnouncement({\r\n                                ...newAnnouncement,\r\n                                audiences: updatedAudiences.length > 0 ? updatedAudiences : [\"all\"],\r\n                              });\r\n                            }\r\n                          }}\r\n                          className=\"rounded\"\r\n                        />\r\n                        <span className=\"text-sm\">{label}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                <Button\r\n                  onClick={handleCreate}\r\n                  disabled={createMutation.isPending}\r\n                  className=\"w-full\"\r\n                >\r\n                  {createMutation.isPending ? \"Creating...\" : \"Create Announcement\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Active Announcements */}\r\n            {activeAnnouncements.length > 0 && (\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Eye className=\"h-5 w-5 text-green-600\" />\r\n                    Active Announcements ({activeAnnouncements.length})\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    These announcements are currently visible to users\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-3 md:space-y-4\">\r\n                    {activeAnnouncements.map((announcement) => (\r\n                      <div key={announcement.id} className=\"border rounded-lg p-3 md:p-4\">\r\n                        {/* Debug info */}\r\n                        <div className=\"text-xs text-muted-foreground mb-2 font-mono\">\r\n                          Raw audiences: {JSON.stringify(announcement.audiences)}\r\n                        </div>\r\n                        <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <h3 className=\"font-semibold text-sm md:text-base leading-tight break-words\">{announcement.title}</h3>\r\n                            <div className=\"text-muted-foreground mt-1 md:mt-2 text-xs md:text-sm leading-relaxed break-words overflow-wrap-anywhere whitespace-pre-wrap\">\r\n                              {parseMessageWithLinks(announcement.message)}\r\n                            </div>\r\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 md:mt-3 text-xs md:text-sm text-muted-foreground\">\r\n                              <span>Created: {formatDate(announcement.createdAt)}</span>\r\n                              <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800 text-xs w-fit\">\r\n                                Active\r\n                              </Badge>\r\n                              <div className=\"flex flex-wrap gap-2\">\r\n                                {getAudiencesArray(announcement).map((aud) => (\r\n                                  <Badge key={aud} variant=\"outline\" className=\"text-xs w-fit capitalize\">\r\n                                    {aud === \"all\" ? \"Everyone\" : \r\n                                     aud === \"guest\" ? \"Guests\" :\r\n                                     aud === \"loggedIn\" ? \"Logged In\" :\r\n                                     aud === \"agent\" ? \"Agents\" :\r\n                                     aud === \"storefront\" ? \"Storefront\" : aud}\r\n                                  </Badge>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex gap-1 sm:gap-2 flex-shrink-0\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => toggleMutation.mutate({ id: announcement.id, isActive: false })}\r\n                              disabled={toggleMutation.isPending}\r\n                              className=\"h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                            >\r\n                              <EyeOff className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Hide</span>\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              className=\"text-destructive hover:text-destructive h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                              onClick={() => setDeleteAnnouncementId(announcement.id)}\r\n                            >\r\n                              <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Delete</span>\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Inactive Announcements */}\r\n            {inactiveAnnouncements.length > 0 && (\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <EyeOff className=\"h-5 w-5 text-muted-foreground\" />\r\n                    Inactive Announcements ({inactiveAnnouncements.length})\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    These announcements are hidden from users\r\n                  </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-3 md:space-y-4\">\r\n                    {inactiveAnnouncements.map((announcement) => (\r\n                      <div key={announcement.id} className=\"border rounded-lg p-3 md:p-4 opacity-75\">\r\n                        <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <h3 className=\"font-semibold text-sm md:text-base leading-tight break-words\">{announcement.title}</h3>\r\n                            <div className=\"text-muted-foreground mt-1 md:mt-2 text-xs md:text-sm leading-relaxed break-words overflow-wrap-anywhere whitespace-pre-wrap\">\r\n                              {parseMessageWithLinks(announcement.message)}\r\n                            </div>\r\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 md:mt-3 text-xs md:text-sm text-muted-foreground\">\r\n                              <span>Created: {formatDate(announcement.createdAt)}</span>\r\n                              <Badge variant=\"outline\" className=\"w-fit\">\r\n                                Inactive\r\n                              </Badge>\r\n                              <div className=\"flex flex-wrap gap-2\">\r\n                                {getAudiencesArray(announcement).map((aud) => (\r\n                                  <Badge key={aud} variant=\"outline\" className=\"text-xs w-fit capitalize\">\r\n                                    {aud === \"all\" ? \"Everyone\" : \r\n                                     aud === \"guest\" ? \"Guests\" :\r\n                                     aud === \"loggedIn\" ? \"Logged In\" :\r\n                                     aud === \"agent\" ? \"Agents\" :\r\n                                     aud === \"storefront\" ? \"Storefront\" : aud}\r\n                                  </Badge>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex gap-1 sm:gap-2 flex-shrink-0\">\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              onClick={() => toggleMutation.mutate({ id: announcement.id, isActive: true })}\r\n                              disabled={toggleMutation.isPending}\r\n                              className=\"h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                            >\r\n                              <Eye className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Show</span>\r\n                            </Button>\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"outline\"\r\n                              className=\"text-destructive hover:text-destructive h-8 w-8 p-0 sm:h-9 sm:w-auto sm:px-3\"\r\n                              onClick={() => setDeleteAnnouncementId(announcement.id)}\r\n                            >\r\n                              <Trash2 className=\"h-3 w-3 sm:h-4 sm:w-4\" />\r\n                              <span className=\"sr-only sm:not-sr-only sm:ml-1\">Delete</span>\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Empty State */}\r\n            {announcements?.length === 0 && !isLoading && (\r\n              <Card>\r\n                <CardContent className=\"text-center py-12\">\r\n                  <Bell className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold mb-2\">No Announcements Yet</h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    Create your first announcement to communicate with users\r\n                  </p>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete confirmation dialog */}\r\n      <AlertDialog open={!!deleteAnnouncementId} onOpenChange={(open) => !open && setDeleteAnnouncementId(null)}>\r\n        <AlertDialogContent className=\"bg-white dark:bg-slate-900 text-white shadow-xl border border-border\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Announcement</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to delete this announcement? This action cannot be undone.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={() => deleteAnnouncementId && deleteMutation.mutate(deleteAnnouncementId)}\r\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n            >\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatDate } from \"@/lib/constants\";\r\nimport { PlayCircle, Plus, Trash2, Menu, Eye, EyeOff } from \"lucide-react\";\r\n\r\ninterface VideoGuide {\r\n  id: string;\r\n  title: string;\r\n  description?: string;\r\n  category: \"guest\" | \"customer\" | \"agent\";\r\n  url: string;\r\n  provider?: string;\r\n  isPublished: boolean;\r\n  createdAt?: string;\r\n}\r\n\r\nexport default function AdminGuides() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [newGuide, setNewGuide] = useState<Partial<VideoGuide>>({\r\n    title: \"\",\r\n    description: \"\",\r\n    category: \"guest\",\r\n    url: \"\",\r\n    provider: undefined,\r\n    isPublished: true,\r\n  });\r\n  const [deleteGuideId, setDeleteGuideId] = useState<string | null>(null);\r\n\r\n  const { data: guides } = useQuery<VideoGuide[]>({\r\n    queryKey: [\"/api/admin/guides\"],\r\n  });\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: (data: Partial<VideoGuide>) => apiRequest(\"POST\", \"/api/admin/guides\", data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/guides\"] });\r\n      toast({ title: \"✅ Guide created successfully\" });\r\n      setNewGuide({ title: \"\", description: \"\", category: \"guest\", url: \"\", provider: undefined, isPublished: true });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to create guide\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: ({ id, data }: { id: string; data: Partial<VideoGuide> }) => apiRequest(\"PATCH\", `/api/admin/guides/${id}`, data),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/guides\"] });\r\n      toast({ title: \"✅ Guide updated successfully\" });\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to update guide\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: (id: string) => apiRequest(\"DELETE\", `/api/admin/guides/${id}`, {}),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/guides\"] });\r\n      toast({ title: \"✅ Guide deleted successfully\" });\r\n      setDeleteGuideId(null);\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({ title: \"Failed to delete guide\", description: error.message, variant: \"destructive\" });\r\n    },\r\n  });\r\n\r\n  const handleCreate = () => {\r\n    if (!newGuide.title?.trim() || !newGuide.url?.trim() || !newGuide.category) {\r\n      toast({ title: \"Validation Error\", description: \"Please fill in title, URL and category\", variant: \"destructive\" });\r\n      return;\r\n    }\r\n    createMutation.mutate(newGuide);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 md:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden md:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\" onClick={() => setSidebarOpen(true)}>\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Video Guides</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-6xl mx-auto space-y-6\">\r\n            {/* Create Guide */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Plus className=\"h-5 w-5\" />\r\n                  Add New Guide\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  You can use any YouTube/Vimeo URL - it will be automatically converted to embed format.\r\n                  <br />\r\n                  <span className=\"text-xs mt-1 block\">\r\n                    ✅ Supported: youtube.com/watch, youtube.com/shorts, youtu.be, vimeo.com, or direct MP4 links\r\n                  </span>\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"title\">Title</Label>\r\n                    <Input id=\"title\" value={newGuide.title || \"\"} onChange={(e) => setNewGuide({ ...newGuide, title: e.target.value })} placeholder=\"Guide title\" />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"category\">Category</Label>\r\n                    <Select value={newGuide.category} onValueChange={(v) => setNewGuide({ ...newGuide, category: v as VideoGuide[\"category\"] })}>\r\n                      <SelectTrigger id=\"category\"><SelectValue placeholder=\"Select category\" /></SelectTrigger>\r\n                      <SelectContent>\r\n                        <SelectItem value=\"guest\">Guest</SelectItem>\r\n                        <SelectItem value=\"customer\">Customer</SelectItem>\r\n                        <SelectItem value=\"agent\">Agent</SelectItem>\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n                  <div className=\"space-y-2 md:col-span-2\">\r\n                    <Label htmlFor=\"url\">Video URL</Label>\r\n                    <Input \r\n                      id=\"url\" \r\n                      value={newGuide.url || \"\"} \r\n                      onChange={(e) => setNewGuide({ ...newGuide, url: e.target.value })} \r\n                      placeholder=\"Paste any YouTube or Vimeo link (e.g., youtube.com/watch?v=xxx or youtube.com/shorts/xxx)\"\r\n                    />\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      The URL will be automatically converted to the correct embed format\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"space-y-2 md:col-span-2\">\r\n                    <Label htmlFor=\"description\">Description</Label>\r\n                    <Textarea id=\"description\" value={newGuide.description || \"\"} onChange={(e) => setNewGuide({ ...newGuide, description: e.target.value })} placeholder=\"Optional description\" rows={3} />\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Switch id=\"published\" checked={newGuide.isPublished ?? true} onCheckedChange={(checked) => setNewGuide({ ...newGuide, isPublished: checked })} />\r\n                    <Label htmlFor=\"published\">Published</Label>\r\n                  </div>\r\n                </div>\r\n\r\n                <Button onClick={handleCreate} disabled={createMutation.isPending} className=\"w-full\">\r\n                  {createMutation.isPending ? \"Creating...\" : \"Create Guide\"}\r\n                </Button>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Guides List */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <PlayCircle className=\"h-5 w-5\" />\r\n                  All Guides ({guides?.length || 0})\r\n                </CardTitle>\r\n                <CardDescription>Manage visibility and update details.</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-3\">\r\n                  {(guides || []).map((guide) => (\r\n                    <div key={guide.id} className=\"border rounded-lg p-3 md:p-4\">\r\n                      <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Badge variant=\"secondary\" className=\"capitalize\">{guide.category}</Badge>\r\n                            {guide.isPublished ? (\r\n                              <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800 text-xs\">Published</Badge>\r\n                            ) : (\r\n                              <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800 text-xs\">Draft</Badge>\r\n                            )}\r\n                          </div>\r\n                          <h3 className=\"font-semibold text-sm md:text-base leading-tight mt-1\">{guide.title}</h3>\r\n                          {guide.description && (\r\n                            <div className=\"text-muted-foreground mt-1 text-xs md:text-sm leading-relaxed\">{guide.description}</div>\r\n                          )}\r\n                          {guide.createdAt && (\r\n                            <div className=\"text-xs text-muted-foreground mt-2\">Created: {formatDate(guide.createdAt)}</div>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex gap-2 flex-shrink-0 items-center\">\r\n                          <Button size=\"sm\" variant=\"outline\" onClick={() => updateMutation.mutate({ id: guide.id, data: { isPublished: !guide.isPublished } })} disabled={updateMutation.isPending}>\r\n                            {guide.isPublished ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                            <span className=\"ml-1 hidden sm:inline\">{guide.isPublished ? \"Unpublish\" : \"Publish\"}</span>\r\n                          </Button>\r\n                          <Button size=\"sm\" variant=\"outline\" className=\"text-destructive hover:text-destructive\" onClick={() => setDeleteGuideId(guide.id)}>\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                            <span className=\"ml-1 hidden sm:inline\">Delete</span>\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Delete confirmation */}\r\n      <AlertDialog open={!!deleteGuideId} onOpenChange={(open) => !open && setDeleteGuideId(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Guide</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              This action cannot be undone. This will permanently delete the guide.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction onClick={() => deleteGuideId && deleteMutation.mutate(deleteGuideId)} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\r\n              Delete\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { AdminSidebar } from \"@/components/layout/admin-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogFooter,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { Wallet, Menu, Search, Plus, User, Users, Minus } from \"lucide-react\";\r\n\r\ninterface UserOrAgent {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  phone: string | null;\r\n  role: string;\r\n  walletBalance: number;\r\n  createdAt: string;\r\n}\r\n\r\ninterface TopupData {\r\n  userId: string;\r\n  amount: number;\r\n  reason: string;\r\n}\r\n\r\ninterface TopupResponse {\r\n  success: boolean;\r\n  userName: string;\r\n  amount: number;\r\n  newBalance: number;\r\n  transaction: any;\r\n}\r\n\r\ninterface DeductionData {\r\n  userId: string;\r\n  amount: number;\r\n  reason: string;\r\n}\r\n\r\ninterface DeductionResponse {\r\n  success: boolean;\r\n  userName: string;\r\n  amount: number;\r\n  newBalance: number;\r\n  walletDeductionRecord: any;\r\n}\r\n\r\nexport default function AdminManualTopup() {\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [selectedUser, setSelectedUser] = useState<UserOrAgent | null>(null);\r\n  const [topupAmount, setTopupAmount] = useState(\"\");\r\n  const [topupReason, setTopupReason] = useState(\"\");\r\n  const [showTopupDialog, setShowTopupDialog] = useState(false);\r\n  const [showConfirmDialog, setShowConfirmDialog] = useState(false);\r\n  \r\n  // Deduction states\r\n  const [deductAmount, setDeductAmount] = useState(\"\");\r\n  const [deductReason, setDeductReason] = useState(\"\");\r\n  const [showDeductDialog, setShowDeductDialog] = useState(false);\r\n  const [showDeductConfirmDialog, setShowDeductConfirmDialog] = useState(false);\r\n\r\n  const { data: usersAndAgents, isLoading } = useQuery<UserOrAgent[]>({\r\n    queryKey: [\"/api/admin/users-agents\"],\r\n    refetchInterval: 30000,\r\n  });\r\n\r\n  const topupMutation = useMutation<TopupResponse, Error, TopupData>({\r\n    mutationFn: (data: TopupData) =>\r\n      apiRequest<TopupResponse>(\"POST\", \"/api/admin/manual-topup\", data),\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users-agents\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/transactions\"] });\r\n      toast({\r\n        title: \"✅ Manual top-up successful\",\r\n        description: `${formatCurrency(data.amount)} added to ${data.userName}'s wallet`\r\n      });\r\n      setShowTopupDialog(false);\r\n      setSelectedUser(null);\r\n      setTopupAmount(\"\");\r\n      setTopupReason(\"\");\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to process top-up\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const deductMutation = useMutation<DeductionResponse, Error, DeductionData>({\r\n    mutationFn: (data: DeductionData) =>\r\n      apiRequest<DeductionResponse>(\"POST\", \"/api/admin/manual-deduct\", data),\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users-agents\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/transactions\"] });\r\n      toast({\r\n        title: \"✅ Deduction successful\",\r\n        description: `${formatCurrency(data.amount)} deducted from ${data.userName}'s wallet`\r\n      });\r\n      setShowDeductDialog(false);\r\n      setSelectedUser(null);\r\n      setDeductAmount(\"\");\r\n      setDeductReason(\"\");\r\n    },\r\n    onError: (error: Error) => {\r\n      toast({\r\n        title: \"Failed to process deduction\",\r\n        description: error.message,\r\n        variant: \"destructive\"\r\n      });\r\n    },\r\n  });\r\n\r\n  const filteredUsers = usersAndAgents?.filter(user =>\r\n    user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n    (user.phone && user.phone.includes(searchQuery))\r\n  ) || [];\r\n\r\n  const handleTopup = () => {\r\n    if (!selectedUser || !topupAmount || !topupReason) {\r\n      toast({\r\n        title: \"Missing information\",\r\n        description: \"Please fill in all required fields\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    const amount = parseFloat(topupAmount);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      toast({\r\n        title: \"Invalid amount\",\r\n        description: \"Please enter a valid positive amount\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setShowConfirmDialog(true);\r\n  };\r\n\r\n  const confirmTopup = () => {\r\n    if (!selectedUser) return;\r\n\r\n    topupMutation.mutate({\r\n      userId: selectedUser.id,\r\n      amount: parseFloat(topupAmount),\r\n      reason: topupReason\r\n    });\r\n    setShowConfirmDialog(false);\r\n  };\r\n\r\n  const handleDeduction = () => {\r\n    if (!selectedUser || !deductAmount || !deductReason) {\r\n      toast({\r\n        title: \"Missing information\",\r\n        description: \"Please fill in all required fields\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    const amount = parseFloat(deductAmount);\r\n    if (isNaN(amount) || amount <= 0) {\r\n      toast({\r\n        title: \"Invalid amount\",\r\n        description: \"Please enter a valid positive amount\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (amount > selectedUser.walletBalance) {\r\n      toast({\r\n        title: \"Insufficient balance\",\r\n        description: \"Deduction amount exceeds user's wallet balance\",\r\n        variant: \"destructive\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    setShowDeductConfirmDialog(true);\r\n  };\r\n\r\n  const confirmDeduction = () => {\r\n    if (!selectedUser) return;\r\n\r\n    deductMutation.mutate({\r\n      userId: selectedUser.id,\r\n      amount: parseFloat(deductAmount),\r\n      reason: deductReason\r\n    });\r\n    setShowDeductConfirmDialog(false);\r\n  };\r\n\r\n  const getRoleIcon = (role: string) => {\r\n    switch (role) {\r\n      case 'agent':\r\n      case 'dealer':\r\n      case 'super_dealer':\r\n      case 'master':\r\n        return <Users className=\"h-4 w-4\" />;\r\n      default:\r\n        return <User className=\"h-4 w-4\" />;\r\n    }\r\n  };\r\n\r\n  const getRoleBadgeColor = (role: string) => {\r\n    switch (role) {\r\n      case 'admin':\r\n        return 'bg-red-100 text-red-800';\r\n      case 'master':\r\n        return 'bg-purple-100 text-purple-800';\r\n      case 'super_dealer':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'dealer':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'agent':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-background\">\r\n      {/* Mobile sidebar overlay */}\r\n      {sidebarOpen && (\r\n        <div className=\"fixed inset-0 z-50 lg:hidden\">\r\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setSidebarOpen(false)} />\r\n          <div className=\"fixed left-0 top-0 bottom-0 w-64 bg-sidebar border-r transform transition-transform duration-200 ease-in-out\">\r\n            <AdminSidebar onClose={() => setSidebarOpen(false)} />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Desktop sidebar */}\r\n      <div className=\"hidden lg:block\">\r\n        <AdminSidebar />\r\n      </div>\r\n\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between gap-4 h-16 border-b px-4 lg:px-6\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <div>\r\n              <h1 className=\"text-base font-semibold\">Manual Top-up</h1>\r\n              <p className=\"text-xs text-muted-foreground\">\r\n                Manually add funds to user/agent wallets\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Search and Actions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Wallet className=\"h-5 w-5\" />\r\n                  Manual Wallet Top-up\r\n                </CardTitle>\r\n                <CardDescription>\r\n                  Search for users or agents and manually add funds to their wallets\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                  <div className=\"flex-1\">\r\n                    <Label htmlFor=\"search\">Search Users/Agents</Label>\r\n                    <div className=\"relative\">\r\n                      <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <Input\r\n                        id=\"search\"\r\n                        placeholder=\"Search by name, email, or phone...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                        className=\"pl-10\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Users Table */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Users & Agents ({filteredUsers.length})</CardTitle>\r\n                <CardDescription>\r\n                  Select a user or agent to manually top-up their wallet\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <TableSkeleton />\r\n                ) : (\r\n                  <div className=\"overflow-x-auto -mx-6 px-6 md:mx-0 md:px-0\">\r\n                    <Table className=\"min-w-full\">\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead className=\"whitespace-nowrap\">User</TableHead>\r\n                          <TableHead className=\"whitespace-nowrap\">Role</TableHead>\r\n                          <TableHead className=\"whitespace-nowrap\">Phone</TableHead>\r\n                          <TableHead className=\"whitespace-nowrap\">Wallet Balance</TableHead>\r\n                          <TableHead className=\"whitespace-nowrap\">Actions</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {filteredUsers.map((user) => (\r\n                          <TableRow key={user.id}>\r\n                            <TableCell>\r\n                              <div className=\"flex items-center gap-2\">\r\n                                {getRoleIcon(user.role)}\r\n                                <div>\r\n                                  <div className=\"font-medium\">{user.name}</div>\r\n                                  <div className=\"text-sm text-muted-foreground\">{user.email}</div>\r\n                                </div>\r\n                              </div>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <Badge className={getRoleBadgeColor(user.role)}>\r\n                                {user.role.replace('_', ' ').toUpperCase()}\r\n                              </Badge>\r\n                            </TableCell>\r\n                            <TableCell className=\"whitespace-nowrap\">{user.phone || 'N/A'}</TableCell>\r\n                            <TableCell className=\"font-medium whitespace-nowrap\">\r\n                              {formatCurrency(user.walletBalance)}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                              <div className=\"flex gap-2\">\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  onClick={() => {\r\n                                    setSelectedUser(user);\r\n                                    setShowTopupDialog(true);\r\n                                  }}\r\n                                  className=\"flex items-center gap-2 bg-green-600 hover:bg-green-700 whitespace-nowrap\"\r\n                                >\r\n                                  <Plus className=\"h-4 w-4\" />\r\n                                  Top-up\r\n                                </Button>\r\n                                <Button\r\n                                  size=\"sm\"\r\n                                  variant=\"destructive\"\r\n                                  onClick={() => {\r\n                                    setSelectedUser(user);\r\n                                    setShowDeductDialog(true);\r\n                                  }}\r\n                                  className=\"flex items-center gap-2 whitespace-nowrap\"\r\n                                >\r\n                                  <Minus className=\"h-4 w-4\" />\r\n                                  Deduct\r\n                                </Button>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                )}\r\n\r\n                {!isLoading && filteredUsers.length === 0 && (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    {searchQuery ? 'No users found matching your search.' : 'No users or agents found.'}\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Top-up Dialog */}\r\n      <Dialog open={showTopupDialog} onOpenChange={setShowTopupDialog}>\r\n        <DialogContent className=\"bg-white dark:bg-gray-900 border-0 shadow-lg text-white dark:text-white\">\r\n          <DialogHeader>\r\n            <DialogTitle>Manual Wallet Top-up</DialogTitle>\r\n            <DialogDescription>\r\n              Add funds to {selectedUser?.name}'s wallet\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <Label htmlFor=\"amount\">Amount (GHS)</Label>\r\n              <Input\r\n                id=\"amount\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                placeholder=\"Enter amount\"\r\n                value={topupAmount}\r\n                onChange={(e) => setTopupAmount(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"reason\">Reason</Label>\r\n              <Select value={topupReason} onValueChange={setTopupReason}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select a reason\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"compensation\">Compensation</SelectItem>\r\n                  <SelectItem value=\"bonus\">Bonus</SelectItem>\r\n                  <SelectItem value=\"refund\">Refund</SelectItem>\r\n                  <SelectItem value=\"adjustment\">Balance Adjustment</SelectItem>\r\n                  <SelectItem value=\"promotion\">Promotional Credit</SelectItem>\r\n                  <SelectItem value=\"other\">Other</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            {selectedUser && (\r\n              <div className=\"p-3 bg-muted rounded-lg\">\r\n                <div className=\"text-sm\">\r\n                  <strong>Current Balance:</strong> {formatCurrency(selectedUser.walletBalance)}\r\n                </div>\r\n                <div className=\"text-sm\">\r\n                  <strong>New Balance:</strong> {formatCurrency(selectedUser.walletBalance + (parseFloat(topupAmount) || 0))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setShowTopupDialog(false)}>\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleTopup} disabled={topupMutation.isPending}>\r\n              {topupMutation.isPending ? \"Processing...\" : \"Top-up Wallet\"}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Confirmation Dialog */}\r\n      <AlertDialog open={showConfirmDialog} onOpenChange={setShowConfirmDialog}>\r\n        <AlertDialogContent className=\"bg-white dark:bg-gray-900 border-0 shadow-lg text-white dark:text-white\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Confirm Manual Top-up</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to add {formatCurrency(parseFloat(topupAmount) || 0)} to {selectedUser?.name}'s wallet?\r\n              <br />\r\n              <strong>Reason:</strong> {topupReason}\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmTopup} className=\"bg-green-600 hover:bg-green-700\">\r\n              Confirm Top-up\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* Deduction Dialog */}\r\n      <Dialog open={showDeductDialog} onOpenChange={setShowDeductDialog}>\r\n        <DialogContent className=\"bg-white dark:bg-gray-900 border-0 shadow-lg text-white dark:text-white\">\r\n          <DialogHeader>\r\n            <DialogTitle>Manual Wallet Deduction</DialogTitle>\r\n            <DialogDescription>\r\n              Deduct funds from {selectedUser?.name}'s wallet\r\n            </DialogDescription>\r\n          </DialogHeader>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <Label htmlFor=\"deduct-amount\">Amount (GHS)</Label>\r\n              <Input\r\n                id=\"deduct-amount\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                max={selectedUser?.walletBalance || 0}\r\n                placeholder=\"Enter amount to deduct\"\r\n                value={deductAmount}\r\n                onChange={(e) => setDeductAmount(e.target.value)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <Label htmlFor=\"deduct-reason\">Reason</Label>\r\n              <Select value={deductReason} onValueChange={setDeductReason}>\r\n                <SelectTrigger>\r\n                  <SelectValue placeholder=\"Select a reason\" />\r\n                </SelectTrigger>\r\n                <SelectContent>\r\n                  <SelectItem value=\"correction\">Balance Correction</SelectItem>\r\n                  <SelectItem value=\"penalty\">Penalty</SelectItem>\r\n                  <SelectItem value=\"chargeback\">Chargeback</SelectItem>\r\n                  <SelectItem value=\"fraud\">Fraud Investigation</SelectItem>\r\n                  <SelectItem value=\"adjustment\">Administrative Adjustment</SelectItem>\r\n                  <SelectItem value=\"other\">Other</SelectItem>\r\n                </SelectContent>\r\n              </Select>\r\n            </div>\r\n            {selectedUser && (\r\n              <div className=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n                <div className=\"text-sm text-red-900 dark:text-red-100\">\r\n                  <strong>Current Balance:</strong> {formatCurrency(selectedUser.walletBalance)}\r\n                </div>\r\n                <div className=\"text-sm text-red-900 dark:text-red-100\">\r\n                  <strong>New Balance:</strong> {formatCurrency(Math.max(0, selectedUser.walletBalance - (parseFloat(deductAmount) || 0)))}\r\n                </div>\r\n                {parseFloat(deductAmount) > selectedUser.walletBalance && (\r\n                  <div className=\"text-xs text-red-600 dark:text-red-400 mt-2\">\r\n                    ⚠️ Deduction exceeds available balance\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <DialogFooter>\r\n            <Button variant=\"outline\" onClick={() => setShowDeductDialog(false)}>\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              variant=\"destructive\" \r\n              onClick={handleDeduction} \r\n              disabled={deductMutation.isPending}\r\n            >\r\n              {deductMutation.isPending ? \"Processing...\" : \"Deduct from Wallet\"}\r\n            </Button>\r\n          </DialogFooter>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      {/* Deduction Confirmation Dialog */}\r\n      <AlertDialog open={showDeductConfirmDialog} onOpenChange={setShowDeductConfirmDialog}>\r\n        <AlertDialogContent className=\"bg-white dark:bg-gray-900 border-0 shadow-lg text-white dark:text-white\">\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>⚠️ Confirm Wallet Deduction</AlertDialogTitle>\r\n            <AlertDialogDescription asChild>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div>Are you sure you want to deduct {formatCurrency(parseFloat(deductAmount) || 0)} from {selectedUser?.name}'s wallet?</div>\r\n                <div className=\"text-red-600 dark:text-red-400 font-semibold\">\r\n                  This action cannot be undone!\r\n                </div>\r\n                <div><strong>Reason:</strong> {deductReason}</div>\r\n              </div>\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n            <AlertDialogAction onClick={confirmDeduction} className=\"bg-red-600 hover:bg-red-700\">\r\n              Confirm Deduction\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { TableSkeleton } from \"@/components/ui/loading-spinner\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Trophy, Award, Medal, Menu } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ninterface TopCustomer {\r\n  rank: number;\r\n  displayName: string;\r\n  displayPhone: string;\r\n  totalPurchases: number;\r\n  totalSpent: number;\r\n  lastPurchase: string;\r\n}\r\n\r\nexport default function PublicRankings() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  const { data: topCustomers, isLoading: rankingsLoading } = useQuery<TopCustomer[]>({\r\n    queryKey: [\"/api/rankings/customers\"],\r\n    refetchInterval: 60000, // Refresh every minute\r\n  });\r\n\r\n  const getRankIcon = (index: number) => {\r\n    if (index === 0) return <Trophy className=\"h-5 w-5 text-yellow-500\" />;\r\n    if (index === 1) return <Medal className=\"h-5 w-5 text-gray-400\" />;\r\n    if (index === 2) return <Award className=\"h-5 w-5 text-amber-600\" />;\r\n    return <span className=\"text-sm font-semibold text-muted-foreground\">#{index + 1}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-background to-background\">\r\n      <header className=\"border-b\">\r\n        <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className=\"lg:hidden\"\r\n              onClick={() => setSidebarOpen(true)}\r\n            >\r\n              <Menu className=\"h-5 w-5\" />\r\n            </Button>\r\n            <h1 className=\"text-lg lg:text-xl font-semibold\">Users Ranking</h1>\r\n          </div>\r\n          <ThemeToggle />\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          <Card>\r\n            <CardHeader>\r\n              <div>\r\n                <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                  <Trophy className=\"h-5 w-5 text-yellow-500\" />\r\n                  Top Customers\r\n                </CardTitle>\r\n                <p className=\"text-sm text-muted-foreground mt-1\">Highest spending customers</p>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {rankingsLoading ? (\r\n                <TableSkeleton rows={10} />\r\n              ) : topCustomers && topCustomers.length > 0 ? (\r\n                <div className=\"overflow-x-auto\">\r\n                  <Table>\r\n                    <TableHeader>\r\n                      <TableRow>\r\n                        <TableHead className=\"w-16\">Rank</TableHead>\r\n                        <TableHead>Customer</TableHead>\r\n                        <TableHead className=\"text-right\">Purchases</TableHead>\r\n                        <TableHead className=\"text-right\">Total Spent</TableHead>\r\n                      </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                      {topCustomers.map((customer, index) => (\r\n                        <TableRow key={customer.rank}>\r\n                          <TableCell className=\"text-center\">\r\n                            {getRankIcon(index)}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div className=\"flex flex-col space-y-1\">\r\n                              <span className=\"font-medium\">{customer.displayName}</span>\r\n                              {customer.displayPhone && (\r\n                                <span className=\"text-xs text-muted-foreground\">\r\n                                  {customer.displayPhone}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right font-medium\">\r\n                            {customer.totalPurchases}\r\n                          </TableCell>\r\n                          <TableCell className=\"text-right font-medium\">\r\n                            ₵{customer.totalSpent.toFixed(2)}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-12 text-muted-foreground\">\r\n                  <Trophy className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\r\n                  <p className=\"text-lg font-medium mb-2\">No customer rankings yet</p>\r\n                  <p className=\"text-sm\">Customer rankings will appear here once transactions are completed</p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}","import { useState, useMemo, useEffect, useRef } from \"react\";\r\nimport { useParams, Link, useLocation } from \"wouter\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from \"@/components/ui/tabs\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { \r\n  Phone, Mail, Loader2, Clock, CreditCard, AlertTriangle, \r\n  ArrowLeft, Package, ShoppingCart, Smartphone\r\n} from \"lucide-react\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\n\r\ntype AgentDataBundle = DataBundle & { price: string };\r\n\r\nconst networkInfo: Record<string, { name: string; logo: string }> = {\r\n  mtn: { name: \"MTN\", logo: mtnLogo },\r\n  telecel: { name: \"Telecel\", logo: telecelLogo },\r\n  airteltigo: { name: \"AirtelTigo\", logo: airteltigoLogo },\r\n  at_bigtime: { name: \"AT BIG TIME\", logo: airteltigoLogo },\r\n  at_ishare: { name: \"AT iShare\", logo: airteltigoLogo },\r\n};\r\n\r\nconst singleOrderSchema = z.object({\r\n  customerPhone: z.string()\r\n    .min(10, \"Phone number must be exactly 10 digits\")\r\n    .max(10, \"Phone number must be exactly 10 digits\")\r\n    .regex(/^0[0-9]{9}$/, \"Phone number must start with 0 and be 10 digits (e.g., 0241234567)\"),\r\n  customerEmail: z.string().email(\"Invalid email\"),\r\n});\r\n\r\nconst bulkOrderSchema = z.object({\r\n  phoneNumbers: z.string()\r\n    .min(10, \"Enter at least one phone number with GB amount\")\r\n    .refine((val) => {\r\n      const lines = val.split(/\\n/).map(n => n.trim()).filter(n => n);\r\n      return lines.every(line => {\r\n        const parts = line.split(/\\s+/);\r\n        if (parts.length !== 2) return false;\r\n        \r\n        // Check if phone number is valid (10 digits or 233 format)\r\n        let phoneStr = parts[0].replace(/^\\+/, '');\r\n        if (phoneStr.startsWith('233')) {\r\n          phoneStr = '0' + phoneStr.substring(3);\r\n        }\r\n        const phoneValid = /^0[0-9]{9}$/.test(phoneStr);\r\n        \r\n        // Check if GB amount is a valid number\r\n        const gbAmount = parseFloat(parts[1]);\r\n        const gbValid = !isNaN(gbAmount) && gbAmount > 0;\r\n        \r\n        return phoneValid && gbValid;\r\n      });\r\n    }, \"Each line must have format: phone_number GB_amount (e.g., '0241234567 2' or '233241234567 2')\"),\r\n  customerEmail: z.string().email(\"Invalid email\"),\r\n});\r\n\r\ntype SingleOrderFormData = z.infer<typeof singleOrderSchema>;\r\ntype BulkOrderFormData = z.infer<typeof bulkOrderSchema>;\r\n\r\nexport default function AgentNetworkPurchasePage() {\r\n  const { role, slug, network } = useParams<{ role: string; slug: string; network: string }>();\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const [selectedBundleId, setSelectedBundleId] = useState<string>(\"\");\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [orderType, setOrderType] = useState<\"single\" | \"bulk\">(\"single\");\r\n\r\n  const isSubmittingRef = useRef(false);\r\n  // Force Paystack for single purchases on agent storefronts\r\n\r\n  // Disable bulk orders for AT Ishare network\r\n  useEffect(() => {\r\n    if (network === \"at_ishare\" && orderType === \"bulk\") {\r\n      setOrderType(\"single\");\r\n    }\r\n  }, [network, orderType]);\r\n\r\n  // Handle back button to redirect to storefront homepage\r\n  useEffect(() => {\r\n    const handlePopState = () => {\r\n      // When back button is pressed on product page, redirect to homepage\r\n      setLocation(`/store/${role}/${slug}`);\r\n    };\r\n\r\n    window.addEventListener('popstate', handlePopState);\r\n    return () => window.removeEventListener('popstate', handlePopState);\r\n  }, [role, slug, setLocation]);\r\n\r\n  const info = networkInfo[network || \"\"] || { name: \"Unknown\", logo: \"\" };\r\n\r\n  // Fetch agent data\r\n  const { data: storeData, isLoading: agentLoading } = useQuery<{ store: { businessName: string; businessDescription: string; slug: string; whatsappSupportLink?: string; whatsappChannelLink?: string; role: string }; dataBundles: AgentDataBundle[] }>({\r\n    queryKey: [`/api/store/${role}/${slug}`],\r\n    enabled: !!role && !!slug,\r\n  });\r\n\r\n  const dataBundles = storeData?.dataBundles || [];\r\n\r\n  const filteredBundles = dataBundles?.filter(\r\n    (bundle) => bundle.network === network && bundle.isActive\r\n  );\r\n\r\n  const sortedBundles = filteredBundles?.sort(\r\n    (a, b) => parseFloat(a.price) - parseFloat(b.price)\r\n  );\r\n\r\n  const selectedBundle = sortedBundles?.find(bundle => bundle.id === selectedBundleId);\r\n  const price = selectedBundle ? parseFloat(selectedBundle.price) : 0;\r\n\r\n  const singleForm = useForm<SingleOrderFormData>({\r\n    resolver: zodResolver(singleOrderSchema),\r\n    defaultValues: {\r\n      customerPhone: \"\",\r\n      customerEmail: \"\",\r\n    },\r\n  });\r\n\r\n  const bulkForm = useForm<BulkOrderFormData>({\r\n    resolver: zodResolver(bulkOrderSchema),\r\n    defaultValues: {\r\n      phoneNumbers: \"\",\r\n      customerEmail: \"\",\r\n    },\r\n  });\r\n\r\n  // Calculate bulk purchase total with agent markup\r\n  const bulkTotal = useMemo(() => {\r\n    const phoneNumbers = bulkForm.watch(\"phoneNumbers\");\r\n    if (!phoneNumbers?.trim() || !sortedBundles || !storeData?.store) return { total: 0, count: 0 };\r\n    \r\n    const lines = phoneNumbers.split('\\n').filter(line => line.trim());\r\n    // Pricing is already resolved on the server side, no additional markup needed\r\n    let total = 0;\r\n    let count = 0;\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gbAmount = parseFloat(parts[1]);\r\n        if (!isNaN(gbAmount) && gbAmount > 0) {\r\n          const matchingBundle = sortedBundles.find(b => {\r\n            const gbMatch = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n            if (gbMatch) {\r\n              const bundleGB = parseFloat(gbMatch[1]);\r\n              return bundleGB === gbAmount;\r\n            }\r\n            return false;\r\n          });\r\n          \r\n          if (matchingBundle) {\r\n            const agentPrice = parseFloat(matchingBundle.price);\r\n            total += agentPrice;\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return { total, count };\r\n  }, [bulkForm.watch(\"phoneNumbers\"), sortedBundles, storeData?.store]);\r\n\r\n  const initializePaymentMutation = useMutation({\r\n    mutationFn: async (data: SingleOrderFormData | BulkOrderFormData | {\r\n      orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }>;\r\n      totalAmount: number;\r\n      customerEmail?: string;\r\n    }) => {\r\n      console.log(\"[Agent Frontend] Payment mutation called with:\", data);\r\n      \r\n      const isBulk = 'phoneNumbers' in data;\r\n      \r\n      // Handle new orderItems format (GB-based bulk orders)\r\n      if ('orderItems' in data && data.orderItems) {\r\n        const phoneNumbers = data.orderItems.map(item => item.phone);\r\n        const totalAmount = data.totalAmount;\r\n\r\n        console.log(\"[Agent Frontend] ========== NEW BULK FORMAT PAYMENT ==========\");\r\n        console.log(\"[Agent Frontend] Order items:\", data.orderItems);\r\n        console.log(\"[Agent Frontend] Total amount:\", totalAmount);\r\n        console.log(\"[Agent Frontend] ================================================\");\r\n        \r\n        const payload = {\r\n          productType: \"data_bundle\",\r\n          network: network,\r\n          customerPhone: phoneNumbers[0],\r\n          isBulkOrder: true,\r\n          orderItems: data.orderItems,\r\n          totalAmount: totalAmount,\r\n          customerEmail: data.customerEmail || undefined,\r\n          agentSlug: slug || undefined,\r\n        };\r\n        \r\n        console.log(\"[Agent Frontend] Paystack payload:\", JSON.stringify(payload, null, 2));\r\n        \r\n        const result = await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n        \r\n        console.log(\"[Agent Frontend] ===== SERVER RESPONSE =====\");\r\n        console.log(\"[Agent Frontend] Result:\", result);\r\n        console.log(\"[Agent Frontend] ================================\");\r\n        \r\n        return result;\r\n      }\r\n      \r\n      // Handle single purchase or legacy bulk format\r\n      if (!selectedBundle) throw new Error(\"No bundle selected\");\r\n\r\n      console.log(\"[Agent Frontend] Is bulk:\", isBulk);\r\n      console.log(\"[Agent Frontend] Data:\", data);\r\n\r\n      const phoneNumbers = isBulk \r\n        ? (data as BulkOrderFormData).phoneNumbers.split(/[\\n,]/).map(n => n.trim()).filter(n => n)\r\n        : [(data as SingleOrderFormData).customerPhone];\r\n\r\n      console.log(\"[Agent Frontend] Phone numbers array:\", phoneNumbers);\r\n      console.log(\"[Agent Frontend] First phone:\", phoneNumbers[0]);\r\n\r\n      const payload = {\r\n        productType: \"data_bundle\",\r\n        productId: selectedBundle.id,\r\n        customerPhone: phoneNumbers[0],\r\n        phoneNumbers: isBulk ? phoneNumbers : undefined,\r\n        isBulkOrder: isBulk,\r\n        customerEmail: data.customerEmail || undefined,\r\n        agentSlug: slug || undefined,\r\n      };\r\n\r\n      console.log(\"[Agent Frontend] Single/Legacy payload:\", JSON.stringify(payload, null, 2));\r\n\r\n      return await apiRequest(\"POST\", \"/api/checkout/initialize\", payload);\r\n    },\r\n    onSuccess: (data: any) => {\r\n      isSubmittingRef.current = false; // Reset submission guard\r\n      // Store agent storefront info for checkout-success redirect\r\n      localStorage.setItem(\"agentStorefront\", JSON.stringify({ role, slug, network }));\r\n      window.location.href = data.paymentUrl;\r\n    },\r\n    onError: (error: any) => {\r\n      isSubmittingRef.current = false; // Reset submission guard\r\n      toast({\r\n        title: \"❌ Payment Failed\",\r\n        description: error.message || \"Unable to process payment\",\r\n        variant: \"destructive\",\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: SingleOrderFormData | BulkOrderFormData) => {\r\n    if (isSubmittingRef.current) return; // Prevent double submission\r\n    isSubmittingRef.current = true;\r\n    setIsProcessing(true);\r\n\r\n    const isBulk = 'phoneNumbers' in data;\r\n    \r\n    // For single purchases, wallet balance check is not needed (always Paystack)\r\n    // For bulk purchases, they always use Paystack\r\n    \r\n    // Handle single purchase\r\n    if (!isBulk) {\r\n      if (!selectedBundle) {\r\n        toast({\r\n          title: \"No Bundle Selected\",\r\n          description: \"Please select a data bundle to continue\",\r\n          variant: \"destructive\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      let phoneStr = (data as SingleOrderFormData).customerPhone.trim();\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n      const validation = validatePhoneNetwork(normalizedPhone, selectedBundle.network);\r\n      \r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(selectedBundle.network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: validation.error || `Valid prefixes: ${prefixes.join(\", \")}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      setIsProcessing(true);\r\n      \r\n      // Single purchases on agent storefronts always use Paystack\r\n      initializePaymentMutation.mutate({\r\n        customerPhone: normalizedPhone,\r\n        customerEmail: (data as SingleOrderFormData).customerEmail,\r\n      } as SingleOrderFormData);\r\n      return;\r\n    }\r\n\r\n    // Handle bulk purchase with GB-based format\r\n    const bulkData = data as BulkOrderFormData;\r\n    if (!bulkData.phoneNumbers.trim()) {\r\n      toast({\r\n        title: \"Missing Information\",\r\n        description: \"Please enter phone numbers with GB amounts\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Parse phone numbers with GB amounts (Format: \"0546591622 1\" or \"233546591622 2\")\r\n    const lines = bulkData.phoneNumbers.split('\\n').filter(line => line.trim());\r\n    const parsedData: Array<{ phone: string; gb: number }> = [];\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) {\r\n        toast({\r\n          title: \"❌ Invalid Format\",\r\n          description: `Line \"${line}\" must have format: phone_number GB_amount (e.g., \"0241234567 2\")`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      let phoneStr = parts[0];\r\n      const gbAmount = parseFloat(parts[1]);\r\n\r\n      if (isNaN(gbAmount) || gbAmount <= 0) {\r\n        toast({\r\n          title: \"❌ Invalid GB Amount\",\r\n          description: `GB amount \"${parts[1]}\" must be a positive number`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      // Normalize the phone number\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n\r\n      // Validate phone number for the selected network\r\n      const validation = validatePhoneNetwork(normalizedPhone, network || \"\");\r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(network || \"\");\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: `${phoneStr}: ${validation.error || `Valid prefixes: ${prefixes.join(\", \")}`}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      parsedData.push({ phone: normalizedPhone, gb: gbAmount });\r\n    }\r\n\r\n    if (parsedData.length === 0) {\r\n      toast({\r\n        title: \"No Data\",\r\n        description: \"Please enter at least one phone number with GB amount\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check for duplicate phone numbers\r\n    const phoneSet = new Set(parsedData.map(p => p.phone));\r\n    if (phoneSet.size !== parsedData.length) {\r\n      toast({\r\n        title: 'Duplicate Numbers',\r\n        description: 'Phone numbers must be unique',\r\n        variant: 'destructive',\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Find matching bundles for each GB amount\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let bulkTotalAmount = 0;\r\n\r\n    for (const item of parsedData) {\r\n      // Find a bundle that matches the GB amount\r\n      const matchingBundle = sortedBundles?.find(b => {\r\n        const gbMatch = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n        if (gbMatch) {\r\n          const bundleGB = parseFloat(gbMatch[1]);\r\n          return bundleGB === item.gb;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (!matchingBundle) {\r\n        toast({\r\n          title: \"❌ Bundle Not Found\",\r\n          description: `No ${item.gb}GB bundle available for ${info.name}. Please check available bundles.`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      const agentPrice = parseFloat(matchingBundle.price);\r\n\r\n      orderItems.push({\r\n        phone: item.phone,\r\n        bundleId: matchingBundle.id,\r\n        bundleName: matchingBundle.name,\r\n        price: agentPrice,\r\n      });\r\n\r\n      bulkTotalAmount += agentPrice;\r\n    }\r\n\r\n    console.log(\"[Agent Frontend] Prepared order items:\", orderItems);\r\n    console.log(\"[Agent Frontend] Total amount:\", bulkTotalAmount);\r\n\r\n    setIsProcessing(true);\r\n    \r\n    // Bulk orders always use Paystack for security and reliability\r\n    initializePaymentMutation.mutate({\r\n      orderItems,\r\n      totalAmount: bulkTotalAmount,\r\n      customerEmail: bulkData.customerEmail,\r\n    });\r\n  };\r\n\r\n  if (agentLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!storeData?.store) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Card className=\"p-6 max-w-md\">\r\n          <p className=\"text-center text-muted-foreground\">Agent store not found</p>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex flex-col bg-background\">\r\n      <header className=\"flex-none sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\">\r\n        <div className=\"container flex h-16 items-center justify-between px-4\">\r\n          <Link href={`/store/${role}/${slug}`}>\r\n            <Button variant=\"ghost\" className=\"gap-2\">\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              Back\r\n            </Button>\r\n          </Link>\r\n           <h1 className=\"text-xl font-bold truncate mx-4\">{storeData?.store.businessName}</h1>\r\n          <div className=\"w-20\" /> {/* Spacer for centering */}\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"flex-1 overflow-y-auto\">\r\n        <div className=\"py-8 px-4\">\r\n          <div className=\"container mx-auto max-w-4xl pb-12\">\r\n          {/* Network Header */}\r\n          <div className=\"flex items-center gap-4 mb-8\">\r\n            {info.logo && (\r\n              <img\r\n                src={info.logo}\r\n                alt={info.name}\r\n                className=\"w-16 h-16 object-contain rounded-lg\"\r\n              />\r\n            )}\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold\">{info.name} Data Bundles</h2>\r\n              <p className=\"text-muted-foreground\">Complete your purchase below</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Order Details */}\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle className=\"flex items-center gap-2\">\r\n                <Smartphone className=\"h-5 w-5\" />\r\n                Complete Your Purchase\r\n              </CardTitle>\r\n              <CardDescription>Enter order details and checkout</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-6\">\r\n              {/* Warning Message */}\r\n              <div className=\"text-sm text-orange-600 flex items-start gap-2\">\r\n                <span className=\"text-lg\">⚠️</span>\r\n                <span>Please double-check your beneficiary number before completing purchase</span>\r\n              </div>\r\n\r\n              {/* Order Type Selection */}\r\n              <Tabs value={orderType} onValueChange={(v) => {\r\n                  setOrderType(v as \"single\" | \"bulk\");\r\n                }} className=\"w-full\">\r\n                  <TabsList className=\"grid w-full grid-cols-2\">\r\n                    <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                      <ShoppingCart className=\"h-4 w-4 mr-2\" />\r\n                      Single Purchase\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"bulk\" disabled={network === \"at_ishare\"} className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                      <Package className=\"h-4 w-4 mr-2\" />\r\n                      Bulk Purchase\r\n                      {network === \"at_ishare\" && (\r\n                        <span className=\"text-xs text-muted-foreground ml-1\">(Disabled)</span>\r\n                      )}\r\n                    </TabsTrigger>\r\n                  </TabsList>\r\n                  {network === \"at_ishare\" && (\r\n                    <p className=\"text-sm text-muted-foreground mt-2\">\r\n                      Bulk purchases are not available for AT iShare network.\r\n                    </p>\r\n                  )}\r\n\r\n                  {/* Single Order Form */}\r\n                  <TabsContent value=\"single\" className=\"space-y-4 mt-4\">\r\n                    <Form {...singleForm}>\r\n                      <form onSubmit={singleForm.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                      {/* Bundle Selection */}\r\n                      <div className=\"space-y-2\">\r\n                        <Label>Select Data Bundle</Label>\r\n                        <Select value={selectedBundleId} onValueChange={(value) => {\r\n                          setSelectedBundleId(value);\r\n                        }}>\r\n                          <SelectTrigger className=\"w-full\">\r\n                            <SelectValue placeholder=\"Choose a data bundle...\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {sortedBundles?.map((bundle) => (\r\n                              <SelectItem key={bundle.id} value={bundle.id}>\r\n                                  {bundle.name} - {bundle.validity} - {formatCurrency(parseFloat(bundle.price))}\r\n                                </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                      </div>\r\n\r\n                      <FormField\r\n                        control={singleForm.control}\r\n                        name=\"customerPhone\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Beneficiary Number *</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Phone className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                <Input placeholder=\"0241234567\" className=\"pl-10\" {...field} />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>\r\n                              Network prefixes: {getNetworkPrefixes(network || \"\").join(\", \")}\r\n                            </FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      <FormField\r\n                        control={singleForm.control}\r\n                        name=\"customerEmail\"\r\n                        render={({ field }) => (\r\n                          <FormItem>\r\n                            <FormLabel>Email *</FormLabel>\r\n                            <FormControl>\r\n                              <div className=\"relative\">\r\n                                <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                <Input type=\"email\" placeholder=\"your@email.com\" className=\"pl-10\" {...field} />\r\n                              </div>\r\n                            </FormControl>\r\n                            <FormDescription>Required for receipt and order updates</FormDescription>\r\n                            <FormMessage />\r\n                          </FormItem>\r\n                        )}\r\n                      />\r\n\r\n                      <div className=\"pt-4\">\r\n                        <div className=\"flex items-center justify-between mb-4 p-4 bg-muted rounded-lg\">\r\n                          <span className=\"text-lg font-semibold\">Total Amount:</span>\r\n                          <span className=\"text-2xl font-bold text-primary\">\r\n                            {formatCurrency(price)}\r\n                          </span>\r\n                        </div>\r\n\r\n                        <Button\r\n                          type=\"submit\"\r\n                          className=\"w-full gap-2\"\r\n                          size=\"lg\"\r\n                          disabled={isProcessing || !selectedBundleId}\r\n                        >\r\n                          {isProcessing ? (\r\n                            <>\r\n                              <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                              Processing...\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <CreditCard className=\"h-5 w-5\" />\r\n                              Proceed to Payment\r\n                            </>\r\n                          )}\r\n                        </Button>\r\n                      </div>\r\n                    </form>\r\n                  </Form>\r\n                  </TabsContent>\r\n\r\n                  {/* Bulk Order Form */}\r\n                  <TabsContent value=\"bulk\" className=\"space-y-4 mt-4\">\r\n                    <Form {...bulkForm}>\r\n                      <form onSubmit={bulkForm.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <Label htmlFor=\"bulk-phones\">Beneficiary Numbers and GB Amounts</Label>\r\n                            {bulkForm.watch(\"phoneNumbers\") && bulkForm.watch(\"phoneNumbers\").trim() && (\r\n                              <Badge variant=\"outline\" className=\"text-xs\">\r\n                                {bulkForm.watch(\"phoneNumbers\").split('\\n').filter(line => line.trim()).length} entries\r\n                              </Badge>\r\n                            )}\r\n                          </div>\r\n                          <FormField\r\n                            control={bulkForm.control}\r\n                            name=\"phoneNumbers\"\r\n                            render={({ field }) => (\r\n                              <FormItem>\r\n                                <FormControl>\r\n                                  <Textarea\r\n                                    id=\"bulk-phones\"\r\n                                    placeholder=\"0546591622 1&#10;0247064874 3&#10;0245696072 2&#10;233547897522 10&#10;...add as many as you need (no limit)\"\r\n                                    rows={20}\r\n                                    className=\"font-mono text-sm\"\r\n                                    {...field}\r\n                                  />\r\n                                </FormControl>\r\n                                <FormDescription className=\"text-xs\">\r\n                                  Enter one number per line with GB amount (e.g., \"0241234567 2\" for 2GB). \r\n                                  Supports formats: 0241234567 or 233241234567 (no + sign). \r\n                                  <strong className=\"text-green-600\">✓ No limit - add 100+ numbers!</strong>\r\n                                  <br />\r\n                                  All numbers must be for <strong>{info.name}</strong> network. \r\n                                  Valid prefixes: <strong>{getNetworkPrefixes(network || \"\").join(\", \")}</strong>\r\n                                </FormDescription>\r\n                                <FormMessage />\r\n                              </FormItem>\r\n                            )}\r\n                          />\r\n                        </div>\r\n\r\n                        <FormField\r\n                          control={bulkForm.control}\r\n                          name=\"customerEmail\"\r\n                          render={({ field }) => (\r\n                            <FormItem>\r\n                              <FormLabel>Email *</FormLabel>\r\n                              <FormControl>\r\n                                <div className=\"relative\">\r\n                                  <Mail className=\"absolute left-3 top-3 h-4 w-4 text-muted-foreground\" />\r\n                                  <Input type=\"email\" placeholder=\"your@email.com\" className=\"pl-10\" {...field} />\r\n                                </div>\r\n                              </FormControl>\r\n                              <FormDescription>Required for receipt and order updates</FormDescription>\r\n                              <FormMessage />\r\n                            </FormItem>\r\n                          )}\r\n                        />\r\n\r\n                        {bulkTotal && bulkTotal.count > 0 && (\r\n                          <div className=\"pt-4\">\r\n                            <div className=\"flex items-center justify-between mb-4 p-4 bg-muted rounded-lg\">\r\n                              <span className=\"text-lg font-semibold\">Total Amount:</span>\r\n                              <span className=\"text-2xl font-bold text-primary\">\r\n                                {formatCurrency(bulkTotal.total)}\r\n                              </span>\r\n                            </div>\r\n\r\n                          </div>\r\n                        )}\r\n\r\n                        <Button\r\n                          type=\"submit\"\r\n                          className=\"w-full gap-2\"\r\n                          size=\"lg\"\r\n                          disabled={isProcessing || !bulkForm.watch(\"phoneNumbers\")?.trim()}\r\n                        >\r\n                          {isProcessing ? (\r\n                            <>\r\n                              <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                              Processing...\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <CreditCard className=\"h-5 w-5\" />\r\n                              {bulkTotal ? (\r\n                                <>\r\n                                  Pay {formatCurrency(bulkTotal.total)} with Paystack\r\n                                </>\r\n                              ) : (\r\n                                'Purchase Data Bundles'\r\n                              )}\r\n                            </>\r\n                          )}\r\n                        </Button>\r\n                      </form>\r\n                    </Form>\r\n                  </TabsContent>\r\n                </Tabs>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Important Notices */}\r\n          <div className=\"mt-8 space-y-4\">\r\n            <Card className=\"p-6\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <Clock className=\"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0\" />\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg mb-2\">Data Delivery Time</h3>\r\n                    <p className=\"text-muted-foreground\">\r\n                      All data orders are delivered within 5–45 minutes.\r\n                      Please note that delivery times may vary during network downtime\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              <Card className=\"p-6 border-red-200 bg-white text-black dark:bg-black dark:text-white dark:border-red-600\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <AlertTriangle className=\"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0\" />\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg mb-2 text-red-900 dark:text-red-100\">\r\n                      Our DATA REQUEST DOES NOT support:\r\n                    </h3>\r\n                    <ul className=\"text-red-800 dark:text-red-200 space-y-1 ml-4 opacity-90\">\r\n                      <li>• Turbonet SIM</li>\r\n                      <li>• Merchant SIM</li>\r\n                      <li>• EVD SIM</li>\r\n                      <li>• Broadband SIM</li>\r\n                      <li>• Blacklisted SIM</li>\r\n                      <li>• Roaming SIM</li>\r\n                      <li>• Different Network</li>\r\n                      <li>• Wrong Number</li>\r\n                      <li>• Inactive Number</li>\r\n                    </ul>\r\n                    <p className=\"text-red-800 dark:text-red-200 font-medium mt-3 opacity-95\">\r\n                      Important Notice: Any data transferred to the above SIM types is burnt and irreversible.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n\r\n              <Card className=\"p-6 border-amber-200 bg-white text-black dark:bg-black dark:text-white dark:border-amber-600\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <AlertTriangle className=\"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0\" />\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-lg mb-2 text-amber-900 dark:text-amber-100\">\r\n                      Complaint Resolution Policy\r\n                    </h3>\r\n                    <div className=\"text-amber-800 dark:text-amber-200 space-y-2\">\r\n                      <p>Complaints can only be resolved within 24 hours.</p>\r\n                      <p>If you purchase data and do not receive it, kindly report the issue within 24 hours.</p>\r\n                      <p className=\"font-medium\">Reports made after 24 hours will not be attended to.</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import { useParams, Link } from \"wouter\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useState, useMemo, useEffect, useRef } from \"react\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { ShoppingCart, Package, ArrowLeft, Clock, AlertTriangle, Wallet, CreditCard, Loader2 } from \"lucide-react\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\n\r\nconst networkInfo: Record<string, { name: string; logo: string }> = {\r\n  mtn: { name: \"MTN\", logo: mtnLogo },\r\n  telecel: { name: \"Telecel\", logo: telecelLogo },\r\n  at_bigtime: { name: \"AT BIG TIME\", logo: airteltigoLogo },\r\n  at_ishare: { name: \"AT iShare\", logo: airteltigoLogo },\r\n};\r\n\r\nexport default function NetworkProductsPage() {\r\n  const { network } = useParams<{ network: string }>();\r\n  // Handle legacy URLs where \"bigtime\" should be \"at_bigtime\" and \"ishare\" should be \"at_ishare\"\r\n  const normalizedNetwork = network === 'bigtime' ? 'at_bigtime' : network === 'ishare' ? 'at_ishare' : network;\r\n  const transformedNetwork = normalizedNetwork?.replace(/-/g, '_');\r\n  const info = networkInfo[transformedNetwork || \"\"] || { name: \"Unknown\", logo: \"\" };\r\n  \r\n  // Get agent slug from URL query param or localStorage\r\n  const agentSlugFromQuery = new URLSearchParams(window.location.search).get(\"agent\");\r\n  const agentSlug = agentSlugFromQuery || getAgentId();\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-8 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-4xl\">\r\n          <Link href={agentStore ? `/store/${agentStore}` : \"/\"}>\r\n            <Button variant=\"ghost\" className=\"gap-2 mb-6\" data-testid=\"button-back\">\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              Back to Products\r\n            </Button>\r\n          </Link>\r\n\r\n          <div className=\"flex items-center gap-4 mb-8\">\r\n            {info.logo && (\r\n              <img\r\n                src={info.logo}\r\n                alt={info.name}\r\n                className=\"w-16 h-16 object-contain rounded-lg\"\r\n                data-testid=\"img-network-logo\"\r\n              />\r\n            )}\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\" data-testid=\"text-network-name\">\r\n                {info.name} Data Bundles\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Complete your purchase in one easy flow\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Public Purchase Flow (Single / Bulk) - guest users */}\r\n          <PublicPurchaseFlow network={transformedNetwork || \"\"} agentSlug={agentSlug} />\r\n\r\n          {/* Data Delivery Information */}\r\n          <div className=\"mt-12 space-y-6\">\r\n            <Card className=\"p-6\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <Clock className=\"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <h3 className=\"font-semibold text-lg mb-2\">Data Delivery Time</h3>\r\n                  <p className=\"text-muted-foreground\">\r\n                    All data orders are delivered within 5–45 minutes.\r\n                    Please note that delivery times may vary during network downtime\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            <Card className=\"p-6 border-red-200 bg-white text-black dark:bg-black dark:text-white dark:border-red-600\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <AlertTriangle className=\"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <h3 className=\"font-semibold text-lg mb-2 text-red-900 dark:text-red-100\">\r\n                    Our DATA REQUEST DOES NOT support:\r\n                  </h3>\r\n                  <ul className=\"text-red-800 dark:text-red-200 space-y-1 ml-4 opacity-90\">\r\n                    <li>• Turbonet SIM</li>\r\n                    <li>• Merchant SIM</li>\r\n                    <li>• EVD SIM</li>\r\n                    <li>• Broadband SIM</li>\r\n                    <li>• Blacklisted SIM</li>\r\n                    <li>• Roaming SIM</li>\r\n                    <li>• Different Network</li>\r\n                    <li>• Wrong Number</li>\r\n                    <li>• Inactive Number</li>\r\n                  </ul>\r\n                  <p className=\"text-red-800 dark:text-red-200 font-medium mt-3 opacity-95\">\r\n                    Important Notice: Any data transferred to the above SIM types is burnt and irreversible.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n\r\n            <Card className=\"p-6 border-amber-200 bg-white text-black dark:bg-black dark:text-white dark:border-amber-600\">\r\n              <div className=\"flex items-start gap-3\">\r\n                <AlertTriangle className=\"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0\" />\r\n                <div>\r\n                  <h3 className=\"font-semibold text-lg mb-2 text-amber-900 dark:text-amber-100\">\r\n                    Complaint Resolution Policy\r\n                  </h3>\r\n                  <div className=\"text-amber-800 dark:text-amber-200 space-y-2\">\r\n                    <p>Complaints can only be resolved within 24 hours.</p>\r\n                    <p>If you purchase data and do not receive it, kindly report the issue within 24 hours.</p>\r\n                    <p className=\"font-medium\">Reports made after 24 hours will not be attended to.</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PublicPurchaseFlow({ network, agentSlug }: { network: string; agentSlug?: string | null }) {\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [selectedBundleId, setSelectedBundleId] = useState<string>(\"\");\r\n  const [orderType, setOrderType] = useState<'single' | 'bulk'>('single');\r\n  const [phone, setPhone] = useState('');\r\n  const [bulkPhones, setBulkPhones] = useState('');\r\n  const [paymentMethod, setPaymentMethod] = useState<'paystack' | 'wallet'>('paystack');\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const isSubmittingRef = useRef(false);\r\n\r\n  const scrollToTopQuick = () => {\r\n    const opts: ScrollToOptions = { top: 0, behavior: \"smooth\" };\r\n    window.requestAnimationFrame(() => {\r\n      window.scrollTo(opts);\r\n      document.documentElement?.scrollTo?.(opts);\r\n      document.body?.scrollTo?.(opts);\r\n    });\r\n  };\r\n\r\n  // Disable bulk orders for AT Ishare network\r\n  useEffect(() => {\r\n    if (network === \"at_ishare\" && orderType === \"bulk\") {\r\n      setOrderType(\"single\");\r\n    }\r\n  }, [network, orderType]);\r\n\r\n  // Ensure view starts at the top when the flow loads\r\n  useEffect(() => {\r\n    scrollToTopQuick();\r\n  }, []);\r\n\r\n  // Fetch user stats for wallet balance\r\n  const { data: userStats } = useQuery<{ walletBalance?: string }>({\r\n    queryKey: [\"/api/user/stats\"],\r\n    enabled: !!user,\r\n  });\r\n\r\n  const walletBalance = userStats?.walletBalance ? parseFloat(userStats.walletBalance) : 0;\r\n\r\n  const { data: bundles, isLoading } = useQuery<any[]>({\r\n    queryKey: ['/api/products/data-bundles', network, agentSlug],\r\n    queryFn: async () => {\r\n      const apiNetwork = network;\r\n      const url = `/api/products/data-bundles?network=${apiNetwork}`;\r\n      return await apiRequest('GET', url);\r\n    },\r\n    refetchOnMount: true,\r\n    staleTime: 0, // Always consider data stale for agent storefronts\r\n  });\r\n\r\n  useQuery({\r\n    queryKey: ['/api/store/agent', agentSlug],\r\n    queryFn: async () => {\r\n      if (!agentSlug) return null;\r\n      const res = await apiRequest('GET', `/api/store/agent/${agentSlug}`);\r\n      return (res as Response).json();\r\n    },\r\n    enabled: !!agentSlug\r\n  });\r\n\r\n  const sortedBundles = bundles?.filter((b: any) => b.network === network && b.isActive)\r\n    .sort((a: any, b: any) => {\r\n      const priceA = parseFloat(a.effective_price);\r\n      const priceB = parseFloat(b.effective_price);\r\n      return priceA - priceB;\r\n    });\r\n\r\n  const selectedBundle = sortedBundles?.find((b: any) => b.id === selectedBundleId) || null;\r\n\r\n  const bulkTotal = useMemo(() => {\r\n    if (!bulkPhones?.trim() || !sortedBundles) return { total: 0, count: 0, invalidCount: 0 };\r\n    const lines = bulkPhones.split('\\n').filter(l => l.trim());\r\n    let total = 0; let count = 0; let invalidCount = 0;\r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gb = parseFloat(parts[1]);\r\n        if (!isNaN(gb) && gb > 0) {\r\n          const match = sortedBundles.find((b: any) => {\r\n            const m = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n            return m ? parseFloat(m[1]) === gb : false;\r\n          });\r\n          if (match) { \r\n            const price = parseFloat(match.effective_price);\r\n            total += price; \r\n            count++; \r\n          } else {\r\n            invalidCount++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { total, count, invalidCount };\r\n  }, [bulkPhones, sortedBundles]);\r\n\r\n  const checkoutMutation = useMutation<any, Error, any>({\r\n    mutationFn: async (payload: any) => {\r\n      if (payload.paymentMethod === \"wallet\") {\r\n        return await apiRequest('POST', '/api/wallet/pay', payload);\r\n      } else {\r\n        return await apiRequest('POST', '/api/checkout/initialize', payload);\r\n      }\r\n    }\r\n  });\r\n\r\n  const handleSingle = async () => {\r\n    if (isSubmittingRef.current) return; // Prevent double submission\r\n    isSubmittingRef.current = true;\r\n    setIsProcessing(true);\r\n\r\n    if (!selectedBundle) { toast({ title: 'No bundle selected', variant: 'destructive' }); return; }\r\n    const normalized = normalizePhoneNumber(phone.trim());\r\n    if (!normalized) { toast({ title: 'Invalid phone', variant: 'destructive' }); return; }\r\n    const validation = validatePhoneNetwork(normalized, selectedBundle.network);\r\n    if (!validation.isValid) { toast({ title: 'Phone mismatch', description: validation.error || 'Network mismatch', variant: 'destructive' }); return; }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    if (paymentMethod === \"wallet\") {\r\n      if (!user) {\r\n        toast({ title: 'Login required', description: 'Please log in to pay with wallet', variant: 'destructive' });\r\n        return;\r\n      }\r\n      const price = parseFloat(selectedBundle.effective_price);\r\n      if (walletBalance < price) {\r\n        toast({ title: 'Insufficient balance', description: 'Your wallet balance is not enough', variant: 'destructive' });\r\n        return;\r\n      }\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const amount = parseFloat(selectedBundle.effective_price);\r\n      \r\n      const payload = {\r\n        productType: 'data_bundle',\r\n        productId: selectedBundle.id,\r\n        customerPhone: normalized,\r\n        amount: amount.toFixed(2),\r\n        isBulkOrder: false,\r\n        agentSlug,\r\n        paymentMethod,\r\n        productName: selectedBundle.name,\r\n        network: selectedBundle.network,\r\n      };\r\n\r\n      checkoutMutation.mutate(payload, {\r\n        onSuccess: (data) => {\r\n          isSubmittingRef.current = false; // Reset submission guard\r\n          setIsProcessing(false);\r\n          if (paymentMethod === \"wallet\") {\r\n            toast({\r\n              title: \"✅ Payment Successful!\",\r\n              description: `Your purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. Processing your order...`,\r\n              duration: 5000,\r\n            });\r\n          } else {\r\n            if (data.paymentUrl) window.location.href = data.paymentUrl; else toast({ title: 'Payment init failed', variant: 'destructive' });\r\n          }\r\n        },\r\n        onError: (err: any) => {\r\n          isSubmittingRef.current = false; // Reset submission guard\r\n          setIsProcessing(false);\r\n          const errorMessage = err.message || 'Checkout failed';\r\n          // Check if it's a cooldown error (429) - message will contain \"wait\" and \"minute\"\r\n          if (errorMessage.includes('wait') && errorMessage.includes('minute')) {\r\n            console.log('[Checkout Error] Cooldown triggered:', errorMessage);\r\n            toast({ \r\n              title: '⏳ Purchase Limit', \r\n              description: errorMessage,\r\n              variant: 'destructive',\r\n              duration: 8000,\r\n            });\r\n          } else {\r\n            toast({ title: 'Error', description: errorMessage, variant: 'destructive' });\r\n          }\r\n        }\r\n      });\r\n    } catch (error) {\r\n      setIsProcessing(false);\r\n      toast({ title: 'Error', description: 'Failed to process payment', variant: 'destructive' });\r\n    }\r\n  };\r\n\r\n  const handleBulk = () => {\r\n    if (isSubmittingRef.current) return; // Prevent double submission\r\n    isSubmittingRef.current = true;\r\n    setIsProcessing(true);\r\n\r\n    if (!bulkPhones.trim()) { toast({ title: 'Missing Information', description: 'Enter phone numbers with GB amounts', variant: 'destructive' }); return; }\r\n    if (!sortedBundles) { toast({ title: 'No bundles', variant: 'destructive' }); return; }\r\n\r\n    const lines = bulkPhones.split('\\n').filter(l => l.trim());\r\n    const parsed: Array<{ phone: string; gb: number }> = [];\r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) { toast({ title: 'Invalid Format', description: `Line \"${line}\" must be \"phone GB\"`, variant: 'destructive' }); return; }\r\n      let p = parts[0].replace(/^\\+/, '');\r\n      if (p.startsWith('233')) p = '0' + p.substring(3);\r\n      const gb = parseFloat(parts[1]);\r\n      if (isNaN(gb) || gb <= 0) { toast({ title: 'Invalid GB', variant: 'destructive' }); return; }\r\n      const normalized = normalizePhoneNumber(p);\r\n      if (!normalized) { toast({ title: 'Invalid phone', description: p, variant: 'destructive' }); return; }\r\n      // validate network\r\n      const validation = validatePhoneNetwork(normalized, network);\r\n      if (!validation.isValid) { toast({ title: 'Phone mismatch', description: `${p}: ${validation.error}`, variant: 'destructive' }); return; }\r\n      parsed.push({ phone: normalized, gb });\r\n    }\r\n\r\n    // Check for duplicate phone numbers\r\n    const phoneSet = new Set(parsed.map(p => p.phone));\r\n    if (phoneSet.size !== parsed.length) {\r\n      toast({ title: 'Duplicate Numbers', description: 'Phone numbers must be unique', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    // build orderItems\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let total = 0;\r\n    for (const it of parsed) {\r\n      const match = sortedBundles.find((b: any) => { const m = b.dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i); return m ? parseFloat(m[1]) === it.gb : false; });\r\n      if (!match) { toast({ title: 'Bundle Not Found', description: `No ${it.gb}GB bundle for ${network}`, variant: 'destructive' }); return; }\r\n      \r\n      // Use effective_price for all bundles\r\n      const price = parseFloat(match.effective_price);\r\n      orderItems.push({ phone: it.phone, bundleId: match.id, bundleName: match.name, price });\r\n      total += price;\r\n    }\r\n\r\n    // Bulk orders always use Paystack for security and reliability\r\n    const payload = {\r\n      productType: 'data_bundle',\r\n      network: network,\r\n      customerPhone: orderItems[0]?.phone,\r\n      isBulkOrder: true,\r\n      orderItems,\r\n      totalAmount: total,\r\n      agentSlug,\r\n      paymentMethod: 'paystack',\r\n    };\r\n\r\n    checkoutMutation.mutate(payload, {\r\n      onSuccess: (data) => {\r\n        isSubmittingRef.current = false; // Reset submission guard\r\n        setIsProcessing(false); // Reset processing state\r\n        if (data.paymentUrl) window.location.href = data.paymentUrl; else toast({ title: 'Payment init failed', variant: 'destructive' });\r\n      },\r\n      onError: (err: any) => {\r\n        isSubmittingRef.current = false; // Reset submission guard\r\n        setIsProcessing(false); // Reset processing state\r\n        toast({ title: 'Error', description: err.message || 'Checkout failed', variant: 'destructive' })\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Card>\r\n        <CardContent className=\"flex items-center gap-4 p-4\">\r\n          <img src={(networkInfo[network] || { logo: '' }).logo} alt={network} className=\"h-12 w-12 rounded-lg object-contain\" />\r\n          <div>\r\n            <h2 className=\"font-semibold text-lg\">{(networkInfo[network] || { name: network }).name}</h2>\r\n            <p className=\"text-sm text-muted-foreground\">Choose from our available data bundles</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <p className=\"text-sm text-amber-600 font-medium\">\r\n        ⚠️ Please double-check your beneficiary number before completing purchase\r\n      </p>\r\n\r\n      <Tabs defaultValue=\"single\" className=\"w-full\" onValueChange={(v) => setOrderType(v as 'single' | 'bulk')}>\r\n        <TabsList className=\"grid w-full grid-cols-2\">\r\n          <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\"><ShoppingCart className=\"h-4 w-4 mr-2\"/>Single Purchase</TabsTrigger>\r\n          <TabsTrigger value=\"bulk\" disabled={network === \"at_ishare\"} className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n            <Package className=\"h-4 w-4 mr-2\"/>Bulk Purchase\r\n            {network === \"at_ishare\" && (\r\n              <span className=\"text-xs text-muted-foreground ml-1\">(Disabled)</span>\r\n            )}\r\n          </TabsTrigger>\r\n        </TabsList>\r\n        {network === \"at_ishare\" && (\r\n          <p className=\"text-sm text-muted-foreground mt-2\">\r\n            Bulk purchases are not available for AT iShare network.\r\n          </p>\r\n        )}\r\n\r\n        <TabsContent value=\"single\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardContent className=\"space-y-4\">\r\n              <div>\r\n                <Label>Select Bundle</Label>\r\n                {isLoading ? <div>Loading...</div> : (\r\n                  <Select value={selectedBundleId} onValueChange={(v) => setSelectedBundleId(v)}>\r\n                    <SelectTrigger className=\"w-full\"><SelectValue placeholder=\"Choose a data bundle\" /></SelectTrigger>\r\n                    <SelectContent>\r\n                      {sortedBundles?.map((b: any) => {\r\n                        const price = parseFloat(b.effective_price);\r\n                        return (\r\n                          <SelectItem key={b.id} value={b.id}>{b.network.toUpperCase()} {b.dataAmount} - {b.validity} - GH₵{price.toFixed(2)}</SelectItem>\r\n                        );\r\n                      })}\r\n                    </SelectContent>\r\n                  </Select>\r\n                )}\r\n              </div>\r\n\r\n              {selectedBundle && (\r\n                <div className=\"p-2 bg-yellow-500 text-white rounded-lg border border-yellow-600\">\r\n                  <p className=\"text-sm text-white\">Selected Bundle</p>\r\n                  <p className=\"font-medium text-lg text-white\">{selectedBundle.network.toUpperCase()} {selectedBundle.dataAmount} - {selectedBundle.validity} - GH₵{parseFloat(selectedBundle.effective_price).toFixed(2)}</p>\r\n                  <p className=\"text-2xl font-bold text-white mt-2\">GH₵{parseFloat(selectedBundle.effective_price).toFixed(2)}</p>\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <Label htmlFor=\"beneficiary-phone\">Beneficiary Number</Label>\r\n                <Input id=\"beneficiary-phone\" autoComplete=\"tel\" placeholder=\"0241234567\" value={phone} onChange={(e) => setPhone(e.target.value)} />\r\n                <p className=\"text-xs text-muted-foreground\">Enter one number. Supports 0241234567 or 233241234567 (no +). Valid prefixes: {getNetworkPrefixes(network).join(', ')}</p>\r\n              </div>\r\n\r\n              <div>\r\n                <Label>Payment Method</Label>\r\n                <RadioGroup value={paymentMethod} onValueChange={(v) => setPaymentMethod(v as 'paystack' | 'wallet')}>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"paystack\" id=\"paystack\" />\r\n                    <Label htmlFor=\"paystack\" className=\"flex items-center gap-2\">\r\n                      <CreditCard className=\"h-4 w-4\" />\r\n                      Paystack\r\n                    </Label>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <RadioGroupItem value=\"wallet\" id=\"wallet\" disabled={!user} />\r\n                    <Label htmlFor=\"wallet\" className=\"flex items-center gap-2\">\r\n                      <Wallet className=\"h-4 w-4\" />\r\n                      Wallet {user ? `(Balance: GH₵${walletBalance.toFixed(2)})` : '(Login required)'}\r\n                    </Label>\r\n                  </div>\r\n                </RadioGroup>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end\">\r\n                <Button \r\n                  onClick={handleSingle} \r\n                  disabled={\r\n                    isProcessing ||\r\n                    !selectedBundle || \r\n                    isProcessing ||\r\n                    (paymentMethod === 'wallet' && (!user || walletBalance < parseFloat(selectedBundle?.effective_price || '0')))\r\n                  }\r\n                >\r\n                  {isProcessing ? (\r\n                    <>\r\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                      Processing...\r\n                    </>\r\n                  ) : (\r\n                    paymentMethod === 'wallet' ? 'Pay with Wallet' : 'Pay with Paystack'\r\n                  )}\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent value=\"bulk\" className=\"space-y-4\">\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Bulk Purchase</CardTitle>\r\n              <CardDescription>Enter phone numbers with GB amounts for {network.toUpperCase()}</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n              <Textarea placeholder={`0546591622 1\\n0247064874 3\\n233547897522 10`} value={bulkPhones} onChange={(e) => setBulkPhones(e.target.value)} rows={8} />\r\n              <p className=\"text-sm text-muted-foreground\">Enter one number per line with GB amount (e.g., \"0241234567 2\"). Supports 0241234567 or 233241234567 (no +). No limit - add 100+ numbers! All numbers must be for {network.toUpperCase()}. Valid prefixes: {getNetworkPrefixes(network).join(', ')}</p>\r\n              {bulkTotal && (\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"font-medium\">{bulkTotal.count} items • GH₵{bulkTotal.total.toFixed(2)}</p>\r\n                  {bulkTotal.invalidCount > 0 && (\r\n                    <p className=\"text-sm text-red-600 dark:text-red-400\">\r\n                      ⚠️ {bulkTotal.invalidCount} bundle(s) not found for this network. Please check the GB amounts.\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex justify-end\">\r\n                <Button \r\n                  onClick={handleBulk}\r\n                  disabled={isProcessing || bulkTotal.count === 0 || bulkTotal.invalidCount > 0}\r\n                >\r\n                  {isProcessing ? 'Processing...' : `Pay with Paystack ${bulkTotal.count > 0 ? ` ${bulkTotal.count} Bundles - GH₵${bulkTotal.total.toFixed(2)}` : ''}`}\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"wouter\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormLabelWithoutFor, FormMessage, FormDescription } from \"@/components/ui/form\";\r\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { formatCurrency } from \"@/lib/constants\";\r\nimport { Phone, Loader2, ShieldCheck, FileCheck, Wallet, CreditCard, CheckCircle, AlertCircle, ShoppingCart, Plus, Minus, Download } from \"lucide-react\";\r\nimport jsPDF from \"jspdf\";\r\n\r\nconst checkoutSchema = z.object({\r\n  customerPhone: z.string().min(10, \"Invalid phone number\").regex(/^[0-9+\\-\\s()]*$/, \"Phone number must contain only numbers and valid characters\"),\r\n  paymentMethod: z.enum([\"paystack\", \"wallet\"], {\r\n    required_error: \"Please select a payment method\",\r\n  }),\r\n});\r\n\r\ntype CheckoutFormData = z.infer<typeof checkoutSchema>;\r\n\r\ninterface ResultCheckerStock {\r\n  type: string;\r\n  year: number;\r\n  price: number;\r\n  stock: number;\r\n}\r\n\r\ninterface UserStats {\r\n  totalOrders: number;\r\n  totalSpent: string;\r\n  walletBalance: string;\r\n}\r\n\r\ninterface UnifiedResultCheckerFlowProps {\r\n  agentSlug?: string | null;\r\n}\r\n\r\nexport function UnifiedResultCheckerFlow({ agentSlug }: UnifiedResultCheckerFlowProps) {\r\n  const [, setLocation] = useLocation();\r\n  const { toast } = useToast();\r\n  const { user } = useAuth();\r\n  const [selectedChecker, setSelectedChecker] = useState<string>(\"\");\r\n  const [quantity, setQuantity] = useState<number>(1);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [paymentSuccess, setPaymentSuccess] = useState<boolean>(false);\r\n  const [successData, setSuccessData] = useState<any>(null);\r\n\r\n  const scrollToTopQuick = () => {\r\n    const opts: ScrollToOptions = { top: 0, behavior: \"smooth\" };\r\n    // Try scrolling both the window and document roots to ensure full jump to top\r\n    window.requestAnimationFrame(() => {\r\n      window.scrollTo(opts);\r\n      document.documentElement?.scrollTo?.(opts);\r\n      document.body?.scrollTo?.(opts);\r\n    });\r\n  };\r\n\r\n  // Fetch result checkers stock\r\n  const { data: resultCheckerStock, isLoading: stockLoading } = useQuery<ResultCheckerStock[]>({\r\n    queryKey: [\"/api/products/result-checkers/stock\"],\r\n    queryFn: () => apiRequest(\"/api/products/result-checkers/stock\"),\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  // Ensure the view starts at the top when the flow loads\r\n  useEffect(() => {\r\n    scrollToTopQuick();\r\n  }, []);\r\n\r\n  // Fetch user stats to get wallet balance\r\n  const { data: userStats, isLoading: statsLoading } = useQuery<UserStats>({\r\n    queryKey: [\"/api/user/stats\"],\r\n    queryFn: () => apiRequest(\"/api/user/stats\"),\r\n    enabled: !!user,\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  const selectedCheckerData = resultCheckerStock?.find(\r\n    item => `${item.type}-${item.year}` === selectedChecker\r\n  );\r\n\r\n  const walletBalance = userStats?.walletBalance ? parseFloat(userStats.walletBalance) : 0;\r\n  const unitPrice = selectedCheckerData ? selectedCheckerData.price : 0;\r\n  const totalPrice = unitPrice * quantity;\r\n  const hasInsufficientBalance = Boolean(\r\n    !statsLoading && userStats && totalPrice > 0 && walletBalance < totalPrice\r\n  );\r\n\r\n  // Reset quantity and success state when checker changes\r\n  const handleCheckerChange = (value: string) => {\r\n    setSelectedChecker(value);\r\n    setQuantity(1);\r\n    setPaymentSuccess(false);\r\n    setSuccessData(null);\r\n    // Bring the user back to the top when a product is chosen to start the flow at the beginning\r\n    scrollToTopQuick();\r\n  };\r\n\r\n  const handleQuantityChange = (newQuantity: number) => {\r\n    if (selectedCheckerData) {\r\n      const maxQuantity = selectedCheckerData.stock;\r\n      if (newQuantity >= 1 && newQuantity <= maxQuantity) {\r\n        setQuantity(newQuantity);\r\n      } else if (newQuantity > maxQuantity) {\r\n        toast({\r\n          title: \"Quantity Exceeded\",\r\n          description: `Only ${maxQuantity} PINs available for ${selectedCheckerData.type.toUpperCase()} ${selectedCheckerData.year}`,\r\n          variant: \"destructive\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const generatePDF = () => {\r\n    if (!selectedCheckerData || !successData) return;\r\n\r\n    const [type, year] = selectedChecker.split(\"-\");\r\n    const doc = new jsPDF();\r\n    \r\n    let yPosition = 20;\r\n    const pageHeight = doc.internal.pageSize.getHeight();\r\n    const margin = 15;\r\n    const lineHeight = 7;\r\n\r\n    // Title\r\n    doc.setFontSize(18);\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(\"RESULT CHECKER PURCHASE RECEIPT\", margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Receipt Info\r\n    doc.setFontSize(10);\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.text(`Receipt Date: ${new Date().toLocaleString()}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Transaction ID: ${successData.transactionId || \"RCP\" + Date.now()}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Purchase Details Section\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"PURCHASE DETAILS\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n    doc.text(`Product: ${type.toUpperCase()} Result Checker ${year}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Quantity: ${quantity}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Unit Price: GH₵${selectedCheckerData.price.toFixed(2)}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.text(`Total Amount: GH₵${totalPrice.toFixed(2)}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Result Checker Details Section\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"RESULT CHECKER DETAILS\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n\r\n    // Generate sample PIN and serial numbers for display\r\n    const pinsArray = successData.pinsData || [];\r\n    if (pinsArray.length > 0) {\r\n      pinsArray.forEach((item: any, index: number) => {\r\n        if (yPosition > pageHeight - 30) {\r\n          doc.addPage();\r\n          yPosition = margin;\r\n        }\r\n        doc.text(`PIN ${index + 1}:`, margin, yPosition);\r\n        yPosition += lineHeight;\r\n        doc.text(`Serial number: ${item.serialNumber || item.serial || \"XXXXX-XXXXX-XXXXX\"}`, margin + 5, yPosition);\r\n        yPosition += lineHeight;\r\n        doc.text(`Pin: ${item.pin || \"XXXX-XXXX-XXXX-XXXX\"}`, margin + 5, yPosition);\r\n        yPosition += 10;\r\n      });\r\n    } else if (successData.deliveredPin) {\r\n      doc.text(`Serial number: ${successData.serialNumber || successData.deliveredPin.split(\"-\")[0] || \"XXXXX-XXXXX-XXXXX\"}`, margin + 5, yPosition);\r\n      yPosition += lineHeight;\r\n      doc.text(`Pin: ${successData.deliveredPin}`, margin + 5, yPosition);\r\n      yPosition += 12;\r\n    }\r\n\r\n    // Customer Information\r\n    if (yPosition > pageHeight - 40) {\r\n      doc.addPage();\r\n      yPosition = margin;\r\n    }\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"CUSTOMER INFORMATION\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n    doc.text(`Phone: ${user?.phone || \"N/A\"}`, margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`Email: ${user?.email || \"N/A\"}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Delivery Status\r\n    doc.setFont(\"helvetica\", \"bold\");\r\n    doc.setFontSize(12);\r\n    doc.text(\"DELIVERY STATUS\", margin, yPosition);\r\n    yPosition += 8;\r\n    doc.setFont(\"helvetica\", \"normal\");\r\n    doc.setFontSize(10);\r\n    doc.text(\"Status: Completed\", margin, yPosition);\r\n    yPosition += lineHeight;\r\n    doc.text(`PINs Delivered: ${quantity}`, margin, yPosition);\r\n    yPosition += 12;\r\n\r\n    // Footer\r\n    doc.setFontSize(9);\r\n    doc.setFont(\"helvetica\", \"italic\");\r\n    doc.text(\"Keep this receipt safe for your records. Use the provided PINs to check WAEC results.\", margin, pageHeight - 20);\r\n    doc.text(`Generated: ${new Date().toISOString()}`, margin, pageHeight - 10);\r\n\r\n    // Save PDF\r\n    doc.save(`result-checker-receipt-${Date.now()}.pdf`);\r\n\r\n    toast({\r\n      title: \"✅ Downloaded\",\r\n      description: \"Your receipt has been downloaded successfully\",\r\n    });\r\n  };\r\n\r\n  const form = useForm<CheckoutFormData>({\r\n    resolver: zodResolver(checkoutSchema),\r\n    defaultValues: {\r\n      customerPhone: \"\",\r\n    },\r\n  });\r\n\r\n  const initializePaymentMutation = useMutation({\r\n    mutationFn: async (data: CheckoutFormData) => {\r\n      if (!selectedCheckerData) throw new Error(\"No checker selected\");\r\n\r\n      const [type, year] = selectedChecker.split(\"-\");\r\n\r\n      if (data.paymentMethod === \"wallet\") {\r\n        const payload = {\r\n          productType: \"result_checker\",\r\n          productId: `${type}-${year}`,\r\n          productName: `${quantity} x ${type.toUpperCase()} Result Checker ${year}`,\r\n          amount: totalPrice.toFixed(2),\r\n          agentSlug: agentSlug || undefined,\r\n          quantity: quantity,\r\n        };\r\n\r\n        return await apiRequest(\"/api/wallet/pay\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(payload),\r\n        });\r\n      } else {\r\n        const payload = {\r\n          productType: \"result_checker\",\r\n          productId: `${type}-${year}`,\r\n          productName: `${quantity} x ${type.toUpperCase()} Result Checker ${year}`,\r\n          amount: totalPrice.toFixed(2),\r\n          customerPhone: data.customerPhone,\r\n          customerEmail: user?.email || undefined,\r\n          agentSlug: agentSlug || undefined,\r\n          quantity: quantity,\r\n        };\r\n\r\n        console.log(\"[Result Checker] Paystack payment payload:\", {\r\n          amount: payload.amount,\r\n          quantity: payload.quantity,\r\n          unitPrice: unitPrice,\r\n          totalPrice: totalPrice\r\n        });\r\n\r\n        return await apiRequest(\"/api/checkout/initialize\", {\r\n          method: \"POST\",\r\n          body: JSON.stringify(payload),\r\n        });\r\n      }\r\n    },\r\n    onSuccess: (data, variables) => {\r\n      setIsProcessing(false);\r\n      \r\n      if (variables.paymentMethod === \"wallet\") {\r\n        setSuccessData(data);\r\n        setPaymentSuccess(true);\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: \"Your result checker purchase is complete\",\r\n          duration: 3000,\r\n        });\r\n      } else {\r\n        // Paystack payment - redirect to authorization URL\r\n        const authUrl = data.paymentUrl || data.authorizationUrl || data.authorization_url || data.data?.authorization_url;\r\n        \r\n        if (authUrl) {\r\n          window.location.href = authUrl;\r\n        } else {\r\n          console.error(\"Payment response:\", data);\r\n          toast({\r\n            title: \"❌ Payment Initialization Failed\",\r\n            description: data.message || \"Unable to redirect to payment page. Please try again.\",\r\n            variant: \"destructive\",\r\n          });\r\n        }\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      \r\n      toast({\r\n        title: isInsufficientBalance ? \"⚠️ Insufficient Wallet Balance\" : \"❌ Payment Failed\",\r\n        description: isInsufficientBalance \r\n          ? \"Your wallet balance is too low for this purchase. Please top up your wallet or use Paystack.\"\r\n          : `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: 6000,\r\n      });\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const onSubmit = (data: CheckoutFormData) => {\r\n    if (!selectedCheckerData) {\r\n      toast({\r\n        title: \"No Checker Selected\",\r\n        description: \"Please select a result checker to continue\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (selectedCheckerData.stock < quantity) {\r\n      toast({\r\n        title: \"Insufficient Stock\",\r\n        description: `Only ${selectedCheckerData.stock} PINs available. Please reduce quantity or select another checker.`,\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (data.paymentMethod === \"wallet\" && hasInsufficientBalance) {\r\n      const shortfall = totalPrice - walletBalance;\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${shortfall.toFixed(2)} more to complete this purchase. Current balance: GH₵${walletBalance.toFixed(2)}, Required: GH₵${totalPrice.toFixed(2)}. Please top up or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 7000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    initializePaymentMutation.mutate(data);\r\n  };\r\n\r\n  if (stockLoading) {\r\n    return (\r\n      <div className=\"flex justify-center py-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!resultCheckerStock || resultCheckerStock.length === 0) {\r\n    return (\r\n      <Card className=\"p-6\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-muted-foreground\">No result checkers available at the moment.</p>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // Success state\r\n  if (paymentSuccess && selectedCheckerData) {\r\n    const [type, year] = selectedChecker.split(\"-\");\r\n    return (\r\n      <Card className=\"border-green-500 bg-white dark:bg-black\">\r\n        <CardHeader className=\"bg-green-50 dark:bg-green-900/20 border-b border-green-200 dark:border-green-800\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-green-600\">\r\n              <CheckCircle className=\"h-6 w-6 text-white\" />\r\n            </div>\r\n            <div>\r\n              <CardTitle className=\"text-green-700 dark:text-green-300 text-2xl\">Payment Successful! 🎉</CardTitle>\r\n              <CardDescription className=\"text-green-600 dark:text-green-400 mt-1\">\r\n                Your result checkers have been delivered\r\n              </CardDescription>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n        <CardContent className=\"pt-6 space-y-6\">\r\n          {/* Purchase Summary */}\r\n          <div className=\"bg-muted dark:bg-black/20 rounded-lg p-4 space-y-3\">\r\n            <h3 className=\"font-semibold text-lg\">Purchase Summary</h3>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Product:</span>\r\n                <span className=\"font-medium\">{type.toUpperCase()} Result Checker {year}</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Quantity:</span>\r\n                <span className=\"font-medium\">{quantity} PIN(s)</span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-muted-foreground\">Unit Price:</span>\r\n                <span className=\"font-medium\">{formatCurrency(selectedCheckerData.price)}</span>\r\n              </div>\r\n              <div className=\"border-t pt-2 flex justify-between\">\r\n                <span className=\"font-semibold\">Total Amount Paid:</span>\r\n                <span className=\"font-bold text-primary text-lg\">{formatCurrency(totalPrice)}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Delivery Details */}\r\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800\">\r\n            <h3 className=\"font-semibold text-blue-900 dark:text-blue-300 mb-2\">📧 Delivery Details</h3>\r\n            <p className=\"text-sm text-blue-800 dark:text-blue-400\">\r\n              Your result checker PINs have been sent to your email. Check your inbox (and spam folder) for the delivery details.\r\n            </p>\r\n            {successData?.deliveredPin && (\r\n              <p className=\"text-sm font-mono bg-white dark:bg-black rounded p-2 mt-2 text-muted-foreground\">\r\n                Reference: {successData.deliveredPin}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col sm:flex-row gap-3 pt-4\">\r\n            <Button\r\n              onClick={generatePDF}\r\n              className=\"flex-1 gap-2 bg-green-600 hover:bg-green-700\"\r\n              size=\"lg\"\r\n            >\r\n              <Download className=\"h-4 w-4\" />\r\n              Download Receipt\r\n            </Button>\r\n            <Button\r\n              onClick={() => setLocation(\"/user/dashboard\")}\r\n              variant=\"outline\"\r\n              className=\"flex-1 gap-2\"\r\n              size=\"lg\"\r\n            >\r\n              Go to Dashboard\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Next Steps */}\r\n          <div className=\"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800\">\r\n            <h3 className=\"font-semibold text-amber-900 dark:text-amber-300 mb-2\">📝 Next Steps</h3>\r\n            <ol className=\"text-sm text-amber-800 dark:text-amber-400 list-decimal list-inside space-y-1\">\r\n              <li>Use the PINs to check WAEC result on the official website</li>\r\n              <li>Keep your receipt safe for your records</li>\r\n              <li>Contact support if you encounter any issues</li>\r\n            </ol>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader className=\"space-y-2\">\r\n        <CardTitle>Result Checker Purchase</CardTitle>\r\n        <CardDescription>Select, review, and pay in one card.</CardDescription>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-6\">\r\n        {/* Selector */}\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-sm font-medium\">Result Checker</Label>\r\n          <Select value={selectedChecker} onValueChange={handleCheckerChange}>\r\n            <SelectTrigger className=\"w-full\">\r\n              <SelectValue placeholder=\"Choose a result checker...\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {resultCheckerStock.map((item) => (\r\n                <SelectItem\r\n                  key={`${item.type}-${item.year}`}\r\n                  value={`${item.type}-${item.year}`}\r\n                  disabled={item.stock <= 0}\r\n                >\r\n                  <div className=\"flex items-center justify-between w-full gap-4\">\r\n                    <span className=\"font-medium uppercase\">\r\n                      {item.type} {item.year}\r\n                    </span>\r\n                    <span className=\"text-muted-foreground text-sm\">\r\n                      {item.stock > 0 ? `${item.stock} in stock` : \"Out of stock\"}\r\n                    </span>\r\n                    <span className=\"font-bold text-primary\">\r\n                      {formatCurrency(item.price)}\r\n                    </span>\r\n                  </div>\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        {/* Summary & quantity */}\r\n        {selectedCheckerData && (\r\n          <div className=\"bg-muted rounded-lg p-4 space-y-4\">\r\n            <div className=\"flex items-start justify-between\">\r\n              <div>\r\n                <h3 className=\"font-semibold text-lg uppercase\">\r\n                  {selectedCheckerData.type} Result Checker {selectedCheckerData.year}\r\n                </h3>\r\n                <div className=\"flex items-center gap-2 mt-2\">\r\n                  <FileCheck className=\"h-4 w-4 text-primary\" />\r\n                  <span className=\"text-sm text-muted-foreground\">\r\n                    {selectedCheckerData.stock} PINs available\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-sm text-muted-foreground mb-1\">Unit Price</p>\r\n                <p className=\"text-xl font-bold text-primary\">\r\n                  {formatCurrency(unitPrice)}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-4 space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-sm font-medium\">Quantity</label>\r\n                <div className=\"flex items-center gap-3 bg-background rounded-lg p-2\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleQuantityChange(quantity - 1)}\r\n                    className=\"p-1 hover:bg-muted rounded transition-colors disabled:opacity-50\"\r\n                    disabled={quantity <= 1}\r\n                    aria-label=\"Decrease quantity\"\r\n                    title=\"Decrease quantity\"\r\n                  >\r\n                    <Minus className=\"h-4 w-4\" />\r\n                  </button>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max={selectedCheckerData.stock}\r\n                    value={quantity}\r\n                    onChange={(e) => handleQuantityChange(parseInt(e.target.value) || 1)}\r\n                    className=\"w-12 text-center font-semibold border rounded px-2 py-1 text-black\"\r\n                    placeholder=\"1\"\r\n                    aria-label=\"Quantity of result checkers\"\r\n                    title=\"Enter quantity\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleQuantityChange(quantity + 1)}\r\n                    className=\"p-1 hover:bg-muted rounded transition-colors disabled:opacity-50\"\r\n                    disabled={quantity >= selectedCheckerData.stock}\r\n                    aria-label=\"Increase quantity\"\r\n                    title=\"Increase quantity\"\r\n                  >\r\n                    <Plus className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"pt-3 bg-white dark:bg-black/20 p-3 rounded-lg border border-border\">\r\n                <div className=\"flex items-center justify-between mb-2 text-sm\">\r\n                  <span className=\"text-muted-foreground\">Subtotal ({quantity}x @ {formatCurrency(unitPrice)})</span>\r\n                  <span className=\"font-medium\">{formatCurrency(unitPrice * quantity)}</span>\r\n                </div>\r\n                <div className=\"flex items-center justify-between text-lg font-bold\">\r\n                  <span>Total Amount</span>\r\n                  <span className=\"text-primary text-2xl\">{formatCurrency(totalPrice)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Payment */}\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"paymentMethod\"\r\n              render={({ field }) => (\r\n                <FormItem className=\"space-y-3\">\r\n                  <FormLabelWithoutFor className=\"text-green-700\">Payment Method</FormLabelWithoutFor>\r\n                  <FormControl>\r\n                    <RadioGroup\r\n                      onValueChange={field.onChange}\r\n                      value={field.value}\r\n                      className=\"grid gap-3\"\r\n                    >\r\n                      {user && (\r\n                        <div className=\"relative\">\r\n                          <div className={`flex items-center space-x-2 p-4 rounded-lg border-2 border-muted !bg-white hover:border-green-500 cursor-pointer transition-all ${\r\n                            hasInsufficientBalance ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n                          }`}>\r\n                            <RadioGroupItem value=\"wallet\" id=\"wallet\" disabled={hasInsufficientBalance} />\r\n                            <Label htmlFor=\"wallet\" className=\"flex items-center justify-between flex-1 cursor-pointer\">\r\n                              <div className=\"flex items-center gap-3\">\r\n                                <Wallet className=\"h-5 w-5 text-green-600\" />\r\n                                <div>\r\n                                  <div className=\"font-medium text-green-700\">Wallet Balance</div>\r\n                                  <div className=\"text-sm text-green-600\">\r\n                                    Available: GH₵{walletBalance.toFixed(2)}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              {field.value === \"wallet\" && (\r\n                                <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                              )}\r\n                            </Label>\r\n                          </div>\r\n                          {hasInsufficientBalance && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"flex items-center space-x-2 p-4 rounded-lg border-2 border-muted !bg-white hover:border-green-500 cursor-pointer transition-all\">\r\n                        <RadioGroupItem\r\n                          value=\"paystack\"\r\n                          id=\"paystack\"\r\n                        />\r\n                        <Label htmlFor=\"paystack\" className=\"flex items-center justify-between flex-1 cursor-pointer\">\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <CreditCard className=\"h-5 w-5 text-green-600\" />\r\n                            <div>\r\n                              <div className=\"font-medium text-green-700\">Paystack</div>\r\n                              <div className=\"text-sm text-green-600\">\r\n                                Pay with card, bank transfer\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          {field.value === \"paystack\" && (\r\n                            <CheckCircle className=\"h-5 w-5 text-green-600\" />\r\n                          )}\r\n                        </Label>\r\n                      </div>\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            {hasInsufficientBalance && form.watch(\"paymentMethod\") === \"wallet\" && (\r\n              <Alert variant=\"default\" className=\"border-destructive/50 bg-white text-destructive\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertDescription className=\"text-sm\">\r\n                  <strong>Insufficient Balance:</strong> You need GH₵{(totalPrice - walletBalance).toFixed(2)} more. \r\n                  <a href=\"/user/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                </AlertDescription>\r\n              </Alert>\r\n            )}\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"customerPhone\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Phone Number *</FormLabel>\r\n                  <FormControl>\r\n                    <div className=\"relative\">\r\n                      <Phone className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                      <Input\r\n                        placeholder=\"+233 XX XXX XXXX\"\r\n                        type=\"tel\"\r\n                        className=\"pl-10\"\r\n                        {...field}\r\n                      />\r\n                    </div>\r\n                  </FormControl>\r\n                  <FormDescription>\r\n                    We'll use this number to deliver your result checker PINs\r\n                  </FormDescription>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <div className=\"bg-green-600 dark:bg-green-700 rounded-lg p-4 flex items-start gap-3\">\r\n              <ShieldCheck className=\"h-5 w-5 text-white dark:text-white mt-0.5\" />\r\n              <div className=\"text-sm\">\r\n                <p className=\"font-medium text-white dark:text-white\">\r\n                  {form.watch(\"paymentMethod\") === \"wallet\" ? \"Instant Purchase\" : \"Secure Payment\"}\r\n                </p>\r\n                <p className=\"text-white dark:text-white\">\r\n                  {form.watch(\"paymentMethod\") === \"wallet\"\r\n                    ? \"Your result checker PIN and serial number will be generated instantly and available for download.\"\r\n                    : \"Your payment is processed securely through Paystack. Your result checker will be available for download after payment.\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              size=\"lg\"\r\n              className=\"w-full gap-2\"\r\n              disabled={isProcessing || !form.watch(\"paymentMethod\") || (form.watch(\"paymentMethod\") === \"wallet\" && hasInsufficientBalance) || !selectedCheckerData}\r\n            >\r\n              {isProcessing ? (\r\n                <>\r\n                  <Loader2 className=\"h-4 w-4 animate-spin\" />\r\n                  Processing...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  {form.watch(\"paymentMethod\") === \"wallet\" ? (\r\n                    <>\r\n                      <Wallet className=\"h-4 w-4\" />\r\n                      Pay from Wallet - {formatCurrency(totalPrice)}\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <ShoppingCart className=\"h-4 w-4\" />\r\n                      Complete Purchase - {formatCurrency(totalPrice)}\r\n                    </>\r\n                  )}\r\n                </>\r\n              )}\r\n            </Button>\r\n          </form>\r\n        </Form>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","import { Link } from \"wouter\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { UnifiedResultCheckerFlow } from \"@/components/products/unified-result-checker-flow\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ArrowLeft } from \"lucide-react\";\r\nimport resultLogo from \"@assets/result_1765780772205.jpg\";\r\n\r\nexport default function ResultCheckersPage() {\r\n  // Get agent slug from URL\r\n  const agentSlug = new URLSearchParams(window.location.search).get(\"agent\");\r\n\r\n  const agentStore = typeof window !== \"undefined\" ? getAgentId() : null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n      \r\n      <main className=\"flex-1 py-8 px-4 pt-16\">\r\n        <div className=\"container mx-auto max-w-4xl\">\r\n          <Link href={agentStore ? `/store/${agentStore}` : \"/\"}>\r\n            <Button variant=\"ghost\" className=\"gap-2 mb-6\" data-testid=\"button-back\">\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n              Back to Products\r\n            </Button>\r\n          </Link>\r\n\r\n          <div className=\"flex items-center gap-4 mb-8\">\r\n            <img\r\n              src={resultLogo}\r\n              alt=\"Result Checkers\"\r\n              className=\"w-16 h-16 object-contain rounded-lg\"\r\n              data-testid=\"img-result-logo\"\r\n            />\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\" data-testid=\"text-page-title\">\r\n                WAEC Result Checkers\r\n              </h1>\r\n              <p className=\"text-muted-foreground\">\r\n                Complete your purchase in one easy flow\r\n              </p>\r\n              <p className=\"text-sm text-amber-600 font-medium\">\r\n                ⚠️ Please double-check your beneficiary number before completing purchase\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Unified Purchase Flow - All in one place */}\r\n          <UnifiedResultCheckerFlow agentSlug={agentSlug} />\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import { Link } from \"wouter\";\r\nimport { Header } from \"@/components/layout/header\";\r\nimport { Footer } from \"@/components/layout/footer\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport banner1 from \"@assets/banner1_1765774201032.jpeg\";\r\nimport banner2 from \"@assets/banner2_1765774201033.jpeg\";\r\nimport banner3 from \"@assets/banner3_1765774201030.jpeg\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\n\r\nconst products = [\r\n  {\r\n    id: \"mtn\",\r\n    name: \"MTN Data\",\r\n    logo: mtnLogo,\r\n    href: \"/products/mtn\",\r\n    description: \"MTN Data Bundles\",\r\n  },\r\n  {\r\n    id: \"telecel\",\r\n    name: \"Telecel Data\",\r\n    logo: telecelLogo,\r\n    href: \"/products/telecel\",\r\n    description: \"Telecel Data Bundles\",\r\n  },\r\n  {\r\n    id: \"at_bigtime\",\r\n    name: \"AT BIG TIME Data\",\r\n    logo: airteltigoLogo,\r\n    href: \"/products/at_bigtime\",\r\n    description: \"AT BIG TIME Data Bundles\",\r\n  },\r\n  {\r\n    id: \"at_ishare\",\r\n    name: \"AT iShare Data\",\r\n    logo: airteltigoLogo,\r\n    href: \"/products/at_ishare\",\r\n    description: \"AT iShare Data Bundles\",\r\n  },\r\n];\r\n\r\nexport default function DataBundlesPage() {\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      <Header />\r\n\r\n      <main className=\"flex-1 pt-16\">\r\n        {/* Products Section - Logo Grid */}\r\n        <section id=\"products\" className=\"py-12 px-4\">\r\n          <div className=\"container mx-auto max-w-4xl space-y-8\">\r\n            <h2 className=\"text-2xl font-bold text-center\">Select a Data Bundle</h2>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto\">\r\n              {products.map((product) => (\r\n                <Link key={product.id} href={product.href}>\r\n                  <Card\r\n                    className=\"p-0.5 md:p-1 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                    data-testid={`card-product-${product.id}`}\r\n                  >\r\n                    <img\r\n                      src={product.logo}\r\n                      alt={product.name}\r\n                      className=\"w-20 h-20 md:w-24 md:h-24 object-contain rounded-lg\"\r\n                      data-testid={`img-product-${product.id}`}\r\n                    />\r\n                    <p className=\"text-sm font-medium text-center text-muted-foreground\">\r\n                      {product.description}\r\n                    </p>\r\n                  </Card>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, ShoppingCart, CreditCard, Wallet, Menu, Package, Code } from \"lucide-react\";\r\nimport { Link } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n// Using plain inputs for the small upgrade dialog (avoid react-hook-form Controller requirements)\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\n\r\nexport default function UserDashboard() {\r\n  const { user } = useAuth();\r\n  useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [, setShowApiModal] = useState(false);\r\n\r\n  // (upgrade UI removed)\r\n\r\n  // Fetch user stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"/api/user/stats\"],\r\n    queryFn: () => apiRequest(\"/api/user/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Fetch recent transactions (last 5)\r\n  const { data: transactions, isLoading: transactionsLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\"),\r\n    refetchInterval: 10000,\r\n    select: (data) => data.slice(0, 5), // Only show 5 most recent\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-sm sm:text-xl font-bold\">Welcome back, {user.name}!</h1>\r\n              <p className=\"text-xs sm:text-sm text-muted-foreground\">Here's your account overview</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6 mt-4\">\r\n            {/* Upgrade to Agent removed */}\r\n            {/* Welcome Message */}\r\n            <Card className=\"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 border-yellow-600 shadow-xl overflow-hidden relative\">\r\n              <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16\"></div>\r\n              <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12\"></div>\r\n              <CardContent className=\"p-6 relative\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex items-center justify-center w-14 h-14 bg-white/20 rounded-full shadow-lg backdrop-blur-sm\">\r\n                      <span className=\"text-3xl animate-bounce\">👋</span>\r\n                    </div>\r\n                    <div>\r\n                      <h2 className=\"text-2xl lg:text-3xl font-bold text-white mb-1 drop-shadow-sm\">\r\n                        Welcome back, {user?.name?.toUpperCase() || 'USER'}! \r\n                      </h2>\r\n                      <p className=\"text-yellow-100 text-sm lg:text-base font-medium\">\r\n                        Here's what's happening with your account today ✨\r\n                      </p>\r\n                      <div className=\"flex items-center gap-2 mt-2\">\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\r\n                          <span className=\"text-xs font-medium\">Live Dashboard</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 text-white/90\">\r\n                          <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-pulse [animation-delay:0.5s]\"></div>\r\n                          <span className=\"text-xs font-medium\">Real-time Updates</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"hidden lg:flex flex-col items-end gap-2\">\r\n                    <div className=\"flex items-center gap-2 bg-white/10 rounded-full px-3 py-1 backdrop-blur-sm\">\r\n                      <span className=\"text-xs text-white font-medium\">\r\n                        {new Date().toLocaleDateString('en-US', { \r\n                          weekday: 'long', \r\n                          year: 'numeric', \r\n                          month: 'long', \r\n                          day: 'numeric' \r\n                        })}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1 text-white/80\">\r\n                      <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full\"></div>\r\n                      <span className=\"text-xs\">All systems operational</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                  <Wallet className=\"h-4 w-4 text-muted-foreground\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold text-primary\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.walletBalance || '0.00'}`\r\n                    )}\r\n                  </div>\r\n                  <Link href=\"/user/wallet\">\r\n                    <Button variant=\"outline\" size=\"sm\" className=\"text-xs mt-3\">\r\n                      Top Up Wallet\r\n                    </Button>\r\n                  </Link>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium\">Total Orders</CardTitle>\r\n                  <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      stats?.totalOrders || 0\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">All time purchases</p>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                  <CardTitle className=\"text-sm font-medium\">Total Spent</CardTitle>\r\n                  <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"text-2xl font-bold\">\r\n                    {statsLoading ? (\r\n                      <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      `GH₵${stats?.totalSpent || 0}`\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">All time spending</p>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Quick Actions</CardTitle>\r\n                <CardDescription>Start purchasing data bundles</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\r\n                  <Link href=\"/user/bundles/mtn\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">MTN Bundles</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/bundles/at-ishare\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">AT iShare</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/bundles/at-bigtime\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">AT BIG TIME</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/bundles/telecel\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">Telecel</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Link href=\"/user/vouchers\">\r\n                    <Button variant=\"outline\" className=\"w-full h-auto py-4 flex-col gap-2\">\r\n                      <Package className=\"h-5 w-5\" />\r\n                      <span className=\"text-xs\">Vouchers</span>\r\n                    </Button>\r\n                  </Link>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    className=\"w-full h-auto py-4 flex-col gap-2\"\r\n                    onClick={() => setShowApiModal(true)}\r\n                  >\r\n                    <Code className=\"h-5 w-5\" />\r\n                    <span className=\"text-xs\">API & Integrations</span>\r\n                  </Button>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Recent Transactions */}\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <CardTitle>Recent Transactions</CardTitle>\r\n                    <CardDescription>Your latest 5 orders</CardDescription>\r\n                  </div>\r\n                  <Link href=\"/user/history\">\r\n                    <Button variant=\"outline\" size=\"sm\">\r\n                      View All\r\n                    </Button>\r\n                  </Link>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                  </div>\r\n                ) : transactions && transactions.length > 0 ? (\r\n                  <div className=\"space-y-3\">\r\n                    {transactions.map((transaction: any) => (\r\n                      <div key={transaction.id} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                        <div>\r\n                          <p className=\"font-medium text-sm\">{transaction.productName}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">{transaction.customerPhone}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {new Date(transaction.createdAt).toLocaleDateString()}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <p className=\"font-medium\">GH₵{transaction.amount}</p>\r\n                          <Badge variant={transaction.status === 'completed' ? 'default' : 'secondary'} className=\"text-xs\">\r\n                            {transaction.status}\r\n                          </Badge>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <p className=\"text-muted-foreground\">No transactions yet</p>\r\n                    <Link href=\"/user/bundles/mtn\">\r\n                      <Button variant=\"ghost\" className=\"mt-2\">\r\n                        Start Shopping\r\n                      </Button>\r\n                    </Link>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Order Tracker */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Track Your Orders</CardTitle>\r\n                <CardDescription>Check the status of your data bundle purchases</CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <OrderTracker />\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Wallet, TrendingUp, Clock, CheckCircle, XCircle, ArrowUpRight, ArrowDownRight, Calendar, DollarSign, CreditCard, Menu, Layers } from \"lucide-react\";\r\nimport { Link } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { WalletTopup } from \"@/components/user/wallet-topup\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n\r\ninterface Transaction {\r\n  id: string;\r\n  reference: string;\r\n  type: string;\r\n  productName: string;\r\n  amount: string;\r\n  status: string;\r\n  paymentMethod: string;\r\n  createdAt: string;\r\n  completedAt: string | null;\r\n}\r\n\r\ninterface WalletStats {\r\n  walletBalance: string;\r\n  totalTopups: number;\r\n  totalTopupAmount: string;\r\n  totalSpent: string;\r\n  lastTopupDate: string | null;\r\n  lastTopupAmount: string | null;\r\n}\r\n\r\nconst getStatusConfig = (status: string) => {\r\n  // Normalize status to match SkyTech conventions\r\n  const normalizedStatus = status.toLowerCase();\r\n  \r\n  switch (normalizedStatus) {\r\n    case 'completed':\r\n    case 'delivered':\r\n      return {\r\n        variant: 'default' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-emerald-600',\r\n        borderColor: 'border-emerald-500',\r\n        label: 'Completed'\r\n      };\r\n    case 'processing':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Layers,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-500',\r\n        borderColor: 'border-blue-400',\r\n        label: 'Processing'\r\n      };\r\n    case 'confirmed':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-600',\r\n        borderColor: 'border-blue-500',\r\n        label: 'Confirmed'\r\n      };\r\n    case 'pending':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-amber-500',\r\n        borderColor: 'border-amber-400',\r\n        label: 'Pending'\r\n      };\r\n    case 'cancelled':\r\n    case 'failed':\r\n      return {\r\n        variant: 'destructive' as const,\r\n        icon: XCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-red-600',\r\n        borderColor: 'border-red-500',\r\n        label: status === 'cancelled' ? 'Cancelled' : 'Failed'\r\n      };\r\n    default:\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-slate-600',\r\n        borderColor: 'border-slate-500',\r\n        label: status.charAt(0).toUpperCase() + status.slice(1)\r\n      };\r\n  }\r\n};\r\n\r\nexport default function WalletDashboard() {\r\n  const { user } = useAuth();\r\n  const [selectedTab, setSelectedTab] = useState(\"overview\");\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Fetch wallet stats\r\n  const { data: stats, isLoading: statsLoading } = useQuery<WalletStats>({\r\n    queryKey: [\"/api/wallet/stats\"],\r\n    queryFn: () => apiRequest(\"/api/wallet/stats\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000, // Refresh every 10 seconds\r\n  });\r\n\r\n  // Fetch all transactions\r\n  const { data: allTransactions, isLoading: transactionsLoading } = useQuery<Transaction[]>({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: () => apiRequest(\"/api/transactions\", { disableAutoLogout: true }),\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Filter wallet topups\r\n  const walletTopups = allTransactions?.filter(t => t.type === 'wallet_topup') || [];\r\n  \r\n  // Filter wallet payments\r\n  const walletPayments = allTransactions?.filter(t => t.paymentMethod === 'wallet') || [];\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your wallet</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">My Wallet</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Manage your wallet balance</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6 mt-4\">\r\n        {/* Page Header */}\r\n        <div>\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n                <Wallet className=\"h-6 w-6\" />\r\n                Wallet Overview\r\n              </h2>\r\n              <p className=\"text-sm text-muted-foreground mt-1\">\r\n                Manage your wallet balance and view transaction history\r\n              </p>\r\n            </div>\r\n            <WalletTopup />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n          <Card className=\"bg-gradient-to-br from-green-500 to-green-600 text-white border-0\">\r\n            <CardHeader className=\"pb-2\">\r\n              <CardTitle className=\"text-sm font-medium text-green-100\">Current Balance</CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-3xl font-bold\">GH₵{stats?.walletBalance || '0.00'}</div>\r\n                  <p className=\"text-xs text-green-100 mt-1\">Available to spend</p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Total Topups</CardTitle>\r\n              <ArrowUpRight className=\"h-4 w-4 text-green-600\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-2xl font-bold\">{stats?.totalTopups || 0}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">GH₵{stats?.totalTopupAmount || '0.00'} total</p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Total Spent</CardTitle>\r\n              <ArrowDownRight className=\"h-4 w-4 text-red-600\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-2xl font-bold\">GH₵{stats?.totalSpent || '0.00'}</div>\r\n                  <p className=\"text-xs text-muted-foreground\">Via wallet payments</p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n              <CardTitle className=\"text-sm font-medium\">Last Topup</CardTitle>\r\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n            </CardHeader>\r\n            <CardContent>\r\n              {statsLoading ? (\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n              ) : (\r\n                <>\r\n                  <div className=\"text-2xl font-bold\">\r\n                    GH₵{stats?.lastTopupAmount || '0.00'}\r\n                  </div>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    {stats?.lastTopupDate \r\n                      ? new Date(stats.lastTopupDate).toLocaleDateString()\r\n                      : 'No topups yet'\r\n                    }\r\n                  </p>\r\n                </>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Transaction History Tabs */}\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Transaction History</CardTitle>\r\n            <CardDescription>View your wallet topups and payment history</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <Tabs value={selectedTab} onValueChange={setSelectedTab}>\r\n              <TabsList className=\"grid w-full grid-cols-3 mb-4\">\r\n                <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n                <TabsTrigger value=\"topups\">\r\n                  Topups ({walletTopups.length})\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"payments\">\r\n                  Payments ({walletPayments.length})\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"overview\" className=\"space-y-4\">\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : allTransactions && allTransactions.length > 0 ? (\r\n                  <div className=\"space-y-3\">\r\n                    {allTransactions.slice(0, 10).map((transaction) => {\r\n                      const statusConfig = getStatusConfig(transaction.status);\r\n                      const StatusIcon = statusConfig.icon;\r\n                      const isTopup = transaction.type === 'wallet_topup';\r\n                      const isWalletPayment = transaction.paymentMethod === 'wallet';\r\n\r\n                      return (\r\n                        <div\r\n                          key={transaction.id}\r\n                          className={`p-4 border rounded-lg ${statusConfig.bgColor} ${statusConfig.borderColor} text-white`}\r\n                        >\r\n                          <div className=\"flex items-start justify-between gap-4\">\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <div className=\"flex items-center gap-2 mb-2\">\r\n                                {isTopup ? (\r\n                                  <ArrowUpRight className=\"h-4 w-4 text-white shrink-0\" />\r\n                                ) : (\r\n                                  <ArrowDownRight className=\"h-4 w-4 text-white shrink-0\" />\r\n                                )}\r\n                                <p className=\"font-medium text-sm break-words text-white\">\r\n                                  {transaction.productName}\r\n                                </p>\r\n                                <Badge variant={statusConfig.variant} className=\"ml-auto shrink-0 bg-white text-gray-800\">\r\n                                  <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                              </div>\r\n                              <div className=\"text-xs text-gray-200 space-y-1\">\r\n                                <p>\r\n                                  {isTopup ? 'Topup' : isWalletPayment ? 'Paid with wallet' : 'Paystack'}\r\n                                  {' • '}\r\n                                  {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                </p>\r\n                                <p className=\"text-xs font-mono break-all text-gray-300\">Order ID: {transaction.id.slice(0,8)}</p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"text-right shrink-0\">\r\n                              <p className=\"text-lg font-bold text-white\">\r\n                                {isTopup ? '+' : '-'}GH₵{transaction.amount}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <Wallet className=\"h-12 w-12 mx-auto text-gray-400 mb-3\" />\r\n                    <p className=\"text-gray-500\">No transactions yet</p>\r\n                    <p className=\"text-sm text-gray-400 mt-1\">Top up your wallet to get started</p>\r\n                  </div>\r\n                )}\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"topups\">\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : walletTopups.length > 0 ? (\r\n                  <div className=\"rounded-md border\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Date</TableHead>\r\n                          <TableHead>Order ID</TableHead>\r\n                          <TableHead>Amount</TableHead>\r\n                          <TableHead>Status</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {walletTopups.map((transaction) => {\r\n                          const statusConfig = getStatusConfig(transaction.status);\r\n                          const StatusIcon = statusConfig.icon;\r\n\r\n                          return (\r\n                            <TableRow key={transaction.id}>\r\n                              <TableCell className=\"font-medium\">\r\n                                {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                <br />\r\n                                <span className=\"text-xs text-gray-500\">\r\n                                  {new Date(transaction.createdAt).toLocaleTimeString()}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell className=\"font-mono text-xs\">\r\n                                {transaction.id.slice(0,8)}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <span className=\"text-green-600 font-bold\">\r\n                                  +GH₵{transaction.amount}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <Badge variant={statusConfig.variant}>\r\n                                  <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <ArrowUpRight className=\"h-12 w-12 mx-auto text-gray-400 mb-3\" />\r\n                    <p className=\"text-gray-500\">No topups yet</p>\r\n                    <p className=\"text-sm text-gray-400 mt-1\">Click the \"Top Up Wallet\" button to add funds</p>\r\n                  </div>\r\n                )}\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"payments\">\r\n                {transactionsLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : walletPayments.length > 0 ? (\r\n                  <div className=\"rounded-md border\">\r\n                    <Table>\r\n                      <TableHeader>\r\n                        <TableRow>\r\n                          <TableHead>Date</TableHead>\r\n                          <TableHead>Product</TableHead>\r\n                          <TableHead>Amount</TableHead>\r\n                          <TableHead>Status</TableHead>\r\n                        </TableRow>\r\n                      </TableHeader>\r\n                      <TableBody>\r\n                        {walletPayments.map((transaction) => {\r\n                          const statusConfig = getStatusConfig(transaction.status);\r\n                          const StatusIcon = statusConfig.icon;\r\n\r\n                          return (\r\n                            <TableRow key={transaction.id}>\r\n                              <TableCell className=\"font-medium\">\r\n                                {new Date(transaction.createdAt).toLocaleDateString()}\r\n                                <br />\r\n                                <span className=\"text-xs text-gray-500\">\r\n                                  {new Date(transaction.createdAt).toLocaleTimeString()}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <div>\r\n                                  <p className=\"font-medium\">{transaction.productName}</p>\r\n                                  <p className=\"text-xs text-gray-500 font-mono\">\r\n                                    {transaction.id.slice(0,8)}\r\n                                  </p>\r\n                                </div>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <span className=\"text-blue-600 font-bold\">\r\n                                  -GH₵{transaction.amount}\r\n                                </span>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <Badge variant={statusConfig.variant}>\r\n                                  <StatusIcon className=\"h-3 w-3 mr-1\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          );\r\n                        })}\r\n                      </TableBody>\r\n                    </Table>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <CreditCard className=\"h-12 w-12 mx-auto text-gray-400 mb-3\" />\r\n                    <p className=\"text-gray-500\">No wallet payments yet</p>\r\n                    <p className=\"text-sm text-gray-400 mt-1\">Use your wallet to pay for products and see your history here</p>\r\n                  </div>\r\n                )}\r\n              </TabsContent>\r\n            </Tabs>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo } from \"react\";\r\nimport { useParams } from \"wouter\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Smartphone, Upload, Menu, ShoppingCart, Package, AlertCircle, Wallet, CreditCard, CheckCircle } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/queryClient\";\r\nimport { validatePhoneNetwork, getNetworkPrefixes, normalizePhoneNumber } from \"@/lib/network-validator\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport type { DataBundle } from \"@shared/schema\";\r\n\r\ntype BundleWithPrice = DataBundle & {\r\n  effective_price: string;\r\n  description?: string;\r\n};\r\n\r\n// Helper function to extract numeric value from bundle name\r\nconst extractDataAmount = (bundleName: string): number => {\r\n  const match = bundleName.match(/(\\d+(?:\\.\\d+)?)\\s*(GB|MB)/);\r\n  if (!match) return 0;\r\n  const value = parseFloat(match[1]);\r\n  const unit = match[2].toUpperCase();\r\n  // Convert to GB for consistent sorting\r\n  return unit === 'MB' ? value / 1024 : value;\r\n};\r\n\r\n// Helper function to sort bundles by data amount\r\nconst sortBundlesByDataAmount = (bundles: BundleWithPrice[] | undefined): BundleWithPrice[] => {\r\n  if (!bundles) return [];\r\n  return [...bundles].sort((a, b) => extractDataAmount(a.name) - extractDataAmount(b.name));\r\n};\r\n\r\ninterface UserStats {\r\n  walletBalance: string;\r\n}\r\n\r\ninterface MutationResponse {\r\n  newBalance: string;\r\n  paymentUrl: string;\r\n}\r\n\r\nconst NetworkInfo = {\r\n  mtn: {\r\n    name: \"MTN\",\r\n    color: \"bg-yellow-400\",\r\n    logo: mtnLogo,\r\n  },\r\n  at_ishare: {\r\n    name: \"AirtelTigo iShare\",\r\n    color: \"bg-red-500\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  at_bigtime: {\r\n    name: \"AirtelTigo BIG TIME\",\r\n    color: \"bg-red-600\",\r\n    logo: airteltigoLogo,\r\n  },\r\n  telecel: {\r\n    name: \"Telecel\",\r\n    color: \"bg-blue-500\",\r\n    logo: telecelLogo,\r\n  },\r\n};\r\n\r\nexport default function UserBundlesPage() {\r\n  const { network } = useParams<{ network: string }>();\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  \r\n  // Single purchase state\r\n  const [selectedBundle, setSelectedBundle] = useState<BundleWithPrice | null>(null);\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const [paymentMethod, setPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>(undefined);\r\n\r\n  // Bulk purchase state\r\n  const [bulkPhoneNumbers, setBulkPhoneNumbers] = useState(\"\");\r\n  const [bulkPaymentMethod, setBulkPaymentMethod] = useState<\"wallet\" | \"paystack\" | undefined>(undefined);\r\n\r\n  const networkKey = network?.replace(/-/g, '_') as keyof typeof NetworkInfo;\r\n  const networkInfo = NetworkInfo[networkKey];\r\n\r\n  // Fetch bundles\r\n  const { data: bundles, isLoading } = useQuery<BundleWithPrice[]>({\r\n    queryKey: [\"/api/products/data-bundles\", network],\r\n    queryFn: async () => {\r\n      const apiNetwork = network?.replace(/-/g, '_');\r\n      const response = await apiRequest<BundleWithPrice[]>(\"GET\", `/api/products/data-bundles?network=${apiNetwork}`);\r\n      return response;\r\n    },\r\n  });\r\n\r\n  // Fetch wallet balance\r\n  const { data: stats } = useQuery<UserStats>({\r\n    queryKey: [\"/api/user/stats\"],\r\n    queryFn: async () => apiRequest(\"GET\", \"/api/user/stats\") as Promise<UserStats>,\r\n  });\r\n\r\n  // Calculate bulk purchase total\r\n  const bulkTotal = useMemo(() => {\r\n    if (!bulkPhoneNumbers.trim() || !bundles) return null;\r\n    \r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    let total = 0;\r\n    let count = 0;\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length === 2) {\r\n        const gbAmount = parseFloat(parts[1]);\r\n        if (!isNaN(gbAmount) && gbAmount > 0) {\r\n          const matchingBundle = bundles.find(b => {\r\n            const bundleName = b.name.toLowerCase();\r\n            const gbMatch = bundleName.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n            if (gbMatch) {\r\n              const bundleGB = parseFloat(gbMatch[1]);\r\n              return bundleGB === gbAmount;\r\n            }\r\n            return false;\r\n          });\r\n          \r\n          if (matchingBundle) {\r\n            total += parseFloat(matchingBundle.effective_price);\r\n            count++;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return count > 0 ? { total, count } : null;\r\n  }, [bulkPhoneNumbers, bundles]);\r\n\r\n  // Single purchase mutation\r\n  const purchaseMutation = useMutation({\r\n    mutationFn: async (payload: any) => {\r\n      if (payload.paymentMethod === \"wallet\") {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/wallet/pay\", payload);\r\n      } else {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/checkout/initialize\", payload);\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setSelectedBundle(null);\r\n        setPhoneNumber(\"\");\r\n        setPaymentMethod(undefined);\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/user/stats\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      const isCooldown = errorMessage.includes(\"wait\") && errorMessage.includes(\"minute\");\r\n      \r\n      toast({\r\n        title: isCooldown ? \"⏳ Purchase Limit\" : isInsufficientBalance ? \"⚠️ Insufficient Wallet Balance\" : \"❌ Payment Failed\",\r\n        description: isCooldown\r\n          ? errorMessage\r\n          : isInsufficientBalance \r\n            ? \"Your wallet balance is too low for this purchase. Please top up your wallet or use Paystack.\"\r\n            : `${errorMessage}. Please try again or contact support if the problem persists.`,\r\n        variant: \"destructive\",\r\n        duration: isCooldown ? 8000 : 6000,\r\n      });\r\n    },\r\n  });\r\n\r\n  // Bulk purchase mutation\r\n  const bulkPurchaseMutation = useMutation({\r\n    mutationFn: async (payload: any) => {\r\n      if (payload.paymentMethod === \"wallet\") {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/wallet/pay\", payload);\r\n      } else {\r\n        return await apiRequest<MutationResponse>(\"POST\", \"/api/checkout/initialize\", payload);\r\n      }\r\n    },\r\n    onSuccess: (data: MutationResponse, variables) => {\r\n      if (variables.paymentMethod === \"wallet\") {\r\n        toast({\r\n          title: \"✅ Payment Successful!\",\r\n          description: `Your bulk purchase has been confirmed. New wallet balance: GH₵${data.newBalance}. View Order History to download your receipt.`,\r\n          duration: 5000,\r\n        });\r\n        setBulkPhoneNumbers(\"\");\r\n        setBulkPaymentMethod(undefined);\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/user/stats\"] });\r\n        queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\r\n      } else {\r\n        window.location.href = data.paymentUrl;\r\n      }\r\n    },\r\n    onError: (error: any) => {\r\n      const errorMessage = error.message || \"Unable to process payment\";\r\n      const isCooldown = errorMessage.includes(\"wait\") && errorMessage.includes(\"minute\");\r\n      const isInsufficientBalance = errorMessage.toLowerCase().includes(\"insufficient\");\r\n      \r\n      toast({\r\n        title: isCooldown ? \"⏳ Purchase Limit\" : isInsufficientBalance ? \"⚠️ Insufficient Balance\" : \"❌ Payment Error\",\r\n        description: errorMessage,\r\n        variant: \"destructive\",\r\n        duration: isCooldown ? 8000 : 6000,\r\n      });\r\n    },\r\n  });\r\n\r\n\r\n  const handleSinglePurchase = async () => {\r\n    if (!selectedBundle || !phoneNumber) {\r\n      toast({\r\n        title: \"Missing Information\",\r\n        description: \"Please select a bundle and enter a phone number\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Normalize and validate phone number\r\n    const normalizedPhone = normalizePhoneNumber(phoneNumber.trim());\r\n    const validation = validatePhoneNetwork(normalizedPhone, selectedBundle.network);\r\n    \r\n    if (!validation.isValid) {\r\n      const prefixes = getNetworkPrefixes(selectedBundle.network);\r\n      toast({\r\n        title: \"❌ Phone Number Mismatch\",\r\n        description: validation.error || `This bundle is for ${selectedBundle.network.toUpperCase()} network. Valid prefixes: ${prefixes.join(\", \")}`,\r\n        variant: \"destructive\",\r\n        duration: 8000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    const price = parseFloat(selectedBundle.effective_price);\r\n    const walletBalance = stats?.walletBalance ? parseFloat(stats.walletBalance) : 0;\r\n    \r\n    if (paymentMethod === \"wallet\" && walletBalance < price) {\r\n      const shortfall = price - walletBalance;\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${shortfall.toFixed(2)} more. Current balance: GH₵${walletBalance.toFixed(2)}, Required: GH₵${price.toFixed(2)}. Please top up or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 7000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!paymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Fetch bundle to get current price\r\n    try {\r\n      const currentBundleData = await apiRequest('GET', `/api/products/data-bundles/${selectedBundle.id}`) as any;\r\n      \r\n      const amount = parseFloat(currentBundleData.effective_price);\r\n      \r\n      const payload = {\r\n        productType: 'data_bundle',\r\n        productId: selectedBundle.id,\r\n        customerPhone: normalizedPhone,\r\n        amount: amount.toFixed(2),\r\n        isBulkOrder: false,\r\n        agentSlug: undefined,\r\n        paymentMethod,\r\n        productName: selectedBundle.name,\r\n        network: selectedBundle.network,\r\n      };\r\n\r\n      purchaseMutation.mutate(payload);\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error\",\r\n        description: \"Failed to fetch bundle details\",\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleBulkPurchase = () => {\r\n    if (!bulkPhoneNumbers.trim()) {\r\n      toast({\r\n        title: \"Missing Information\",\r\n        description: \"Please enter phone numbers with GB amounts\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!bulkPaymentMethod) {\r\n      toast({\r\n        title: \"❌ Payment Method Required\",\r\n        description: \"Please select a payment method\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Check wallet balance if paying with wallet\r\n    if (bulkPaymentMethod === \"wallet\" && bulkTotal && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)) {\r\n      const shortfall = bulkTotal.total - (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0);\r\n      toast({\r\n        title: \"⚠️ Insufficient Wallet Balance\",\r\n        description: `You need GH₵${shortfall.toFixed(2)} more. Current balance: GH₵${stats?.walletBalance || '0.00'}, Required: GH₵${bulkTotal.total.toFixed(2)}. Please top up or use Paystack.`,\r\n        variant: \"destructive\",\r\n        duration: 7000,\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Parse phone numbers with GB amounts\r\n    // Format: \"0546591622 1\" or \"233546591622 2\"\r\n    const lines = bulkPhoneNumbers.split('\\n').filter(line => line.trim());\r\n    \r\n    const parsedData: Array<{ phone: string; gb: number }> = [];\r\n    \r\n    for (const line of lines) {\r\n      const parts = line.trim().split(/\\s+/);\r\n      if (parts.length !== 2) {\r\n        toast({\r\n          title: \"❌ Invalid Format\",\r\n          description: `Line \"${line}\" must have format: phone_number GB_amount (e.g., \"0241234567 2\")`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      let phoneStr = parts[0];\r\n      const gbAmount = parseFloat(parts[1]);\r\n\r\n      if (isNaN(gbAmount) || gbAmount <= 0) {\r\n        toast({\r\n          title: \"❌ Invalid GB Amount\",\r\n          description: `GB amount \"${parts[1]}\" must be a positive number`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Handle country code 233 (remove + if present)\r\n      phoneStr = phoneStr.replace(/^\\+/, '');\r\n      \r\n      // If starts with 233, remove it and add 0\r\n      if (phoneStr.startsWith('233')) {\r\n        phoneStr = '0' + phoneStr.substring(3);\r\n      }\r\n\r\n      // Normalize the phone number\r\n      const normalizedPhone = normalizePhoneNumber(phoneStr);\r\n\r\n      // Validate phone number for the selected network\r\n      const validation = validatePhoneNetwork(normalizedPhone, network);\r\n      if (!validation.isValid) {\r\n        const prefixes = getNetworkPrefixes(network);\r\n        toast({\r\n          title: \"❌ Phone Number Mismatch\",\r\n          description: `${phoneStr}: ${validation.error || `Must be for ${networkInfo?.name} network. Valid prefixes: ${prefixes.join(\", \")}`}`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      parsedData.push({ phone: normalizedPhone, gb: gbAmount });\r\n    }\r\n\r\n    if (parsedData.length === 0) {\r\n      toast({\r\n        title: \"No Data\",\r\n        description: \"Please enter at least one phone number with GB amount\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Find matching bundles for each GB amount from our bundles list\r\n    const orderItems: Array<{ phone: string; bundleId: string; bundleName: string; price: number }> = [];\r\n    let totalAmount = 0;\r\n\r\n    for (const item of parsedData) {\r\n      // Find a bundle that matches the GB amount (looking for bundles with the GB in dataAmount)\r\n      const matchingBundle = bundles?.find(b => {\r\n        const dataAmount = b.dataAmount || b.name; // Fall back to name if dataAmount doesn't exist\r\n        // Try to extract GB from dataAmount (e.g., \"5GB\" -> 5)\r\n        const gbMatch = dataAmount.match(/(\\d+(?:\\.\\d+)?)\\s*gb/i);\r\n        if (gbMatch) {\r\n          const bundleGB = parseFloat(gbMatch[1]);\r\n          console.log(\"[DEBUG] Bundle\", b.name, \"has GB:\", bundleGB);\r\n          return bundleGB === item.gb;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (!matchingBundle) {\r\n        toast({\r\n          title: \"❌ Bundle Not Found\",\r\n          description: `No ${item.gb}GB bundle available for ${networkInfo?.name}. Please check available bundles.`,\r\n          variant: \"destructive\",\r\n          duration: 8000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      orderItems.push({\r\n        phone: item.phone,\r\n        bundleId: matchingBundle.id,\r\n        bundleName: matchingBundle.name,\r\n        price: parseFloat(matchingBundle.effective_price),\r\n      });\r\n\r\n      totalAmount += parseFloat(matchingBundle.effective_price);\r\n    }\r\n\r\n    // Bulk orders can use wallet or Paystack\r\n    const payload = {\r\n      productType: 'data_bundle',\r\n      productName: `Bulk Order - ${orderItems.length} bundles`,\r\n      network: network,\r\n      amount: totalAmount.toFixed(2),\r\n      customerPhone: orderItems[0]?.phone,\r\n      isBulkOrder: true,\r\n      orderItems,\r\n      agentSlug: undefined,\r\n      paymentMethod: bulkPaymentMethod,\r\n    };\r\n\r\n    bulkPurchaseMutation.mutate(payload);\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Mobile Sidebar */}\r\n      <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n        <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n          <VisuallyHidden>\r\n            <SheetTitle>Navigation Menu</SheetTitle>\r\n            <SheetDescription>Main navigation for bundles</SheetDescription>\r\n          </VisuallyHidden>\r\n          <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n        </SheetContent>\r\n      </Sheet>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for bundles</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">{networkInfo?.name || \"Data Bundles\"}</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Purchase data bundles</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"text-right hidden sm:block\">\r\n              <p className=\"text-sm text-muted-foreground\">Wallet Balance</p>\r\n              <p className=\"text-lg font-bold text-primary\">GH₵{stats?.walletBalance || '0.00'}</p>\r\n            </div>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Network Header */}\r\n            <Card>\r\n              <CardContent className=\"flex items-center gap-4 p-4\">\r\n                <img src={networkInfo?.logo} alt={networkInfo?.name} className=\"h-12 w-12 rounded-lg object-contain\" />\r\n                <div>\r\n                  <h2 className=\"font-semibold text-lg\">{networkInfo?.name}</h2>\r\n                  <p className=\"text-sm text-muted-foreground\">Choose from our available data bundles</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Warning Message */}\r\n            <div className=\"text-sm text-orange-600 flex items-start gap-2\">\r\n              <span className=\"text-lg\">⚠️</span>\r\n              <span>Please double-check your beneficiary number before completing purchase</span>\r\n            </div>\r\n\r\n            <Tabs defaultValue=\"single\" className=\"w-full\">\r\n              <TabsList className=\"grid w-full grid-cols-2\">\r\n                <TabsTrigger value=\"single\" className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                  <ShoppingCart className=\"h-4 w-4 mr-2\" />\r\n                  Single Purchase\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"bulk\" disabled={network === \"at_ishare\"} className=\"data-[state=active]:bg-yellow-500 data-[state=active]:text-white\">\r\n                  <Package className=\"h-4 w-4 mr-2\" />\r\n                  Bulk Purchase\r\n                  {network === \"at_ishare\" && (\r\n                    <span className=\"text-xs text-muted-foreground ml-1\">(Disabled)</span>\r\n                  )}\r\n                </TabsTrigger>\r\n              </TabsList>\r\n              {network === \"at_ishare\" && (\r\n                <p className=\"text-sm text-muted-foreground mt-2\">\r\n                  Bulk purchases are not available for AT iShare network.\r\n                </p>\r\n              )}\r\n\r\n              {/* Single Purchase Tab */}\r\n              <TabsContent value=\"single\" className=\"space-y-6\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Purchase Data Bundle</CardTitle>\r\n                    <CardDescription>Select a bundle and enter recipient details</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    {/* Bundle Dropdown */}\r\n                    <div className=\"space-y-2\">\r\n                      <Label>Select Bundle</Label>\r\n                      {isLoading ? (\r\n                        <div className=\"flex justify-center py-4\">\r\n                          <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                        </div>\r\n                      ) : (\r\n                        <Select\r\n                          value={selectedBundle?.id || \"\"}\r\n                          onValueChange={(value) => {\r\n                            const bundle = bundles?.find(b => b.id === value);\r\n                            setSelectedBundle(bundle || null);\r\n                          }}\r\n                        >\r\n                          <SelectTrigger>\r\n                            <SelectValue placeholder=\"Choose a data bundle\" />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {bundles && bundles.length > 0 ? (\r\n                              sortBundlesByDataAmount(bundles).map((bundle) => (\r\n                                <SelectItem key={bundle.id} value={bundle.id}>\r\n                                  {bundle.name} - {bundle.validity} - GH₵{bundle.basePrice}\r\n                                </SelectItem>\r\n                              ))\r\n                            ) : (\r\n                              <SelectItem value=\"no-bundles\" disabled>\r\n                                No bundles available\r\n                              </SelectItem>\r\n                            )}\r\n                          </SelectContent>\r\n                        </Select>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Selected Bundle Display */}\r\n                    {selectedBundle && (\r\n                      <div className=\"p-2 bg-yellow-500 text-white rounded-lg border border-yellow-600\">\r\n                        <p className=\"text-sm text-white\">Selected Bundle</p>\r\n                        <p className=\"font-medium text-lg text-white\">{selectedBundle.name}</p>\r\n                        <p className=\"text-sm text-white\">{selectedBundle.validity}</p>\r\n                        {selectedBundle.description && (\r\n                          <p className=\"text-xs text-white mt-1\">{selectedBundle.description}</p>\r\n                        )}\r\n                        <p className=\"text-2xl font-bold text-white mt-2\">GH₵{selectedBundle.basePrice}</p>\r\n                      </div>\r\n                    )}\r\n\r\n\r\n                    <div className=\"space-y-2\">\r\n                      <Label htmlFor=\"phone\">Beneficiary Number</Label>\r\n                      <Input\r\n                        id=\"phone\"\r\n                        placeholder=\"0241234567\"\r\n                        value={phoneNumber}\r\n                        onChange={(e) => setPhoneNumber(e.target.value)}\r\n                      />\r\n                      <p className=\"text-xs text-muted-foreground\">\r\n                        For <strong>{networkInfo?.name}</strong> network only. \r\n                        Valid prefixes: <strong>{selectedBundle ? getNetworkPrefixes(selectedBundle.network).join(\", \") : \"\"}</strong>\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label className=\"text-black font-semibold\">Payment Method</Label>\r\n                      <div className=\"grid gap-3\">\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setPaymentMethod(paymentMethod === \"wallet\" ? undefined : \"wallet\")}\r\n                            disabled={selectedBundle ? parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) : false}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              paymentMethod === \"wallet\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            } ${\r\n                              selectedBundle && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)\r\n                                ? \"opacity-50 cursor-not-allowed\"\r\n                                : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className={`h-5 w-5 ${paymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${paymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>Wallet Balance</div>\r\n                                <div className={`text-sm ${paymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Available: GH₵{stats?.walletBalance || '0.00'}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                          {selectedBundle && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-black text-white px-2 py-1 rounded font-semibold\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setPaymentMethod(paymentMethod === \"paystack\" ? undefined : \"paystack\")}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              paymentMethod === \"paystack\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className={`h-5 w-5 ${paymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${paymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>Pay with MoMo</div>\r\n                                <div className={`text-sm ${paymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {paymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Insufficient Balance Alert */}\r\n                    {selectedBundle && paymentMethod === \"wallet\" && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) && (\r\n                      <Alert variant=\"default\" className=\"border-destructive bg-white text-destructive\">\r\n                        <AlertCircle className=\"h-4 w-4\" />\r\n                        <AlertDescription className=\"text-sm\">\r\n                          <strong>Insufficient Balance:</strong> You need GH₵{(parseFloat(selectedBundle.basePrice) - (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)).toFixed(2)} more.\r\n                          <a href=\"/user/wallet\" className=\"underline ml-1 font-medium hover:text-destructive-foreground\">Top up wallet</a> or select Paystack.\r\n                        </AlertDescription>\r\n                      </Alert>\r\n                    )}\r\n\r\n                    <Button\r\n                      className=\"w-full\"\r\n                      size=\"lg\"\r\n                      onClick={handleSinglePurchase}\r\n                      disabled={!selectedBundle || !phoneNumber || !paymentMethod || purchaseMutation.isPending || (paymentMethod === \"wallet\" && selectedBundle && parseFloat(selectedBundle.basePrice) > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0))}\r\n                    >\r\n                      {purchaseMutation.isPending ? (\r\n                        <>\r\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                          Processing...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Smartphone className=\"mr-2 h-4 w-4\" />\r\n                          Purchase Bundle\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              {/* Bulk Purchase Tab */}\r\n              <TabsContent value=\"bulk\" className=\"space-y-6\">\r\n                <Card>\r\n                    <CardHeader>\r\n                      <CardTitle>Bulk Purchase</CardTitle>\r\n                      <CardDescription>Enter phone numbers with GB amounts for {networkInfo?.name}</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <Label htmlFor=\"bulk-phones\">Beneficiary Numbers and GB Amounts</Label>\r\n                          {bulkPhoneNumbers.trim() && (\r\n                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                              {bulkPhoneNumbers.split('\\n').filter(line => line.trim()).length} entries\r\n                            </Badge>\r\n                          )}\r\n                        </div>\r\n                        <Textarea\r\n                          id=\"bulk-phones\"\r\n                          placeholder=\"0546591622 1&#10;0247064874 3&#10;0245696072 2&#10;233547897522 10&#10;...add as many as you need (no limit)\"\r\n                          rows={20}\r\n                          value={bulkPhoneNumbers}\r\n                          onChange={(e) => setBulkPhoneNumbers(e.target.value)}\r\n                          className=\"font-mono text-sm\"\r\n                        />\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                          Enter one number per line with GB amount (e.g., \"0241234567 2\" for 2GB). \r\n                          Supports formats: 0241234567 or 233241234567 (no + sign). \r\n                          <strong className=\"text-green-600\">✓ No limit - add 100+ numbers!</strong>\r\n                          <br />\r\n                          All numbers must be for <strong>{networkInfo?.name}</strong> network.\r\n                          Valid prefixes: <strong>{networkKey ? getNetworkPrefixes(networkKey).join(\", \") : \"\"}</strong>\r\n                        </p>\r\n                      </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Label className=\"text-black font-semibold\">Payment Method</Label>\r\n                      <div className=\"grid gap-3\">\r\n                        {/* Wallet Payment Option */}\r\n                        <div className=\"relative\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setBulkPaymentMethod(bulkPaymentMethod === \"wallet\" ? undefined : \"wallet\")}\r\n                            disabled={bulkTotal ? bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) : false}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              bulkPaymentMethod === \"wallet\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            } ${\r\n                              bulkTotal && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0)\r\n                                ? \"opacity-50 cursor-not-allowed\"\r\n                                : \"\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Wallet className={`h-5 w-5 ${bulkPaymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${bulkPaymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>Wallet Balance</div>\r\n                                <div className={`text-sm ${bulkPaymentMethod === \"wallet\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Available: GH₵{stats?.walletBalance || '0.00'}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"wallet\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                          {bulkTotal && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0) && (\r\n                            <div className=\"absolute top-2 right-2\">\r\n                              <span className=\"text-xs bg-black text-white px-2 py-1 rounded font-semibold\">\r\n                                Insufficient\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Paystack Payment Option */}\r\n                        <div>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setBulkPaymentMethod(bulkPaymentMethod === \"paystack\" ? undefined : \"paystack\")}\r\n                            className={`w-full flex items-center justify-between rounded-lg border-2 p-4 transition-all ${\r\n                              bulkPaymentMethod === \"paystack\"\r\n                                ? \"border-green-500 bg-green-500 shadow-md\"\r\n                                : \"border-muted bg-white hover:border-green-500 hover:shadow-md cursor-pointer\"\r\n                            }`}\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <CreditCard className={`h-5 w-5 ${bulkPaymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`} />\r\n                              <div>\r\n                                <div className={`font-medium ${bulkPaymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>Pay with MoMo</div>\r\n                                <div className={`text-sm ${bulkPaymentMethod === \"paystack\" ? \"text-white\" : \"text-black\"}`}>\r\n                                  Secure payment via Paystack\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            {bulkPaymentMethod === \"paystack\" && (\r\n                              <CheckCircle className=\"h-5 w-5 text-white\" />\r\n                            )}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                      <Button\r\n                        className=\"w-full\"\r\n                        size=\"lg\"\r\n                        onClick={handleBulkPurchase}\r\n                        disabled={\r\n                          !bulkPhoneNumbers.trim() ||\r\n                          !bulkPaymentMethod ||\r\n                          bulkPurchaseMutation.isPending ||\r\n                          (bulkPaymentMethod === \"wallet\" && bulkTotal !== null && bulkTotal.total > (stats?.walletBalance ? parseFloat(stats.walletBalance) : 0))\r\n                        }\r\n                      >\r\n                        {bulkPurchaseMutation.isPending ? (\r\n                          <>\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <Upload className=\"mr-2 h-4 w-4\" />\r\n                            {bulkTotal\r\n                              ? `Purchase for GH₵${bulkTotal.total.toFixed(2)} (${bulkTotal.count} items)`\r\n                              : \"Purchase Data Bundles\"\r\n                            }\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                    </CardContent>\r\n                  </Card>\r\n              </TabsContent>\r\n            </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Menu, Search, CheckCircle, XCircle, Clock, Layers, Filter, Download } from \"lucide-react\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\nconst getStatusConfig = (status: string) => {\r\n  // Normalize status to match SkyTech conventions\r\n  const normalizedStatus = status.toLowerCase();\r\n  \r\n  switch (normalizedStatus) {\r\n    case 'completed':\r\n    case 'delivered':\r\n      return {\r\n        variant: 'default' as const,\r\n        icon: CheckCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-emerald-600',\r\n        borderColor: 'border-emerald-500',\r\n        label: 'Completed'\r\n      };\r\n    case 'processing':\r\n    case 'pending':\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-blue-500',\r\n        borderColor: 'border-blue-400',\r\n        label: 'Processing'\r\n      };\r\n    case 'cancelled':\r\n    case 'failed':\r\n      return {\r\n        variant: 'destructive' as const,\r\n        icon: XCircle,\r\n        color: 'text-white',\r\n        bgColor: 'bg-red-600',\r\n        borderColor: 'border-red-500',\r\n        label: status === 'failed' ? 'Failed' : 'Cancelled'\r\n      };\r\n    default:\r\n      return {\r\n        variant: 'secondary' as const,\r\n        icon: Clock,\r\n        color: 'text-white',\r\n        bgColor: 'bg-slate-600',\r\n        borderColor: 'border-slate-500',\r\n        label: status.charAt(0).toUpperCase() + status.slice(1)\r\n      };\r\n  }\r\n};\r\n\r\nexport default function UserHistoryPage() {\r\n  const { user } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n\r\n  // Helper to extract SkyTech status from API response for real-time tracking\r\n  const getSkytechStatus = (transaction: any): string | null => {\r\n    try {\r\n      if (!transaction.apiResponse) return null;\r\n      const apiResponse = JSON.parse(transaction.apiResponse);\r\n      \r\n      // Check for latest status check\r\n      if (apiResponse.skytechStatus?.status) {\r\n        return apiResponse.skytechStatus.status;\r\n      }\r\n      \r\n      // Check for initial response\r\n      if (apiResponse.results && apiResponse.results[0]?.status) {\r\n        return apiResponse.results[0].status;\r\n      }\r\n      \r\n      return null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Fetch transactions\r\n  const { data: transactions, isLoading } = useQuery({\r\n    queryKey: [\"/api/transactions\"],\r\n    queryFn: async () => {\r\n      const data = await apiRequest(\"/api/transactions\");\r\n      console.log('[User History] Fetched transactions:', data);\r\n      return data;\r\n    },\r\n    refetchInterval: 10000,\r\n  });\r\n\r\n  // Filter transactions\r\n  const filteredTransactions = transactions?.filter((transaction: any) => {\r\n    const matchesSearch = searchQuery === \"\" || \r\n      transaction.productName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      transaction.customerPhone?.includes(searchQuery) ||\r\n      transaction.reference?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      transaction.id?.toLowerCase().includes(searchQuery.toLowerCase());\r\n    \r\n    const matchesStatus = statusFilter === \"all\" || transaction.status === statusFilter;\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  console.log('[User History] Filtered transactions:', filteredTransactions?.length, 'out of', transactions?.length);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for order history</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Order History</h1>\r\n              <p className=\"text-sm text-muted-foreground\">View all your transactions</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Filters */}\r\n            <Card>\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                  <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                    <Input\r\n                      placeholder=\"Search by product, phone, or reference...\"\r\n                      value={searchQuery}\r\n                      onChange={(e) => setSearchQuery(e.target.value)}\r\n                      className=\"pl-10\"\r\n                    />\r\n                  </div>\r\n                  <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                    <SelectTrigger className=\"w-full sm:w-[180px]\">\r\n                      <Filter className=\"h-4 w-4 mr-2\" />\r\n                      <SelectValue placeholder=\"Filter by status\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      <SelectItem value=\"all\">All Status</SelectItem>\r\n                      <SelectItem value=\"completed\">Completed</SelectItem>\r\n                      <SelectItem value=\"processing\">Processing</SelectItem>\r\n                      <SelectItem value=\"failed\">Failed</SelectItem>\r\n                      <SelectItem value=\"cancelled\">Cancelled</SelectItem>\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Transactions List */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Transaction History</CardTitle>\r\n                <CardDescription>\r\n                  {filteredTransactions?.length || 0} transaction(s) found\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {isLoading ? (\r\n                  <div className=\"flex justify-center py-12\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                  </div>\r\n                ) : filteredTransactions && filteredTransactions.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {filteredTransactions.map((transaction: any) => {\r\n                      const isWalletDeduction = transaction.type === 'wallet_deduction';\r\n                      const statusConfig = isWalletDeduction \r\n                        ? {\r\n                            variant: 'destructive' as const,\r\n                            icon: XCircle,\r\n                            color: 'text-white',\r\n                            bgColor: 'bg-red-600',\r\n                            borderColor: 'border-red-500',\r\n                            label: 'Complete'\r\n                          }\r\n                        : getStatusConfig(transaction.status);\r\n                      const StatusIcon = statusConfig.icon;\r\n                      const isBulkOrder = transaction.isBulkOrder;\r\n                      const phoneNumbers = transaction.phoneNumbers \r\n                        ? (typeof transaction.phoneNumbers === 'string' \r\n                            ? JSON.parse(transaction.phoneNumbers) \r\n                            : transaction.phoneNumbers) as Array<{phone: string, bundleName: string, dataAmount: string}>\r\n                        : undefined;\r\n\r\n                      return (\r\n                        <div\r\n                          key={transaction.id}\r\n                          className={`p-4 border rounded-lg ${statusConfig.bgColor} ${statusConfig.borderColor} text-white`}\r\n                        >\r\n                          <div className=\"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3\">\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <div className=\"flex flex-wrap items-center gap-2 mb-2\">\r\n                                <p className=\"font-medium text-sm md:text-base text-white\">{transaction.productName}</p>\r\n                                <Badge variant={statusConfig.variant} className=\"flex items-center gap-1 bg-white text-gray-800\">\r\n                                  <StatusIcon className=\"h-3 w-3\" />\r\n                                  {statusConfig.label}\r\n                                </Badge>\r\n                                {isBulkOrder && (\r\n                                  <Badge variant=\"secondary\" className=\"flex items-center gap-1 bg-gray-200 text-gray-800\">\r\n                                    <Layers className=\"h-3 w-3\" />\r\n                                    Bulk ({phoneNumbers?.length || 0})\r\n                                  </Badge>\r\n                                )}\r\n                              </div>\r\n\r\n                              <div className=\"text-xs md:text-sm text-gray-200 space-y-1\">\r\n                                {isBulkOrder && phoneNumbers ? (\r\n                                  <>\r\n                                    <p className=\"font-semibold text-white\">Recipients: {phoneNumbers.length} numbers</p>\r\n                                    <details className=\"cursor-pointer\">\r\n                                      <summary className=\"text-blue-300 hover:underline\">View all numbers</summary>\r\n                                      <div className=\"mt-2 ml-2 space-y-1 max-h-32 overflow-y-auto\">\r\n                                        {phoneNumbers.map((phoneObj, idx) => (\r\n                                          <p key={idx} className=\"font-mono text-xs text-gray-300\">{idx + 1}. {phoneObj.phone} - {phoneObj.bundleName} ({phoneObj.dataAmount})</p>\r\n                                        ))}\r\n                                      </div>\r\n                                    </details>\r\n                                  </>\r\n                                ) : (\r\n                                  <p className=\"text-gray-200\">Phone: {transaction.customerPhone}</p>\r\n                                )}\r\n                                {transaction.network && <p className=\"text-gray-200\">Network: {transaction.network.toUpperCase()}</p>}\r\n                                <p className=\"text-xs text-gray-300\">Order ID: {transaction.id.slice(0,8)}</p>\r\n                                <p className=\"text-xs text-gray-300\">\r\n                                  {new Date(transaction.createdAt).toLocaleDateString()} at {new Date(transaction.createdAt).toLocaleTimeString()}\r\n                                </p>\r\n                                {transaction.completedAt && (\r\n                                  <p className=\"text-green-300 text-xs\">\r\n                                    Completed: {new Date(transaction.completedAt).toLocaleDateString()} at {new Date(transaction.completedAt).toLocaleTimeString()}\r\n                                  </p>\r\n                                )}\r\n                                {(() => {\r\n                                  const skytechStatus = getSkytechStatus(transaction);\r\n                                  return skytechStatus ? (\r\n                                    <p className=\"text-blue-200 text-xs font-semibold\" title=\"Real-time provider status\">\r\n                                      Provider Status: {skytechStatus}\r\n                                    </p>\r\n                                  ) : null;\r\n                                })()}\r\n                                {transaction.failureReason && (\r\n                                  <p className=\"text-red-300 text-xs\">Reason: {transaction.failureReason}</p>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"text-left sm:text-right shrink-0\">\r\n                              <p className=\"font-medium text-lg text-white\">GH₵{transaction.amount}</p>\r\n                              {isBulkOrder && phoneNumbers && (\r\n                                <p className=\"text-xs text-gray-300\">\r\n                                  GH₵{(parseFloat(transaction.amount) / phoneNumbers.length).toFixed(2)} each\r\n                                </p>\r\n                              )}\r\n                              <Badge variant=\"outline\" className=\"mt-1 bg-white text-gray-800 border-white\">\r\n                                {transaction.paymentMethod === 'wallet' ? 'Wallet' : 'MoMo'}\r\n                              </Badge>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-12\">\r\n                    <p className=\"text-muted-foreground\">No transactions found</p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { SupportChat } from \"@/components/user/support-chat\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Menu } from \"lucide-react\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\n\r\nexport default function UserSupportPage() {\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for support</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Support Chat</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Get help from our support team</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            <SupportChat />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Menu, FileCheck, ShoppingCart, Plus } from \"lucide-react\";\r\nimport { Link, useLocation } from \"wouter\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport resultLogo from \"@assets/result_1765780772205.jpg\";\r\n\r\ninterface ResultCheckerStock {\r\n  type: string;\r\n  year: number;\r\n  price: number;\r\n  stock: number;\r\n}\r\n\r\nexport default function UserVouchersPage() {\r\n  const { user } = useAuth();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Fetch result checker stock\r\n  const { data: stockData, isLoading: stockLoading } = useQuery({\r\n    queryKey: [\"result-checker-stock\"],\r\n    queryFn: () => apiRequest(\"/api/result-checkers/stock\"),\r\n  });\r\n\r\n  // Fetch user stats for wallet balance\r\n  const { data: userStats, isLoading: statsLoading } = useQuery({\r\n    queryKey: [\"user-stats\"],\r\n    queryFn: () => apiRequest(\"/api/user/stats\"),\r\n  });\r\n\r\n  const resultCheckers = stockData || [];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your dashboard</SheetDescription>\r\n                </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Vouchers</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Purchase result checkers and vouchers</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-7xl mx-auto space-y-6\">\r\n            {/* Wallet Balance */}\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium\">Wallet Balance</CardTitle>\r\n                <ShoppingCart className=\"h-4 w-4 text-muted-foreground\" />\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold\">\r\n                  {statsLoading ? (\r\n                    <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    `GH₵${userStats?.walletBalance || 0}`\r\n                  )}\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">Available for purchases</p>\r\n                <Link href=\"/user/wallet\">\r\n                  <Button variant=\"outline\" size=\"sm\" className=\"text-xs mt-3\">\r\n                    Top Up Wallet\r\n                  </Button>\r\n                </Link>\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Result Checkers Section */}\r\n            <Card>\r\n              <CardHeader>\r\n                <div className=\"flex items-center gap-4\">\r\n                  <img\r\n                    src={resultLogo}\r\n                    alt=\"Result Checkers\"\r\n                    className=\"w-12 h-12 object-contain rounded-lg\"\r\n                  />\r\n                  <div>\r\n                    <CardTitle>WAEC Result Checkers</CardTitle>\r\n                    <CardDescription>\r\n                      Purchase WAEC result checking vouchers for different years\r\n                    </CardDescription>\r\n                  </div>\r\n                </div>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {stockLoading ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <Loader2 className=\"h-6 w-6 animate-spin\" />\r\n                  </div>\r\n                ) : resultCheckers.length > 0 ? (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {resultCheckers.map((checker: ResultCheckerStock) => (\r\n                      <Card key={`${checker.type}-${checker.year}`} className=\"relative\">\r\n                        <CardHeader className=\"pb-3\">\r\n                          <div className=\"flex items-center justify-between\">\r\n                            <CardTitle className=\"text-lg\">\r\n                              {checker.type.toUpperCase()} {checker.year}\r\n                            </CardTitle>\r\n                            <Badge variant={checker.stock > 0 ? \"default\" : \"destructive\"}>\r\n                              {checker.stock > 0 ? `${checker.stock} in stock` : \"Out of stock\"}\r\n                            </Badge>\r\n                          </div>\r\n                          <CardDescription>\r\n                            WAEC Result Checker Voucher\r\n                          </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                          <div className=\"space-y-3\">\r\n                            <div className=\"text-2xl font-bold text-primary\">\r\n                              GH₵{checker.price}\r\n                            </div>\r\n                            <Link href={`/checkout/result_checker/${checker.type}-${checker.year}`}>\r\n                              <Button\r\n                                className=\"w-full\"\r\n                                disabled={checker.stock === 0}\r\n                              >\r\n                                <FileCheck className=\"h-4 w-4 mr-2\" />\r\n                                {checker.stock > 0 ? \"Purchase Now\" : \"Out of Stock\"}\r\n                              </Button>\r\n                            </Link>\r\n                          </div>\r\n                        </CardContent>\r\n                      </Card>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    No result checkers available at the moment.\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Other Vouchers Section - Placeholder for future vouchers */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Other Vouchers</CardTitle>\r\n                <CardDescription>\r\n                  More voucher types coming soon\r\n                </CardDescription>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-center py-8 text-muted-foreground\">\r\n                  <Plus className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\r\n                  <p>More voucher types will be available soon.</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"@/hooks/use-auth\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { UserSidebar } from \"@/components/layout/user-sidebar\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Loader2, Menu, User, Lock } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { apiRequest } from \"@/lib/api\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { Sheet, SheetContent, SheetTrigger, SheetTitle, SheetDescription } from \"@/components/ui/sheet\";\r\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\n\r\nexport default function UserSettingsPage() {\r\n  const { user, refreshUser } = useAuth();\r\n  const { toast } = useToast();\r\n  const [sidebarOpen, setSidebarOpen] = useState(false);\r\n\r\n  // Profile update state\r\n  const [profileData, setProfileData] = useState({\r\n    name: user?.name || '',\r\n    email: user?.email || '',\r\n  });\r\n  const [profileLoading, setProfileLoading] = useState(false);\r\n\r\n  // Password update state\r\n  const [passwordData, setPasswordData] = useState({\r\n    currentPassword: '',\r\n    newPassword: '',\r\n    confirmPassword: '',\r\n  });\r\n  const [passwordLoading, setPasswordLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setProfileData({\r\n        name: user.name || '',\r\n        email: user.email || '',\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  const handleProfileUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!profileData.name.trim()) {\r\n      toast({ title: 'Name is required', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    setProfileLoading(true);\r\n    try {\r\n      const response = await apiRequest('PUT', '/api/user/profile', {\r\n        name: profileData.name.trim(),\r\n        email: profileData.email.trim(),\r\n      });\r\n\r\n      await refreshUser();\r\n      toast({ title: 'Profile updated successfully' });\r\n    } catch (error: any) {\r\n      toast({ title: 'Failed to update profile', description: error.message, variant: 'destructive' });\r\n    } finally {\r\n      setProfileLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePasswordUpdate = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\r\n      toast({ title: 'Passwords do not match', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    if (passwordData.newPassword.length < 6) {\r\n      toast({ title: 'Password must be at least 6 characters', variant: 'destructive' });\r\n      return;\r\n    }\r\n\r\n    setPasswordLoading(true);\r\n    try {\r\n      const { error } = await supabase.auth.updateUser({\r\n        password: passwordData.newPassword\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      setPasswordData({ currentPassword: '', newPassword: '', confirmPassword: '' });\r\n      toast({ title: 'Password updated successfully' });\r\n    } catch (error: any) {\r\n      toast({ title: 'Failed to update password', description: error.message, variant: 'destructive' });\r\n    } finally {\r\n      setPasswordLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen overflow-hidden\">\r\n      {/* Desktop Sidebar */}\r\n      <aside className=\"hidden md:block\">\r\n        <UserSidebar />\r\n      </aside>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        <header className=\"flex items-center justify-between border-b px-6 h-16 shrink-0\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\r\n              <SheetTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"md:hidden\">\r\n                  <Menu className=\"h-5 w-5\" />\r\n                </Button>\r\n              </SheetTrigger>\r\n              <SheetContent side=\"left\" className=\"p-0 w-64 bg-sidebar\">\r\n                <VisuallyHidden>\r\n                  <SheetTitle>Navigation Menu</SheetTitle>\r\n                  <SheetDescription>Main navigation for your account</SheetDescription>\r\n                  </VisuallyHidden>\r\n                <UserSidebar onClose={() => setSidebarOpen(false)} />\r\n              </SheetContent>\r\n            </Sheet>\r\n            <div>\r\n              <h1 className=\"text-xl font-bold\">Settings</h1>\r\n              <p className=\"text-sm text-muted-foreground\">Manage your account settings</p>\r\n            </div>\r\n          </div>\r\n          <ThemeToggle />\r\n        </header>\r\n\r\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6\">\r\n          <div className=\"max-w-2xl mx-auto space-y-6\">\r\n            <Tabs defaultValue=\"profile\" className=\"w-full\">\r\n              <TabsList className=\"grid w-full grid-cols-2\">\r\n                <TabsTrigger value=\"profile\" className=\"flex items-center gap-2\">\r\n                  <User className=\"h-4 w-4\" />\r\n                  Profile\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"security\" className=\"flex items-center gap-2\">\r\n                  <Lock className=\"h-4 w-4\" />\r\n                  Security\r\n                </TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"profile\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Profile Information</CardTitle>\r\n                    <CardDescription>Update your personal information</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <form onSubmit={handleProfileUpdate} className=\"space-y-4\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"name\">Full Name</Label>\r\n                        <Input\r\n                          id=\"name\"\r\n                          value={profileData.name}\r\n                          onChange={(e) => setProfileData(prev => ({ ...prev, name: e.target.value }))}\r\n                          placeholder=\"Enter your full name\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"email\">Email Address</Label>\r\n                        <Input\r\n                          id=\"email\"\r\n                          type=\"email\"\r\n                          value={profileData.email}\r\n                          onChange={(e) => setProfileData(prev => ({ ...prev, email: e.target.value }))}\r\n                          placeholder=\"Enter your email\"\r\n                        />\r\n                      </div>\r\n                      <Button type=\"submit\" disabled={profileLoading}>\r\n                        {profileLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        Update Profile\r\n                      </Button>\r\n                    </form>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"security\" className=\"space-y-4\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Change Password</CardTitle>\r\n                    <CardDescription>Update your account password</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent>\r\n                    <form onSubmit={handlePasswordUpdate} className=\"space-y-4\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"newPassword\">New Password</Label>\r\n                        <Input\r\n                          id=\"newPassword\"\r\n                          type=\"password\"\r\n                          value={passwordData.newPassword}\r\n                          onChange={(e) => setPasswordData(prev => ({ ...prev, newPassword: e.target.value }))}\r\n                          placeholder=\"Enter new password\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"confirmPassword\">Confirm New Password</Label>\r\n                        <Input\r\n                          id=\"confirmPassword\"\r\n                          type=\"password\"\r\n                          value={passwordData.confirmPassword}\r\n                          onChange={(e) => setPasswordData(prev => ({ ...prev, confirmPassword: e.target.value }))}\r\n                          placeholder=\"Confirm new password\"\r\n                        />\r\n                      </div>\r\n                      <Button type=\"submit\" disabled={passwordLoading}>\r\n                        {passwordLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                        Update Password\r\n                      </Button>\r\n                    </form>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n            </Tabs>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { Card, CardContent } from \"@/components/ui/card\";\r\nimport { AlertCircle } from \"lucide-react\";\r\n\r\nexport default function NotFound() {\r\n  return (\r\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\r\n      <Card className=\"w-full max-w-md mx-4\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex mb-4 gap-2\">\r\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\r\n          </div>\r\n\r\n          <p className=\"mt-4 text-sm text-gray-600\">\r\n            Did you forget to add the page to the router?\r\n          </p>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { useParams, useLocation } from \"wouter\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { ThemeToggle } from \"@/components/theme-toggle\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { OrderTracker } from \"@/components/order-tracker\";\r\nimport { PageLoader } from \"@/components/ui/loading-spinner\";\r\nimport { Store, Shield, MessageCircle, Search } from \"lucide-react\";\r\nimport mtnLogo from \"@assets/mtn_1765780772203.jpg\";\r\nimport telecelLogo from \"@assets/telecel_1765780772206.jpg\";\r\nimport airteltigoLogo from \"@assets/at_1765780772206.jpg\";\r\nimport banner1 from \"@assets/banner1_1765774201032.jpeg\";\r\nimport banner2 from \"@assets/banner2_1765774201033.jpeg\";\r\nimport banner3 from \"@assets/banner3_1765774201030.jpeg\";\r\n\r\nconst bannerImages = [banner1, banner2, banner3];\r\n\r\ninterface StorefrontData {\r\n  store: {\r\n    businessName: string;\r\n    businessDescription: string;\r\n    slug: string;\r\n    whatsappSupportLink?: string;\r\n    whatsappChannelLink?: string;\r\n    role: string;\r\n  };\r\n  dataBundles: Array<{\r\n    id: string;\r\n    name: string;\r\n    network: string;\r\n    dataAmount: string;\r\n    validity: string;\r\n    apiCode?: string;\r\n    isActive: boolean;\r\n    price: string;\r\n  }>;\r\n}\r\n\r\nexport default function StorefrontPage() {\r\n  const { role, slug } = useParams<{ role: string; slug: string }>();\r\n  const [, setLocation] = useLocation();\r\n  const [currentBanner, setCurrentBanner] = useState(0);\r\n\r\n  // Auto-rotate banner every 5 seconds\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrentBanner((prev) => (prev + 1) % bannerImages.length);\r\n    }, 5000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Store the agent slug in localStorage when visiting\r\n  useEffect(() => {\r\n    if (slug) {\r\n      localStorage.setItem(\"agentStore\", slug);\r\n    }\r\n  }, [slug]);\r\n\r\n  // Handle product navigation\r\n  const navigateToProduct = (network: string) => {\r\n    setLocation(`/store/${role}/${slug}/${network}`);\r\n  };\r\n\r\n  const { data, isLoading, error } = useQuery<StorefrontData>({\r\n    queryKey: [`/api/store/${role}/${slug}`],\r\n    enabled: !!role && !!slug,\r\n    refetchInterval: 30000,\r\n    refetchOnWindowFocus: true,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <header className=\"border-b bg-white\">\r\n          <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Store className=\"h-6 w-6\" />\r\n              <span className=\"font-semibold\">Loading...</span>\r\n            </div>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n        <main className=\"flex-1\">\r\n          <PageLoader text=\"Loading store...\" />\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !data) {\r\n    return (\r\n      <div className=\"min-h-screen flex flex-col bg-background\">\r\n        <header className=\"border-b bg-background\">\r\n          <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Store className=\"h-6 w-6\" />\r\n              <span className=\"font-semibold text-foreground\">Store Not Found</span>\r\n            </div>\r\n            <ThemeToggle />\r\n          </div>\r\n        </header>\r\n        <main className=\"flex-1 flex items-center justify-center px-4\">\r\n          <Card className=\"max-w-md w-full\">\r\n            <CardContent className=\"pt-6 text-center\">\r\n              <Store className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n              <h2 className=\"text-xl font-semibold mb-2\">Store Not Found</h2>\r\n              <p className=\"text-muted-foreground mb-4\">This store doesn't exist or is not available.</p>\r\n            </CardContent>\r\n          </Card>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { store } = data;\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col bg-background\">\r\n      {/* Storefront Header - Simple, no navigation to main app */}\r\n      <header className=\"border-b sticky top-0 z-50 bg-blue-100 dark:bg-blue-200\">\r\n        <div className=\"container mx-auto flex items-center justify-between h-16 px-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div>\r\n              <h1 className=\"font-semibold text-lg text-black\">{store.businessName}</h1>\r\n              {store.businessDescription && (\r\n                <p className=\"text-sm text-black/70\">{store.businessDescription}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button variant=\"outline\" size=\"sm\" className=\"text-black\" onClick={() => {\r\n              document.getElementById('track-orders')?.scrollIntoView({ behavior: 'smooth' });\r\n            }}>\r\n              <Search className=\"h-4 w-4 mr-2\" />\r\n              Track Orders\r\n            </Button>\r\n            <ThemeToggle className=\"text-black\" />\r\n          </div>\r\n        </div>\r\n      </header>\r\n      \r\n      <main className=\"flex-1\">\r\n        {/* Hero Section with Banner */}\r\n        <section className=\"relative\" data-testid=\"banner-carousel\">\r\n          <div className=\"relative h-[300px] md:h-[400px]\">\r\n            {bannerImages.map((img, index) => (\r\n              <img\r\n                key={index}\r\n                src={img}\r\n                alt={`Banner ${index + 1}`}\r\n                className={`absolute inset-0 w-full h-full object-cover transition-opacity duration-500 ${\r\n                  index === currentBanner ? \"opacity-100\" : \"opacity-0\"\r\n                }`}\r\n                data-testid={`img-banner-${index + 1}`}\r\n              />\r\n            ))}\r\n            <div className=\"absolute inset-0 bg-black/50\" />\r\n            \r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <div className=\"container mx-auto max-w-6xl text-center px-4\">\r\n                <p className=\"text-lg md:text-xl text-white/90 max-w-2xl mx-auto leading-relaxed\">\r\n                  {store.businessDescription || `Welcome to our store. Browse our selection of data bundles and result checkers.`}\r\n                </p>\r\n                <div className=\"flex items-center justify-center gap-2 mt-6 text-sm\">\r\n                  <Shield className=\"h-5 w-5 text-green-400\" />\r\n                  <span className=\"font-medium text-white/90\">Secure payments powered by Paystack</span>\r\n                </div>\r\n\r\n                {/* WhatsApp Support Links */}\r\n                {(store.whatsappSupportLink || store.whatsappChannelLink) && (\r\n                  <div className=\"flex items-center justify-center gap-4 mt-6\">\r\n                    {store.whatsappSupportLink && (\r\n                      <a\r\n                        href={store.whatsappSupportLink}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                      >\r\n                        <MessageCircle className=\"h-4 w-4\" />\r\n                        <span className=\"text-sm font-medium\">WhatsApp Support</span>\r\n                      </a>\r\n                    )}\r\n                    {store.whatsappChannelLink && (\r\n                      <a\r\n                        href={store.whatsappChannelLink}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                      >\r\n                        <MessageCircle className=\"h-4 w-4\" />\r\n                        <span className=\"text-sm font-medium\">WhatsApp Channel</span>\r\n                      </a>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2\">\r\n              {bannerImages.map((_, index) => (\r\n                <button\r\n                  key={index}\r\n                  onClick={() => setCurrentBanner(index)}\r\n                  className={`w-3 h-3 rounded-full transition-colors ${\r\n                    index === currentBanner ? \"bg-white\" : \"bg-white/50\"\r\n                  }`}\r\n                  aria-label={`Go to banner ${index + 1}`}\r\n                  data-testid={`button-banner-dot-${index + 1}`}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Product Logos Section */}\r\n        <section className=\"py-12 px-4 bg-background\">\r\n          <div className=\"container mx-auto max-w-4xl\">\r\n            <h2 className=\"text-2xl font-bold text-center mb-8\">Browse Our Products</h2>\r\n            \r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n              {/* MTN Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('mtn')}\r\n              >\r\n                <img\r\n                  src={mtnLogo}\r\n                  alt=\"MTN Data Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">MTN Data Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy MTN data bundles.</p>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* Telecel Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('telecel')}\r\n              >\r\n                <img\r\n                  src={telecelLogo}\r\n                  alt=\"Telecel Data Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">Telecel Data Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy Telecel data bundles.</p>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* AT BIG TIME Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('at_bigtime')}\r\n              >\r\n                <img\r\n                  src={airteltigoLogo}\r\n                  alt=\"AT BIG TIME Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">AT BIG TIME Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy AT BIG TIME data bundles.</p>\r\n                </div>\r\n              </Card>\r\n\r\n              {/* AT iShare Logo */}\r\n              <Card \r\n                className=\"p-4 hover-elevate cursor-pointer transition-all aspect-square flex flex-col items-center justify-center gap-3 dark:border-2 dark:border-white\"\r\n                onClick={() => navigateToProduct('at_ishare')}\r\n              >\r\n                <img\r\n                  src={airteltigoLogo}\r\n                  alt=\"AT iShare Bundles\"\r\n                  className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded-lg\"\r\n                />\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-sm font-semibold\">AT iShare Bundles</p>\r\n                  <p className=\"text-xs text-muted-foreground\">Buy AT iShare data bundles.</p>\r\n                </div>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        {/* Track Orders Section */}\r\n        <section id=\"track-orders\" className=\"py-12 px-4 bg-blue-100 dark:bg-blue-950/40 border-y\">\r\n          <div className=\"container mx-auto max-w-4xl\">\r\n            <div className=\"text-center mb-8\">\r\n              <h2 className=\"text-3xl font-bold mb-2 text-blue-600 dark:text-blue-400\">Track Orders</h2>\r\n              <h3 className=\"text-xl text-black dark:text-white mb-4\">Never Lose Track</h3>\r\n              <p className=\"text-lg text-black dark:text-white max-w-2xl mx-auto\">\r\n                Easily track your data bundle and result checker orders using your transaction ID or beneficiary phone number.\r\n              </p>\r\n            </div>\r\n\r\n            <OrderTracker />\r\n          </div>\r\n        </section>\r\n      </main>\r\n\r\n      {/* Simple Footer */}\r\n      <footer className=\"border-t py-8 px-4 bg-muted\">\r\n        <div className=\"container mx-auto max-w-6xl\">\r\n          <div className=\"text-center\">\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              © {new Date().getFullYear()} {store.businessName}. All rights reserved.\r\n            </p>\r\n <div className=\"flex items-center justify-center gap-2 mt-2 text-xs text-muted-foreground\">\r\n              <Shield className=\"h-3 w-3\" />\r\n              <span>Secure payments • Fast delivery • 24/7 support</span>\r\n            </div>\r\n\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n              Developed by <a href=\"https://bm-portfolio-up2x.onrender.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline\">BlusMotif</a>\r\n            </p>\r\n           \r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n","import { Router, Switch, Route, useLocation } from \"wouter\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { queryClient } from \"./lib/queryClient\";\r\nimport { QueryClientProvider } from \"@tanstack/react-query\";\r\nimport { Toaster } from \"@/components/ui/toaster\";\r\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\r\nimport { ThemeProvider } from \"@/components/theme-provider\";\r\nimport { PWAInstallPrompt } from \"@/components/pwa-install-prompt\";\r\nimport { ProtectedRoute } from \"@/components/ProtectedRoute\";\r\nimport { ErrorBoundary } from \"@/components/error-boundary\";\r\nimport { ConnectionStatus } from \"@/components/connection-status\";\r\nimport { useSessionTimeout } from \"@/hooks/use-session-timeout\";\r\nimport { BreakModeGuard } from \"@/components/BreakModeGuard\";\r\nimport { AnnouncementPopup } from \"@/components/announcement-popup\";\r\nimport HomePage from \"@/pages/home\";\r\nimport LoginPage from \"@/pages/login\";\r\nimport RegisterPage from \"@/pages/register\";\r\nimport CheckoutPage from \"@/pages/checkout\";\r\nimport CheckoutSuccessPage from \"@/pages/checkout-success\";\r\nimport WalletTopupSuccessPage from \"@/pages/wallet-topup-success\";\r\nimport AgentRegisterPage from \"@/pages/agent/register\";\r\nimport AgentActivationCompletePage from \"@/pages/agent/activation-complete\";\r\nimport AgentUpgradePage from \"@/pages/agent/upgrade\";\r\nimport AgentDashboard from \"@/pages/agent/dashboard\";\r\nimport DealerDashboard from \"@/pages/dealer/dashboard\";\r\nimport SuperDealerDashboard from \"@/pages/super-dealer/dashboard\";\r\nimport MasterDashboard from \"@/pages/master/dashboard\";\r\nimport AgentTransactions from \"@/pages/agent/transactions\";\r\nimport AgentWithdrawals from \"@/pages/agent/withdrawals\";\r\nimport AgentStorefront from \"@/pages/agent/storefront\";\r\nimport AgentSettings from \"@/pages/agent/settings\";\r\nimport AgentSupportPage from \"@/pages/agent/support\";\r\nimport AgentBundlesPage from \"@/pages/agent/bundles\";\r\nimport AgentWalletPage from \"@/pages/agent/wallet\";\r\nimport AgentPricingPage from \"@/pages/agent/pricing\";\r\nimport DealerPricingPage from \"@/pages/dealer/pricing\";\r\nimport SuperDealerPricingPage from \"@/pages/super-dealer/pricing\";\r\nimport MasterPricingPage from \"@/pages/master/pricing\";\r\nimport ApiIntegrationsPage from \"@/pages/api-integrations\";\r\nimport ApiDocumentationPage from \"@/pages/api-documentation\";\r\nimport AdminDashboard from \"@/pages/admin/dashboard\";\r\nimport AdminDataBundles from \"@/pages/admin/data-bundles\";\r\nimport AdminRoleBasePrices from \"@/pages/admin/role-base-prices\";\r\nimport AdminResultCheckers from \"@/pages/admin/result-checkers\";\r\nimport AdminTransactions from \"@/pages/admin/transactions\";\r\nimport AdminUsers from \"@/pages/admin/users\";\r\nimport AdminAgents from \"@/pages/admin/agents\";\r\nimport AdminWithdrawals from \"@/pages/admin/withdrawals\";\r\nimport AdminChatSupport from \"@/pages/admin/chat-support\";\r\nimport AdminSettings from \"@/pages/admin/settings\";\r\nimport AdminRankings from \"@/pages/admin/rankings\";\r\nimport AdminBreakSettings from \"@/pages/admin/break-settings\";\r\nimport AdminExternalApiProviders from \"@/pages/admin/external-api-providers\";\r\nimport AdminAnnouncements from \"@/pages/admin/announcements\";\r\nimport AdminGuides from \"@/pages/admin/guides\";\r\nimport AdminManualTopup from \"@/pages/admin/manual-topup\";\r\nimport PublicRankings from \"@/pages/public-rankings\";\r\nimport { getAgentId } from \"@/lib/store-context\";\r\nimport AgentNetworkPurchasePage from \"@/pages/agent/network-purchase\";\r\nimport NetworkProductsPage from \"@/pages/products/network\";\r\nimport ResultCheckersPage from \"@/pages/products/result-checkers\";\r\nimport DataBundlesPage from \"@/pages/data-bundles\";\r\nimport UserDashboard from \"@/pages/user/dashboard\";\r\nimport WalletDashboard from \"@/pages/user/wallet\";\r\nimport UserBundlesPage from \"@/pages/user/bundles\";\r\nimport UserHistoryPage from \"@/pages/user/history\";\r\nimport UserSupportPage from \"@/pages/user/support\";\r\nimport UserVouchersPage from \"@/pages/user/vouchers\";\r\nimport UserSettingsPage from \"@/pages/user/settings\";\r\nimport NotFound from \"@/pages/not-found\";\r\n\r\n// Storefront\r\nimport StorefrontPage from \"@/pages/storefront\";\r\n\r\n// Component to restrict agent store users to storefront only\r\nfunction StorefrontGuard({ children }: { children: React.ReactNode }) {\r\n  const [location, navigate] = useLocation();\r\n  const hasChecked = useRef(false);\r\n  \r\n  useEffect(() => {\r\n    // Only run once on mount, not on every location change\r\n    if (hasChecked.current) return;\r\n    hasChecked.current = true;\r\n    \r\n    const agentStore = getAgentId();\r\n\r\n    // Allowed paths for storefront users: store, products, checkout, success pages, auth pages, agent pages\r\n    const allowedPaths = [\r\n      \"/store/\",\r\n      \"/products/\",\r\n      \"/checkout\",\r\n      \"/wallet/topup/success\",\r\n      \"/login\",\r\n      \"/register\",\r\n      \"/agent/register\",\r\n      \"/agent/activation-complete\",\r\n      \"/agent/upgrade\"\r\n    ];\r\n\r\n    const isAllowedPath = allowedPaths.some(path => location.startsWith(path));\r\n\r\n    // If user is in agent storefront context\r\n    if (agentStore) {\r\n      // If on root, immediately redirect to the agent store (fail-safe)\r\n      if (location === \"/\") {\r\n        console.log('Redirecting from root to agent store:', agentStore);\r\n        navigate(`/store/agent/${agentStore}`, { replace: true });\r\n        return;\r\n      }\r\n\r\n      // If trying to access non-allowed app routes, redirect back to the agent store\r\n      if (!isAllowedPath && !location.startsWith(`/store/agent/${agentStore}`)) {\r\n        console.log('Redirecting non-allowed path to agent store:', location, agentStore);\r\n        navigate(`/store/agent/${agentStore}`, { replace: true });\r\n      }\r\n    }\r\n  }, []); // Empty deps - only run once on mount\r\n  \r\n  return <>{children}</>;\r\n}\r\n\r\nfunction AppRouter() {\r\n  return (\r\n    <Router>\r\n      <SessionTimeoutManager />\r\n      <StorefrontGuard>\r\n        <Switch>\r\n      <Route path=\"/\" component={HomePage} />\r\n      <Route path=\"/data-bundles\" component={DataBundlesPage} />\r\n      <Route path=\"/products\" component={DataBundlesPage} />\r\n      <Route path=\"/products/result-checkers\" component={ResultCheckersPage} />\r\n      <Route path=\"/products/waec-result-checker\" component={ResultCheckersPage} />\r\n      <Route path=\"/products/:network\" component={NetworkProductsPage} />\r\n      <Route path=\"/login\" component={LoginPage} />\r\n      <Route path=\"/register\" component={RegisterPage} />\r\n      <Route path=\"/rankings\" component={PublicRankings} />\r\n      <Route path=\"/checkout/:productType/:productId/:year?\" component={CheckoutPage} />\r\n      <Route path=\"/checkout/success\" component={CheckoutSuccessPage} />\r\n      <Route path=\"/wallet/topup/success\" component={WalletTopupSuccessPage} />\r\n      <Route path=\"/agent/register\" component={AgentRegisterPage} />\r\n      <Route path=\"/agent/upgrade\" component={AgentUpgradePage} />\r\n      <Route path=\"/agent/activation-complete\" component={AgentActivationCompletePage} />\r\n      <ProtectedRoute path=\"/user/dashboard\" component={UserDashboard} />\r\n      <ProtectedRoute path=\"/user/wallet\" component={WalletDashboard} />\r\n      <ProtectedRoute path=\"/user/bundles/:network\" component={UserBundlesPage} />\r\n      <ProtectedRoute path=\"/user/settings\" component={UserSettingsPage} />\r\n      <ProtectedRoute path=\"/user/vouchers\" component={UserVouchersPage} />\r\n      <ProtectedRoute path=\"/user/history\" component={UserHistoryPage} />\r\n      <ProtectedRoute path=\"/user/support\" component={UserSupportPage} />\r\n      <ProtectedRoute path=\"/dealer/dashboard\" component={DealerDashboard} requiredRole=\"dealer\" />\r\n      <ProtectedRoute path=\"/super-dealer/dashboard\" component={SuperDealerDashboard} requiredRole=\"super_dealer\" />\r\n      <ProtectedRoute path=\"/master/dashboard\" component={MasterDashboard} requiredRole=\"master\" />\r\n      <ProtectedRoute path=\"/agent/dashboard\" component={AgentDashboard} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/transactions\" component={AgentTransactions} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/withdrawals\" component={AgentWithdrawals} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/storefront\" component={AgentStorefront} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/settings\" component={AgentSettings} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/support\" component={AgentSupportPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/bundles/:network\" component={AgentBundlesPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/wallet\" component={AgentWalletPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/agent/pricing\" component={AgentPricingPage} requiredRoles={[\"agent\", \"dealer\", \"super_dealer\", \"master\"]} />\r\n      <ProtectedRoute path=\"/dashboard/api-integrations\" component={ApiIntegrationsPage} requiredRoles={[\"user\", \"agent\", \"dealer\", \"super_dealer\", \"master\", \"admin\"]} />\r\n      <ProtectedRoute path=\"/dashboard/api-documentation\" component={ApiDocumentationPage} requiredRoles={[\"user\", \"agent\", \"dealer\", \"super_dealer\", \"master\", \"admin\"]} />\r\n      <ProtectedRoute path=\"/dealer/pricing\" component={DealerPricingPage} requiredRole=\"dealer\" />\r\n      <ProtectedRoute path=\"/super-dealer/pricing\" component={SuperDealerPricingPage} requiredRole=\"super_dealer\" />\r\n      <ProtectedRoute path=\"/master/pricing\" component={MasterPricingPage} requiredRole=\"master\" />\r\n      <ProtectedRoute path=\"/admin\" component={AdminDashboard} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/rankings\" component={AdminRankings} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/data-bundles\" component={AdminDataBundles} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/role-base-prices\" component={AdminRoleBasePrices} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/result-checkers\" component={AdminResultCheckers} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/transactions\" component={AdminTransactions} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/users\" component={AdminUsers} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/agents\" component={AdminAgents} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/withdrawals\" component={AdminWithdrawals} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/manual-topup\" component={AdminManualTopup} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/chat-support\" component={AdminChatSupport} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/announcements\" component={AdminAnnouncements} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/guides\" component={AdminGuides} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/break-settings\" component={AdminBreakSettings} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/external-api-providers\" component={AdminExternalApiProviders} requiredRole=\"admin\" />\r\n      <ProtectedRoute path=\"/admin/settings\" component={AdminSettings} requiredRole=\"admin\" />\r\n      <Route path=\"/store/:role/:slug\" component={StorefrontPage} />\r\n      <Route path=\"/store/:role/:slug/:network\" component={AgentNetworkPurchasePage} />\r\n      <Route component={NotFound} />\r\n    </Switch>\r\n    </StorefrontGuard>\r\n    </Router>\r\n  );\r\n}\r\n\r\nfunction SessionTimeoutManager() {\r\n  const [] = useLocation();\r\n\r\n  // Always call useSessionTimeout, but it will handle its own logic internally\r\n  useSessionTimeout();\r\n\r\n  return null;\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <ErrorBoundary>\r\n      <QueryClientProvider client={queryClient}>\r\n        <ThemeProvider>\r\n          <TooltipProvider>\r\n            <ConnectionStatus />\r\n            <PWAInstallPrompt />\r\n            <BreakModeGuard>\r\n              <AppRouter />\r\n            </BreakModeGuard>\r\n            <AnnouncementPopup />\r\n            <Toaster />\r\n          </TooltipProvider>\r\n        </ThemeProvider>\r\n      </QueryClientProvider>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { createRoot } from \"react-dom/client\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\n// Register service worker for PWA functionality\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', () => {\r\n    navigator.serviceWorker.register('/sw.js')\r\n      .then((registration) => {\r\n        console.log('Service Worker registered successfully:', registration.scope);\r\n      })\r\n      .catch((error) => {\r\n        console.log('Service Worker registration failed:', error);\r\n      });\r\n  });\r\n}\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nif (rootElement) {\r\n  createRoot(rootElement).render(\r\n    <App />\r\n  );\r\n}\r\n"],"names":["supabaseUrl","supabaseAnonKey","supabaseInstance","createClient","storageKey","storedSession","sessionData","event","session","supabase","cachedToken","tokenExpiry","parseError","res","text","json","getAuthHeaders","now","data","error","token","_a","err","clearAuthCache","apiRequest","method","url","body","authHeaders","fullUrl","message","getQueryFn","on401","queryKey","baseUrl","queryClient","QueryClient","TOAST_LIMIT","TOAST_REMOVE_DELAY","count","genId","toastTimeouts","addToRemoveQueue","toastId","timeout","dispatch","reducer","state","action","toast","t","listeners","memoryState","listener","props","id","update","dismiss","open","useToast","setState","React.useState","React.useEffect","index","cn","inputs","twMerge","clsx","ToastProvider","ToastPrimitives.Provider","ToastViewport","React.forwardRef","className","ref","jsx","ToastPrimitives.Viewport","toastVariants","cva","Toast","variant","ToastPrimitives.Root","ToastAction","ToastPrimitives.Action","ToastClose","ToastPrimitives.Close","X","ToastTitle","ToastPrimitives.Title","ToastDescription","ToastPrimitives.Description","Toaster","toasts","title","description","jsxs","TooltipProvider","TooltipPrimitive.Provider","TooltipContent","sideOffset","TooltipPrimitive.Content","initialState","ThemeProviderContext","createContext","ThemeProvider","children","defaultTheme","theme","setTheme","useState","storedTheme","useEffect","root","value","useTheme","context","useContext","logoLight","buttonVariants","Button","size","asChild","Comp","Slot","PWAInstallPrompt","deferredPrompt","setDeferredPrompt","showInstallButton","setShowInstallButton","isInstalled","setIsInstalled","dismissed","setDismissed","dismissedTime","handler","e","devTimer","handleInstallClick","outcome","handleDismiss","useAuth","useQueryClient","setSession","authLoading","setAuthLoading","loginError","setLoginError","registerError","setRegisterError","isLoginLoading","setIsLoginLoading","isRegisterLoading","setIsRegisterLoading","isLoggingOut","setIsLoggingOut","logoutInProgressRef","useRef","mounted","subscription","queryLoading","useQuery","user","agent","isAuthenticated","isLoading","email","password","name","phone","response","errorMsg","errorMessage","watchdogTimer","LoadingSpinner","sizeClasses","Loader2","PageLoader","TableSkeleton","rows","_","i","ProtectedRoute","path","Component","requiredRole","requiredRoles","fallbackPath","Route","params","Redirect","alertVariants","Alert","AlertTitle","AlertDescription","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","ErrorBoundary","__publicField","errorInfo","AlertCircle","RefreshCw","ConnectionStatus","isOnline","setIsOnline","showOffline","setShowOffline","handleOnline","handleOffline","checkConnection","WifiOff","INACTIVITY_TIMEOUT","useSessionTimeout","logout","timeoutRef","warningRef","lastActivityRef","lastResetRef","resetTimer","useCallback","handleActivity","events","elapsed","BreakModeGuard","location","useLocation","authData","breakSettings","breakLoading","isAuthRoute","Lock","badgeVariants","Badge","getAudiencesArray","announcement","parsed","parseMessageWithLinks","urlRegex","part","ExternalLink","AnnouncementPopup","pathname","isStorefrontView","isOpen","setIsOpen","dismissedAnnouncements","setDismissedAnnouncements","announcements","filteredAnnouncements","userRole","isLoggedIn","audiences","a","hasUndismissed","announcementId","newDismissed","handleClose","undismissedAnnouncements","Megaphone","Bell","ThemeToggle","handleToggle","newTheme","Sun","Moon","DropdownMenu","DropdownMenuPrimitive.Root","DropdownMenuTrigger","DropdownMenuPrimitive.Trigger","DropdownMenuSubTrigger","inset","DropdownMenuPrimitive.SubTrigger","ChevronRight","DropdownMenuSubContent","DropdownMenuPrimitive.SubContent","DropdownMenuContent","DropdownMenuPrimitive.Portal","DropdownMenuPrimitive.Content","DropdownMenuItem","DropdownMenuPrimitive.Item","DropdownMenuCheckboxItem","checked","DropdownMenuPrimitive.CheckboxItem","DropdownMenuPrimitive.ItemIndicator","Check","DropdownMenuRadioItem","DropdownMenuPrimitive.RadioItem","Circle","DropdownMenuLabel","DropdownMenuPrimitive.Label","DropdownMenuSeparator","DropdownMenuPrimitive.Separator","Avatar","AvatarPrimitive.Root","AvatarImage","AvatarPrimitive.Image","AvatarFallback","AvatarPrimitive.Fallback","Sheet","SheetPrimitive.Root","SheetTrigger","SheetPrimitive.Trigger","SheetPortal","SheetPrimitive.Portal","SheetOverlay","SheetPrimitive.Overlay","sheetVariants","SheetContent","side","SheetPrimitive.Content","SheetPrimitive.Close","SheetTitle","SheetPrimitive.Title","SheetDescription","SheetPrimitive.Description","APP_NAME","NETWORKS","RESULT_CHECKER_TYPES","WITHDRAWAL_STATUSES","formatCurrency","amount","num","formatDate","date","d","logoDark","AGENT_STORE_KEY","clearAgentStore","getAgentId","Dialog","DialogPrimitive.Root","DialogTrigger","DialogPrimitive.Trigger","DialogPortal","DialogPrimitive.Portal","DialogOverlay","DialogPrimitive.Overlay","DialogContent","DialogPrimitive.Content","DialogPrimitive.Close","DialogHeader","DialogFooter","DialogTitle","DialogPrimitive.Title","DialogDescription","DialogPrimitive.Description","Tabs","TabsPrimitive.Root","TabsList","TabsPrimitive.List","TabsTrigger","TabsPrimitive.Trigger","TabsContent","TabsPrimitive.Content","DEFAULT_GUIDES","WatchHowToPurchase","label","triggerVariant","triggerSize","setOpen","activeCategory","setActiveCategory","selectedGuide","setSelectedGuide","fetchedGuides","guidesByCategory","useMemo","apiGuides","fallback","guide","currentGuide","renderPlayer","embedUrl","videoId","_b","_c","Fragment","PlayCircle","Video","category","guides","g","CheckCircle2","Info","Header","mobileMenuOpen","setMobileMenuOpen","agentStore","getInitials","n","getDashboardLink","navigationItems","Home","Package","FileCheck","Link","item","Icon","isActive","Menu","LayoutDashboard","Store","LogOut","Footer","Shield","SiVisa","SiMastercard","Hero","subtitle","aboveButtons","badge","primaryButton","secondaryButton","images","showNavigation","background","overlay","height","align","currentImage","setCurrentImage","timer","prev","heightClasses","nextImage","prevImage","backgroundClasses","img","ChevronLeft","CountdownValue","displayValue","setDisplayValue","isVisible","setIsVisible","numericMatch","numeric","suffix","React.createRef","observer","entry","tempDiv","duration","startTime","animate","progress","easedProgress","currentValue","Stats","stats","columns","gridCols","stat","Features","features","feature","isLarge","CTA","titleSizeClasses","API_BASE_URL","api","endpoint","productId","year","reference","role","slug","autoLogoutInProgress","options","disableAutoLogout","fetchOptions","errorData","mtnLogo","telecelLogo","airteltigoLogo","resultLogo","banner1","banner2","banner3","Input","type","OrderTracker","searchQuery","setSearchQuery","setIsLoading","isRefreshing","setIsRefreshing","order","setOrder","refreshedAt","setRefreshedAt","handleSearch","refreshOrderStatus","orderId","extractSkytechStatus","apiResponse","getStatusIcon","statusToCheck","status","CheckCircle","XCircle","Layers","getStatusBadge","statusToDisplay","statusLower","Clock","Search","displayStatus","RotateCw","bannerImages","HomePage","resultCheckerStock","productCategories","sum","Zap","Headphones","DollarSign","Users","Smartphone","Award","getAgentCtaLink","getAgentCtaText","ArrowRight","cat","labelVariants","Label","LabelPrimitive.Root","Form","FormProvider","FormFieldContext","React.createContext","FormField","Controller","useFormField","fieldContext","React.useContext","itemContext","FormItemContext","getFieldState","formState","useFormContext","fieldState","FormItem","React.useId","FormLabel","formItemId","FormLabelWithoutFor","FormControl","formDescriptionId","formMessageId","FormDescription","FormMessage","loginSchema","z","LoginPage","setLocation","showPassword","setShowPassword","login","hasRedirected","setHasRedirected","form","useForm","zodResolver","onSubmit","ArrowLeft","field","Mail","EyeOff","Eye","registerSchema","RegisterPage","register","result","User","Phone","Separator","orientation","decorative","SeparatorPrimitive.Root","networkStyles","networkLabels","NetworkBadge","network","styles","RadioGroup","RadioGroupPrimitive.Root","RadioGroupItem","RadioGroupPrimitive.Item","RadioGroupPrimitive.Indicator","Select","SelectPrimitive.Root","SelectValue","SelectPrimitive.Value","SelectTrigger","SelectPrimitive.Trigger","SelectPrimitive.Icon","ChevronDown","SelectScrollUpButton","SelectPrimitive.ScrollUpButton","ChevronUp","SelectScrollDownButton","SelectPrimitive.ScrollDownButton","SelectContent","position","SelectPrimitive.Portal","SelectPrimitive.Content","SelectPrimitive.Viewport","SelectLabel","SelectPrimitive.Label","SelectItem","SelectPrimitive.Item","SelectPrimitive.ItemIndicator","SelectPrimitive.ItemText","SelectSeparator","SelectPrimitive.Separator","NETWORK_PREFIXES","normalizePhoneNumber","normalized","isValidPhoneLength","getNetworkPrefixes","validatePhoneNetwork","expectedNetwork","checkoutSchema","CheckoutPage","productType","useParams","isProcessing","setIsProcessing","agentSlug","isDataBundle","isResultChecker","bundle","bundleLoading","checkerInfo","checkerLoading","price","initializePaymentMutation","useMutation","payload","normalizedPhone","validation","prefixes","product","Wifi","CreditCard","provider","ShieldCheck","CheckoutSuccessPage","search","useSearch","paystackReference","paystackStatus","getReturnUrl","agentStorefront","getDashboardUrl","isAgentStorefrontPurchase","verificationComplete","setVerificationComplete","paymentFailed","setPaymentFailed","autoDownloadTriggered","setAutoDownloadTriggered","verifyError","setVerifyError","verifyResult","msg","attemptIndex","transaction","blob","link","copyToClipboard","statusConfig","effectiveStatus","config","StatusIcon","Copy","phoneNumbersArray","phoneNumbers","getPhone","getAllPhones","PhoneIcon","idx","isObject","WalletTopupSuccessView","attempts","query","verificationResult","isError","Wallet","WalletTopupSuccessContainer","setAttempts","WalletTopupSuccessPage","Textarea","Checkbox","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","agentRegisterSchema","val","AgentRegisterPage","showInfoDialog","setShowInfoDialog","registerMutation","handleInfoDialogChange","siteOrigin","Link2","AgentActivationCompletePage","setStatus","setErrorMessage","agentEmail","setAgentEmail","redirectCountdown","setRedirectCountdown","isMock","interval","verifyPayment","c","AgentUpgradePage","ScrollArea","ScrollAreaPrimitive.Root","ScrollAreaPrimitive.Viewport","ScrollBar","ScrollAreaPrimitive.Corner","ScrollAreaPrimitive.ScrollAreaScrollbar","ScrollAreaPrimitive.ScrollAreaThumb","ApiIntegrationsModal","onOpenChange","newKeyName","setNewKeyName","showCreateDialog","setShowCreateDialog","createdKey","setCreatedKey","copiedKey","setCopiedKey","apiKeys","createKeyMutation","newKey","deleteKeyMutation","keyId","handleCreateKey","handleDeleteKey","Code","Key","Plus","key","Trash2","sidebarNavItems","BarChart3","Settings","MessageCircle","AgentSidebarV2","onClose","_theme","showApiModal","setShowApiModal","rankData","profileData","unreadCount","isSupport","Trophy","StatCard","trend","trendLabel","PerformanceChart","performanceData","chartData","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","Bar","AgentDashboard","sidebarOpen","setSidebarOpen","statsLoading","statsError","displayProfit","setDisplayProfit","AgentSidebar","TrendingUp","ShoppingCart","DealerDashboard","transactions","transactionsLoading","VisuallyHidden","SuperDealerDashboard","Crown","MasterDashboard","Table","TableHeader","TableBody","TableFooter","TableRow","TableHead","TableCell","TableCaption","defaultStatusConfig","StatusBadge","AgentTransactions","statusFilter","setStatusFilter","typeFilter","setTypeFilter","searchTerm","setSearchTerm","filteredTransactions","tx","term","isBulkOrder","phoneNumbersRaw","isWalletTopup","Popover","PopoverTrigger","PopoverContent","withdrawalSchema","AgentWithdrawals","isRequestOpen","setIsRequestOpen","withdrawals","paymentMethods","requestMutation","balance","w","withdrawal","Building2","storefrontSchema","AgentStorefront","profileLoading","updateStoreMutation","copyStoreLink","Save","profileSchema","passwordSchema","AgentSettings","profile","profileForm","passwordForm","updateProfileMutation","updatePasswordMutation","onProfileSubmit","onPasswordSubmit","SupportChat","setMessage","chatId","setChatId","activeSupport","setActiveSupport","authError","setAuthError","scrollAreaRef","chats","chatsError","createChatMutation","chatData","chatError","openChat","unauthorized","sendMessageMutation","handleSendMessage","handleWhatsAppSupport","phoneNumber","messageText","handleLiveChatSupport","unreadAdminMessages","messages","Send","AgentSupportPage","extractDataAmount","bundleName","match","sortBundlesByDataAmount","bundles","b","NetworkInfo","AgentBundlesPage","selectedBundle","setSelectedBundle","setPhoneNumber","paymentMethod","setPaymentMethod","bulkPhoneNumbers","setBulkPhoneNumbers","bulkPaymentMethod","setBulkPaymentMethod","bundlesLoading","apiNetwork","agentData","walletData","walletBalance","bulkTotal","lines","line","total","parts","gbAmount","matchingBundle","gbMatch","agentPrice","purchaseMutation","isBulk","variables","isInsufficientBalance","isCooldown","bulkPurchaseMutation","totalAmount","basePrice","markup","handleSinglePurchase","handleBulkPurchase","parsedData","phoneStr","networkInfo","orderItems","effectivePrice","Upload","topupSchema","WalletTopup","topupMutation","quickAmounts","getStatusConfig","AgentWalletPage","ArrowDownRight","AgentPricingPage","priceChanges","setPriceChanges","pricing","updateMutation","prices","getBundleName","bundleId","getCurrentPrice","existing","p","changes","handlePriceChange","current","numValue","profit","handleSave","hasUnsavedChanges","hasChanges","DealerPricingPage","selectedPlan","setSelectedPlan","plan","SuperDealerPricingPage","MasterPricingPage","UserCircle","AlertTriangle","AdminSidebar","isChatSupport","History","UserSidebar","AlertDialog","AlertDialogPrimitive.Root","AlertDialogTrigger","AlertDialogPrimitive.Trigger","AlertDialogPortal","AlertDialogPrimitive.Portal","AlertDialogOverlay","AlertDialogPrimitive.Overlay","AlertDialogContent","AlertDialogPrimitive.Content","AlertDialogHeader","AlertDialogFooter","AlertDialogTitle","AlertDialogPrimitive.Title","AlertDialogDescription","AlertDialogPrimitive.Description","AlertDialogAction","AlertDialogPrimitive.Action","AlertDialogCancel","AlertDialogPrimitive.Cancel","ApiKeysPage","navigate","setApiKeys","loading","setLoading","creating","setCreating","showCreatedKey","setShowCreatedKey","activeTab","setActiveTab","fetchApiKeys","createApiKey","deleteApiKey","renderSidebar","apiKey","Webhook","ApiDocumentationPage","copiedCode","setCopiedCode","BookOpen","Server","AdminDashboard","recentTransactions","topCustomers","rankingsLoading","analyticsData","analyticsLoading","getRankIcon","Medal","customer","Switch","SwitchPrimitives.Root","SwitchPrimitives.Thumb","AdminDataBundles","isCreateOpen","setIsCreateOpen","editingBundle","setEditingBundle","roleBasePrices","createMutation","deleteMutation","getRoleBasePrice","BundleForm","Pencil","formData","setFormData","handleSubmit","processedData","AdminRoleBasePrices","editingPrice","setEditingPrice","getRoleLabel","PriceForm","priceNum","AdminResultCheckers","isBulkAddOpen","setIsBulkAddOpen","isEditOpen","setIsEditOpen","editingChecker","setEditingChecker","selectedType","setSelectedType","selectedYear","setSelectedYear","checkers","stockSummary","bulkAddMutation","headers","filteredCheckers","checker","currentYear","years","totalStock","acc","s","availableStock","soldStock","handleEdit","handleDelete","BulkAddForm","EditForm","updates","y","uploadedFile","setUploadedFile","handleFileChange","file","SortableTableHead","sortField","sortDirection","onSort","AdminTransactions","editingDeliveryStatus","setEditingDeliveryStatus","deliveryStatusValue","setDeliveryStatusValue","exportPaymentStatus","setExportPaymentStatus","setSortField","setSortDirection","expandedResultCheckers","setExpandedResultCheckers","resultCheckersData","setResultCheckersData","currentPage","setCurrentPage","ITEMS_PER_PAGE","refetch","updateDeliveryStatusMutation","transactionId","deliveryStatus","refreshOrderStatusMutation","toggleResultCheckerExpand","newExpanded","exportTransactionsMutation","csvContent","convertToCSV","downloadCSV","handleSort","sortedTransactions","aValue","bValue","totalPages","paginatedTransactions","csvRows","row","values","header","stringValue","filename","handleEditDeliveryStatus","currentStatus","handleSaveDeliveryStatus","handleCancelEdit","getSkytechStatus","Download","lower","isExpanded","checkerData","quantity","skytechStatus","Edit","start","end","AdminUsers","roleFilter","setRoleFilter","deleteUserId","setDeleteUserId","deleteInactiveDays","setDeleteInactiveDays","showDeleteInactiveDialog","setShowDeleteInactiveDialog","editedRoles","setEditedRoles","exportMode","setExportMode","users","deleteInactiveMutation","days","updateRoleMutation","filteredUsers","roleMatch","searchMatch","formatExportPhone","digits","formatExportPhoneCell","handleExportUsers","newRole","newEdited","ShoppingBag","whatsappSchema","AdminAgents","deleteAgentId","setDeleteAgentId","editAgentId","setEditAgentId","whatsappForm","agents","updateWhatsappMutation","filteredAgents","AdminWithdrawals","filteredWithdrawals","actionMutation","handleApprove","handleReject","handleMarkPaid","Banknote","AdminChatSupport","selectedChatId","setSelectedChatId","filter","setFilter","scrollRef","assignChatMutation","closeChatMutation","unreadUserMessages","handleKeyPress","v","chat","AdminSettings","settings","setSettings","setUsers","selectedUser","setSelectedUser","credentialForm","setCredentialForm","announcementForm","setAnnouncementForm","setAnnouncements","settingsData","usersData","announcementsData","updateSettingMutation","previousSettings","old","setting","previousMap","updateCredentialsMutation","userId","createAnnouncementMutation","updateAnnouncementMutation","deleteAnnouncementMutation","settingsMap","handleSettingChange","handleSaveSetting","handleUserSelect","handleUpdateCredentials","handleCreateAnnouncement","handleToggleAnnouncement","handleDeleteAnnouncement","u","AdminRankings","AdminBreakSettings","isEnabled","setIsEnabled","AdminExternalApiProviders","providers","setProviders","dialogOpen","setDialogOpen","editingProvider","setEditingProvider","isSaving","setIsSaving","testingProvider","setTestingProvider","setForm","showSecrets","setShowSecrets","loadProviders","resetForm","openEditDialog","handleSetDefault","testProvider","toggleSecretVisibility","providerId","Star","TestTube","StarOff","AdminAnnouncements","newAnnouncement","setNewAnnouncement","deleteAnnouncementId","setDeleteAnnouncementId","toggleMutation","handleCreate","activeAnnouncements","inactiveAnnouncements","updatedAudiences","aud","AdminGuides","newGuide","setNewGuide","deleteGuideId","setDeleteGuideId","AdminManualTopup","topupAmount","setTopupAmount","topupReason","setTopupReason","showTopupDialog","setShowTopupDialog","showConfirmDialog","setShowConfirmDialog","deductAmount","setDeductAmount","deductReason","setDeductReason","showDeductDialog","setShowDeductDialog","showDeductConfirmDialog","setShowDeductConfirmDialog","usersAndAgents","deductMutation","handleTopup","confirmTopup","handleDeduction","confirmDeduction","getRoleIcon","getRoleBadgeColor","Minus","PublicRankings","singleOrderSchema","bulkOrderSchema","phoneValid","gbValid","AgentNetworkPurchasePage","selectedBundleId","setSelectedBundleId","orderType","setOrderType","isSubmittingRef","handlePopState","info","storeData","agentLoading","dataBundles","filteredBundles","sortedBundles","singleForm","bulkForm","bulkData","bulkTotalAmount","NetworkProductsPage","normalizedNetwork","transformedNetwork","PublicPurchaseFlow","setPhone","bulkPhones","setBulkPhones","scrollToTopQuick","opts","_d","userStats","priceA","priceB","l","invalidCount","gb","m","checkoutMutation","handleSingle","handleBulk","it","UnifiedResultCheckerFlow","selectedChecker","setSelectedChecker","setQuantity","paymentSuccess","setPaymentSuccess","successData","setSuccessData","stockLoading","selectedCheckerData","unitPrice","totalPrice","hasInsufficientBalance","handleCheckerChange","handleQuantityChange","newQuantity","maxQuantity","generatePDF","doc","jsPDF","yPosition","pageHeight","margin","lineHeight","pinsArray","authUrl","shortfall","ResultCheckersPage","products","DataBundlesPage","UserDashboard","WalletDashboard","selectedTab","setSelectedTab","allTransactions","walletTopups","walletPayments","ArrowUpRight","Calendar","isTopup","isWalletPayment","UserBundlesPage","networkKey","currentBundleData","bundleGB","UserHistoryPage","matchesSearch","matchesStatus","Filter","phoneObj","UserSupportPage","UserVouchersPage","stockData","resultCheckers","UserSettingsPage","refreshUser","setProfileData","setProfileLoading","passwordData","setPasswordData","passwordLoading","setPasswordLoading","handleProfileUpdate","handlePasswordUpdate","NotFound","StorefrontPage","currentBanner","setCurrentBanner","navigateToProduct","store","StorefrontGuard","hasChecked","isAllowedPath","AppRouter","Router","SessionTimeoutManager","ApiIntegrationsPage","App","QueryClientProvider","registration","rootElement","createRoot"],"mappings":"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"}